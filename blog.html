<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AlphaMouv - Artiste Créateur</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;600;700;800;900&family=Oswald:wght@700&family=Quicksand:wght@400;500;600;700&display=swap" rel="stylesheet">

    <!-- Google Identity Services -->
    <script src="https://accounts.google.com/gsi/client" async defer></script>

    <!-- jsPDF pour export PDF -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

    <!-- API Client AlphaMouv -->
    <script src="api.js"></script>

    <style>
        /* Overlay de transition */
        .page-loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background-image: url('images/Capture%20d%27écran%202026-01-22%20010830.png');
            background-size: cover;
            background-position: center top;
            background-color: #0d1a2d;
            z-index: 99999;
            pointer-events: none;
        }

         :root {
            --primary-color: #ddac0b;
            --secondary-color: #b8900a;
            --accent-color: #c4d10c;
            --background-dark: #000000;
            --background-light: #1a1a1a;
            --text-primary: #ffffff;
            --text-secondary: rgba(255, 255, 255, 0.8);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Quicksand', sans-serif;
            background: radial-gradient(ellipse 150% 150% at 20% 30%, rgba(30, 58, 138, 0.03) 0%, rgba(30, 58, 138, 0.015) 20%, rgba(30, 58, 138, 0.005) 45%, transparent 80%), radial-gradient(ellipse 140% 140% at 50% 50%, rgba(37, 99, 235, 0.025) 0%, rgba(37, 99, 235, 0.012) 18%, rgba(37, 99, 235, 0.004) 40%, transparent 75%), radial-gradient(ellipse 160% 160% at 85% 70%, rgba(255, 255, 255, 0.01) 0%, rgba(255, 255, 255, 0.005) 25%, rgba(255, 255, 255, 0.002) 50%, transparent 85%), radial-gradient(ellipse 130% 130% at 10% 80%, rgba(255, 255, 255, 0.008) 0%, rgba(255, 255, 255, 0.004) 22%, rgba(255, 255, 255, 0.001) 48%, transparent 80%), radial-gradient(ellipse 145% 145% at 90% 20%, rgba(29, 78, 216, 0.028) 0%, rgba(29, 78, 216, 0.014) 20%, rgba(29, 78, 216, 0.006) 42%, transparent 78%), linear-gradient(135deg, #000000 0%, #020510 18%, #050a1a 30%, #030712 45%, #000000 55%, #04080f 70%, #080f1f 82%, #000000 100%);
            background-size: 100% 100%;
            background-attachment: fixed;
            min-height: 100vh;
            color: white;
            position: relative;
            overflow-x: hidden;
        }
        /* Assombrissement des côtés gauche et droit */
        
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, rgba(0, 0, 0, 0.7) 0%, rgba(0, 0, 0, 0.4) 10%, transparent 25%, transparent 75%, rgba(0, 0, 0, 0.4) 90%, rgba(0, 0, 0, 0.7) 100%);
            pointer-events: none;
            z-index: 5;
        }
        /* Particules animées en arrière-plan */
        
        .particles {
            position: fixed;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            z-index: 0;
            pointer-events: none;
        }
        
        .particle {
            position: absolute;
            background: rgba(65, 105, 225, 0.4);
            border-radius: 50%;
            animation: float 20s infinite;
            box-shadow: 0 0 10px rgba(65, 105, 225, 0.6);
        }
        
        @keyframes float {
            0%,
            100% {
                transform: translateY(0) translateX(0);
                opacity: 0;
            }
            10% {
                opacity: 1;
            }
            90% {
                opacity: 1;
            }
            100% {
                transform: translateY(-100vh) translateX(50px);
                opacity: 0;
            }
        }
        /* Effet de vagues lumineuses en arrière-plan */
        
        .light-wave {
            position: fixed;
            width: 400%;
            height: 400%;
            top: -150%;
            left: -150%;
            background: radial-gradient(ellipse at 30% 40%, rgba(65, 105, 225, 0.12) 0%, transparent 35%), radial-gradient(ellipse at 70% 60%, rgba(221, 172, 11, 0.08) 0%, transparent 35%), radial-gradient(ellipse at 50% 50%, rgba(196, 209, 12, 0.06) 0%, transparent 40%), radial-gradient(ellipse at 20% 80%, rgba(37, 99, 235, 0.1) 0%, transparent 35%), radial-gradient(ellipse at 85% 25%, rgba(221, 172, 11, 0.07) 0%, transparent 35%);
            animation: waveMove 30s ease-in-out infinite;
            z-index: 0;
            pointer-events: none;
            filter: blur(40px);
        }
        
        @keyframes waveMove {
            0%,
            100% {
                transform: translate(0, 0) rotate(0deg) scale(1);
            }
            25% {
                transform: translate(-3%, 3%) rotate(90deg) scale(1.05);
            }
            50% {
                transform: translate(3%, -2%) rotate(180deg) scale(1);
            }
            75% {
                transform: translate(-2%, -3%) rotate(270deg) scale(1.05);
            }
        }
        /* Étoiles scintillantes en arrière-plan */
        
        .stars {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0;
            pointer-events: none;
        }
        
        .star {
            position: absolute;
            background: white;
            border-radius: 50%;
            animation: twinkle 3s ease-in-out infinite;
        }
        
        .star:nth-child(odd) {
            animation-delay: -1.5s;
        }
        
        @keyframes twinkle {
            0%,
            100% {
                opacity: 0.3;
                transform: scale(1);
            }
            50% {
                opacity: 1;
                transform: scale(1.2);
            }
        }
        /* Bandes lumineuses verticales sur les côtés */
        
        .side-glow {
            position: fixed;
            top: 0;
            width: 150px;
            height: 100%;
            pointer-events: none;
            z-index: 0;
        }
        
        .side-glow.left {
            left: 0;
            background: linear-gradient(to right, rgba(221, 172, 11, 0.08) 0%, rgba(65, 105, 225, 0.05) 30%, transparent 100%);
        }
        
        .side-glow.right {
            right: 0;
            background: linear-gradient(to left, rgba(221, 172, 11, 0.08) 0%, rgba(65, 105, 225, 0.05) 30%, transparent 100%);
        }

        /* Cacher les side-glow quand dans un iframe */
        .in-iframe .side-glow {
            display: none !important;
        }
        /* Éléments flottants sur les côtés */
        
        .floating-elements {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
            overflow: hidden;
        }
        
        .floating-item {
            position: absolute;
            opacity: 0.4;
            animation: floatSide 20s ease-in-out infinite;
        }
        
        .floating-item svg {
            width: 100%;
            height: 100%;
        }
        
        @keyframes floatSide {
            0%,
            100% {
                transform: translateY(0) rotate(0deg) scale(1);
                opacity: 0.3;
            }
            25% {
                transform: translateY(-20px) rotate(5deg) scale(1.05);
                opacity: 0.5;
            }
            50% {
                transform: translateY(-10px) rotate(-3deg) scale(1);
                opacity: 0.4;
            }
            75% {
                transform: translateY(-25px) rotate(3deg) scale(1.02);
                opacity: 0.5;
            }
        }
        /* Éclaboussures de peinture */
        
        .paint-splash {
            position: absolute;
            border-radius: 50% 40% 60% 30%;
            filter: blur(1px);
            animation: splashFloat 15s ease-in-out infinite;
        }
        
        @keyframes splashFloat {
            0%,
            100% {
                transform: scale(1) rotate(0deg);
                opacity: 0.3;
            }
            50% {
                transform: scale(1.1) rotate(10deg);
                opacity: 0.5;
            }
        }
        /* Carrousel moderne avec défilement horizontal */
        /* Carrousel 3D avec effet circulaire */
        
        .carousel-container {
            position: relative;
            max-width: 100%;
            margin: 60px auto 150px;
            padding: 0;
            perspective: 1200px;
        }

        .carousel-wrapper {
            position: relative;
            padding: 60px 0 100px;
        }

        .carousel-inner {
            position: relative;
            width: 100%;
            height: 500px;
            min-height: 450px;
            margin: 0 auto;
            overflow: visible;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .carousel-track {
            display: flex;
            position: relative;
            width: 100%;
            height: 100%;
            transition: transform 0.6s cubic-bezier(0.4, 0, 0.2, 1);
            transform-style: preserve-3d;
        }

        .carousel-slide {
            position: absolute;
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%);
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.6s cubic-bezier(0.4, 0, 0.2, 1);
            opacity: 0;
            pointer-events: none;
            max-width: 320px;
            max-height: 420px;
        }

        /* Lueur dorée autour des slides */
        .carousel-slide::before {
            content: '';
            position: absolute;
            inset: -3px;
            border: none;
            border-radius: 6px;
            box-shadow: 0 0 15px rgba(221, 172, 11, 0.3), 0 0 30px rgba(221, 172, 11, 0.15);
            transition: all 0.6s cubic-bezier(0.4, 0, 0.2, 1);
        }

        /* Slide actif (au centre) */
        .carousel-slide.active {
            opacity: 1;
            z-index: 5;
            transform: translate(-50%, -50%) scale(1);
            pointer-events: all;
        }

        .carousel-slide.active::before {
            box-shadow: 0 0 20px rgba(221, 172, 11, 0.45), 0 0 40px rgba(221, 172, 11, 0.25);
        }

        /* Slide précédent (à gauche du centre) */
        .carousel-slide.prev {
            opacity: 0.85;
            z-index: 4;
            transform: translate(-120%, -50%) scale(0.75);
            pointer-events: all;
        }

        /* Slide suivant (à droite du centre) */
        .carousel-slide.next {
            opacity: 0.85;
            z-index: 4;
            transform: translate(20%, -50%) scale(0.75);
            pointer-events: all;
        }

        /* Slide derrière (au centre, pour effet roue - 4ème image) */
        .carousel-slide.behind {
            opacity: 0.3;
            z-index: 1;
            transform: translate(-50%, -50%) scale(0.4);
            pointer-events: none;
        }

        /* Classes cachées (non utilisées mais gardées pour compatibilité) */
        .carousel-slide.far-prev,
        .carousel-slide.far-next,
        .carousel-slide.behind-left,
        .carousel-slide.behind-right {
            opacity: 0;
            z-index: 0;
            transform: translate(-50%, -50%) scale(0.3);
            pointer-events: none;
        }

        /* Image dans le slide */
        .carousel-slide img {
            max-width: 100%;
            max-height: 420px;
            width: auto;
            height: auto;
            object-fit: contain;
            display: block;
            border-radius: 4px;
            transition: all 0.6s ease;
            background: rgba(0, 0, 0, 0.1);
        }

        .carousel-slide.active img {
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.4);
        }

        .carousel-placeholder {
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, rgba(65, 105, 225, 0.4) 0%, rgba(221, 172, 11, 0.3) 50%, rgba(196, 209, 12, 0.4) 100%);
            position: relative;
            overflow: hidden;
            border-radius: 4px;
        }

        .carousel-placeholder::before {
            content: '';
            position: absolute;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255, 255, 255, 0.1) 0%, transparent 70%);
            animation: shimmer 3s ease-in-out infinite;
        }

        @keyframes shimmer {
            0%,
            100% {
                transform: translate(-50%, -50%);
            }
            50% {
                transform: translate(0%, 0%);
            }
        }

        .carousel-placeholder-icon {
            font-size: 80px;
            margin-bottom: 15px;
            filter: drop-shadow(0 10px 20px rgba(0, 0, 0, 0.4));
            z-index: 1;
            animation: float 3s ease-in-out infinite;
        }

        @keyframes float {
            0%,
            100% {
                transform: translateY(0px);
            }
            50% {
                transform: translateY(-10px);
            }
        }

        .carousel-placeholder-text {
            color: #fff;
            font-size: 20px;
            font-weight: 700;
            text-shadow: 0 4px 15px rgba(0, 0, 0, 0.6);
            z-index: 1;
            font-family: 'Montserrat', sans-serif;
            letter-spacing: 2px;
        }
        /* Contrôles - flèches sur les côtés */

        .carousel-controls {
            position: absolute;
            top: 50%;
            left: 0;
            right: 0;
            transform: translateY(-50%);
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 20px;
            pointer-events: none;
            z-index: 10;
        }

        .carousel-btn {
            pointer-events: all;
            background: rgba(0, 0, 0, 0.4);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 2px solid rgba(221, 172, 11, 0.5);
            width: 50px;
            height: 50px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            position: relative;
        }

        .carousel-btn::before {
            display: none;
        }

        .carousel-btn:hover {
            background: rgba(221, 172, 11, 0.3);
            border-color: rgba(221, 172, 11, 0.8);
            transform: scale(1.1);
        }

        .carousel-btn:active {
            transform: scale(0.95);
        }

        .carousel-btn svg {
            width: 24px;
            height: 24px;
            fill: rgba(221, 172, 11, 0.9);
            transition: transform 0.3s ease;
        }

        .carousel-btn:hover svg {
            fill: #ddac0b;
            transform: scale(1.1);
        }

        /* Indicateurs - style points simples en bas */

        .carousel-indicators {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 10px;
            position: absolute;
            bottom: -50px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.5);
            padding: 10px 20px;
            border-radius: 25px;
        }

        .carousel-indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.3);
            border: none;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }

        .carousel-indicator::before {
            display: none;
        }

        .carousel-indicator.active {
            background: rgba(221, 172, 11, 0.9);
            width: 12px;
            border-radius: 50%;
            box-shadow: 0 0 10px rgba(221, 172, 11, 0.5);
        }

        .carousel-indicator:hover:not(.active) {
            background: rgba(255, 255, 255, 0.6);
            transform: scale(1.2);
        }
        /* Compteur de slides */
        
        .carousel-counter {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(10px);
            padding: 10px 20px;
            border-radius: 25px;
            color: white;
            font-weight: 600;
            font-size: 14px;
            z-index: 2;
            border: 1px solid rgba(221, 172, 11, 0.3);
        }
        
        .carousel-counter span {
            color: #ddac0b;
            font-weight: 700;
        }
        /* Responsive */

        @media (max-width: 1200px) {
            .carousel-slide {
                max-width: 280px;
                max-height: 360px;
            }
            .carousel-slide img {
                max-height: 360px;
            }
            .carousel-slide.prev {
                transform: translate(-110%, -50%) scale(0.7);
            }
            .carousel-slide.next {
                transform: translate(10%, -50%) scale(0.7);
            }
            .carousel-slide.behind {
                transform: translate(-50%, -50%) scale(0.35);
            }
        }

        @media (max-width: 968px) {
            .carousel-inner {
                height: 400px;
                min-height: 350px;
            }
            .carousel-slide {
                max-width: 240px;
                max-height: 320px;
            }
            .carousel-slide img {
                max-height: 320px;
            }
            .carousel-slide.prev {
                transform: translate(-105%, -50%) scale(0.7);
            }
            .carousel-slide.next {
                transform: translate(5%, -50%) scale(0.7);
            }
            .carousel-slide.behind {
                transform: translate(-50%, -50%) scale(0.3);
                opacity: 0.25;
            }
        }

        @media (max-width: 768px) {
            .carousel-container {
                margin: 40px auto 100px;
            }
            .carousel-inner {
                height: 350px;
                min-height: 300px;
            }
            .carousel-slide {
                max-width: 200px;
                max-height: 280px;
            }
            .carousel-slide img {
                max-height: 280px;
            }
            .carousel-slide.active {
                transform: translate(-50%, -50%) scale(1);
            }
            .carousel-slide.prev {
                transform: translate(-100%, -50%) scale(0.65);
            }
            .carousel-slide.next {
                transform: translate(0%, -50%) scale(0.65);
            }
            .carousel-slide.behind {
                transform: translate(-50%, -50%) scale(0.25);
                opacity: 0.2;
            }
            .carousel-controls {
                padding: 0 10px;
            }
            .carousel-btn {
                width: 40px;
                height: 40px;
            }
            .carousel-btn svg {
                width: 20px;
                height: 20px;
            }
            .carousel-placeholder-text {
                font-size: 16px;
            }
            .carousel-counter {
                top: 10px;
                right: 10px;
                padding: 6px 12px;
                font-size: 11px;
            }
        }

        @media (max-width: 480px) {
            .carousel-inner {
                height: 300px;
                min-height: 250px;
            }
            .carousel-slide {
                max-width: 160px;
                max-height: 220px;
            }
            .carousel-slide img {
                max-height: 220px;
            }
            .carousel-slide::before {
                inset: -2px;
                box-shadow: 0 0 10px rgba(221, 172, 11, 0.25), 0 0 20px rgba(221, 172, 11, 0.1);
            }
            .carousel-slide.prev {
                transform: translate(-95%, -50%) scale(0.6);
            }
            .carousel-slide.next {
                transform: translate(-5%, -50%) scale(0.6);
            }
            .carousel-slide.behind {
                opacity: 0;
            }
            .carousel-indicators {
                padding: 6px 12px;
                gap: 6px;
            }
            .carousel-indicator {
                width: 8px;
                height: 8px;
            }
            .carousel-indicator.active {
                width: 8px;
            }
        }
        
        @media (max-width: 1200px) {
            .side-glow {
                width: 80px;
            }
        }
        /* Container principal */
        
        .container {
            position: relative;
            z-index: 10;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            display: flex;
            flex-direction: column;
        }
        
        .contact-section {
            order: 100;
        }
        
        footer {
            order: 101;
        }
        /* En-tête */
        
        header {
            text-align: center;
            padding: 60px 20px 30px;
            animation: fadeInDown 1s ease;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 40px;
            flex-wrap: wrap;
            position: relative;
        }
        /* Container pour recherche et connexion */
        
        .top-actions {
            position: fixed;
            top: 20px;
            right: 40px;
            display: flex;
            align-items: center;
            gap: 15px;
            z-index: 1000;
        }
        /* Recherche */
        
        .search-container {
            display: flex;
            align-items: center;
            position: relative;
        }
        
        .search-btn {
            width: 45px;
            height: 45px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.15);
            border: 2px solid rgba(255, 255, 255, 0.3);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        }
        
        .search-btn svg {
            width: 20px;
            height: 20px;
            color: white;
        }
        
        .search-btn:hover {
            background: rgba(221, 172, 11, 0.3);
            border-color: rgba(221, 172, 11, 0.5);
            transform: scale(1.1);
        }
        
        .search-box {
            position: absolute;
            right: 50px;
            top: 50%;
            transform: translateY(-50%);
            display: flex;
            align-items: center;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 50px;
            overflow: hidden;
            width: 0;
            opacity: 0;
            transition: all 0.3s ease;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.2);
        }
        
        .search-box.active {
            width: 280px;
            opacity: 1;
        }
        
        .search-box input {
            flex: 1;
            padding: 12px 20px;
            border: none;
            outline: none;
            font-size: 0.95em;
            font-family: 'Quicksand', sans-serif;
            background: transparent;
            color: #001f3f;
        }
        
        .search-box input::placeholder {
            color: #666;
        }
        
        .search-submit {
            width: 40px;
            height: 40px;
            border: none;
            background: linear-gradient(135deg, #ddac0b, #c4d10c);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            margin: 3px;
            border-radius: 50%;
        }
        
        .search-submit svg {
            width: 18px;
            height: 18px;
            color: #001f3f;
        }
        
        .search-submit:hover {
            transform: scale(1.1);
        }
        /* Bouton de connexion */
        
        .login-btn {
            width: 45px;
            height: 45px;
            padding: 0;
            background: linear-gradient(135deg, rgba(221, 172, 11, 0.9), rgba(196, 209, 12, 0.9));
            color: #001f3f;
            text-decoration: none;
            border-radius: 50%;
            transition: all 0.3s ease;
            box-shadow: 0 5px 20px rgba(221, 172, 11, 0.3);
            border: 2px solid rgba(255, 255, 255, 0.3);
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .login-btn svg {
            width: 22px;
            height: 22px;
            fill: #001f3f;
        }
        
        .login-btn:hover {
            transform: translateY(-3px) scale(1.05);
            box-shadow: 0 8px 30px rgba(221, 172, 11, 0.5);
            background: linear-gradient(135deg, rgba(221, 172, 11, 1), rgba(196, 209, 12, 1));
        }
        
        .login-btn:active {
            transform: translateY(-1px) scale(1.02);
        }
        /* Panier (caché par défaut, visible après connexion) */
        
        .cart-btn {
            width: 45px;
            height: 45px;
            padding: 0;
            background: linear-gradient(135deg, rgba(221, 172, 11, 0.9), rgba(196, 209, 12, 0.9));
            color: #001f3f;
            text-decoration: none;
            border-radius: 50%;
            transition: all 0.3s ease;
            box-shadow: 0 5px 20px rgba(221, 172, 11, 0.3);
            border: 2px solid rgba(255, 255, 255, 0.3);
            display: none;
            align-items: center;
            justify-content: center;
            position: relative;
            cursor: pointer;
        }
        
        .cart-btn.visible {
            display: flex;
        }
        
        .cart-btn svg {
            width: 22px;
            height: 22px;
            fill: #001f3f;
        }
        
        .cart-btn:hover {
            transform: translateY(-3px) scale(1.05);
            box-shadow: 0 8px 30px rgba(221, 172, 11, 0.5);
            background: linear-gradient(135deg, rgba(221, 172, 11, 1), rgba(196, 209, 12, 1));
        }
        
        .cart-count {
            position: absolute;
            top: -5px;
            right: -5px;
            background: #FF4444;
            color: white;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 11px;
            font-weight: 700;
            border: 2px solid #001f3f;
        }
        /* Pop-up de connexion */
        
        .auth-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(5px);
            z-index: 9998;
            display: none;
            align-items: center;
            justify-content: center;
            animation: fadeIn 0.3s ease;
        }
        
        .auth-overlay.active {
            display: flex;
        }
        
        @keyframes fadeIn {
            from {
                opacity: 0;
            }
            to {
                opacity: 1;
            }
        }
        
        .auth-popup {
            background: linear-gradient(135deg, rgba(0, 31, 63, 0.95), rgba(0, 81, 168, 0.95));
            border-radius: 25px;
            padding: 40px;
            max-width: 900px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
            border: 2px solid rgba(221, 172, 11, 0.3);
            position: relative;
            animation: slideDown 0.4s ease;
        }
        
        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-50px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .auth-close {
            position: absolute;
            top: 15px;
            right: 15px;
            background: none;
            border: none;
            color: white;
            font-size: 28px;
            cursor: pointer;
            width: 35px;
            height: 35px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: all 0.3s ease;
        }
        
        .auth-close:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: rotate(90deg);
        }
        
        .auth-header {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .auth-header h2 {
            color: #ddac0b;
            font-size: 2em;
            font-family: 'Oswald', sans-serif;
            margin-bottom: 10px;
            text-shadow: 0 0 20px rgba(221, 172, 11, 0.5);
        }
        
        .auth-header p {
            color: rgba(255, 255, 255, 0.8);
            font-size: 0.95em;
        }
        
        .auth-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 25px;
            background: rgba(0, 0, 0, 0.2);
            padding: 5px;
            border-radius: 50px;
        }
        
        .auth-tab {
            flex: 1;
            padding: 12px;
            background: transparent;
            border: none;
            color: rgba(255, 255, 255, 0.6);
            border-radius: 50px;
            cursor: pointer;
            font-weight: 600;
            font-family: 'Montserrat', sans-serif;
            transition: all 0.3s ease;
        }
        
        .auth-tab.active {
            background: linear-gradient(135deg, #ddac0b, #c4d10c);
            color: #001f3f;
        }
        
        .auth-form {
            display: none;
        }
        
        .auth-form.active {
            display: block;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-group label {
            display: block;
            color: rgba(255, 255, 255, 0.9);
            font-weight: 600;
            margin-bottom: 8px;
            font-size: 0.95em;
        }
        
        .form-group input {
            width: 100%;
            padding: 14px 18px;
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 12px;
            color: white;
            font-size: 1em;
            font-family: 'Quicksand', sans-serif;
            transition: all 0.3s ease;
        }
        
        .form-group input:focus {
            outline: none;
            border-color: #ddac0b;
            background: rgba(255, 255, 255, 0.15);
        }
        
        .form-group input::placeholder {
            color: rgba(255, 255, 255, 0.4);
        }
        
        .auth-submit {
            width: 100%;
            padding: 16px;
            background: linear-gradient(135deg, #ddac0b, #c4d10c);
            border: none;
            border-radius: 12px;
            color: #001f3f;
            font-weight: 700;
            font-size: 1.1em;
            cursor: pointer;
            font-family: 'Montserrat', sans-serif;
            text-transform: uppercase;
            letter-spacing: 1px;
            transition: all 0.3s ease;
            margin-top: 10px;
        }
        
        .auth-submit:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(221, 172, 11, 0.4);
        }
        
        .auth-submit:active {
            transform: translateY(0);
        }
        /* Séparateur "OU" */
        
        .auth-divider {
            display: flex;
            align-items: center;
            text-align: center;
            margin: 25px 0;
            color: rgba(255, 255, 255, 0.6);
            font-size: 0.9em;
        }
        
        .auth-divider::before,
        .auth-divider::after {
            content: '';
            flex: 1;
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .auth-divider span {
            padding: 0 15px;
        }
        /* Boutons de connexion sociale */
        
        .social-auth-buttons {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin-bottom: 20px;
        }
        
        .social-auth-btn {
            width: 100%;
            padding: 14px;
            background: white;
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 12px;
            font-weight: 600;
            font-size: 1em;
            cursor: pointer;
            font-family: 'Montserrat', sans-serif;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
        }
        
        .social-auth-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
        }
        
        .social-auth-btn:active {
            transform: translateY(0);
        }
        
        .google-btn {
            background: white;
            color: #333;
        }
        
        .google-btn:hover {
            background: #f8f8f8;
        }
        
        .social-auth-btn img {
            width: 20px;
            height: 20px;
        }
        /* Menu profil utilisateur */
        
        .user-menu {
            position: relative;
        }
        
        .user-avatar {
            width: 45px;
            height: 45px;
            padding: 0;
            background: linear-gradient(135deg, rgba(221, 172, 11, 0.9), rgba(196, 209, 12, 0.9));
            color: #001f3f;
            border-radius: 50%;
            border: 2px solid rgba(255, 255, 255, 0.3);
            display: none;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-weight: 700;
            font-size: 1.1em;
            transition: all 0.3s ease;
            box-shadow: 0 5px 20px rgba(221, 172, 11, 0.3);
        }
        
        .user-avatar.visible {
            display: flex;
        }
        
        .user-avatar:hover {
            transform: translateY(-3px) scale(1.05);
            box-shadow: 0 8px 30px rgba(221, 172, 11, 0.5);
        }
        
        .user-dropdown {
            position: absolute;
            top: 60px;
            right: 0;
            background: linear-gradient(135deg, rgba(0, 31, 63, 0.98), rgba(0, 81, 168, 0.98));
            border-radius: 15px;
            padding: 15px;
            min-width: 250px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);
            border: 2px solid rgba(221, 172, 11, 0.3);
            backdrop-filter: blur(10px);
            display: none;
            flex-direction: column;
            gap: 10px;
            z-index: 1000;
        }
        
        .user-dropdown.active {
            display: flex;
            animation: slideDown 0.3s ease;
        }
        
        .user-info {
            padding: 15px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            margin-bottom: 10px;
        }
        
        .user-name {
            color: #ddac0b;
            font-weight: 700;
            font-size: 1.1em;
            margin-bottom: 5px;
        }
        
        .user-email {
            color: rgba(255, 255, 255, 0.6);
            font-size: 0.9em;
        }
        
        .dropdown-item {
            padding: 12px 15px;
            color: white;
            text-decoration: none;
            border-radius: 10px;
            display: flex;
            align-items: center;
            gap: 12px;
            transition: all 0.3s ease;
            cursor: pointer;
            background: rgba(255, 255, 255, 0.05);
        }
        
        .dropdown-item:hover {
            background: rgba(221, 172, 11, 0.2);
            transform: translateX(5px);
        }
        
        .dropdown-item svg {
            width: 20px;
            height: 20px;
            fill: #ddac0b;
        }
        
        .dropdown-divider {
            height: 1px;
            background: rgba(255, 255, 255, 0.1);
            margin: 5px 0;
        }
        
        .title-decoration {
            font-size: 3.5em;
            animation: float-decoration 3s ease-in-out infinite;
            filter: drop-shadow(0 0 15px rgba(221, 172, 11, 0.8));
            z-index: 10;
            position: relative;
        }
        
        .title-decoration:first-child {
            animation: float-left 3s ease-in-out infinite;
        }
        
        .title-decoration:last-child {
            animation: float-right 3s ease-in-out infinite;
        }
        
        @keyframes float-left {
            0%,
            100% {
                transform: translateY(0px) translateX(0px) rotate(0deg) scale(1);
                opacity: 1;
            }
            25% {
                transform: translateY(-15px) translateX(-10px) rotate(-15deg) scale(1.1);
                opacity: 0.8;
            }
            50% {
                transform: translateY(-25px) translateX(0px) rotate(0deg) scale(1.2);
                opacity: 1;
            }
            75% {
                transform: translateY(-15px) translateX(10px) rotate(15deg) scale(1.1);
                opacity: 0.8;
            }
        }
        
        @keyframes float-right {
            0%,
            100% {
                transform: translateY(0px) translateX(0px) rotate(0deg) scale(1);
                opacity: 1;
            }
            25% {
                transform: translateY(-15px) translateX(10px) rotate(15deg) scale(1.1);
                opacity: 0.8;
            }
            50% {
                transform: translateY(-25px) translateX(0px) rotate(0deg) scale(1.2);
                opacity: 1;
            }
            75% {
                transform: translateY(-15px) translateX(-10px) rotate(-15deg) scale(1.1);
                opacity: 0.8;
            }
        }
        
        @keyframes float-decoration {
            0%,
            100% {
                transform: translateY(0px) rotate(0deg);
            }
            50% {
                transform: translateY(-20px) rotate(15deg);
            }
        }
        
        @keyframes fadeInDown {
            from {
                opacity: 0;
                transform: translateY(-50px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        h1 {
            font-size: 6em;
            background: linear-gradient(135deg, #ddac0b 0%, #ffd700 50%, #ddac0b 100%);
            background-size: 200% auto;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-shadow: none;
            margin-bottom: 20px;
            cursor: pointer;
            transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            letter-spacing: 4px;
            position: relative;
            z-index: 10;
            font-family: 'Oswald', sans-serif;
            font-weight: 700;
            text-transform: uppercase;
            filter: drop-shadow(0 0 20px rgba(221, 172, 11, 0.5)) drop-shadow(0 0 40px rgba(221, 172, 11, 0.3)) drop-shadow(0 5px 15px rgba(0, 0, 0, 0.5));
        }
        
        h1:hover {
            transform: scale(1.05);
            background-position: right center;
            filter: drop-shadow(0 0 30px rgba(221, 172, 11, 0.8)) drop-shadow(0 0 50px rgba(221, 172, 11, 0.5)) drop-shadow(0 5px 20px rgba(0, 0, 0, 0.7));
        }
        /* Menu de navigation */
        
        nav {
            background: linear-gradient(135deg, rgba(30, 58, 138, 0.25), rgba(37, 99, 235, 0.15));
            backdrop-filter: blur(25px) saturate(180%);
            -webkit-backdrop-filter: blur(25px) saturate(180%);
            border-radius: 50px;
            padding: 10px 30px;
            margin: 30px auto;
            max-width: 1050px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.4), 0 0 0 1px rgba(221, 172, 11, 0.2) inset, 0 0 30px rgba(221, 172, 11, 0.2), 0 5px 15px rgba(37, 99, 235, 0.3);
            border: 2px solid rgba(221, 172, 11, 0.3);
            animation: slideUp 0.8s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.6s cubic-bezier(0.16, 1, 0.3, 1);
        }
        
        nav:hover {
            box-shadow: 0 12px 45px rgba(0, 0, 0, 0.45), 0 0 0 1px rgba(221, 172, 11, 0.25) inset, 0 0 35px rgba(221, 172, 11, 0.25), 0 6px 18px rgba(37, 99, 235, 0.35);
            border-color: rgba(221, 172, 11, 0.4);
        }
        
        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        nav ul {
            list-style: none;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 18px;
            flex-wrap: nowrap;
            margin: 0;
            padding: 0;
        }
        
        nav a {
            color: white;
            text-decoration: none;
            padding: 14px 24px;
            border-radius: 30px;
            font-weight: 600;
            transition: all 0.6s cubic-bezier(0.16, 1, 0.3, 1);
            display: inline-block;
            position: relative;
            overflow: hidden;
            white-space: nowrap;
            font-family: 'Montserrat', sans-serif;
            letter-spacing: 1.2px;
            font-size: 0.95em;
            line-height: 1;
        }
        
        nav a::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(221, 172, 11, 0.3), transparent);
            transition: left 0.5s ease;
        }
        
        nav a:hover::before {
            left: 100%;
        }
        
        nav a:hover {
            background: rgba(221, 172, 11, 0.2);
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(221, 172, 11, 0.3);
        }
        
        nav a.active {
            background: linear-gradient(135deg, #ddac0b, #c4d10c);
            backdrop-filter: blur(10px);
            color: #000000;
            font-weight: 800;
            box-shadow: 0 4px 20px rgba(221, 172, 11, 0.4), 0 0 0 2px rgba(255, 255, 255, 0.3) inset, 0 0 20px rgba(221, 172, 11, 0.25);
            transform: translateY(-2px) scale(1.05);
            border: 2px solid rgba(255, 255, 255, 0.4);
        }
        
        nav a.active:hover {
            background: linear-gradient(135deg, rgba(255, 200, 50, 1), rgba(221, 172, 11, 1));
            box-shadow: 0 6px 25px rgba(221, 172, 11, 0.6), 0 0 0 1px rgba(255, 255, 255, 0.3) inset;
        }
        /* Animation de clic sur les onglets */
        
        @keyframes clickPulse {
            0% {
                transform: scale(1);
            }
            50% {
                transform: scale(0.95);
            }
            100% {
                transform: scale(1);
            }
        }
        
        nav a:active {
            animation: clickPulse 0.3s ease;
        }
        /* Navigation Wrapper & Edit Button */
        
        .nav-wrapper {
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
        }
        
        .nav-edit-btn {
            background: linear-gradient(135deg, rgba(221, 172, 11, 0.15), rgba(196, 209, 12, 0.1));
            border: 2px solid rgba(221, 172, 11, 0.3);
            border-radius: 50%;
            width: 45px;
            height: 45px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.16, 1, 0.3, 1);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            opacity: 0.7;
        }
        
        .nav-edit-btn:hover {
            background: linear-gradient(135deg, rgba(221, 172, 11, 0.3), rgba(196, 209, 12, 0.2));
            border-color: rgba(221, 172, 11, 0.5);
            transform: scale(1.1) rotate(15deg);
            box-shadow: 0 6px 20px rgba(221, 172, 11, 0.3);
            opacity: 1;
        }
        
        .nav-edit-btn svg {
            color: #ddac0b;
            filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.3));
        }
        
        .nav-edit-btn.active {
            background: linear-gradient(135deg, #ddac0b, #c4d10c);
            border-color: rgba(255, 255, 255, 0.4);
            transform: scale(1.05);
            opacity: 1;
        }
        
        .nav-edit-btn.active svg {
            color: #000000;
        }
        /* Mode édition navigation */
        
        #mainNav.edit-mode ul {
            gap: 25px;
        }
        
        #mainNav.edit-mode li {
            cursor: grab;
            position: relative;
            transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        #mainNav.edit-mode li:active {
            cursor: grabbing;
        }
        
        #mainNav.edit-mode li.dragging {
            opacity: 0.7;
            transform: scale(1.08) rotate(3deg);
            z-index: 1000;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            transition: none !important;
        }
        /* Désactiver les transitions sur tous les li pendant le drag */
        
        #mainNav.edit-mode li {
            transition: none !important;
        }
        
        #mainNav.edit-mode li.dragging a {
            background: linear-gradient(135deg, rgba(221, 172, 11, 0.3), rgba(196, 209, 12, 0.2));
            box-shadow: 0 8px 25px rgba(221, 172, 11, 0.4);
        }
        /* Mode édition - Flèches de déplacement */
        
        #mainNav.edit-mode li {
            position: relative;
            padding-top: 35px;
        }
        
        #mainNav.edit-mode .nav-arrows {
            position: absolute;
            top: -5px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 8px;
            opacity: 0;
            transition: opacity 0.3s ease, transform 0.3s ease;
            pointer-events: all;
            z-index: 100;
        }
        
        #mainNav.edit-mode li:hover .nav-arrows {
            opacity: 1;
            transform: translateX(-50%) translateY(-2px);
        }
        
        #mainNav.edit-mode .nav-arrow-btn {
            background: linear-gradient(135deg, #ddac0b 0%, #c4d10c 100%);
            border: none;
            width: 28px;
            height: 28px;
            border-radius: 50%;
            color: #000;
            font-size: 14px;
            font-weight: bold;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
        }
        
        #mainNav.edit-mode .nav-arrow-btn:hover {
            transform: scale(1.15);
            box-shadow: 0 4px 12px rgba(221, 172, 11, 0.5);
        }
        
        #mainNav.edit-mode .nav-arrow-btn:active {
            transform: scale(0.95);
        }
        
        #mainNav.edit-mode .nav-arrow-btn:disabled {
            opacity: 0.3;
            cursor: not-allowed;
            transform: scale(1);
        }
        
        #mainNav.edit-mode a {
            pointer-events: none;
            user-select: none;
        }
        /* Animation de swap */
        
        #navList li.swapping {
            animation: swapAnimation 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        @keyframes swapAnimation {
            0% {
                transform: translateY(0);
            }
            50% {
                transform: translateY(-8px) scale(1.05);
            }
            100% {
                transform: translateY(0);
            }
        }
        /* Animation fluide pour le réordonnement (comme sur téléphone) */
        
        #navList {
            display: flex;
            transition: all 0.2s ease;
        }
        
        #navList li {
            transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        #navList li:not(.dragging) {
            animation: smoothSlide 0.25s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        @keyframes smoothSlide {
            0% {
                transform: scale(0.98);
            }
            100% {
                transform: scale(1);
            }
        }
        /* Animation de clic sur les onglets */
        
        @keyframes slideInFromRight {
            from {
                opacity: 0;
                transform: translateX(50px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }
        
        @keyframes slideInFromLeft {
            from {
                opacity: 0;
                transform: translateX(-50px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }
        
        .content-section.slide-in-right {
            animation: slideInFromRight 1.2s cubic-bezier(0.16, 1, 0.3, 1);
        }
        
        .content-section.slide-in-left {
            animation: slideInFromLeft 1.2s cubic-bezier(0.16, 1, 0.3, 1);
        }
        /* Carte principale */
        
        .main-card {
            background: linear-gradient(135deg, rgba(30, 58, 138, 0.25), rgba(37, 99, 235, 0.15));
            backdrop-filter: blur(25px) saturate(180%);
            -webkit-backdrop-filter: blur(25px) saturate(180%);
            border-radius: 30px;
            padding: 60px;
            margin: 40px auto;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.4), 0 0 0 1px rgba(221, 172, 11, 0.2) inset, 0 0 30px rgba(221, 172, 11, 0.2), 0 5px 15px rgba(37, 99, 235, 0.3);
            border: 2px solid rgba(221, 172, 11, 0.3);
            animation: fadeIn 1s cubic-bezier(0.4, 0, 0.2, 1) 0.3s both, borderPulse 3s ease-in-out infinite;
            position: relative;
            overflow: hidden;
            transition: all 0.6s cubic-bezier(0.16, 1, 0.3, 1);
        }
        
        .main-card:hover {
            transform: translateY(-10px) scale(1.02);
            box-shadow: 0 15px 50px rgba(0, 0, 0, 0.5), 0 0 0 2px rgba(221, 172, 11, 0.5) inset, 0 0 50px rgba(221, 172, 11, 0.4), 0 10px 25px rgba(37, 99, 235, 0.5);
            border-color: rgba(221, 172, 11, 0.6);
        }
        
        .main-card>* {
            position: relative;
            z-index: 2;
        }
        
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: scale(0.95);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }
        
        .about-text {
            color: rgba(255, 255, 255, 0.95);
            font-size: 1.3em;
            line-height: 1.9;
            text-align: center;
            margin-bottom: 40px;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.5);
            font-weight: 400;
            letter-spacing: 0.3px;
        }
        
        .social-btn {
            display: inline-block;
            padding: 18px 40px;
            background: linear-gradient(135deg, rgba(30, 58, 138, 0.25), rgba(37, 99, 235, 0.15));
            backdrop-filter: blur(25px) saturate(180%);
            -webkit-backdrop-filter: blur(25px) saturate(180%);
            color: #ffd700;
            text-decoration: none;
            border-radius: 50px;
            font-weight: 700;
            font-size: 1.1em;
            transition: all 0.6s cubic-bezier(0.16, 1, 0.3, 1);
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.4), 0 0 0 1px rgba(221, 172, 11, 0.2) inset, 0 0 30px rgba(221, 172, 11, 0.2), 0 5px 15px rgba(37, 99, 235, 0.3);
            position: relative;
            overflow: hidden;
            font-family: 'Montserrat', sans-serif;
            letter-spacing: 0.5px;
            border: 2px solid rgba(221, 172, 11, 0.3);
        }
        
        .social-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(221, 172, 11, 0.4), transparent);
            transition: left 0.7s ease;
        }
        
        .social-btn:hover::before {
            left: 100%;
        }
        
        .social-btn span {
            position: relative;
            z-index: 1;
        }
        
        .social-btn:hover {
            transform: translateY(-5px) scale(1.03);
            box-shadow: 0 15px 45px rgba(221, 172, 11, 0.5), 0 0 50px rgba(221, 172, 11, 0.3), 0 0 0 1px rgba(221, 172, 11, 0.8) inset;
            background: linear-gradient(135deg, rgba(221, 172, 11, 0.4), rgba(196, 209, 12, 0.35));
            border-color: rgba(221, 172, 11, 0.9);
            color: #ffd700;
        }
        /* Sections de contenu */
        
        .content-section {
            display: none;
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 1.2s cubic-bezier(0.16, 1, 0.3, 1), transform 1.2s cubic-bezier(0.16, 1, 0.3, 1);
        }
        
        .content-section.active {
            display: block;
            animation: smoothFadeIn 1.2s cubic-bezier(0.16, 1, 0.3, 1) forwards;
        }
        
        @keyframes smoothFadeIn {
            0% {
                opacity: 0;
                transform: translateY(30px) scale(0.98);
            }
            100% {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }
        /* Galerie */
        
        .gallery {
            display: flex;
            gap: 30px;
            margin: 50px auto;
            justify-content: center;
            padding: 20px 10px 30px 10px;
            flex-wrap: wrap;
        }
        
        .gallery-item {
            background: linear-gradient(135deg, rgba(30, 58, 138, 0.25), rgba(37, 99, 235, 0.15));
            backdrop-filter: blur(25px) saturate(180%);
            -webkit-backdrop-filter: blur(25px) saturate(180%);
            border-radius: 30px;
            padding: 40px;
            text-align: center;
            transition: all 0.6s cubic-bezier(0.16, 1, 0.3, 1);
            border: 2px solid rgba(221, 172, 11, 0.3);
            cursor: pointer;
            position: relative;
            min-height: 450px;
            min-width: 360px;
            flex: 0 0 360px;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.4), 0 0 0 1px rgba(221, 172, 11, 0.2) inset, 0 0 30px rgba(221, 172, 11, 0.2), 0 5px 15px rgba(37, 99, 235, 0.3);
            overflow: hidden;
        }
        
        .gallery-item::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            z-index: 0;
            border-radius: 20px;
            overflow: hidden;
        }
        /* Background images for each card using ::after */
        
        #card1::after {
            background-image: url('images/1000007790.jpg');
        }
        
        #card2::after {
            background-image: url('images/1000007789.jpg');
        }
        
        #card3::after {
            background-image: url('images/1000007796.jpg');
        }
        
        #card4::after {
            background-image: url('images/1000007790.jpg');
        }
        
        #card5::after {
            background-image: url('images/1000007789.jpg');
        }
        
        #card6::after {
            background-image: url('images/1000007796.jpg');
        }
        
        #card7::after {
            background-image: url('images/1000007798.jpg');
        }
        
        #card8::after {
            background-image: url('images/1000013795.jpg');
        }
        
        #card9::after {
            background-image: url('images/1000007796.jpg');
        }
        
        .gallery-item>* {
            position: relative;
            z-index: 2;
        }
        
        .gallery-item:hover {
            transform: translateY(-15px) scale(1.03);
            box-shadow: 0 15px 50px rgba(0, 0, 0, 0.5), 0 0 0 2px rgba(221, 172, 11, 0.5) inset, 0 0 50px rgba(221, 172, 11, 0.4), 0 10px 25px rgba(37, 99, 235, 0.5);
            border-color: rgba(221, 172, 11, 0.6);
        }
        
        .icon {
            font-size: 4em;
            margin-bottom: 25px;
            filter: drop-shadow(0 0 15px rgba(221, 172, 11, 0.7));
            transition: all 0.5s cubic-bezier(0.16, 1, 0.3, 1);
        }
        
        .gallery-item:hover .icon {
            filter: drop-shadow(0 0 30px rgba(221, 172, 11, 1)) drop-shadow(0 0 50px rgba(221, 172, 11, 0.6));
            transform: scale(1.15) translateY(-5px);
        }
        
        .icon img {
            width: 80px;
            height: 80px;
            object-fit: cover;
            border-radius: 50%;
            border: none;
            box-shadow: 0 0 30px rgba(221, 172, 11, 0.6), 0 0 15px rgba(255, 255, 255, 0.3);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .gallery-item:hover .icon img {
            box-shadow: 0 0 40px rgba(221, 172, 11, 0.9), 0 0 20px rgba(255, 255, 255, 0.5), 0 8px 25px rgba(0, 0, 0, 0.4);
            transform: scale(1.05);
        }
        
        .gallery-item h3 {
            color: #ddac0b;
            font-size: 1.8em;
            margin-bottom: 15px;
            font-weight: 800;
            text-transform: uppercase;
            letter-spacing: 1px;
            text-shadow: 0 3px 15px rgba(0, 0, 0, 0.9), 0 0 30px rgba(221, 172, 11, 0.7), 0 0 50px rgba(221, 172, 11, 0.4);
            font-family: 'Montserrat', sans-serif;
            letter-spacing: 1px;
            text-transform: uppercase;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .gallery-item:hover h3 {
            color: #ffd700;
            text-shadow: 0 3px 15px rgba(0, 0, 0, 0.9), 0 0 40px rgba(221, 172, 11, 0.9), 0 0 20px rgba(255, 215, 0, 0.6);
            transform: translateY(-3px);
        }
        
        .gallery-item p {
            color: rgba(255, 255, 255, 0.95);
            line-height: 1.7;
            font-size: 1.1em;
            text-shadow: 0 2px 8px rgba(0, 0, 0, 0.8);
            font-weight: 400;
            transition: all 0.3s ease;
            margin-bottom: 20px;
        }
        
        .gallery-item:hover p {
            color: rgba(255, 255, 255, 1);
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.9);
        }
        /* Bouton Rejoindre dans event1 */
        
        .gallery-item a[href="#contact"] {
            display: inline-block;
            margin-top: 20px;
            padding: 12px 30px;
            background: linear-gradient(135deg, #ddac0b, #c4d10c);
            color: #001f3f;
            font-weight: 700;
            text-decoration: none;
            border-radius: 25px;
            transition: all 0.4s cubic-bezier(0.16, 1, 0.3, 1);
            box-shadow: 0 4px 15px rgba(221, 172, 11, 0.4);
            position: relative;
            z-index: 3;
        }
        
        .gallery-item a[href="#contact"]:hover {
            transform: translateY(-3px) scale(1.05);
            box-shadow: 0 8px 25px rgba(221, 172, 11, 0.6);
            background: linear-gradient(135deg, #ffd700, #ddac0b);
        }
        
        .gallery-item a[href="#contact"]:active {
            transform: translateY(-1px) scale(1.02);
        }
        /* Animation de bordure pour les cartes évènements */
        
        @keyframes borderPulse {
            0%,
            100% {
                border-color: rgba(221, 172, 11, 0.3);
                box-shadow: 0 10px 40px rgba(0, 0, 0, 0.4), 0 0 0 1px rgba(221, 172, 11, 0.2) inset, 0 0 30px rgba(221, 172, 11, 0.2), 0 5px 15px rgba(37, 99, 235, 0.3);
            }
            50% {
                border-color: rgba(221, 172, 11, 0.5);
                box-shadow: 0 10px 40px rgba(0, 0, 0, 0.4), 0 0 0 1px rgba(221, 172, 11, 0.4) inset, 0 0 40px rgba(221, 172, 11, 0.3), 0 5px 15px rgba(37, 99, 235, 0.3);
            }
        }
        
        #evenements .gallery-item {
            animation: borderPulse 3s ease-in-out infinite;
        }
        /* Section Contact & Newsletter */
        
        .contact-section {
            background: linear-gradient(135deg, rgba(30, 58, 138, 0.25), rgba(37, 99, 235, 0.15));
            backdrop-filter: blur(25px) saturate(180%);
            -webkit-backdrop-filter: blur(25px) saturate(180%);
            border-radius: 30px;
            padding: 60px;
            margin: 40px auto;
            max-width: 950px;
            width: 95%;
            border: 2px solid rgba(221, 172, 11, 0.3);
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.4), 0 0 0 1px rgba(221, 172, 11, 0.2) inset, 0 0 30px rgba(221, 172, 11, 0.2), 0 5px 15px rgba(37, 99, 235, 0.3);
            animation: fadeIn 1s cubic-bezier(0.4, 0, 0.2, 1) 0.3s both;
        }
        
        .contact-section h2 {
            color: #ddac0b;
            font-size: 2em;
            text-align: center;
            margin-bottom: 30px;
            text-shadow: 0 0 20px rgba(221, 172, 11, 0.5);
            font-family: 'Oswald', sans-serif;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 2px;
        }
        
        .contact-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 25px;
            margin-bottom: 35px;
        }
        
        .contact-box {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 20px;
            padding: 25px;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.3s ease;
        }
        
        .contact-box:hover {
            transform: translateY(-5px);
            background: rgba(255, 255, 255, 0.1);
            border-color: rgba(221, 172, 11, 0.3);
        }
        
        .contact-box h3 {
            color: #ddac0b;
            font-size: 1.5em;
            margin-bottom: 15px;
            font-family: 'Montserrat', sans-serif;
            font-weight: 700;
        }
        
        .contact-box p {
            color: white;
            font-size: 1.1em;
            line-height: 1.6;
        }
        
        .contact-box a {
            color: #c4d10c;
            text-decoration: none;
            font-weight: 600;
            transition: color 0.3s ease;
        }
        
        .contact-box a:hover {
            color: #ddac0b;
            text-decoration: underline;
        }
        /* Carte Instagram spéciale */
        
        .instagram-card {
            background: linear-gradient(135deg, rgba(225, 48, 108, 0.15), rgba(193, 53, 132, 0.15), rgba(131, 58, 180, 0.15));
            border: 2px solid rgba(193, 53, 132, 0.4);
        }
        
        .instagram-card:hover {
            background: linear-gradient(135deg, rgba(225, 48, 108, 0.2), rgba(193, 53, 132, 0.2), rgba(131, 58, 180, 0.2));
            border-color: rgba(193, 53, 132, 0.6);
        }
        
        .instagram-content {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
        }
        
        .instagram-icon {
            width: 80px;
            height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, #e1306c, #c13584, #833ab4);
            border-radius: 20px;
            color: white;
            box-shadow: 0 5px 20px rgba(193, 53, 132, 0.4);
        }
        
        .instagram-icon svg {
            width: 50px;
            height: 50px;
        }
        /* Carte YouTube spéciale */
        
        .youtube-card {
            background: linear-gradient(135deg, rgba(255, 0, 0, 0.15), rgba(204, 0, 0, 0.15));
            border: 2px solid rgba(255, 0, 0, 0.4);
        }
        
        .youtube-card:hover {
            background: linear-gradient(135deg, rgba(255, 0, 0, 0.2), rgba(204, 0, 0, 0.2));
            border-color: rgba(255, 0, 0, 0.6);
        }
        
        .youtube-content {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
        }
        
        .youtube-icon {
            width: 80px;
            height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, #FF0000, #CC0000);
            border-radius: 20px;
            color: white;
            box-shadow: 0 5px 20px rgba(255, 0, 0, 0.4);
        }
        
        .youtube-icon svg {
            width: 50px;
            height: 50px;
        }
        
        .instagram-btn {
            display: inline-block;
            padding: 12px 30px;
            background: linear-gradient(135deg, #e1306c, #c13584, #833ab4);
            color: white;
            text-decoration: none;
            border-radius: 50px;
            font-weight: 700;
            font-size: 1em;
            transition: all 0.3s ease;
            box-shadow: 0 5px 20px rgba(193, 53, 132, 0.3);
            font-family: 'Montserrat', sans-serif;
        }
        
        .instagram-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 30px rgba(193, 53, 132, 0.5);
            color: white;
            text-decoration: none;
        }
        /* YouTube button */
        
        .youtube-btn {
            display: inline-block;
            padding: 12px 30px;
            background: linear-gradient(135deg, #FF0000, #CC0000);
            color: white;
            text-decoration: none;
            border-radius: 50px;
            font-weight: 700;
            font-size: 1em;
            transition: all 0.3s ease;
            box-shadow: 0 5px 20px rgba(255, 0, 0, 0.3);
            font-family: 'Montserrat', sans-serif;
        }
        
        .youtube-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 30px rgba(255, 0, 0, 0.5);
            color: white;
            text-decoration: none;
        }
        /* Gmail card */
        
        .gmail-card {
            background: linear-gradient(135deg, rgba(234, 67, 53, 0.15), rgba(219, 68, 55, 0.15));
            border: 2px solid rgba(234, 67, 53, 0.4);
        }
        
        .gmail-card:hover {
            background: linear-gradient(135deg, rgba(234, 67, 53, 0.2), rgba(219, 68, 55, 0.2));
            border-color: rgba(234, 67, 53, 0.6);
        }
        
        .gmail-content {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
        }
        
        .gmail-icon {
            width: 80px;
            height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: #EA4335;
            border-radius: 20px;
            box-shadow: 0 5px 25px rgba(234, 67, 53, 0.5);
        }
        
        .gmail-icon svg {
            width: 45px;
            height: 45px;
            color: white;
        }
        
        .gmail-btn {
            display: inline-block;
            padding: 12px 30px;
            background: #EA4335;
            color: white;
            text-decoration: none;
            border-radius: 50px;
            font-weight: 700;
            font-size: 1em;
            transition: all 0.3s ease;
            box-shadow: 0 5px 20px rgba(234, 67, 53, 0.3);
            font-family: 'Montserrat', sans-serif;
        }
        
        .gmail-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 30px rgba(234, 67, 53, 0.5);
            background: #d93025;
            color: white;
            text-decoration: none;
        }
        /* Boutique */
        
        .boutique-section {
            background: linear-gradient(135deg, rgba(30, 58, 138, 0.25), rgba(37, 99, 235, 0.15));
            backdrop-filter: blur(25px) saturate(180%);
            -webkit-backdrop-filter: blur(25px) saturate(180%);
            border-radius: 30px;
            padding: 60px;
            margin: 40px auto;
            max-width: 950px;
            width: 95%;
            border: 2px solid rgba(221, 172, 11, 0.3);
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.4), 0 0 0 1px rgba(221, 172, 11, 0.2) inset, 0 0 30px rgba(221, 172, 11, 0.2), 0 5px 15px rgba(37, 99, 235, 0.3);
            position: relative;
            overflow: hidden;
            transition: all 0.6s cubic-bezier(0.16, 1, 0.3, 1);
            animation: fadeIn 1s cubic-bezier(0.4, 0, 0.2, 1) 0.3s both;
        }
        
        .boutique-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(221, 172, 11, 0.08), transparent);
            transition: left 0.8s ease;
            pointer-events: none;
        }
        
        .boutique-section:hover::before {
            left: 100%;
        }
        
        .boutique-section:hover {
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.35), 0 0 0 1px rgba(255, 255, 255, 0.15) inset, 0 0 40px rgba(221, 172, 11, 0.15);
            border-color: rgba(255, 255, 255, 0.25);
        }
        
        .boutique-section h2 {
            color: #ddac0b;
            font-size: 2.5em;
            text-align: center;
            margin-bottom: 40px;
            text-shadow: 0 0 20px rgba(221, 172, 11, 0.5), 0 3px 8px rgba(0, 0, 0, 0.6);
            font-family: 'Oswald', sans-serif;
            text-transform: uppercase;
            letter-spacing: 3px;
            position: relative;
            z-index: 1;
        }
        
        .boutique-categories {
            display: flex;
            justify-content: center;
            gap: 40px;
            flex-wrap: wrap;
        }
        
        .boutique-category {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.08), rgba(255, 255, 255, 0.04));
            backdrop-filter: blur(20px) saturate(150%);
            -webkit-backdrop-filter: blur(20px) saturate(150%);
            border-radius: 25px;
            padding: 30px;
            min-width: 280px;
            flex: 1;
            max-width: 400px;
            border: 1.5px solid rgba(221, 172, 11, 0.4);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2), 0 0 0 1px rgba(255, 255, 255, 0.08) inset;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }
        
        .boutique-category::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(221, 172, 11, 0.15), transparent);
            transition: left 0.6s ease;
            pointer-events: none;
        }
        
        .boutique-category:hover::before {
            left: 100%;
        }
        
        .boutique-category:hover {
            border-color: rgba(221, 172, 11, 0.8);
            transform: translateY(-8px);
            box-shadow: 0 15px 45px rgba(221, 172, 11, 0.3), 0 0 40px rgba(221, 172, 11, 0.15), 0 0 0 1px rgba(255, 255, 255, 0.15) inset;
        }
        
        .boutique-category h3 {
            color: #ddac0b;
            font-size: 1.8em;
            text-align: center;
            margin-bottom: 25px;
            font-family: 'Montserrat', sans-serif;
            font-weight: 700;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            z-index: 1;
        }
        
        .boutique-category:hover h3 {
            color: #ffd700;
            transform: scale(1.05);
            text-shadow: 0 0 20px rgba(221, 172, 11, 0.6);
        }
        
        .boutique-category h3 svg {
            width: 35px;
            height: 35px;
            fill: #ddac0b;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .boutique-category:hover h3 svg {
            fill: #ffd700;
            filter: drop-shadow(0 0 10px rgba(221, 172, 11, 0.8));
            transform: rotate(10deg) scale(1.1);
        }
        
        .boutique-options {
            display: flex;
            justify-content: center;
            gap: 20px;
            flex-wrap: wrap;
        }
        
        .boutique-btn {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
            padding: 20px 30px;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.12), rgba(255, 255, 255, 0.08));
            backdrop-filter: blur(15px) saturate(150%);
            -webkit-backdrop-filter: blur(15px) saturate(150%);
            border-radius: 18px;
            text-decoration: none;
            color: white;
            font-family: 'Montserrat', sans-serif;
            font-weight: 600;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            border: 1.5px solid rgba(255, 255, 255, 0.25);
            min-width: 120px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.15), 0 0 0 1px rgba(255, 255, 255, 0.08) inset;
            position: relative;
            overflow: hidden;
        }
        
        .boutique-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(221, 172, 11, 0.2), transparent);
            transition: left 0.5s ease;
        }
        
        .boutique-btn:hover::before {
            left: 100%;
        }
        
        .boutique-btn:hover {
            background: linear-gradient(135deg, rgba(221, 172, 11, 0.35), rgba(196, 209, 12, 0.3));
            border-color: rgba(221, 172, 11, 0.7);
            transform: scale(1.08) translateY(-3px);
            color: #ffd700;
            text-decoration: none;
            box-shadow: 0 8px 25px rgba(221, 172, 11, 0.3), 0 0 30px rgba(221, 172, 11, 0.15), 0 0 0 1px rgba(255, 255, 255, 0.15) inset;
        }
        
        .boutique-btn svg {
            width: 40px;
            height: 40px;
            fill: white;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .boutique-btn:hover svg {
            fill: #ffd700;
            transform: scale(1.15);
            filter: drop-shadow(0 0 10px rgba(221, 172, 11, 0.6));
        }
        /* Bouton principal boutique */
        
        .boutique-main-btn {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 50px 80px;
            background: linear-gradient(135deg, rgba(30, 58, 138, 0.25), rgba(37, 99, 235, 0.15));
            backdrop-filter: blur(25px) saturate(180%);
            -webkit-backdrop-filter: blur(25px) saturate(180%);
            border-radius: 30px;
            text-decoration: none;
            color: white;
            font-family: 'Montserrat', sans-serif;
            transition: all 0.6s cubic-bezier(0.16, 1, 0.3, 1);
            border: 2px solid rgba(221, 172, 11, 0.3);
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.4), 0 0 0 1px rgba(221, 172, 11, 0.2) inset, 0 0 30px rgba(221, 172, 11, 0.2), 0 5px 15px rgba(37, 99, 235, 0.3);
            position: relative;
            overflow: hidden;
        }
        
        .boutique-main-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(221, 172, 11, 0.3), transparent);
            transition: left 0.7s ease;
        }
        
        .boutique-main-btn:hover::before {
            left: 100%;
        }
        
        .boutique-main-btn:hover {
            background: linear-gradient(135deg, rgba(221, 172, 11, 0.4), rgba(196, 209, 12, 0.35));
            border-color: rgba(221, 172, 11, 0.9);
            transform: translateY(-8px) scale(1.02);
            box-shadow: 0 25px 60px rgba(221, 172, 11, 0.4), 0 0 50px rgba(221, 172, 11, 0.25), 0 0 0 1px rgba(255, 255, 255, 0.2) inset;
            color: #ffd700;
            text-decoration: none;
        }
        
        .boutique-main-btn svg {
            fill: #ddac0b;
            filter: drop-shadow(0 0 10px rgba(221, 172, 11, 0.5));
            transition: all 0.3s ease;
        }
        
        .boutique-main-btn:hover svg {
            transform: scale(1.1);
            filter: drop-shadow(0 0 20px rgba(221, 172, 11, 0.8));
        }
        
        @media (max-width: 768px) {
            .boutique-main-btn {
                padding: 40px 50px;
            }
        }
        /* Newsletter */
        
        .newsletter-box {
            background: linear-gradient(135deg, rgba(221, 172, 11, 0.2), rgba(196, 209, 12, 0.2));
            border-radius: 20px;
            padding: 30px;
            text-align: center;
            border: 2px solid rgba(221, 172, 11, 0.3);
            margin-top: 40px;
            margin-bottom: 0;
        }
        
        .newsletter-box h3 {
            color: #ddac0b;
            font-size: 1.6em;
            margin-bottom: 15px;
            text-shadow: 0 0 10px rgba(221, 172, 11, 0.5);
            font-family: 'Montserrat', sans-serif;
            font-weight: 700;
        }
        
        .newsletter-box p {
            color: white;
            font-size: 1.1em;
            margin-bottom: 25px;
            line-height: 1.6;
        }
        
        .newsletter-form {
            display: flex;
            gap: 15px;
            max-width: 500px;
            margin: 0 auto;
            flex-wrap: wrap;
            justify-content: center;
        }
        
        .newsletter-form input[type="email"] {
            flex: 1;
            min-width: 250px;
            padding: 15px 20px;
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 50px;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            font-size: 1em;
            outline: none;
            transition: all 0.3s ease;
        }
        
        .newsletter-form input[type="email"]::placeholder {
            color: rgba(255, 255, 255, 0.6);
        }
        
        .newsletter-form input[type="email"]:focus {
            border-color: #ddac0b;
            background: rgba(255, 255, 255, 0.15);
            box-shadow: 0 0 20px rgba(221, 172, 11, 0.3);
        }
        
        .newsletter-form button {
            padding: 15px 35px;
            background: linear-gradient(135deg, #ddac0b, #c4d10c);
            color: #001f3f;
            border: none;
            border-radius: 50px;
            font-size: 1em;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 20px rgba(221, 172, 11, 0.4);
        }
        
        .newsletter-form button:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(221, 172, 11, 0.6);
        }
        
        .newsletter-form button:active {
            transform: translateY(-1px);
        }
        /* Footer */
        
        footer {
            text-align: center;
            padding: 30px 20px;
            color: rgba(255, 255, 255, 0.8);
            font-size: 1em;
            margin-top: 60px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        footer p {
            margin-bottom: 10px;
        }
        /* Petites étoiles décoratives */
        
        .tiny-star {
            position: absolute;
            color: #ddac0b;
            pointer-events: none;
            z-index: 0;
        }
        
        @keyframes twinkle {
            0%,
            100% {
                opacity: 0.3;
                transform: scale(1);
            }
            50% {
                opacity: 1;
                transform: scale(1.2);
            }
        }
        /* Animations modernes pour les cartes */
        
        @keyframes cardFloat {
            0%,
            100% {
                transform: translateY(0px);
            }
            50% {
                transform: translateY(-8px);
            }
        }
        
        @keyframes glowPulse {
            0%,
            100% {
                box-shadow: 0 8px 32px rgba(0, 0, 0, 0.25), 0 0 0 1px rgba(255, 255, 255, 0.1) inset, 0 0 20px rgba(100, 180, 255, 0.15);
            }
            50% {
                box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3), 0 0 0 1px rgba(255, 255, 255, 0.15) inset, 0 0 30px rgba(100, 180, 255, 0.25);
            }
        }
        
        @keyframes shimmerEffect {
            0% {
                transform: translateX(-100%);
            }
            100% {
                transform: translateX(100%);
            }
        }
        /* Animation de fondu entrant pour les éléments */
        
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        /* Animation de rotation douce */
        
        @keyframes gentleRotate {
            0%,
            100% {
                transform: rotate(0deg);
            }
            25% {
                transform: rotate(2deg);
            }
            75% {
                transform: rotate(-2deg);
            }
        }
        /* Responsive */
        
        @media (max-width: 768px) {
            h1 {
                font-size: 3em;
                letter-spacing: 3px;
            }
            .title-decoration {
                font-size: 2em;
            }
            header {
                padding: 30px 15px 15px;
                gap: 15px;
            }
            /* Actions en haut (recherche + login) */
            .top-actions {
                top: 10px;
                right: 10px;
                gap: 8px;
            }
            .search-btn {
                width: 38px;
                height: 38px;
            }
            .search-btn svg {
                width: 16px;
                height: 16px;
            }
            .search-box {
                right: 45px;
            }
            .search-box.active {
                width: 200px;
            }
            .search-box input {
                padding: 10px 12px;
                font-size: 0.85em;
            }
            .search-submit {
                width: 32px;
                height: 32px;
            }
            .login-btn {
                width: 38px;
                height: 38px;
            }
            .login-btn svg {
                width: 18px;
                height: 18px;
            }
            /* Navigation */
            nav {
                padding: 8px 5px;
                max-width: calc(100% - 20px);
                margin: 10px auto 0;
                overflow: hidden;
            }
            nav ul {
                gap: 5px;
                flex-wrap: nowrap;
                overflow-x: auto;
                overflow-y: hidden;
                -webkit-overflow-scrolling: touch;
                scrollbar-width: thin;
                scrollbar-color: rgba(221, 172, 11, 0.5) transparent;
                padding: 8px 5px;
                margin: 0;
                width: 100%;
                justify-content: flex-start;
            }
            nav ul::-webkit-scrollbar {
                height: 4px;
            }
            nav ul::-webkit-scrollbar-track {
                background: rgba(255, 255, 255, 0.1);
                border-radius: 2px;
            }
            nav ul::-webkit-scrollbar-thumb {
                background: rgba(221, 172, 11, 0.5);
                border-radius: 2px;
            }
            nav li {
                flex-shrink: 0;
            }
            nav a {
                padding: 10px 14px;
                font-size: 0.8em;
                white-space: nowrap;
            }
            /* Contenu principal */
            .main-card {
                padding: 25px 15px;
                margin: 15px 10px;
            }
            .about-text {
                font-size: 1em;
            }
            /* Galerie */
            .gallery {
                gap: 15px;
            }
            .gallery-item {
                min-width: 250px;
                flex: 0 0 250px;
            }
            /* Section contact */
            .contact-section {
                padding: 25px 15px;
            }
            .contact-section h2 {
                font-size: 1.8em;
            }
            .contact-grid {
                grid-template-columns: 1fr;
                gap: 20px;
            }
            /* Newsletter */
            .newsletter-form {
                flex-direction: column;
                gap: 10px;
            }
            .newsletter-form input[type="email"] {
                min-width: 100%;
                padding: 12px 15px;
            }
            .newsletter-form button {
                width: 100%;
                padding: 12px;
            }
            /* Cards section */
            .cards-section {
                padding: 20px 10px;
            }
            .cards-section h2 {
                font-size: 1.5em;
            }
            .card-item {
                width: 100%;
                max-width: 300px;
            }
            /* Indicateur de scroll navigation */
            nav {
                position: relative;
            }
            nav::before,
            nav::after {
                content: '';
                position: absolute;
                top: 0;
                bottom: 0;
                width: 25px;
                pointer-events: none;
                z-index: 10;
            }
            nav::before {
                left: 0;
                background: linear-gradient(to right, rgba(30, 58, 138, 0.9), transparent);
                border-radius: 50px 0 0 50px;
            }
            nav::after {
                right: 0;
                background: linear-gradient(to left, rgba(30, 58, 138, 0.9), transparent);
                border-radius: 0 50px 50px 0;
            }
        }

        @media (max-width: 480px) {
            h1 {
                font-size: 2.2em;
                letter-spacing: 2px;
            }
            .title-decoration {
                font-size: 1.5em;
            }
            header {
                padding: 25px 10px 10px;
            }
            .top-actions {
                top: 8px;
                right: 8px;
                gap: 6px;
            }
            .search-btn,
            .login-btn {
                width: 35px;
                height: 35px;
            }
            .search-box.active {
                width: 160px;
                right: 40px;
            }
            nav {
                margin: 8px auto 0;
                padding: 6px 5px;
                max-width: calc(100% - 10px);
            }
            nav ul {
                padding: 6px 5px;
            }
            nav a {
                padding: 8px 12px;
                font-size: 0.72em;
            }
            .main-card {
                padding: 20px 12px;
                margin: 10px 5px;
            }
            .about-text {
                font-size: 0.95em;
                line-height: 1.6;
            }
            .gallery-item {
                min-width: 220px;
                flex: 0 0 220px;
            }
            .contact-section h2 {
                font-size: 1.5em;
            }
        }
        /* ============ FENÊTRE PARAMÈTRES ============ */
        
        .settings-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.85);
            backdrop-filter: blur(8px);
            z-index: 10000;
            display: none;
            align-items: center;
            justify-content: center;
            animation: fadeIn 0.3s ease;
        }
        
        .settings-overlay.active {
            display: flex;
        }
        
        .settings-modal {
            background: linear-gradient(135deg, rgba(0, 31, 63, 0.98), rgba(0, 81, 168, 0.95));
            border-radius: 25px;
            width: 90%;
            max-width: 700px;
            max-height: 90vh;
            overflow: hidden;
            box-shadow: 0 25px 80px rgba(0, 0, 0, 0.6);
            border: 2px solid rgba(221, 172, 11, 0.4);
            animation: slideDown 0.4s ease;
            display: flex;
            flex-direction: column;
        }
        
        .settings-header {
            padding: 25px 30px;
            background: rgba(0, 0, 0, 0.3);
            border-bottom: 2px solid rgba(221, 172, 11, 0.3);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .settings-header h2 {
            color: #ddac0b;
            font-family: 'Oswald', sans-serif;
            font-size: 1.8em;
            text-shadow: 0 0 20px rgba(221, 172, 11, 0.5);
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .settings-header h2 svg {
            width: 28px;
            height: 28px;
            fill: #ddac0b;
        }
        
        .settings-close {
            background: none;
            border: none;
            color: white;
            font-size: 32px;
            cursor: pointer;
            width: 45px;
            height: 45px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: all 0.3s ease;
        }
        
        .settings-close:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: rotate(90deg);
        }
        
        .settings-tabs {
            display: flex;
            background: rgba(0, 0, 0, 0.2);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .settings-tab {
            flex: 1;
            padding: 18px 25px;
            background: transparent;
            border: none;
            color: rgba(255, 255, 255, 0.6);
            font-weight: 600;
            font-family: 'Montserrat', sans-serif;
            font-size: 1em;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            position: relative;
        }
        
        .settings-tab svg {
            width: 20px;
            height: 20px;
            fill: currentColor;
        }
        
        .settings-tab:hover {
            background: rgba(255, 255, 255, 0.05);
            color: rgba(255, 255, 255, 0.9);
        }
        
        .settings-tab.active {
            background: rgba(221, 172, 11, 0.15);
            color: #ddac0b;
        }
        
        .settings-tab.active::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(135deg, #ddac0b, #c4d10c);
        }
        
        .settings-content {
            flex: 1;
            overflow-y: auto;
            padding: 30px;
        }
        
        .settings-panel {
            display: none;
        }
        
        .settings-panel.active {
            display: block;
            animation: fadeIn 0.3s ease;
        }
        
        .settings-section {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 25px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .settings-section-title {
            color: #ddac0b;
            font-size: 1.2em;
            font-weight: 700;
            margin-bottom: 20px;
            font-family: 'Montserrat', sans-serif;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .settings-section-title svg {
            width: 22px;
            height: 22px;
            fill: #ddac0b;
        }
        
        .settings-form-group {
            margin-bottom: 20px;
        }
        
        .settings-form-group:last-child {
            margin-bottom: 0;
        }
        
        .settings-form-group label {
            display: block;
            color: rgba(255, 255, 255, 0.9);
            font-weight: 600;
            margin-bottom: 10px;
            font-size: 0.95em;
        }
        
        .settings-form-group input {
            width: 100%;
            padding: 14px 18px;
            background: rgba(255, 255, 255, 0.08);
            border: 2px solid rgba(255, 255, 255, 0.15);
            border-radius: 12px;
            color: white;
            font-size: 1em;
            font-family: 'Quicksand', sans-serif;
            transition: all 0.3s ease;
        }
        
        .settings-form-group input:focus {
            outline: none;
            border-color: #ddac0b;
            background: rgba(255, 255, 255, 0.12);
        }
        
        .settings-form-group input::placeholder {
            color: rgba(255, 255, 255, 0.4);
        }
        
        .settings-form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
        
        .settings-btn {
            padding: 14px 28px;
            background: linear-gradient(135deg, #ddac0b, #c4d10c);
            border: none;
            border-radius: 12px;
            color: #001f3f;
            font-weight: 700;
            font-size: 1em;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Montserrat', sans-serif;
            display: inline-flex;
            align-items: center;
            gap: 10px;
        }
        
        .settings-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(221, 172, 11, 0.4);
        }
        
        .settings-btn:active {
            transform: translateY(0);
        }
        
        .settings-btn.secondary {
            background: rgba(255, 255, 255, 0.1);
            color: white;
            border: 2px solid rgba(255, 255, 255, 0.2);
        }
        
        .settings-btn.secondary:hover {
            background: rgba(255, 255, 255, 0.15);
            border-color: rgba(255, 255, 255, 0.3);
        }
        
        .settings-btn.danger {
            background: linear-gradient(135deg, #ff4444, #cc3333);
            color: white;
        }
        
        .settings-btn.danger:hover {
            box-shadow: 0 8px 25px rgba(255, 68, 68, 0.4);
        }
        /* Modération - Carte utilisateur */
        
        .moderation-user-card {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            padding: 20px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 20px;
            transition: all 0.3s ease;
        }
        
        .moderation-user-card:hover {
            border-color: rgba(221, 172, 11, 0.5);
            background: rgba(255, 255, 255, 0.08);
        }
        
        .moderation-user-card.banned {
            border-left: 4px solid #ff4444;
            background: rgba(255, 68, 68, 0.05);
        }
        
        .moderation-user-info {
            flex: 1;
        }
        
        .moderation-user-info h4 {
            color: white;
            margin: 0 0 8px 0;
            font-size: 1.1em;
        }
        
        .moderation-user-info p {
            color: rgba(255, 255, 255, 0.6);
            margin: 0;
            font-size: 0.9em;
        }
        
        .moderation-user-badges {
            display: flex;
            gap: 8px;
            margin-top: 10px;
            flex-wrap: wrap;
        }
        
        .moderation-badge {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 6px;
            font-size: 0.8em;
            font-weight: 600;
        }
        
        .moderation-badge.admin {
            background: rgba(221, 172, 11, 0.2);
            color: #ddac0b;
            border: 1px solid rgba(221, 172, 11, 0.3);
        }
        
        .moderation-badge.banned {
            background: rgba(255, 68, 68, 0.2);
            color: #ff4444;
            border: 1px solid rgba(255, 68, 68, 0.3);
        }
        
        .moderation-badge.active {
            background: rgba(34, 197, 94, 0.2);
            color: #22c55e;
            border: 1px solid rgba(34, 197, 94, 0.3);
        }
        
        .moderation-user-actions {
            display: flex;
            gap: 10px;
        }
        
        .moderation-action-btn {
            padding: 10px 18px;
            border: none;
            border-radius: 8px;
            font-size: 0.9em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            white-space: nowrap;
        }
        
        .moderation-action-btn.ban {
            background: linear-gradient(135deg, #ff4444, #cc0000);
            color: white;
        }
        
        .moderation-action-btn.ban:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(255, 68, 68, 0.4);
        }
        
        .moderation-action-btn.unban {
            background: linear-gradient(135deg, #22c55e, #16a34a);
            color: white;
        }
        
        .moderation-action-btn.unban:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(34, 197, 94, 0.4);
        }
        
        .moderation-action-btn.delete {
            background: rgba(255, 255, 255, 0.1);
            color: rgba(255, 255, 255, 0.8);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .moderation-action-btn.delete:hover {
            background: rgba(255, 68, 68, 0.2);
            border-color: #ff4444;
            color: #ff4444;
        }
        
        .settings-btn-group {
            display: flex;
            gap: 15px;
            margin-top: 25px;
        }
        /* Toggle Switch pour 2FA */
        
        .toggle-container {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 20px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            margin-bottom: 20px;
        }
        
        .toggle-info h4 {
            color: white;
            font-weight: 600;
            margin-bottom: 5px;
        }
        
        .toggle-info p {
            color: rgba(255, 255, 255, 0.6);
            font-size: 0.9em;
        }
        
        .toggle-switch {
            position: relative;
            width: 60px;
            height: 32px;
        }
        
        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        
        .toggle-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 32px;
            transition: all 0.3s ease;
        }
        
        .toggle-slider::before {
            position: absolute;
            content: '';
            height: 24px;
            width: 24px;
            left: 4px;
            bottom: 4px;
            background: white;
            border-radius: 50%;
            transition: all 0.3s ease;
        }
        
        .toggle-switch input:checked+.toggle-slider {
            background: linear-gradient(135deg, #ddac0b, #c4d10c);
        }
        
        .toggle-switch input:checked+.toggle-slider::before {
            transform: translateX(28px);
        }
        /* QR Code Section */
        
        .qr-section {
            display: none;
            text-align: center;
            padding: 30px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            margin-top: 20px;
            animation: fadeIn 0.3s ease;
        }
        
        .qr-section.active {
            display: block;
        }
        
        .qr-code-container {
            background: white;
            padding: 20px;
            border-radius: 15px;
            display: inline-block;
            margin: 20px 0;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }
        
        .qr-code-container canvas,
        .qr-code-container img {
            display: block;
        }
        
        .qr-instructions {
            color: rgba(255, 255, 255, 0.8);
            margin-bottom: 20px;
            line-height: 1.6;
        }
        
        .qr-instructions strong {
            color: #ddac0b;
        }
        
        .secret-key {
            background: rgba(0, 0, 0, 0.3);
            padding: 15px 20px;
            border-radius: 10px;
            font-family: monospace;
            color: #ddac0b;
            letter-spacing: 2px;
            margin: 20px 0;
            word-break: break-all;
            font-size: 1.1em;
        }
        
        .verification-input {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-top: 25px;
        }
        
        .verification-input input {
            width: 50px;
            height: 60px;
            text-align: center;
            font-size: 1.5em;
            font-weight: 700;
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            color: white;
            font-family: 'Montserrat', sans-serif;
        }
        
        .verification-input input:focus {
            outline: none;
            border-color: #ddac0b;
            background: rgba(255, 255, 255, 0.15);
        }
        /* Status badges */
        
        .status-badge {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.85em;
            font-weight: 600;
        }
        
        .status-badge.active {
            background: rgba(76, 175, 80, 0.2);
            color: #4CAF50;
        }
        
        .status-badge.inactive {
            background: rgba(255, 152, 0, 0.2);
            color: #FF9800;
        }
        
        .status-badge svg {
            width: 14px;
            height: 14px;
            fill: currentColor;
        }
        /* Success/Error messages */
        
        .settings-message {
            padding: 15px 20px;
            border-radius: 12px;
            margin-bottom: 20px;
            display: none;
            align-items: center;
            gap: 12px;
            animation: fadeIn 0.3s ease;
        }
        
        .settings-message.show {
            display: flex;
        }
        
        .settings-message.success {
            background: rgba(76, 175, 80, 0.2);
            border: 1px solid rgba(76, 175, 80, 0.3);
            color: #4CAF50;
        }
        
        .settings-message.error {
            background: rgba(244, 67, 54, 0.2);
            border: 1px solid rgba(244, 67, 54, 0.3);
            color: #f44336;
        }
        
        .settings-message svg {
            width: 24px;
            height: 24px;
            fill: currentColor;
            flex-shrink: 0;
        }
        /* Responsive */
        
        @media (max-width: 600px) {
            .settings-modal {
                width: 95%;
                max-height: 95vh;
                border-radius: 20px;
            }
            .settings-header {
                padding: 20px;
            }
            .settings-header h2 {
                font-size: 1.4em;
            }
            .settings-content {
                padding: 20px;
            }
            .settings-form-row {
                grid-template-columns: 1fr;
            }
            .settings-tab {
                padding: 15px 10px;
                font-size: 0.9em;
            }
            .settings-tab span {
                display: none;
            }
            .verification-input input {
                width: 40px;
                height: 50px;
                font-size: 1.2em;
            }
            .settings-btn-group {
                flex-direction: column;
            }
        }
        /* ============ PANIER LATÉRAL ============ */
        
        .cart-sidebar {
            position: fixed;
            right: -450px;
            top: 0;
            width: 450px;
            height: 100vh;
            background: rgba(0, 31, 63, 0.98);
            backdrop-filter: blur(20px);
            box-shadow: -5px 0 30px rgba(0, 0, 0, 0.5);
            transition: right 0.4s ease;
            z-index: 10001;
            display: flex;
            flex-direction: column;
            border-left: 2px solid rgba(221, 172, 11, 0.3);
        }
        
        .cart-sidebar.open {
            right: 0;
        }
        
        .cart-sidebar-header {
            padding: 25px;
            border-bottom: 2px solid rgba(221, 172, 11, 0.3);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .cart-sidebar-header h2 {
            color: #ddac0b;
            font-family: 'Oswald', sans-serif;
            font-size: 1.8em;
        }
        
        .close-cart {
            background: none;
            border: none;
            color: white;
            font-size: 2em;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .close-cart:hover {
            color: #ddac0b;
            transform: rotate(90deg);
        }
        
        .cart-items {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
        }
        
        .cart-item {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 15px;
            margin-bottom: 15px;
            display: flex;
            gap: 15px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .cart-item-image {
            width: 80px;
            height: 80px;
            object-fit: cover;
            border-radius: 10px;
        }
        
        .cart-item-placeholder {
            width: 80px;
            height: 80px;
            background: linear-gradient(135deg, rgba(65, 105, 225, 0.3), rgba(221, 172, 11, 0.2));
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 30px;
        }
        
        .cart-item-info {
            flex: 1;
        }
        
        .cart-item-name {
            font-weight: 700;
            margin-bottom: 5px;
            color: white;
        }
        
        .cart-item-details {
            font-size: 0.9em;
            color: rgba(255, 255, 255, 0.7);
            margin-bottom: 8px;
        }
        
        .cart-item-quantity {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .qty-btn {
            width: 30px;
            height: 30px;
            border: none;
            background: rgba(221, 172, 11, 0.3);
            color: white;
            border-radius: 5px;
            cursor: pointer;
            font-weight: 700;
            transition: all 0.3s ease;
        }
        
        .qty-btn:hover {
            background: rgba(221, 172, 11, 0.6);
        }
        
        .cart-item-price {
            color: #ddac0b;
            font-weight: 700;
            font-size: 1.1em;
            margin-top: 8px;
        }
        
        .remove-item {
            background: rgba(255, 50, 50, 0.3);
            border: none;
            color: white;
            padding: 5px 10px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.85em;
            transition: all 0.3s ease;
            margin-top: 8px;
        }
        
        .remove-item:hover {
            background: rgba(255, 50, 50, 0.6);
        }
        
        .cart-footer {
            padding: 25px;
            border-top: 2px solid rgba(221, 172, 11, 0.3);
        }
        
        .cart-total {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            font-size: 1.4em;
            font-weight: 700;
        }
        
        .cart-total-label {
            color: rgba(255, 255, 255, 0.9);
        }
        
        .cart-total-amount {
            color: #ddac0b;
        }
        
        .checkout-btn {
            width: 100%;
            padding: 18px;
            background: linear-gradient(135deg, #ddac0b, #c4d10c);
            border: none;
            border-radius: 12px;
            color: #001f3f;
            font-weight: 700;
            font-size: 1.2em;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Montserrat', sans-serif;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .checkout-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(221, 172, 11, 0.5);
        }
        
        .empty-cart {
            text-align: center;
            padding: 40px 20px;
            color: rgba(255, 255, 255, 0.6);
        }
        
        .empty-cart-icon {
            font-size: 80px;
            margin-bottom: 20px;
            opacity: 0.5;
        }
        
        .cart-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
            z-index: 10000;
        }
        
        .cart-overlay.active {
            opacity: 1;
            visibility: visible;
        }
        
        .continue-shopping-btn {
            width: 100%;
            padding: 14px;
            background: transparent;
            border: 2px solid rgba(221, 172, 11, 0.5);
            border-radius: 12px;
            color: #ddac0b;
            font-weight: 600;
            font-size: 1em;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Montserrat', sans-serif;
            margin-top: 10px;
        }
        
        .continue-shopping-btn:hover {
            background: rgba(221, 172, 11, 0.1);
            border-color: #ddac0b;
        }
        
        @media (max-width: 500px) {
            .cart-sidebar {
                width: 100%;
                right: -100%;
            }
        }
        /* ============ PANNEAU ADMIN ============ */
        /* Admin Sidebar Toggle Button */
        
        .admin-sidebar-toggle {
            position: fixed;
            top: 20px;
            left: 20px;
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, #ddac0b, #b8900a);
            border: none;
            border-radius: 12px;
            color: #000;
            font-size: 20px;
            cursor: pointer;
            box-shadow: 0 4px 20px rgba(221, 172, 11, 0.4);
            z-index: 9999;
            display: none;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }
        
        .admin-sidebar-toggle.visible {
            display: flex;
        }
        
        .admin-sidebar-toggle:hover {
            background: linear-gradient(135deg, #f0c020, #ddac0b);
            box-shadow: 0 6px 25px rgba(221, 172, 11, 0.6);
            transform: translateY(-2px);
        }
        /* Admin Sidebar */
        
        #adminSidebar.admin-sidebar {
            position: fixed !important;
            top: 0 !important;
            left: -350px !important;
            width: 350px !important;
            height: 100vh !important;
            background: linear-gradient(180deg, #0a0a0a 0%, #000000 100%) !important;
            border-right: 2px solid rgba(221, 172, 11, 0.3) !important;
            z-index: 10000 !important;
            transition: left 0.4s cubic-bezier(0.4, 0, 0.2, 1) !important;
            display: flex !important;
            flex-direction: column !important;
            box-shadow: 4px 0 30px rgba(0, 0, 0, 0.8), 0 0 0 1px rgba(221, 172, 11, 0.1) !important;
        }
        
        #adminSidebar.admin-sidebar.active {
            left: 0 !important;
        }
        /* Admin Sidebar Header */
        
        .admin-sidebar-header {
            padding: 20px;
            background: rgba(221, 172, 11, 0.1);
            border-bottom: 1px solid rgba(221, 172, 11, 0.2);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .admin-sidebar-header h2 {
            color: #ddac0b;
            font-family: 'Oswald', sans-serif;
            font-size: 1.5em;
            margin: 0;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .admin-sidebar-close {
            background: none;
            border: none;
            color: rgba(255, 255, 255, 0.6);
            font-size: 28px;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 35px;
            height: 35px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 8px;
        }
        
        .admin-sidebar-close:hover {
            color: #ddac0b;
            background: rgba(221, 172, 11, 0.1);
        }
        /* Admin Navigation */
        
        #adminSidebar .admin-nav {
            flex: 1 !important;
            overflow-y: auto !important;
            padding: 15px 10px !important;
            display: flex !important;
            flex-direction: column !important;
        }
        
        #adminSidebar .admin-nav-item {
            display: flex !important;
            align-items: center !important;
            gap: 14px !important;
            padding: 16px 18px !important;
            margin-bottom: 6px !important;
            background: transparent !important;
            border: none !important;
            border-radius: 12px !important;
            color: rgba(255, 255, 255, 0.7) !important;
            font-size: 1em !important;
            font-weight: 500 !important;
            cursor: pointer !important;
            transition: all 0.25s ease !important;
            width: 100% !important;
            text-align: left !important;
            font-family: 'Quicksand', sans-serif !important;
            position: relative !important;
        }
        
        .admin-nav-item:hover {
            background: rgba(255, 255, 255, 0.08);
            color: rgba(255, 255, 255, 0.95);
            transform: translateX(4px);
        }
        
        .admin-nav-item.active {
            background: rgba(221, 172, 11, 0.2);
            color: #ddac0b;
            font-weight: 600;
            box-shadow: 0 0 0 1px rgba(221, 172, 11, 0.3);
        }
        
        .admin-nav-icon {
            width: 22px;
            height: 22px;
            flex-shrink: 0;
        }
        /* Admin Content Panel */
        
        .admin-content-panel {
            position: fixed;
            top: 0;
            left: 350px;
            right: 0;
            height: 100vh;
            background: rgba(0, 0, 0, 0.85);
            backdrop-filter: blur(10px);
            z-index: 9998;
            display: none;
            overflow-y: auto;
            transition: left 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .admin-content-panel.active {
            display: block;
        }
        
        .admin-content-panel-inner {
            min-height: 100%;
        }
        
        .admin-content-header {
            padding: 25px 40px;
            background: rgba(0, 0, 0, 0.6);
            border-bottom: 1px solid rgba(221, 172, 11, 0.2);
            position: sticky;
            top: 0;
            z-index: 10;
            backdrop-filter: blur(10px);
        }
        
        .admin-content-header h3 {
            color: #ddac0b;
            font-size: 1.6em;
            margin: 0;
            font-family: 'Oswald', sans-serif;
        }
        
        .admin-content-body {
            padding: 40px;
            max-width: 1400px;
        }
        
        .admin-section-content {
            display: none;
        }
        
        .admin-section-content.active {
            display: block;
        }
        /* Image Manager Grid in Sidebar */
        
        #imagesManagerContent {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 20px;
        }
        /* Hide old admin system completely */
        
        #adminOverlay,
        #adminOverlay.active,
        #adminOverlay .admin-panel,
        #adminOverlay .admin-tabs,
        #adminOverlay .admin-tab,
        .admin-overlay,
        .admin-overlay.active,
        .admin-panel,
        .admin-tabs,
        .admin-tab,
        .admin-tab-separator,
        .admin-panel-section {
            display: none !important;
            visibility: hidden !important;
            opacity: 0 !important;
            pointer-events: none !important;
        }
        
        .admin-panel {
            background: linear-gradient(135deg, #1a1a2e, #16213e);
            border-radius: 20px;
            width: 95%;
            max-width: 1200px;
            max-height: 90vh;
            overflow: hidden;
            box-shadow: 0 25px 80px rgba(0, 0, 0, 0.8);
            border: 2px solid rgba(255, 68, 68, 0.3);
            display: flex;
            flex-direction: column;
        }
        
        .admin-header {
            padding: 25px 30px;
            background: rgba(255, 68, 68, 0.1);
            border-bottom: 2px solid rgba(255, 68, 68, 0.3);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .admin-header h2 {
            color: #ff4444;
            font-family: 'Oswald', sans-serif;
            font-size: 1.8em;
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .admin-close {
            background: none;
            border: none;
            color: white;
            font-size: 32px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .admin-close:hover {
            color: #ff4444;
            transform: rotate(90deg);
        }
        
        .admin-tabs {
            display: flex;
            background: rgba(0, 0, 0, 0.3);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            gap: 5px;
        }
        
        .admin-tab-separator {
            width: 2px;
            background: linear-gradient(to bottom, transparent, rgba(221, 172, 11, 0.5), transparent);
            margin: 8px 5px;
            position: relative;
        }
        
        .admin-tab-separator::before {
            content: attr(data-label);
            position: absolute;
            top: -25px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 0.7em;
            color: rgba(221, 172, 11, 0.8);
            font-weight: 600;
            white-space: nowrap;
            letter-spacing: 1px;
            text-transform: uppercase;
        }
        
        .admin-tab {
            flex: 1;
            padding: 18px 25px;
            background: transparent;
            border: none;
            color: rgba(255, 255, 255, 0.6);
            font-weight: 600;
            font-size: 1em;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        
        .admin-tab:hover {
            background: rgba(255, 255, 255, 0.05);
            color: white;
        }
        
        .admin-tab.active {
            background: rgba(255, 68, 68, 0.2);
            color: #ff4444;
            border-bottom: 3px solid #ff4444;
        }
        
        .admin-content {
            flex: 1;
            overflow-y: auto;
            padding: 30px;
        }
        
        .admin-panel-section {
            display: none;
        }
        
        .admin-panel-section.active {
            display: block;
        }
        /* Color Pickers */
        
        .color-picker-group {
            display: grid;
            grid-template-columns: 1fr;
            gap: 20px;
            margin-bottom: 25px;
            max-width: 600px;
        }
        
        .color-picker-item {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            padding: 20px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .color-picker-item label {
            display: block;
            color: white;
            font-weight: 600;
            margin-bottom: 12px;
            font-size: 0.95em;
        }
        
        .color-picker-wrapper {
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .color-picker-wrapper input[type="color"] {
            width: 60px;
            height: 60px;
            border: 2px solid rgba(221, 172, 11, 0.3);
            border-radius: 10px;
            cursor: pointer;
            background: transparent;
            flex-shrink: 0;
        }
        
        .color-picker-wrapper input[type="color"]::-webkit-color-swatch-wrapper {
            padding: 0;
        }
        
        .color-picker-wrapper input[type="color"]::-webkit-color-swatch {
            border: none;
            border-radius: 8px;
        }
        
        .color-picker-wrapper input[type="text"] {
            flex: 1;
            padding: 12px 15px;
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            color: white;
            font-family: monospace;
            font-size: 0.95em;
            min-width: 0;
        }
        
        .color-picker-wrapper input[type="text"]:focus {
            outline: none;
            border-color: rgba(221, 172, 11, 0.5);
        }
        
        .gradient-preview {
            height: 60px;
            border-radius: 10px;
            margin-top: 15px;
            border: 2px solid rgba(255, 255, 255, 0.1);
        }
        /* Section Editor */
        
        .section-editor {
            background: rgba(255, 255, 255, 0.03);
            border-radius: 15px;
            margin-bottom: 20px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            overflow: hidden;
            transition: all 0.3s ease;
        }
        
        .section-editor:hover {
            border-color: rgba(255, 68, 68, 0.3);
        }
        
        .section-editor-header {
            padding: 20px;
            background: rgba(255, 255, 255, 0.05);
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .section-editor-header h4 {
            color: white;
            display: flex;
            align-items: center;
            gap: 10px;
            margin: 0;
        }
        
        .section-position {
            background: rgba(255, 68, 68, 0.3);
            color: #ff4444;
            padding: 4px 10px;
            border-radius: 20px;
            font-size: 0.8em;
            font-weight: 700;
        }
        
        .section-order-controls {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }
        
        .btn-move-section {
            background: rgba(255, 255, 255, 0.1);
            border: none;
            border-radius: 6px;
            padding: 5px 10px;
            cursor: pointer;
            font-size: 0.9em;
            transition: all 0.2s ease;
        }
        
        .btn-move-section:hover:not([disabled]) {
            background: rgba(255, 68, 68, 0.3);
            transform: scale(1.1);
        }
        
        .btn-move-section[disabled] {
            cursor: not-allowed;
        }
        
        .section-editor-controls {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }
        
        .section-editor-controls button {
            padding: 8px 15px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.85em;
            transition: all 0.3s ease;
        }
        
        .btn-edit-section {
            background: #3b82f6;
            color: white;
        }
        
        .btn-toggle-section {
            background: rgba(255, 255, 255, 0.1);
            color: white;
        }
        
        .btn-expand-section {
            background: rgba(139, 92, 246, 0.3);
            color: white;
        }
        
        .btn-expand-section:hover {
            background: rgba(139, 92, 246, 0.5);
        }
        
        .btn-delete-section {
            background: #ef4444;
            color: white;
        }
        
        .section-editor-content {
            padding: 20px;
            display: none;
            background: rgba(0, 0, 0, 0.2);
        }
        
        .section-editor-content.open {
            display: block;
        }
        /* Content Blocks */
        
        .content-blocks {
            display: grid;
            gap: 15px;
        }
        
        .content-block {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            padding: 15px;
            display: flex;
            gap: 15px;
            align-items: center;
            border: 1px solid rgba(255, 255, 255, 0.1);
            cursor: grab;
        }
        
        .content-block:active {
            cursor: grabbing;
        }
        
        .content-block-preview {
            width: 80px;
            height: 80px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
        }
        
        .content-block-preview img {
            max-width: 100%;
            max-height: 100%;
            object-fit: cover;
        }
        
        .content-block-preview .placeholder {
            font-size: 30px;
            opacity: 0.5;
        }
        
        .content-block-info {
            flex: 1;
        }
        
        .content-block-info h5 {
            color: white;
            margin-bottom: 5px;
        }
        
        .content-block-info p {
            color: rgba(255, 255, 255, 0.6);
            font-size: 0.85em;
        }
        
        .content-block-actions {
            display: flex;
            gap: 8px;
        }
        
        .content-block-actions button {
            padding: 8px 12px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.8em;
        }
        /* Page Manager */
        
        .pages-list {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        .page-item {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            padding: 15px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .page-item-info {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .page-item-info .page-icon {
            font-size: 1.5em;
        }
        
        .page-item-info h4 {
            color: white;
            margin-bottom: 3px;
        }
        
        .page-item-info p {
            color: rgba(255, 255, 255, 0.5);
            font-size: 0.85em;
        }
        
        .page-item-actions {
            display: flex;
            gap: 10px;
        }
        /* Add New Button */
        
        .btn-add-new {
            padding: 15px 25px;
            background: linear-gradient(135deg, #22c55e, #16a34a);
            border: none;
            border-radius: 10px;
            color: white;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 10px;
            transition: all 0.3s ease;
        }
        
        .btn-add-new:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(34, 197, 94, 0.4);
        }
        /* Modal Editor */
        
        .editor-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.95);
            z-index: 30000;
            display: none;
            align-items: center;
            justify-content: center;
        }
        
        .editor-modal.active {
            display: flex;
        }
        
        .editor-modal-content {
            background: linear-gradient(135deg, #1a1a2e, #16213e);
            border-radius: 20px;
            width: 95%;
            max-width: 800px;
            max-height: 90vh;
            overflow: hidden;
            border: 2px solid rgba(255, 68, 68, 0.3);
        }
        
        .editor-modal-header {
            padding: 20px 25px;
            background: rgba(0, 0, 0, 0.3);
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .editor-modal-header h3 {
            color: #ff4444;
            font-size: 1.3em;
        }
        
        .editor-modal-body {
            padding: 25px;
            max-height: 60vh;
            overflow-y: auto;
        }
        
        .editor-form-group {
            margin-bottom: 20px;
        }
        
        .editor-form-group label {
            display: block;
            color: white;
            font-weight: 600;
            margin-bottom: 10px;
        }
        
        .editor-form-group input,
        .editor-form-group textarea,
        .editor-form-group select {
            width: 100%;
            padding: 12px 15px;
            background: rgba(255, 255, 255, 0.08);
            border: 2px solid rgba(255, 255, 255, 0.15);
            border-radius: 10px;
            color: white;
            font-size: 1em;
        }
        
        .editor-form-group textarea {
            min-height: 120px;
            resize: vertical;
        }
        
        .editor-form-group input:focus,
        .editor-form-group textarea:focus {
            border-color: #ff4444;
            outline: none;
        }
        
        .editor-modal-footer {
            padding: 20px 25px;
            background: rgba(0, 0, 0, 0.2);
            display: flex;
            gap: 15px;
            justify-content: flex-end;
        }
        
        .editor-modal-footer button {
            padding: 12px 25px;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
        }
        
        .btn-save-editor {
            background: linear-gradient(135deg, #ff4444, #cc0000);
            color: white;
        }
        
        .btn-cancel-editor {
            background: rgba(255, 255, 255, 0.1);
            color: white;
        }
        /* Éditeur visuel de page */
        
        .visual-page-editor {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.95);
            z-index: 30000;
            display: none;
        }
        
        .visual-page-editor.active {
            display: flex;
        }
        
        .visual-editor-sidebar {
            width: 350px;
            background: linear-gradient(135deg, #1a1a2e, #16213e);
            border-right: 2px solid rgba(255, 68, 68, 0.3);
            display: flex;
            flex-direction: column;
            overflow-y: auto;
        }
        
        .visual-editor-sidebar-header {
            padding: 20px;
            background: rgba(0, 0, 0, 0.3);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .visual-editor-sidebar-header h3 {
            color: #ff4444;
            font-size: 1.2em;
            margin-bottom: 10px;
        }
        
        .visual-editor-tabs {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }
        
        .visual-editor-tab {
            flex: 1;
            padding: 8px 12px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 6px;
            color: white;
            cursor: pointer;
            text-align: center;
            font-size: 0.85em;
            transition: all 0.3s ease;
        }
        
        .visual-editor-tab.active {
            background: #ff4444;
            border-color: #ff4444;
        }
        
        .visual-editor-sidebar-content {
            padding: 20px;
            flex: 1;
        }
        
        .editor-section {
            display: none;
        }
        
        .editor-section.active {
            display: block;
        }
        
        .editor-field {
            margin-bottom: 20px;
        }
        
        .editor-field label {
            display: block;
            color: white;
            font-weight: 600;
            margin-bottom: 8px;
            font-size: 0.9em;
        }
        
        .editor-field input,
        .editor-field textarea {
            width: 100%;
            padding: 10px 12px;
            background: rgba(255, 255, 255, 0.08);
            border: 2px solid rgba(255, 255, 255, 0.15);
            border-radius: 8px;
            color: white;
            font-size: 0.95em;
        }
        
        .editor-field textarea {
            min-height: 80px;
            resize: vertical;
        }
        
        .editor-field input:focus,
        .editor-field textarea:focus {
            border-color: #ff4444;
            outline: none;
        }
        
        .social-links-editor {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .social-link-item {
            background: rgba(255, 255, 255, 0.05);
            padding: 15px;
            border-radius: 10px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .social-link-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 10px;
        }
        
        .social-link-icon {
            font-size: 1.5em;
        }
        
        .social-link-name {
            color: white;
            font-weight: 600;
            flex: 1;
        }
        
        .visual-editor-preview {
            flex: 1;
            background: linear-gradient(135deg, #001f3f 0%, #0051a8 100%);
            position: relative;
            overflow: auto;
        }
        
        #visualPreviewContent {
            min-height: 100%;
            width: 100%;
        }
        
        .visual-editor-toolbar {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            background: rgba(0, 0, 0, 0.9);
            padding: 15px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 100;
            border-bottom: 2px solid #ff4444;
        }
        
        .visual-editor-toolbar-left {
            display: flex;
            gap: 15px;
            align-items: center;
        }
        
        .visual-editor-toolbar button {
            padding: 8px 16px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
        }
        
        .btn-close-visual-editor {
            background: rgba(255, 255, 255, 0.1);
            color: white;
        }
        
        .btn-close-visual-editor:hover {
            background: rgba(255, 255, 255, 0.2);
        }
        
        .btn-save-visual-editor {
            background: linear-gradient(135deg, #ff4444, #cc0000);
            color: white;
        }
        
        .btn-save-visual-editor:hover {
            transform: scale(1.05);
        }
        
        .preview-frame {
            position: absolute;
            top: 70px;
            left: 0;
            right: 0;
            bottom: 0;
            border: none;
            width: 100%;
            height: calc(100% - 70px);
        }
        
        .editable-element {
            position: relative;
            cursor: pointer;
            transition: all 0.2s ease;
            padding: 2px;
            border-radius: 4px;
        }
        
        .editable-element:hover {
            background: rgba(255, 68, 68, 0.1);
            outline: 2px dashed #ff4444;
            outline-offset: 2px;
        }
        
        .editable-element.selected {
            background: rgba(255, 68, 68, 0.15);
            outline: 3px solid #ff4444;
            outline-offset: 2px;
            box-shadow: 0 0 0 4px rgba(255, 68, 68, 0.2);
        }
        /* Indicateur visuel pour les textes cliquables */
        
        .editable-element::before {
            content: '✏️';
            position: absolute;
            top: -8px;
            right: -8px;
            background: #ff4444;
            color: white;
            font-size: 10px;
            padding: 2px 4px;
            border-radius: 50%;
            opacity: 0;
            transition: opacity 0.2s ease;
            pointer-events: none;
        }
        
        .editable-element:hover::before {
            opacity: 1;
        }
        /* Blocs draggables - Style iOS/Android */
        
        .draggable-block {
            cursor: move;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            border: 3px solid transparent;
            border-radius: 15px;
            position: relative;
            margin: 15px 0;
        }
        
        .draggable-block:hover {
            border-color: rgba(255, 68, 68, 0.4);
            background: rgba(255, 68, 68, 0.03);
            box-shadow: 0 4px 20px rgba(255, 68, 68, 0.15);
            transform: translateY(-2px);
        }
        /* Bloc en cours de déplacement */
        
        .draggable-block.dragging {
            opacity: 0.7;
            transform: scale(1.05) rotate(2deg);
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.4);
            z-index: 1000;
            border-color: #ff4444;
        }
        /* Zone de drop active */
        
        .draggable-block.drag-over {
            border-color: #ff4444;
            background: rgba(255, 68, 68, 0.15);
            transform: translateY(5px);
            box-shadow: inset 0 0 30px rgba(255, 68, 68, 0.3);
        }
        /* Placeholder pour montrer où le bloc va atterrir */
        
        .drag-placeholder {
            background: linear-gradient(135deg, rgba(255, 68, 68, 0.2), rgba(255, 68, 68, 0.1));
            border: 3px dashed #ff4444;
            border-radius: 15px;
            height: 200px;
            margin: 15px 0;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5em;
            color: #ff4444;
            animation: pulse 1s ease-in-out infinite;
        }
        
        @keyframes pulse {
            0%,
            100% {
                opacity: 0.5;
                transform: scale(0.98);
            }
            50% {
                opacity: 1;
                transform: scale(1.02);
            }
        }
        /* Poignée de glissement - Style iOS */
        
        .drag-handle {
            position: absolute;
            top: 15px;
            right: 15px;
            background: linear-gradient(135deg, #ff4444, #cc0000);
            color: white;
            padding: 12px 16px;
            border-radius: 12px;
            font-size: 1.3em;
            font-weight: bold;
            cursor: grab;
            z-index: 100;
            box-shadow: 0 4px 15px rgba(255, 68, 68, 0.4);
            user-select: none;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .drag-handle:active {
            cursor: grabbing;
            transform: scale(0.95);
        }
        
        .drag-handle:hover {
            background: linear-gradient(135deg, #ff5555, #dd0000);
            transform: scale(1.15);
            box-shadow: 0 6px 25px rgba(255, 68, 68, 0.6);
        }
        /* Animation au survol de la poignée */
        
        .drag-handle::before {
            content: '';
            position: absolute;
            top: -5px;
            left: -5px;
            right: -5px;
            bottom: -5px;
            border-radius: 15px;
            background: rgba(255, 68, 68, 0.2);
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        
        .drag-handle:hover::before {
            opacity: 1;
        }
        /* Image Upload Area */
        
        .image-upload-area {
            border: 2px dashed rgba(255, 255, 255, 0.3);
            border-radius: 12px;
            padding: 40px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .image-upload-area:hover {
            border-color: #ff4444;
            background: rgba(255, 68, 68, 0.05);
        }
        
        .image-upload-area .upload-icon {
            font-size: 50px;
            margin-bottom: 15px;
        }
        
        .image-upload-area p {
            color: rgba(255, 255, 255, 0.7);
        }
        
        .image-upload-preview {
            margin-top: 15px;
            max-height: 200px;
            overflow: hidden;
            border-radius: 10px;
        }
        
        .image-upload-preview img {
            max-width: 100%;
            max-height: 200px;
            object-fit: contain;
        }
        /* Live Preview Button */
        
        .btn-live-preview {
            position: fixed;
            bottom: 30px;
            right: 30px;
            padding: 15px 25px;
            background: linear-gradient(135deg, #8b5cf6, #6d28d9);
            border: none;
            border-radius: 50px;
            color: white;
            font-weight: 600;
            cursor: pointer;
            display: none;
            align-items: center;
            gap: 10px;
            z-index: 19999;
            box-shadow: 0 5px 25px rgba(139, 92, 246, 0.4);
        }
        
        .btn-live-preview.visible {
            display: flex;
        }
        /* Sortable placeholder */
        
        .sortable-ghost {
            opacity: 0.4;
            background: rgba(255, 68, 68, 0.2);
        }
        
        .sortable-drag {
            opacity: 0.9;
        }
        /* ============ POP-UP CADRE ============ */
        
        .card-popup-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.85);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            z-index: 25000;
            display: none;
            align-items: center;
            justify-content: center;
            opacity: 0;
            transition: opacity 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            padding: 20px;
        }
        
        .card-popup-overlay.active {
            display: flex;
            opacity: 1;
        }
        
        .card-popup {
            background: rgba(10, 15, 25, 0.95);
            backdrop-filter: blur(40px) saturate(180%);
            -webkit-backdrop-filter: blur(40px) saturate(180%);
            border-radius: 28px;
            width: 100%;
            max-width: 1200px;
            max-height: 95vh;
            overflow: hidden;
            box-shadow: 0 35px 100px rgba(0, 0, 0, 0.6), 0 0 0 1px rgba(221, 172, 11, 0.15) inset, 0 0 60px rgba(221, 172, 11, 0.08);
            transform: translateY(40px) scale(0.92);
            transition: transform 0.6s cubic-bezier(0.34, 1.56, 0.64, 1);
            display: flex;
            flex-direction: column;
            position: relative;
            border: 1px solid rgba(255, 255, 255, 0.05);
        }
        
        .card-popup::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: radial-gradient(circle at 20% 50%, rgba(221, 172, 11, 0.08) 0%, transparent 50%), radial-gradient(circle at 80% 80%, rgba(196, 209, 12, 0.06) 0%, transparent 50%), linear-gradient(135deg, rgba(255, 255, 255, 0.02) 0%, transparent 50%);
            pointer-events: none;
            z-index: 0;
            animation: subtleGlow 8s ease-in-out infinite;
        }
        
        @keyframes subtleGlow {
            0%,
            100% {
                opacity: 1;
            }
            50% {
                opacity: 0.7;
            }
        }
        
        .card-popup>* {
            position: relative;
            z-index: 1;
        }
        
        .card-popup-overlay.active .card-popup {
            transform: translateY(0) scale(1);
        }
        
        .card-popup-header {
            padding: 50px 60px 30px 60px;
            background: linear-gradient(135deg, rgba(15, 20, 30, 0.6) 0%, rgba(20, 25, 35, 0.4) 100%);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            position: relative;
            overflow: hidden;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }
        
        .card-popup-header::before {
            content: none;
        }
        
        @keyframes shimmerGlow {
            0%,
            100% {
                background-position: 0% 0%;
                opacity: 1;
            }
            50% {
                background-position: 100% 0%;
                opacity: 0.8;
            }
        }
        
        .card-popup-header::after {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.03), transparent);
            animation: headerShimmer 8s ease-in-out infinite;
        }
        
        @keyframes headerShimmer {
            0% {
                left: -100%;
            }
            50%,
            100% {
                left: 200%;
            }
        }
        
        .card-popup-header h2 {
            color: #ffffff;
            font-family: 'Oswald', sans-serif;
            font-size: 2.8em;
            font-weight: 600;
            letter-spacing: -0.5px;
            line-height: 1.2;
            margin: 0;
            padding-right: 60px;
            position: relative;
            z-index: 1;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
        }
        
        .card-popup-header h2::after {
            content: none;
        }
        
        .card-popup-close {
            position: absolute;
            top: 25px;
            right: 25px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: white;
            font-size: 1.5em;
            cursor: pointer;
            width: 45px;
            height: 45px;
            border-radius: 50%;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10;
        }
        
        .card-popup-close:hover {
            background: rgba(221, 172, 11, 0.2);
            border-color: #ddac0b;
            transform: rotate(90deg) scale(1.1);
        }
        
        .card-popup-content {
            padding: 50px 60px 60px 60px;
            max-height: calc(95vh - 200px);
            overflow-y: auto;
            background: rgba(255, 255, 255, 0.02);
            position: relative;
        }
        
        .card-popup-content::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 1px;
            background: linear-gradient(90deg, transparent, rgba(221, 172, 11, 0.15) 20%, rgba(221, 172, 11, 0.15) 80%, transparent);
        }
        
        .card-popup-content::-webkit-scrollbar {
            width: 8px;
        }
        
        .card-popup-content::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.03);
            border-radius: 10px;
        }
        
        .card-popup-content::-webkit-scrollbar-thumb {
            background: linear-gradient(180deg, rgba(221, 172, 11, 0.5) 0%, rgba(196, 209, 12, 0.5) 100%);
            border-radius: 10px;
            transition: background 0.3s ease;
        }
        
        .card-popup-content::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(180deg, rgba(221, 172, 11, 0.8) 0%, rgba(196, 209, 12, 0.8) 100%);
        }
        /* Animations popup */
        
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        @keyframes fadeIn {
            from {
                opacity: 0;
            }
            to {
                opacity: 1;
            }
        }
        /* Texte du popup */
        
        .popup-text-content {
            color: rgba(255, 255, 255, 0.85);
            line-height: 1.9;
            margin-bottom: 40px;
            font-size: 1.05em;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            animation: fadeInUp 0.6s ease-out 0.2s both;
        }
        
        .popup-text-content h3 {
            color: rgba(255, 255, 255, 0.95);
            margin: 40px 0 20px 0;
            font-size: 1.8em;
            font-weight: 600;
            letter-spacing: -0.3px;
            position: relative;
            padding-left: 20px;
            transition: color 0.3s ease;
            text-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
        }
        
        .popup-text-content h3::before {
            content: '';
            position: absolute;
            left: 0;
            top: 50%;
            transform: translateY(-50%);
            width: 5px;
            height: 70%;
            background: linear-gradient(180deg, #ddac0b 0%, #c4d10c 100%);
            border-radius: 3px;
            box-shadow: 0 0 10px rgba(221, 172, 11, 0.3);
            transition: all 0.3s ease;
        }
        
        .popup-text-content h3:hover::before {
            width: 6px;
            box-shadow: 0 0 15px rgba(221, 172, 11, 0.5);
        }
        
        .popup-text-content h3:first-child {
            margin-top: 0;
        }
        
        .popup-text-content p {
            margin-bottom: 20px;
            text-align: justify;
            color: rgba(255, 255, 255, 0.75);
        }
        
        .popup-text-content p:first-of-type {
            font-size: 1.15em;
            color: rgba(255, 255, 255, 0.9);
            font-weight: 500;
        }
        
        .popup-text-content ul,
        .popup-text-content ol {
            margin-left: 30px;
            margin-bottom: 25px;
            color: rgba(255, 255, 255, 0.75);
        }
        
        .popup-text-content li {
            margin-bottom: 12px;
            padding-left: 10px;
        }
        
        .popup-text-content ul li::marker {
            color: #ddac0b;
        }
        
        .popup-text-content strong {
            color: #0a1628;
            font-weight: 600;
        }
        
        .popup-text-content em {
            color: #2c3e50;
            font-style: italic;
        }
        /* Carrousel du popup */
        
        .popup-carousel {
            position: relative;
            width: 100%;
            margin-bottom: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 30px 0;
            animation: fadeIn 0.8s ease-out 0.1s both;
        }
        
        .popup-carousel-track {
            display: flex;
            transition: transform 0.6s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            align-items: center;
            justify-content: center;
            width: 100%;
        }
        
        .popup-carousel-slide {
            min-width: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            padding: 0 80px;
        }
        
        .popup-carousel-slide img {
            max-width: 70%;
            max-height: 600px;
            object-fit: contain;
            border-radius: 8px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            position: relative;
            z-index: 3;
        }
        /* Cadres d'arrière-plan style "multiple frames" */
        
        .popup-carousel-slide::before,
        .popup-carousel-slide::after {
            content: '';
            position: absolute;
            border: 3px solid rgba(221, 172, 11, 0.3);
            border-radius: 8px;
            pointer-events: none;
        }
        
        .popup-carousel-slide::before {
            width: calc(70% - 30px);
            height: calc(100% - 90px);
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) translate(-25px, -25px) rotate(-2deg);
            z-index: 1;
        }
        
        .popup-carousel-slide::after {
            width: calc(70% - 50px);
            height: calc(100% - 110px);
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) translate(25px, 25px) rotate(1.5deg);
            z-index: 2;
            border-color: rgba(196, 209, 12, 0.2);
        }
        
        .popup-carousel-controls {
            position: absolute;
            top: 50%;
            left: 0;
            right: 0;
            transform: translateY(-50%);
            display: flex;
            justify-content: space-between;
            padding: 0 30px;
            pointer-events: none;
            z-index: 10;
        }
        
        .popup-carousel-btn {
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, #ddac0b 0%, #c4d10c 100%);
            border: none;
            border-radius: 50%;
            color: white;
            font-size: 1.4em;
            cursor: pointer;
            pointer-events: auto;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 5px 20px rgba(221, 172, 11, 0.3);
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .popup-carousel-btn:hover {
            background: linear-gradient(135deg, #c4d10c 0%, #ddac0b 100%);
            transform: scale(1.15);
            box-shadow: 0 8px 30px rgba(221, 172, 11, 0.5);
        }
        
        .popup-carousel-btn:active {
            transform: scale(1.05);
        }
        
        .popup-carousel-indicators {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 12px;
            margin-top: 30px;
            position: relative;
        }
        
        .popup-carousel-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #cbd5e0;
            border: none;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
        }
        
        .popup-carousel-dot.active {
            background: linear-gradient(135deg, #ddac0b 0%, #c4d10c 100%);
            width: 32px;
            border-radius: 4px;
            box-shadow: 0 2px 8px rgba(221, 172, 11, 0.4);
        }
        
        .popup-carousel-dot:hover:not(.active) {
            background: #94a3b8;
            transform: scale(1.3);
        }
        /* Images fixes du popup */
        
        .popup-images-grid {
            display: grid;
            gap: 16px;
            margin-bottom: 40px;
            animation: fadeInUp 0.6s ease-out 0.3s both;
        }
        
        .popup-images-grid.layout-1 {
            grid-template-columns: 1fr;
        }
        
        .popup-images-grid.layout-2 {
            grid-template-columns: repeat(2, 1fr);
        }
        
        .popup-images-grid.layout-3 {
            grid-template-columns: repeat(3, 1fr);
        }
        
        .popup-images-grid.layout-2-1 {
            grid-template-columns: 2fr 1fr;
        }
        
        .popup-images-grid.layout-1-2 {
            grid-template-columns: 1fr 2fr;
        }
        
        .popup-image-item {
            border-radius: 12px;
            overflow: hidden;
            aspect-ratio: 4/3;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1), 0 0 0 1px rgba(221, 172, 11, 0.05) inset;
            transition: all 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            position: relative;
        }
        
        .popup-image-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
            transition: left 0.6s ease;
            z-index: 1;
            pointer-events: none;
        }
        
        .popup-image-item:hover::before {
            left: 100%;
        }
        
        .popup-image-item:hover {
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.15), 0 0 0 1px rgba(221, 172, 11, 0.2) inset, 0 0 30px rgba(221, 172, 11, 0.1);
            transform: translateY(-6px);
        }
        
        .popup-image-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.6s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .popup-image-item:hover img {
            transform: scale(1.1);
        }
        /* Responsive design pour popup */
        
        @media (max-width: 768px) {
            .card-popup-overlay {
                padding: 10px;
            }
            .card-popup {
                max-width: 100%;
                max-height: 98vh;
                border-radius: 16px;
            }
            .card-popup-header {
                padding: 35px 30px 25px 30px;
            }
            .card-popup-header h2 {
                font-size: 2em;
                padding-right: 50px;
            }
            .card-popup-close {
                width: 40px;
                height: 40px;
                font-size: 1.3em;
                top: 20px;
                right: 20px;
            }
            .card-popup-content {
                padding: 35px 30px 40px 30px;
                max-height: calc(98vh - 150px);
            }
            .popup-text-content {
                font-size: 1em;
            }
            .popup-text-content h3 {
                font-size: 1.5em;
                margin: 30px 0 15px 0;
            }
            .popup-images-grid.layout-2,
            .popup-images-grid.layout-3,
            .popup-images-grid.layout-2-1,
            .popup-images-grid.layout-1-2 {
                grid-template-columns: 1fr;
            }
            .popup-carousel-slide {
                padding: 0 60px;
            }
            .popup-carousel-slide img {
                max-width: 80%;
            }
            .popup-carousel-btn {
                width: 45px;
                height: 45px;
                font-size: 1.2em;
            }
            .popup-carousel-controls {
                padding: 0 15px;
            }
        }
        
        @media (max-width: 480px) {
            .card-popup-header {
                padding: 25px 20px 20px 20px;
            }
            .card-popup-header h2 {
                font-size: 1.6em;
            }
            .card-popup-content {
                padding: 25px 20px 30px 20px;
            }
            .popup-text-content h3 {
                font-size: 1.3em;
            }
            .popup-carousel {
                padding: 20px 0;
            }
            .popup-carousel-slide {
                padding: 0 40px;
            }
            .popup-carousel-slide img {
                max-width: 90%;
                max-height: 400px;
            }
            .popup-carousel-slide::before,
            .popup-carousel-slide::after {
                display: none;
            }
            .popup-carousel-controls {
                padding: 0 5px;
            }
            .popup-carousel-btn {
                width: 40px;
                height: 40px;
                font-size: 1.1em;
            }
            .popup-carousel-indicators {
                gap: 8px;
                margin-top: 20px;
            }
            .popup-carousel-dot.active {
                width: 24px;
            }
        }
        /* Indication cliquable sur les cartes */
        
        .gallery-item {
            cursor: pointer;
            position: relative;
        }
        /* Admin - Éditeur de popup */
        
        .popup-editor-section {
            background: rgba(255, 255, 255, 0.03);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 25px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .popup-editor-section h4 {
            color: #ddac0b;
            margin-bottom: 20px;
            font-size: 1.2em;
        }
        
        .text-editor-toolbar {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin-bottom: 15px;
            padding: 10px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
        }
        
        .text-editor-toolbar button {
            padding: 8px 12px;
            background: rgba(255, 255, 255, 0.1);
            border: none;
            border-radius: 6px;
            color: white;
            cursor: pointer;
            font-size: 0.9em;
            transition: all 0.2s ease;
        }
        
        .text-editor-toolbar button:hover {
            background: rgba(221, 172, 11, 0.3);
        }
        
        .text-editor-toolbar button.active {
            background: #ddac0b;
            color: #001f3f;
        }
        
        .text-editor-toolbar select {
            padding: 8px 12px;
            background: rgba(255, 255, 255, 0.1);
            border: none;
            border-radius: 6px;
            color: white;
            cursor: pointer;
        }
        
        .rich-text-editor {
            min-height: 200px;
            padding: 20px;
            background: rgba(0, 0, 0, 0.3);
            border: 2px solid rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            color: white;
            font-size: 1em;
            line-height: 1.6;
            overflow-y: auto;
        }
        
        .rich-text-editor:focus {
            outline: none;
            border-color: #ddac0b;
        }
        
        .image-layout-selector {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            margin-bottom: 20px;
        }
        
        .layout-option {
            width: 100px;
            height: 70px;
            background: rgba(255, 255, 255, 0.05);
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 5px;
            transition: all 0.3s ease;
        }
        
        .layout-option:hover {
            border-color: rgba(221, 172, 11, 0.5);
        }
        
        .layout-option.selected {
            border-color: #ddac0b;
            background: rgba(221, 172, 11, 0.2);
        }
        
        .layout-option .layout-box {
            background: rgba(255, 255, 255, 0.3);
            border-radius: 3px;
        }
        
        .popup-images-manager {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        
        .popup-image-upload {
            aspect-ratio: 4/3;
            border: 2px dashed rgba(255, 255, 255, 0.3);
            border-radius: 10px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .popup-image-upload:hover {
            border-color: #ddac0b;
            background: rgba(221, 172, 11, 0.1);
        }
        
        .popup-image-upload span {
            font-size: 2em;
            margin-bottom: 10px;
        }
        
        .popup-image-preview {
            position: relative;
            aspect-ratio: 4/3;
            border-radius: 10px;
            overflow: hidden;
        }
        
        .popup-image-preview img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .popup-image-preview .remove-btn {
            position: absolute;
            top: 5px;
            right: 5px;
            width: 30px;
            height: 30px;
            background: rgba(255, 68, 68, 0.9);
            border: none;
            border-radius: 50%;
            color: white;
            cursor: pointer;
            font-size: 1.2em;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        @media (max-width: 768px) {
            .card-popup {
                width: 100%;
                height: 100%;
                max-height: 100%;
                border-radius: 0;
            }
            .popup-images-grid.layout-2,
            .popup-images-grid.layout-3,
            .popup-images-grid.layout-2-1,
            .popup-images-grid.layout-1-2 {
                grid-template-columns: 1fr;
            }
        }
        /* Logs */
        
        .logs-container {
            background: #0d1117;
            border-radius: 12px;
            padding: 20px;
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 13px;
            max-height: 500px;
            overflow-y: auto;
        }
        
        .log-entry {
            padding: 8px 12px;
            border-radius: 6px;
            margin-bottom: 8px;
            display: flex;
            gap: 15px;
            align-items: flex-start;
        }
        
        .log-entry.info {
            background: rgba(59, 130, 246, 0.1);
            border-left: 3px solid #3b82f6;
        }
        
        .log-entry.success {
            background: rgba(34, 197, 94, 0.1);
            border-left: 3px solid #22c55e;
        }
        
        .log-entry.warning {
            background: rgba(234, 179, 8, 0.1);
            border-left: 3px solid #eab308;
        }
        
        .log-entry.error {
            background: rgba(239, 68, 68, 0.1);
            border-left: 3px solid #ef4444;
        }
        
        .log-time {
            color: #6b7280;
            white-space: nowrap;
            font-size: 12px;
        }
        
        .log-type {
            font-weight: 700;
            text-transform: uppercase;
            font-size: 11px;
            padding: 2px 8px;
            border-radius: 4px;
            white-space: nowrap;
        }
        
        .log-entry.info .log-type {
            background: #3b82f6;
            color: white;
        }
        
        .log-entry.success .log-type {
            background: #22c55e;
            color: white;
        }
        
        .log-entry.warning .log-type {
            background: #eab308;
            color: black;
        }
        
        .log-entry.error .log-type {
            background: #ef4444;
            color: white;
        }
        
        .log-message {
            color: #e5e7eb;
            flex: 1;
            word-break: break-word;
        }
        
        .logs-toolbar {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        .logs-toolbar button {
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
        }
        
        .btn-clear-logs {
            background: #ef4444;
            color: white;
        }
        
        .btn-export-logs {
            background: #3b82f6;
            color: white;
        }
        
        .btn-refresh-logs {
            background: #22c55e;
            color: white;
        }
        /* Images Manager */
        
        .images-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 25px;
        }
        
        .image-card {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            overflow: hidden;
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.3s ease;
        }
        /* Adaptation automatique selon la forme de l'image */
        
        .image-card.portrait .image-preview {
            min-height: 300px;
            max-height: 450px;
        }
        
        .image-card.landscape .image-preview {
            min-height: 150px;
            max-height: 250px;
        }
        
        .image-card.square .image-preview {
            min-height: 250px;
            max-height: 250px;
        }
        
        .image-card:hover {
            border-color: rgba(255, 68, 68, 0.5);
            transform: translateY(-5px);
        }
        
        .image-preview {
            width: 100%;
            min-height: 180px;
            max-height: 400px;
            background: rgba(0, 0, 0, 0.3);
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            position: relative;
        }
        
        .image-preview img {
            width: 100%;
            height: auto;
            max-height: 100%;
            object-fit: contain;
            object-position: center;
        }
        /* Pour les images en mode cover (pour mieux remplir l'espace) */
        
        .image-card.landscape .image-preview img,
        .image-card.square .image-preview img {
            height: 100%;
            object-fit: cover;
        }
        
        .image-card.portrait .image-preview img {
            width: auto;
            height: 100%;
            max-width: 100%;
            object-fit: contain;
        }
        
        .image-preview .placeholder-icon {
            font-size: 60px;
            opacity: 0.5;
        }
        
        .image-info {
            padding: 20px;
        }
        
        .image-info h4 {
            color: white;
            margin-bottom: 10px;
            font-size: 1.1em;
        }
        
        .image-info p {
            color: rgba(255, 255, 255, 0.6);
            font-size: 0.9em;
            margin-bottom: 15px;
        }
        
        .image-dimensions {
            display: inline-block;
            background: rgba(221, 172, 11, 0.2);
            color: #ddac0b;
            padding: 4px 10px;
            border-radius: 5px;
            font-size: 0.85em;
            margin-bottom: 10px;
            border: 1px solid rgba(221, 172, 11, 0.3);
        }
        
        .image-card.portrait .image-dimensions {
            background: rgba(65, 105, 225, 0.2);
            color: #6495ed;
            border-color: rgba(65, 105, 225, 0.3);
        }
        
        .image-card.landscape .image-dimensions {
            background: rgba(34, 197, 94, 0.2);
            color: #22c55e;
            border-color: rgba(34, 197, 94, 0.3);
        }
        
        .image-actions {
            display: flex;
            gap: 10px;
        }
        
        .btn-change-image {
            flex: 1;
            padding: 10px;
            background: linear-gradient(135deg, #ff4444, #cc0000);
            border: none;
            border-radius: 8px;
            color: white;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .btn-change-image:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(255, 68, 68, 0.4);
        }
        
        .btn-remove-image {
            padding: 10px 15px;
            background: rgba(255, 255, 255, 0.1);
            border: none;
            border-radius: 8px;
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .btn-remove-image:hover {
            background: rgba(255, 255, 255, 0.2);
        }
        /* Admin Login */
        
        .admin-login-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            backdrop-filter: blur(10px);
            z-index: 20001;
            display: none;
            align-items: center;
            justify-content: center;
        }
        
        .admin-login-overlay.active {
            display: flex;
        }
        
        .admin-login-box {
            background: linear-gradient(135deg, #1a1a2e, #16213e);
            border-radius: 20px;
            padding: 40px;
            width: 90%;
            max-width: 400px;
            border: 2px solid rgba(255, 68, 68, 0.3);
            text-align: center;
        }
        
        .admin-login-box h2 {
            color: #ff4444;
            font-family: 'Oswald', sans-serif;
            font-size: 2em;
            margin-bottom: 10px;
        }
        
        .admin-login-box p {
            color: rgba(255, 255, 255, 0.6);
            margin-bottom: 30px;
        }
        
        .admin-login-box input {
            width: 100%;
            padding: 15px 20px;
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 12px;
            color: white;
            font-size: 1em;
            margin-bottom: 20px;
        }
        
        .admin-login-box input:focus {
            outline: none;
            border-color: #ff4444;
        }
        
        .admin-login-box button {
            width: 100%;
            padding: 15px;
            background: linear-gradient(135deg, #ff4444, #cc0000);
            border: none;
            border-radius: 12px;
            color: white;
            font-weight: 700;
            font-size: 1.1em;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .admin-login-box button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(255, 68, 68, 0.4);
        }
        
        .admin-login-error {
            color: #ff4444;
            margin-top: 15px;
            display: none;
        }
        
        .admin-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .stat-card {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 25px;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .stat-card h3 {
            color: rgba(255, 255, 255, 0.6);
            font-size: 0.9em;
            margin-bottom: 10px;
            text-transform: uppercase;
        }
        
        .stat-card .stat-value {
            color: #ff4444;
            font-size: 2.5em;
            font-weight: 700;
            font-family: 'Montserrat', sans-serif;
        }
        /* Hidden file input */
        
        .hidden-file-input {
            display: none;
        }
        /* ============ BANDEAU COOKIES (RGPD) ============ */
        
        .cookie-banner {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(135deg, rgba(0, 31, 63, 0.98), rgba(0, 81, 168, 0.98));
            backdrop-filter: blur(10px);
            padding: 25px;
            box-shadow: 0 -5px 30px rgba(0, 0, 0, 0.5);
            z-index: 10000;
            border-top: 3px solid #ddac0b;
            transform: translateY(100%);
            transition: transform 0.4s ease;
        }
        
        .cookie-banner.show {
            transform: translateY(0);
        }
        
        .cookie-banner-content {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 25px;
            flex-wrap: wrap;
        }
        
        .cookie-banner-text {
            flex: 1;
            min-width: 300px;
        }
        
        .cookie-banner-text h3 {
            color: white;
            margin: 0 0 10px 0;
            font-size: 1.3em;
        }
        
        .cookie-banner-text p {
            color: rgba(255, 255, 255, 0.85);
            margin: 0;
            line-height: 1.6;
        }
        
        .cookie-banner-text a {
            color: #ddac0b;
            text-decoration: underline;
        }
        
        .cookie-banner-actions {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }
        
        .cookie-btn {
            padding: 12px 25px;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1em;
            white-space: nowrap;
        }
        
        .cookie-btn-accept {
            background: linear-gradient(135deg, #22c55e, #16a34a);
            color: white;
        }
        
        .cookie-btn-accept:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(34, 197, 94, 0.4);
        }
        
        .cookie-btn-decline {
            background: rgba(255, 255, 255, 0.1);
            color: white;
            border: 2px solid rgba(255, 255, 255, 0.3);
        }
        
        .cookie-btn-decline:hover {
            background: rgba(255, 255, 255, 0.2);
        }
        
        .cookie-btn-settings {
            background: transparent;
            color: #ddac0b;
            border: 2px solid #ddac0b;
        }
        
        .cookie-btn-settings:hover {
            background: rgba(221, 172, 11, 0.1);
        }
        
        @media (max-width: 768px) {
            /* Admin Panel mobile */
            .admin-panel {
                width: 100%;
                height: 100%;
                max-height: 100%;
                border-radius: 0;
            }
            .admin-tab span {
                display: none;
            }
            .admin-tab-separator {
                display: none;
            }
            /* Sidebar admin mobile - pleine largeur */
            #adminSidebar.admin-sidebar {
                width: 100% !important;
                left: -100% !important;
            }
            #adminSidebar.admin-sidebar.active {
                left: 0 !important;
            }
            .admin-sidebar-header {
                padding: 15px;
            }
            .admin-sidebar-header h2 {
                font-size: 1.2em;
            }
            #adminSidebar .admin-nav-item {
                padding: 14px 15px !important;
                font-size: 0.95em !important;
            }
            /* Toggle admin sur mobile */
            .admin-sidebar-toggle {
                top: 15px;
                left: 15px;
                width: 42px;
                height: 42px;
                font-size: 16px;
                border-radius: 10px;
            }
            /* Panneau admin sections */
            .admin-panel-section {
                padding: 15px;
            }
            .admin-content-header {
                padding: 12px 15px;
                flex-direction: column;
                gap: 10px;
            }
            .admin-content-body {
                padding: 15px;
            }
            /* Images grid mobile */
            .images-grid {
                grid-template-columns: 1fr;
            }
            /* Moderation cards mobile */
            .moderation-user-card {
                flex-direction: column;
                align-items: flex-start;
                padding: 15px;
            }
            .moderation-user-actions {
                width: 100%;
                flex-direction: column;
            }
            .moderation-action-btn {
                width: 100%;
            }
            /* Cookie banner mobile */
            .cookie-banner-content {
                flex-direction: column;
                text-align: center;
            }
            .cookie-banner-actions {
                width: 100%;
                flex-direction: column;
            }
            .cookie-btn {
                width: 100%;
            }
            /* Formulaire d'inscription responsive */
            .auth-popup {
                max-width: 95%;
                padding: 25px;
            }
            #registerForm>div[style*="grid-template-columns: 1fr 1fr"] {
                grid-template-columns: 1fr !important;
            }
            /* Formulaires admin */
            .admin-form input,
            .admin-form textarea,
            .admin-form select {
                font-size: 16px; /* Évite le zoom sur iOS */
                padding: 12px;
            }
            /* Boutons admin */
            .admin-btn {
                padding: 10px 15px;
                font-size: 0.9em;
            }
        }

        /* Admin très petit écran */
        @media (max-width: 480px) {
            .admin-sidebar-toggle {
                top: 10px;
                left: 10px;
                width: 38px;
                height: 38px;
                font-size: 14px;
            }
            .admin-sidebar-header {
                padding: 12px;
            }
            .admin-sidebar-header h2 {
                font-size: 1.1em;
            }
            #adminSidebar .admin-nav-item {
                padding: 12px !important;
                font-size: 0.9em !important;
                gap: 10px !important;
            }
            .admin-panel-section {
                padding: 12px;
            }
            .admin-content-header {
                padding: 10px 12px;
            }
            .admin-content-body {
                padding: 12px;
            }
            .images-grid {
                gap: 10px;
            }
            .image-card {
                padding: 10px;
            }
            .image-card img {
                max-height: 120px;
            }
        }
    </style>
</head>

<body>
<!-- Overlay de chargement -->
<div id="page-loading-overlay" class="page-loading-overlay"></div>

<script>
    // Detecter si dans un iframe et ajouter la classe
    if (window.self !== window.top) {
        document.body.classList.add('in-iframe');
    }
</script>
    <!-- Rayons dorés animés en arrière-plan -->
    <!-- Étoiles scintillantes -->
    <div class="stars" id="stars"></div>

    <!-- Bandeau Cookies RGPD -->
    <div class="cookie-banner" id="cookieBanner">
        <div class="cookie-banner-content">
            <div class="cookie-banner-text">
                <h3>🍪 Nous utilisons des cookies</h3>
                <p>
                    Nous utilisons des cookies pour améliorer votre expérience, analyser le trafic et personnaliser le contenu. En continuant à utiliser notre site, vous acceptez notre utilisation des cookies conformément au RGPD.
                    <a href="#" onclick="event.preventDefault(); showPrivacyPolicy();">En savoir plus</a>
                </p>
            </div>
            <div class="cookie-banner-actions">
                <button class="cookie-btn cookie-btn-accept" onclick="acceptCookies()">
                    ✓ Accepter tout
                </button>
                <button class="cookie-btn cookie-btn-decline" onclick="declineCookies()">
                    ✗ Refuser
                </button>
            </div>
        </div>
    </div>

    <!-- Particules animées -->
    <!-- Overlay du panier -->
    <div class="cart-overlay" id="cartOverlay" onclick="toggleCartSidebar()"></div>

    <!-- Bouton Admin (visible seulement pour les admins) -->
    <!-- Admin Sidebar Toggle -->
    <button class="admin-sidebar-toggle" id="adminSidebarToggle" onclick="toggleAdminSidebar()">
        <svg class="admin-nav-icon" fill="currentColor" viewBox="0 0 20 20">
            <path fill-rule="evenodd" d="M11.49 3.17c-.38-1.56-2.6-1.56-2.98 0a1.532 1.532 0 01-2.286.948c-1.372-.836-2.942.734-2.106 2.106.54.886.061 2.042-.947 2.287-1.561.379-1.561 2.6 0 2.978a1.532 1.532 0 01.947 2.287c-.836 1.372.734 2.942 2.106 2.106a1.532 1.532 0 012.287.947c.379 1.561 2.6 1.561 2.978 0a1.533 1.533 0 012.287-.947c1.372.836 2.942-.734 2.106-2.106a1.533 1.533 0 01.947-2.287c1.561-.379 1.561-2.6 0-2.978a1.532 1.532 0 01-.947-2.287c.836-1.372-.734-2.942-2.106-2.106a1.532 1.532 0 01-2.287-.947zM10 13a3 3 0 100-6 3 3 0 000 6z" clip-rule="evenodd"/>
        </svg>
    </button>

    <!-- Admin Sidebar -->
    <div class="admin-sidebar" id="adminSidebar">
        <div class="admin-sidebar-header">
            <h2>
                <svg width="24" height="24" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M11.49 3.17c-.38-1.56-2.6-1.56-2.98 0a1.532 1.532 0 01-2.286.948c-1.372-.836-2.942.734-2.106 2.106.54.886.061 2.042-.947 2.287-1.561.379-1.561 2.6 0 2.978a1.532 1.532 0 01.947 2.287c-.836 1.372.734 2.942 2.106 2.106a1.532 1.532 0 012.287.947c.379 1.561 2.6 1.561 2.978 0a1.533 1.533 0 012.287-.947c1.372.836 2.942-.734 2.106-2.106a1.533 1.533 0 01.947-2.287c1.561-.379 1.561-2.6 0-2.978a1.532 1.532 0 01-.947-2.287c.836-1.372-.734-2.942-2.106-2.106a1.532 1.532 0 01-2.287-.947zM10 13a3 3 0 100-6 3 3 0 000 6z" clip-rule="evenodd"/>
                </svg> Admin Panel
            </h2>
            <button class="admin-sidebar-close" onclick="toggleAdminSidebar()">✕</button>
        </div>

        <nav class="admin-nav">
            <button class="admin-nav-item active" onclick="switchAdminSection('appearance')" data-section="appearance">
                <svg class="admin-nav-icon" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M4 2a2 2 0 00-2 2v11a3 3 0 106 0V4a2 2 0 00-2-2H4zm1 14a1 1 0 100-2 1 1 0 000 2zm5-1.757l4.9-4.9a2 2 0 000-2.828L13.485 5.1a2 2 0 00-2.828 0L10 5.757v8.486zM16 18H9.071l6-6H16a2 2 0 012 2v2a2 2 0 01-2 2z" clip-rule="evenodd"/>
                </svg>
                Apparence
            </button>

            <button class="admin-nav-item" onclick="switchAdminSection('content')" data-section="content">
                <svg class="admin-nav-icon" fill="currentColor" viewBox="0 0 20 20">
                    <path d="M9 2a2 2 0 00-2 2v8a2 2 0 002 2h6a2 2 0 002-2V6.414A2 2 0 0016.414 5L14 2.586A2 2 0 0012.586 2H9z"/>
                    <path d="M3 8a2 2 0 012-2v10h8a2 2 0 01-2 2H5a2 2 0 01-2-2V8z"/>
                </svg>
                Contenus
            </button>

            <button class="admin-nav-item" onclick="switchAdminSection('cards')" data-section="cards">
                <svg class="admin-nav-icon" fill="currentColor" viewBox="0 0 20 20">
                    <path d="M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V4zM3 10a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H4a1 1 0 01-1-1v-6zM14 9a1 1 0 00-1 1v6a1 1 0 001 1h2a1 1 0 001-1v-6a1 1 0 00-1-1h-2z"/>
                </svg>
                Cartes
            </button>

            <button class="admin-nav-item" onclick="switchAdminSection('instagram')" data-section="instagram">
                <svg class="admin-nav-icon" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z" clip-rule="evenodd"/>
                </svg>
                Posts Instagram
            </button>

            <button class="admin-nav-item" onclick="switchAdminSection('events')" data-section="events">
                <svg class="admin-nav-icon" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z" clip-rule="evenodd"/>
                </svg>
                Événements
            </button>

            <button class="admin-nav-item" onclick="switchAdminSection('users')" data-section="users">
                <svg class="admin-nav-icon" fill="currentColor" viewBox="0 0 20 20">
                    <path d="M9 6a3 3 0 11-6 0 3 3 0 016 0zM17 6a3 3 0 11-6 0 3 3 0 016 0zM12.93 17c.046-.327.07-.66.07-1a6.97 6.97 0 00-1.5-4.33A5 5 0 0119 16v1h-6.07zM6 11a5 5 0 015 5v1H1v-1a5 5 0 015-5z"/>
                </svg>
                Utilisateurs
            </button>

            <button class="admin-nav-item" onclick="switchAdminSection('logs')" data-section="logs">
                <svg class="admin-nav-icon" fill="currentColor" viewBox="0 0 20 20">
                    <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"/>
                    <path fill-rule="evenodd" d="M4 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v11a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3zm-3 4a1 1 0 100 2h.01a1 1 0 100-2H7zm3 0a1 1 0 100 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"/>
                </svg>
                Logs
            </button>
        </nav>
    </div>

    <!-- Admin Content Panel -->
    <div class="admin-content-panel" id="adminContentPanel">
        <div class="admin-content-panel-inner">
            <!-- Appearance Section -->
            <div id="adminSection-appearance" class="admin-section-content active">
                <div class="admin-content-header">
                    <h3>Apparence</h3>
                </div>
                <div class="admin-content-body" id="appearanceContent">
                    <!-- Le contenu sera chargé dynamiquement -->
                </div>
            </div>

            <!-- Content Section -->
            <div id="adminSection-content" class="admin-section-content">
                <div class="admin-content-header">
                    <h3>Contenus</h3>
                </div>
                <div class="admin-content-body" id="contentContent">
                    <!-- Le contenu sera chargé dynamiquement -->
                </div>
            </div>

            <!-- Cards Section -->
            <div id="adminSection-cards" class="admin-section-content">
                <div class="admin-content-header">
                    <h3>Cartes</h3>
                </div>
                <div class="admin-content-body" id="cardsContent">
                    <!-- Le contenu sera chargé dynamiquement -->
                </div>
            </div>

            <!-- Instagram Section -->
            <div id="adminSection-instagram" class="admin-section-content">
                <div class="admin-content-header">
                    <h3>Posts Instagram</h3>
                </div>
                <div class="admin-content-body" id="instagramContent">
                    <!-- Le contenu sera chargé dynamiquement -->
                </div>
            </div>

            <!-- Events Section -->
            <div id="adminSection-events" class="admin-section-content">
                <div class="admin-content-header">
                    <h3>Événements</h3>
                </div>
                <div class="admin-content-body" id="eventsContent">
                    <!-- Le contenu sera chargé dynamiquement -->
                </div>
            </div>

            <!-- Users Section -->
            <div id="adminSection-users" class="admin-section-content">
                <div class="admin-content-header">
                    <h3>Utilisateurs</h3>
                </div>
                <div class="admin-content-body" id="usersContent">
                    <!-- Le contenu sera chargé dynamiquement -->
                </div>
            </div>

            <!-- Logs Section -->
            <div id="adminSection-logs" class="admin-section-content">
                <div class="admin-content-header">
                    <h3>Logs</h3>
                </div>
                <div class="admin-content-body" id="logsContent">
                    <!-- Le contenu sera chargé dynamiquement -->
                </div>
            </div>
        </div>
    </div>

    <!-- Login Admin -->
    <div class="admin-login-overlay" id="adminLoginOverlay">
        <div class="admin-login-box">
            <h2>
                <svg style="width: 24px; height: 24px; display: inline-block; vertical-align: middle; margin-right: 8px;" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z" clip-rule="evenodd"/>
                </svg> Admin
            </h2>
            <p>Entrez le mot de passe administrateur</p>
            <input type="password" id="adminPassword" placeholder="Mot de passe admin" onkeypress="if(event.key==='Enter')verifyAdminPassword()">
            <button onclick="verifyAdminPassword()">Connexion Admin</button>
            <p class="admin-login-error" id="adminLoginError">
                <svg style="width: 16px; height: 16px; display: inline-block; vertical-align: middle; margin-right: 6px;" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"/>
                </svg> Mot de passe incorrect
            </p>
            <button style="margin-top: 15px; background: transparent; border: 1px solid rgba(255,255,255,0.3);" onclick="closeAdminLogin()">Annuler</button>
        </div>
    </div>

    <!-- Panneau Admin -->
    <div class="admin-overlay" id="adminOverlay">
        <div class="admin-panel">
            <div class="admin-header">
                <h2>⚙️ Panneau Administration</h2>
                <button class="admin-close" onclick="closeAdminPanel()">×</button>
            </div>

            <div class="admin-tabs" style="flex-wrap: wrap;">
                <!-- Dashboard général -->
                <button class="admin-tab active" onclick="switchAdminTab('dashboard')">
                    📊 <span>Dashboard</span>
                </button>

                <div class="admin-tab-separator" data-label="Personnalisation"></div>

                <!-- Section Personnalisation -->
                <button class="admin-tab" onclick="switchAdminTab('appearance')">
                    🎨 <span>Apparence</span>
                </button>
                <button class="admin-tab" onclick="switchAdminTab('content')">
                    📝 <span>Contenu</span>
                </button>
                <button class="admin-tab" onclick="switchAdminTab('images')">
                    🖼️ <span>Images</span>
                </button>
                <button class="admin-tab" onclick="switchAdminTab('pages')">
                    📄 <span>Pages</span>
                </button>

                <div class="admin-tab-separator" data-label="Modération"></div>

                <!-- Section Modération -->
                <button class="admin-tab" onclick="switchAdminTab('moderation')">
                    🛡️ <span>Utilisateurs</span>
                </button>
                <button class="admin-tab" onclick="switchAdminTab('logs')">
                    📋 <span>Logs</span>
                </button>
                <button class="admin-tab" onclick="switchAdminTab('settings')">
                    ⚙️ <span>Paramètres</span>
                </button>
            </div>

            <div class="admin-content">
                <!-- Dashboard -->
                <div class="admin-panel-section active" id="dashboardSection">
                    <div class="admin-stats">
                        <div class="stat-card">
                            <h3>Utilisateurs</h3>
                            <div class="stat-value" id="statUsers">0</div>
                        </div>
                        <div class="stat-card">
                            <h3>Commandes</h3>
                            <div class="stat-value" id="statOrders">0</div>
                        </div>
                        <div class="stat-card">
                            <h3>Produits au panier</h3>
                            <div class="stat-value" id="statCartItems">0</div>
                        </div>
                        <div class="stat-card">
                            <h3>Stockage</h3>
                            <div class="stat-value" id="statStorage" style="font-size: 1.8em;">0%</div>
                        </div>
                    </div>
                    <div style="background: rgba(255,255,255,0.05); padding: 15px; border-radius: 10px; margin-top: 20px; border-left: 4px solid #ddac0b;">
                        <p style="color: rgba(255,255,255,0.9); margin: 0;">
                            💾 <strong>Utilisation du stockage:</strong> <span id="storageDetails">Calcul...</span>
                        </p>
                    </div>
                    <h3 style="color: white; margin-bottom: 20px; margin-top: 30px;">📋 Dernières activités</h3>
                    <div class="logs-container" id="recentLogs" style="max-height: 300px;"></div>
                </div>

                <!-- Apparence -->
                <div class="admin-panel-section" id="appearanceSection">
                    <h3 style="color: white; margin-bottom: 25px;">🎨 Personnalisation de l'apparence</h3>

                    <!-- Nom du site -->
                    <div class="settings-section">
                        <h3 class="settings-section-title" style="color: #ff4444;">📛 Nom du site</h3>
                        <div class="settings-form-group">
                            <label>Nom affiché</label>
                            <input type="text" id="siteNameInput" placeholder="AlphaMouv" value="AlphaMouv">
                        </div>
                        <button class="settings-btn" style="background: linear-gradient(135deg, #ff4444, #cc0000); color: white;" onclick="saveSiteName()">
                            Enregistrer le nom
                        </button>
                    </div>

                    <!-- Couleurs du dégradé -->
                    <div class="settings-section" style="margin-top: 25px;">
                        <h3 class="settings-section-title" style="color: #ff4444;">🌈 Couleurs du dégradé de fond</h3>
                        <div class="color-picker-group">
                            <div class="color-picker-item">
                                <label>Couleur primaire</label>
                                <div class="color-picker-wrapper">
                                    <input type="color" id="gradientColor1" value="#001f3f" onchange="updateGradientPreview()">
                                    <input type="text" id="gradientColor1Text" value="#001f3f" onchange="syncColorFromText('gradientColor1')">
                                </div>
                            </div>
                            <div class="color-picker-item">
                                <label>Couleur secondaire</label>
                                <div class="color-picker-wrapper">
                                    <input type="color" id="gradientColor2" value="#0051a8" onchange="updateGradientPreview()">
                                    <input type="text" id="gradientColor2Text" value="#0051a8" onchange="syncColorFromText('gradientColor2')">
                                </div>
                            </div>
                        </div>
                        <div class="gradient-preview" id="gradientPreview" style="background: linear-gradient(135deg, #001f3f, #0051a8);"></div>
                        <button class="settings-btn" style="margin-top: 20px; background: linear-gradient(135deg, #ff4444, #cc0000); color: white;" onclick="saveGradientColors()">
                            Appliquer le dégradé
                        </button>
                    </div>

                    <!-- Couleur d'accent -->
                    <div class="settings-section" style="margin-top: 25px;">
                        <h3 class="settings-section-title" style="color: #ff4444;">✨ Couleur d'accent (boutons, titres)</h3>
                        <div class="color-picker-group">
                            <div class="color-picker-item">
                                <label>Couleur principale</label>
                                <div class="color-picker-wrapper">
                                    <input type="color" id="accentColor1" value="#ddac0b" onchange="updateAccentPreview()">
                                    <input type="text" id="accentColor1Text" value="#ddac0b" onchange="syncColorFromText('accentColor1')">
                                </div>
                            </div>
                            <div class="color-picker-item">
                                <label>Couleur secondaire</label>
                                <div class="color-picker-wrapper">
                                    <input type="color" id="accentColor2" value="#c4d10c" onchange="updateAccentPreview()">
                                    <input type="text" id="accentColor2Text" value="#c4d10c" onchange="syncColorFromText('accentColor2')">
                                </div>
                            </div>
                        </div>
                        <div class="gradient-preview" id="accentPreview" style="background: linear-gradient(135deg, #ddac0b, #c4d10c);"></div>
                        <button class="settings-btn" style="margin-top: 20px; background: linear-gradient(135deg, #ff4444, #cc0000); color: white;" onclick="saveAccentColors()">
                            Appliquer les couleurs d'accent
                        </button>
                    </div>

                    <!-- Reset -->
                    <div class="settings-section" style="margin-top: 25px;">
                        <h3 class="settings-section-title" style="color: #ff4444;">🔄 Réinitialiser</h3>
                        <button class="settings-btn" style="background: rgba(255,255,255,0.1); color: white; border: 1px solid rgba(255,255,255,0.3);" onclick="resetAppearance()">
                            Réinitialiser aux couleurs par défaut
                        </button>
                    </div>
                </div>

                <!-- Contenu -->
                <div class="admin-panel-section" id="contentSection">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 25px;">
                        <h3 style="color: white;">📝 Gestion du contenu des sections</h3>
                        <button class="btn-add-new" onclick="addNewSection()">
                            ➕ Ajouter une section
                        </button>
                    </div>

                    <div id="sectionsContainer">
                        <!-- Les sections seront générées dynamiquement -->
                    </div>

                    <hr style="border: 1px solid rgba(255,255,255,0.1); margin: 40px 0;">

                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 25px;">
                        <h3 style="color: white;">🎴 Contenu des cadres (pop-ups)</h3>
                    </div>
                    <p style="color: rgba(255,255,255,0.6); margin-bottom: 20px;">
                        Personnalisez le contenu qui s'affiche quand les visiteurs cliquent sur un cadre. Vous pouvez modifier le texte, ajouter des images en carrousel ou fixes, et choisir la disposition.
                    </p>

                    <div id="cardsEditorContainer">
                        <!-- Les cadres seront générés dynamiquement -->
                    </div>

                    <hr style="border: 1px solid rgba(255,255,255,0.1); margin: 40px 0;">

                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 25px;">
                        <h3 style="color: white;">🛍️ Gestion de la boutique</h3>
                        <button class="btn-add-new" onclick="addNewProduct()">
                            ➕ Ajouter un produit
                        </button>
                    </div>
                    <p style="color: rgba(255,255,255,0.6); margin-bottom: 20px;">
                        Gérez votre catalogue de produits: vêtements, accessoires, créations uniques. Ajoutez des images, descriptions, prix et catégories.
                    </p>

                    <div id="productsContainer" style="display: grid; gap: 15px;">
                        <!-- Les produits seront générés dynamiquement -->
                    </div>
                </div>

                <!-- Images -->
                <div class="admin-panel-section" id="imagesSection">
                    <h3 style="color: white; margin-bottom: 20px;">🖼️ Gestion des images du site</h3>
                    <div style="background: linear-gradient(135deg, rgba(34, 197, 94, 0.15), rgba(221, 172, 11, 0.1)); padding: 15px; border-radius: 10px; margin-bottom: 25px; border-left: 4px solid #22c55e;">
                        <p style="color: rgba(255,255,255,0.9); margin: 0 0 10px 0;">
                            ✅ <strong>Stockage étendu activé (IndexedDB)</strong>
                        </p>
                        <p style="color: rgba(255,255,255,0.85); margin: 0; font-size: 0.95em; line-height: 1.6;">
                            • Capacité: ~50-100 MB pour les images du carrousel<br> • Formats acceptés: JPG, PNG, GIF, WebP, BMP<br> • Taille max: 5 MB par image<br> • Conseil: Compressez sur <a href="https://tinypng.com" target="_blank" style="color: #ddac0b;">tinypng.com</a>                            si nécessaire
                        </p>
                    </div>
                    <div class="images-grid" id="imagesGrid">
                        <!-- Les images seront générées dynamiquement -->
                    </div>
                </div>

                <!-- Pages -->
                <div class="admin-panel-section" id="pagesSection">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 25px;">
                        <h3 style="color: white;">📄 Gestion des pages</h3>
                        <button class="btn-add-new" onclick="addNewPage()">
                            ➕ Créer une page
                        </button>
                    </div>

                    <div class="pages-list" id="pagesList">
                        <!-- Pages générées dynamiquement -->
                    </div>
                </div>

                <!-- Modération -->
                <div class="admin-panel-section" id="moderationSection">
                    <!-- En-tête de la section modération -->
                    <div style="background: linear-gradient(135deg, rgba(255, 68, 68, 0.2), rgba(139, 92, 246, 0.15)); padding: 25px; border-radius: 15px; margin-bottom: 30px; border: 2px solid rgba(255, 68, 68, 0.3); position: relative; overflow: hidden;">
                        <div style="position: absolute; top: 0; right: 0; width: 200px; height: 200px; background: radial-gradient(circle, rgba(255, 68, 68, 0.2), transparent); filter: blur(40px);"></div>
                        <h3 style="color: white; margin: 0 0 10px 0; font-size: 1.8em; position: relative;">🛡️ Modération des utilisateurs</h3>
                        <p style="color: rgba(255, 255, 255, 0.8); margin: 0; font-size: 1em; position: relative;">
                            Gérez les utilisateurs, bannissez les comptes problématiques et maintenez la sécurité de votre plateforme.
                        </p>
                    </div>

                    <div style="background: linear-gradient(135deg, rgba(255, 68, 68, 0.15), rgba(220, 38, 38, 0.1)); padding: 15px; border-radius: 10px; margin-bottom: 25px; border-left: 4px solid #ff4444;">
                        <p style="color: rgba(255,255,255,0.9); margin: 0 0 8px 0;">
                            ⚠️ <strong>Attention</strong>
                        </p>
                        <p style="color: rgba(255,255,255,0.85); margin: 0; font-size: 0.95em;">
                            Les actions de modération sont définitives. Les utilisateurs bannis ne pourront plus se connecter.
                        </p>
                    </div>

                    <div style="display: flex; gap: 15px; margin-bottom: 25px; flex-wrap: wrap;">
                        <button class="settings-btn" onclick="loadModerationUsers('all')" style="background: linear-gradient(135deg, #4169e1, #1e40af);">
                            👥 Tous les utilisateurs
                        </button>
                        <button class="settings-btn" onclick="loadModerationUsers('banned')" style="background: linear-gradient(135deg, #ff4444, #cc0000);">
                            🚫 Utilisateurs bannis
                        </button>
                        <button class="settings-btn" onclick="loadModerationUsers('active')" style="background: linear-gradient(135deg, #22c55e, #16a34a);">
                            ✅ Utilisateurs actifs
                        </button>
                    </div>

                    <div id="moderationUsersList" style="display: grid; gap: 15px;">
                        <!-- Les utilisateurs seront affichés ici -->
                    </div>
                </div>

                <!-- Logs -->
                <div class="admin-panel-section" id="logsSection">
                    <div class="logs-toolbar">
                        <button class="btn-refresh-logs" onclick="refreshLogs()">🔄 Actualiser</button>
                        <button class="btn-export-logs" onclick="exportLogs()">📥 Exporter</button>
                        <button class="btn-clear-logs" onclick="clearLogs()">🗑️ Vider les logs</button>
                    </div>
                    <div class="logs-container" id="logsContainer"></div>
                </div>

                <!-- Paramètres Admin -->
                <div class="admin-panel-section" id="settingsSection">
                    <!-- En-tête de la section paramètres -->
                    <div style="background: linear-gradient(135deg, rgba(139, 92, 246, 0.2), rgba(59, 130, 246, 0.15)); padding: 25px; border-radius: 15px; margin-bottom: 30px; border: 2px solid rgba(139, 92, 246, 0.3); position: relative; overflow: hidden;">
                        <div style="position: absolute; top: 0; right: 0; width: 200px; height: 200px; background: radial-gradient(circle, rgba(139, 92, 246, 0.2), transparent); filter: blur(40px);"></div>
                        <h3 style="color: white; margin: 0 0 10px 0; font-size: 1.8em; position: relative;">⚙️ Paramètres administrateur</h3>
                        <p style="color: rgba(255, 255, 255, 0.8); margin: 0; font-size: 1em; position: relative;">
                            Configurez les paramètres de sécurité, gérez les admins et sauvegardez votre configuration.
                        </p>
                    </div>

                    <div class="settings-section">
                        <h3 class="settings-section-title" style="color: #ff4444;">🔑 Changer le mot de passe admin</h3>
                        <div class="settings-form-group">
                            <label>Nouveau mot de passe admin</label>
                            <input type="password" id="newAdminPassword" placeholder="Nouveau mot de passe">
                        </div>
                        <div class="settings-form-group">
                            <label>Confirmer le mot de passe</label>
                            <input type="password" id="confirmAdminPassword" placeholder="Confirmer">
                        </div>
                        <button class="settings-btn" style="background: linear-gradient(135deg, #ff4444, #cc0000); color: white;" onclick="changeAdminPassword()">
                            Changer le mot de passe
                        </button>
                    </div>

                    <div class="settings-section" style="margin-top: 25px;">
                        <h3 class="settings-section-title" style="color: #ff4444;">👥 Gestion des administrateurs</h3>
                        <div class="settings-form-group">
                            <label>Email de l'utilisateur à promouvoir admin</label>
                            <input type="email" id="newAdminEmail" placeholder="email@exemple.com">
                        </div>
                        <button class="settings-btn" style="background: linear-gradient(135deg, #ff4444, #cc0000); color: white;" onclick="addAdmin()">
                            Ajouter comme admin
                        </button>
                        <div style="margin-top: 20px;">
                            <h4 style="color: white; margin-bottom: 10px;">Liste des admins :</h4>
                            <div id="adminsList" style="color: rgba(255,255,255,0.7);"></div>
                        </div>
                    </div>

                    <div class="settings-section" style="margin-top: 25px;">
                        <h3 class="settings-section-title" style="color: #ff4444;">💾 Sauvegarde et Export</h3>
                        <div style="display: flex; gap: 15px; flex-wrap: wrap;">
                            <button class="settings-btn" style="background: #3b82f6; color: white;" onclick="exportSiteConfig()">
                                📥 Exporter la configuration
                            </button>
                            <button class="settings-btn" style="background: #22c55e; color: white;" onclick="document.getElementById('importConfigInput').click()">
                                📤 Importer une configuration
                            </button>
                        </div>
                        <input type="file" id="importConfigInput" style="display: none;" accept=".json" onchange="importSiteConfig(event)">
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Pop-up pour les cadres -->
    <div class="card-popup-overlay" id="cardPopupOverlay" onclick="closeCardPopup(event)">
        <div class="card-popup" onclick="event.stopPropagation()">
            <div class="card-popup-header">
                <h2 id="cardPopupTitle">
                    <span id="cardPopupTitleText">Titre du cadre</span>
                </h2>
                <button class="card-popup-close" onclick="closeCardPopup()">×</button>
            </div>
            <div class="card-popup-content" id="cardPopupContent">
                <!-- Contenu dynamique -->
            </div>
        </div>
    </div>

    <!-- Modal d'édition -->
    <div class="editor-modal" id="editorModal">
        <div class="editor-modal-content">
            <div class="editor-modal-header">
                <h3 id="editorModalTitle">Éditer</h3>
                <button class="admin-close" onclick="closeEditorModal()">×</button>
            </div>
            <div class="editor-modal-body" id="editorModalBody">
                <!-- Contenu dynamique -->
            </div>
            <div class="editor-modal-footer">
                <button class="btn-cancel-editor" onclick="closeEditorModal()">Annuler</button>
                <button class="btn-save-editor" id="editorSaveBtn" onclick="saveEditorContent()">Enregistrer</button>
            </div>
        </div>
    </div>

    <!-- Éditeur visuel de page -->
    <div class="visual-page-editor" id="visualPageEditor">
        <div class="visual-editor-sidebar">
            <div class="visual-editor-sidebar-header">
                <h3>✏️ Éditeur de page</h3>
                <p style="color: rgba(255,255,255,0.6); font-size: 0.85em; margin-top: 5px;" id="editingPageName">Page d'accueil</p>

                <div class="visual-editor-tabs">
                    <div class="visual-editor-tab active" onclick="switchVisualEditorTab('texts')">📝 Textes</div>
                    <div class="visual-editor-tab" onclick="switchVisualEditorTab('links')">🔗 Liens</div>
                </div>
            </div>

            <div class="visual-editor-sidebar-content">
                <!-- Section Textes -->
                <div class="editor-section active" id="textsSection">
                    <h4 style="color: white; margin-bottom: 15px;">Textes de la page</h4>
                    <div id="textsEditorContainer">
                        <p style="color: rgba(255,255,255,0.5); text-align: center; padding: 20px;">
                            Cliquez sur un texte dans la prévisualisation pour l'éditer
                        </p>
                    </div>
                </div>

                <!-- Section Liens -->
                <div class="editor-section" id="linksSection">
                    <h4 style="color: white; margin-bottom: 15px;">Liens sociaux</h4>

                    <div class="social-links-editor">
                        <div class="social-link-item">
                            <div class="social-link-header">
                                <span class="social-link-icon">📸</span>
                                <span class="social-link-name">Instagram</span>
                            </div>
                            <input type="url" class="editor-field" id="instagramLink" placeholder="https://instagram.com/votre_compte" style="width: 100%; padding: 10px; background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.2); border-radius: 6px; color: white;">
                        </div>

                        <div class="social-link-item">
                            <div class="social-link-header">
                                <span class="social-link-icon">🎥</span>
                                <span class="social-link-name">YouTube</span>
                            </div>
                            <input type="url" id="youtubeLink" placeholder="https://youtube.com/@votre_chaine" style="width: 100%; padding: 10px; background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.2); border-radius: 6px; color: white;">
                        </div>

                        <div class="social-link-item">
                            <div class="social-link-header">
                                <span class="social-link-icon">✖️</span>
                                <span class="social-link-name">X (Twitter)</span>
                            </div>
                            <input type="url" id="xLink" placeholder="https://x.com/votre_compte" style="width: 100%; padding: 10px; background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.2); border-radius: 6px; color: white;">
                        </div>

                        <div class="social-link-item">
                            <div class="social-link-header">
                                <span class="social-link-icon">🎮</span>
                                <span class="social-link-name">Twitch</span>
                            </div>
                            <input type="url" id="twitchLink" placeholder="https://twitch.tv/votre_chaine" style="width: 100%; padding: 10px; background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.2); border-radius: 6px; color: white;">
                        </div>

                        <div class="social-link-item">
                            <div class="social-link-header">
                                <span class="social-link-icon">🎨</span>
                                <span class="social-link-name">TikTok</span>
                            </div>
                            <input type="url" id="tiktokLink" placeholder="https://tiktok.com/@votre_compte" style="width: 100%; padding: 10px; background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.2); border-radius: 6px; color: white;">
                        </div>

                        <div class="social-link-item">
                            <div class="social-link-header">
                                <span class="social-link-icon">💼</span>
                                <span class="social-link-name">LinkedIn</span>
                            </div>
                            <input type="url" id="linkedinLink" placeholder="https://linkedin.com/in/votre_profil" style="width: 100%; padding: 10px; background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.2); border-radius: 6px; color: white;">
                        </div>

                        <div class="social-link-item">
                            <div class="social-link-header">
                                <span class="social-link-icon">👥</span>
                                <span class="social-link-name">Facebook</span>
                            </div>
                            <input type="url" id="facebookLink" placeholder="https://facebook.com/votre_page" style="width: 100%; padding: 10px; background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.2); border-radius: 6px; color: white;">
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="visual-editor-preview">
            <div class="visual-editor-toolbar">
                <div class="visual-editor-toolbar-left">
                    <span style="color: white; font-weight: 600;">Prévisualisation</span>
                    <span style="color: rgba(255,255,255,0.5); font-size: 0.9em;">Les modifications sont appliquées en temps réel</span>
                </div>
                <div>
                    <button class="btn-close-visual-editor" onclick="closeVisualPageEditor()">✕ Fermer</button>
                    <button class="btn-save-visual-editor" onclick="saveVisualPageChanges()">💾 Enregistrer</button>
                </div>
            </div>
            <div id="visualPreviewContent" style="padding-top: 70px;">
                <!-- Le contenu de la page sera chargé ici -->
            </div>
        </div>
    </div>

    <!-- Input caché pour upload d'images -->
    <input type="file" id="imageUploadInput" class="hidden-file-input" accept="image/*" onchange="handleImageUpload(event)">

    <!-- Panier latéral -->
    <div class="cart-sidebar" id="cartSidebar">
        <div class="cart-sidebar-header">
            <h2>Mon Panier</h2>
            <button class="close-cart" onclick="toggleCartSidebar()">×</button>
        </div>
        <div class="cart-items" id="cartItems">
            <div class="empty-cart">
                <div class="empty-cart-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="width: 80px; height: 80px; color: rgba(221, 172, 11, 0.5);">
                        <circle cx="9" cy="21" r="1"></circle>
                        <circle cx="20" cy="21" r="1"></circle>
                        <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>
                    </svg>
                </div>
                <p>Votre panier est vide</p>
            </div>
        </div>
        <div class="cart-footer" id="cartFooter" style="display: none;">
            <div class="cart-total">
                <span class="cart-total-label">Total:</span>
                <span class="cart-total-amount" id="cartTotal">0€</span>
            </div>
            <button class="checkout-btn" onclick="checkout()">Commander</button>
            <button class="continue-shopping-btn" onclick="goToShop()">Continuer les achats</button>
        </div>
    </div>

    <div class="particles" id="particles"></div>

    <!-- Éléments flottants dynamiques -->
    <div class="floating-elements" id="floatingElements"></div>

    <div class="container">
        <!-- En-tête -->
        <header>
            <!-- Barre de recherche et connexion -->
            <div class="top-actions">
                <div class="search-container">
                    <button class="search-btn" onclick="toggleSearch()">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <circle cx="11" cy="11" r="8"></circle>
                            <path d="m21 21-4.35-4.35"></path>
                        </svg>
                    </button>
                    <div class="search-box" id="searchBox">
                        <input type="text" id="searchInput" placeholder="Rechercher..." onkeypress="handleSearchKeypress(event)">
                        <button class="search-submit" onclick="performSearch()">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <circle cx="11" cy="11" r="8"></circle>
                                <path d="m21 21-4.35-4.35"></path>
                            </svg>
                        </button>
                    </div>
                </div>

                <!-- Panier (visible après connexion) -->
                <button class="cart-btn" id="cartBtn" onclick="openCart()">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                        <path d="M7 18c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zM1 2v2h2l3.6 7.59-1.35 2.45c-.16.28-.25.61-.25.96 0 1.1.9 2 2 2h12v-2H7.42c-.14 0-.25-.11-.25-.25l.03-.12.9-1.63h7.45c.75 0 1.41-.41 1.75-1.03l3.58-6.49c.08-.14.12-.31.12-.48 0-.55-.45-1-1-1H5.21l-.94-2H1zm16 16c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2z"/>
                    </svg>
                    <span class="cart-count" id="cartCountMain">0</span>
                </button>

                <!-- Bouton de connexion (visible si non connecté) -->
                <button class="login-btn" id="loginBtn" onclick="openAuthPopup()">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 3c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm0 14.2c-2.5 0-4.71-1.28-6-3.22.03-1.99 4-3.08 6-3.08 1.99 0 5.97 1.09 6 3.08-1.29 1.94-3.5 3.22-6 3.22z"/>
                    </svg>
                </button>

                <!-- Menu utilisateur (visible si connecté) -->
                <div class="user-menu" id="userMenu">
                    <div class="user-avatar visible" id="userAvatar" onclick="toggleUserDropdown()">
                        <span id="userInitials">A</span>
                    </div>
                    <div class="user-dropdown" id="userDropdown">
                        <div class="user-info">
                            <div class="user-name" id="userName">Alpha</div>
                            <div class="user-email" id="userEmail"><a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="fc9d908c949dbc9d908c949d9193898ad29f9391">[email&#160;protected]</a></div>
                        </div>
                        <div class="dropdown-divider"></div>
                        <a href="boutique.html" class="dropdown-item">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                                <path d="M7 18c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zM1 2v2h2l3.6 7.59-1.35 2.45c-.16.28-.25.61-.25.96 0 1.1.9 2 2 2h12v-2H7.42c-.14 0-.25-.11-.25-.25l.03-.12.9-1.63h7.45c.75 0 1.41-.41 1.75-1.03l3.58-6.49c.08-.14.12-.31.12-.48 0-.55-.45-1-1-1H5.21l-.94-2H1zm16 16c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2z"/>
                            </svg> Mes Commandes
                        </a>
                        <a href="#" class="dropdown-item" onclick="openSettings(event)">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                                <path d="M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.07.62-.07.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"/>
                            </svg> Paramètres
                        </a>
                        <div class="dropdown-divider"></div>
                        <a href="#" class="dropdown-item" onclick="logout(event)">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                                <path d="M17 7l-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.58L17 17l5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4V5z"/>
                            </svg> Déconnexion
                        </a>
                    </div>
                </div>
            </div>
            <div class="title-decoration">&#x2728;</div>
            <h1>AlphaMouv</h1>
            <div class="title-decoration">&#x2728;</div>
        </header>

        <!-- Pop-up de connexion/inscription -->
        <div class="auth-overlay" id="authOverlay" onclick="closeAuthPopup(event)">
            <div class="auth-popup" onclick="event.stopPropagation()">
                <button class="auth-close" onclick="closeAuthPopup()">&times;</button>

                <div class="auth-header">
                    <h2>Bienvenue !</h2>
                    <p>Connectez-vous pour accéder à votre espace personnel</p>
                </div>

                <!-- Onglets Connexion / Inscription -->
                <div class="auth-tabs">
                    <button class="auth-tab active" onclick="switchAuthTab('login')">Connexion</button>
                    <button class="auth-tab" onclick="switchAuthTab('register')">Inscription</button>
                </div>

                <!-- Formulaire de connexion -->
                <form class="auth-form active" id="loginForm" onsubmit="handleLoginSubmit(event)">
                    <!-- Connexion avec Google -->
                    <div class="social-auth-buttons">
                        <button type="button" class="social-auth-btn google-btn" onclick="handleGoogleLogin()">
                            <svg width="20" height="20" viewBox="0 0 24 24">
                                <path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/>
                                <path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/>
                                <path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/>
                                <path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/>
                            </svg>
                            Continuer avec Google
                        </button>
                    </div>

                    <div class="auth-divider">
                        <span>OU</span>
                    </div>

                    <div class="form-group">
                        <label for="loginEmail">Email</label>
                        <input type="email" id="loginEmail" placeholder="votre@email.com" required>
                    </div>
                    <div class="form-group">
                        <label for="loginPassword">Mot de passe</label>
                        <input type="password" id="loginPassword" placeholder="••••••••" required>
                    </div>
                    <button type="submit" class="auth-submit">Se connecter</button>
                </form>

                <!-- Formulaire d'inscription -->
                <form class="auth-form" id="registerForm" onsubmit="handleRegisterSubmit(event)">
                    <!-- Connexion avec Google -->
                    <div class="social-auth-buttons">
                        <button type="button" class="social-auth-btn google-btn" onclick="handleGoogleLogin()">
                            <svg width="20" height="20" viewBox="0 0 24 24">
                                <path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/>
                                <path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/>
                                <path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/>
                                <path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/>
                            </svg>
                            Continuer avec Google
                        </button>
                    </div>

                    <div class="auth-divider">
                        <span>OU</span>
                    </div>

                    <!-- Formulaire en deux colonnes -->
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px;">
                        <!-- Colonne gauche - Informations de compte -->
                        <div>
                            <h4 style="color: rgba(255,255,255,0.9); margin: 0 0 15px 0; font-size: 1em; border-bottom: 2px solid rgba(221, 172, 11, 0.3); padding-bottom: 10px;">
                                👤 Informations de compte
                            </h4>

                            <div class="form-group">
                                <label for="registerName">Nom complet</label>
                                <input type="text" id="registerName" placeholder="Votre nom" required>
                            </div>
                            <div class="form-group">
                                <label for="registerEmail">Email</label>
                                <input type="email" id="registerEmail" placeholder="votre@email.com" required>
                            </div>
                            <div class="form-group">
                                <label for="registerPassword">Mot de passe</label>
                                <input type="password" id="registerPassword" placeholder="••••••••" required minlength="6">
                            </div>
                            <div class="form-group">
                                <label for="registerConfirmPassword">Confirmer</label>
                                <input type="password" id="registerConfirmPassword" placeholder="••••••••" required minlength="6">
                            </div>
                        </div>

                        <!-- Colonne droite - Adresse de livraison -->
                        <div>
                            <h4 style="color: rgba(255,255,255,0.9); margin: 0 0 15px 0; font-size: 1em; border-bottom: 2px solid rgba(221, 172, 11, 0.3); padding-bottom: 10px;">
                                📦 Adresse de livraison
                            </h4>

                            <div class="form-group">
                                <label for="registerAddress">Adresse</label>
                                <input type="text" id="registerAddress" placeholder="123 rue de la République" required>
                            </div>

                            <div class="form-group">
                                <label for="registerAddress2">Complément (optionnel)</label>
                                <input type="text" id="registerAddress2" placeholder="Apt, Bât...">
                            </div>

                            <div style="display: grid; grid-template-columns: 1fr 2fr; gap: 10px;">
                                <div class="form-group">
                                    <label for="registerPostalCode">CP</label>
                                    <input type="text" id="registerPostalCode" placeholder="75001" required pattern="[0-9]{5}" maxlength="5">
                                </div>

                                <div class="form-group">
                                    <label for="registerCity">Ville</label>
                                    <input type="text" id="registerCity" placeholder="Paris" required>
                                </div>
                            </div>

                            <div class="form-group">
                                <label for="registerCountry">Pays</label>
                                <select id="registerCountry" required style="width: 100%; padding: 15px; background: rgba(255,255,255,0.1); border: 2px solid rgba(255,255,255,0.2); border-radius: 12px; color: white; font-size: 1em;">
                                    <option value="France">France</option>
                                    <option value="Belgique">Belgique</option>
                                    <option value="Suisse">Suisse</option>
                                    <option value="Luxembourg">Luxembourg</option>
                                    <option value="Canada">Canada</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label for="registerPhone">Tél. (optionnel)</label>
                                <input type="tel" id="registerPhone" placeholder="+33 6 12 34 56 78">
                            </div>
                        </div>
                    </div>

                    <!-- Consentement RGPD (OBLIGATOIRE) -->
                    <div style="margin-top: 20px; padding: 15px; background: rgba(221, 172, 11, 0.1); border-left: 4px solid #ddac0b; border-radius: 8px;">
                        <label style="display: flex; align-items: flex-start; cursor: pointer; color: rgba(255,255,255,0.9);">
                            <input type="checkbox" id="registerConsent" required style="margin-top: 4px; margin-right: 10px; width: 18px; height: 18px; cursor: pointer;">
                            <span style="font-size: 0.9em; line-height: 1.5;">
                                J'accepte que mes données personnelles (nom, email, adresse) soient collectées et traitées par AlphaMouv pour la gestion de mes commandes et la livraison de mes produits, conformément au <a href="#" onclick="event.preventDefault(); showPrivacyPolicy();" style="color: #ddac0b; text-decoration: underline;">RGPD</a>. Je peux exercer mes droits d'accès, rectification et suppression à tout moment.
                            </span>
                        </label>
                    </div>

                    <button type="submit" class="auth-submit" style="margin-top: 20px;">S'inscrire</button>
                </form>
            </div>
        </div>

        <!-- ============ FENÊTRE PARAMÈTRES ============ -->
        <div class="settings-overlay" id="settingsOverlay" onclick="closeSettingsModal(event)">
            <div class="settings-modal" onclick="event.stopPropagation()">
                <!-- Header -->
                <div class="settings-header">
                    <h2>
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                            <path d="M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.07.62-.07.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"/>
                        </svg> Paramètres
                    </h2>
                    <button class="settings-close" onclick="closeSettingsModal()">&times;</button>
                </div>

                <!-- Tabs -->
                <div class="settings-tabs">
                    <button class="settings-tab active" onclick="switchSettingsTab('account')">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                            <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 3c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm0 14.2c-2.5 0-4.71-1.28-6-3.22.03-1.99 4-3.08 6-3.08 1.99 0 5.97 1.09 6 3.08-1.29 1.94-3.5 3.22-6 3.22z"/>
                        </svg>
                        <span>Compte</span>
                    </button>
                    <button class="settings-tab" onclick="switchSettingsTab('security')">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                            <path d="M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zm0 10.99h7c-.53 4.12-3.28 7.79-7 8.94V12H5V6.3l7-3.11v8.8z"/>
                        </svg>
                        <span>Sécurité</span>
                    </button>
                </div>

                <!-- Content -->
                <div class="settings-content">
                    <!-- Message de notification -->
                    <div class="settings-message" id="settingsMessage">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                            <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
                        </svg>
                        <span id="settingsMessageText">Modifications enregistrées !</span>
                    </div>

                    <!-- Panel Compte -->
                    <div class="settings-panel active" id="accountPanel">
                        <!-- Section Informations personnelles -->
                        <div class="settings-section">
                            <h3 class="settings-section-title">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                                    <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 3c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm0 14.2c-2.5 0-4.71-1.28-6-3.22.03-1.99 4-3.08 6-3.08 1.99 0 5.97 1.09 6 3.08-1.29 1.94-3.5 3.22-6 3.22z"/>
                                </svg> Informations personnelles
                            </h3>
                            <div class="settings-form-row">
                                <div class="settings-form-group">
                                    <label for="settingsFirstName">Prénom</label>
                                    <input type="text" id="settingsFirstName" placeholder="Votre prénom">
                                </div>
                                <div class="settings-form-group">
                                    <label for="settingsLastName">Nom</label>
                                    <input type="text" id="settingsLastName" placeholder="Votre nom">
                                </div>
                            </div>
                        </div>

                        <!-- Section Adresse postale -->
                        <div class="settings-section">
                            <h3 class="settings-section-title">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                                    <path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"/>
                                </svg> Adresse postale
                            </h3>
                            <div class="settings-form-group">
                                <label for="settingsAddress">Adresse</label>
                                <input type="text" id="settingsAddress" placeholder="Numéro et nom de rue">
                            </div>
                            <div class="settings-form-group">
                                <label for="settingsAddressComplement">Complément d'adresse (optionnel)</label>
                                <input type="text" id="settingsAddressComplement" placeholder="Appartement, étage, etc.">
                            </div>
                            <div class="settings-form-row">
                                <div class="settings-form-group">
                                    <label for="settingsPostalCode">Code postal</label>
                                    <input type="text" id="settingsPostalCode" placeholder="75000">
                                </div>
                                <div class="settings-form-group">
                                    <label for="settingsCity">Ville</label>
                                    <input type="text" id="settingsCity" placeholder="Paris">
                                </div>
                            </div>
                            <div class="settings-form-group">
                                <label for="settingsCountry">Pays</label>
                                <input type="text" id="settingsCountry" placeholder="France" value="France">
                            </div>
                        </div>

                        <div class="settings-btn-group">
                            <button class="settings-btn" onclick="saveAccountSettings()">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="20" height="20" fill="currentColor">
                                    <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
                                </svg>
                                Enregistrer les modifications
                            </button>
                        </div>
                    </div>

                    <!-- Panel Sécurité -->
                    <div class="settings-panel" id="securityPanel">
                        <!-- Section Email -->
                        <div class="settings-section">
                            <h3 class="settings-section-title">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                                    <path d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"/>
                                </svg> Adresse email
                            </h3>
                            <div class="settings-form-group">
                                <label for="settingsCurrentEmail">Email actuel</label>
                                <input type="email" id="settingsCurrentEmail" disabled>
                            </div>
                            <div class="settings-form-group">
                                <label for="settingsNewEmail">Nouvel email</label>
                                <input type="email" id="settingsNewEmail" placeholder="nouveau@email.com">
                            </div>
                            <div class="settings-form-group">
                                <label for="settingsEmailPassword">Mot de passe actuel (pour confirmer)</label>
                                <input type="password" id="settingsEmailPassword" placeholder="••••••••">
                            </div>
                            <button class="settings-btn secondary" onclick="changeEmail()">
                                Changer l'email
                            </button>
                        </div>

                        <!-- Section Mot de passe -->
                        <div class="settings-section">
                            <h3 class="settings-section-title">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                                    <path d="M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2z"/>
                                </svg> Mot de passe
                            </h3>
                            <div class="settings-form-group">
                                <label for="settingsCurrentPassword">Mot de passe actuel</label>
                                <input type="password" id="settingsCurrentPassword" placeholder="••••••••">
                            </div>
                            <div class="settings-form-group">
                                <label for="settingsNewPassword">Nouveau mot de passe</label>
                                <input type="password" id="settingsNewPassword" placeholder="••••••••" minlength="6">
                            </div>
                            <div class="settings-form-group">
                                <label for="settingsConfirmPassword">Confirmer le nouveau mot de passe</label>
                                <input type="password" id="settingsConfirmPassword" placeholder="••••••••" minlength="6">
                            </div>
                            <button class="settings-btn secondary" onclick="changePassword()">
                                Changer le mot de passe
                            </button>
                        </div>

                        <!-- Section 2FA -->
                        <div class="settings-section">
                            <h3 class="settings-section-title">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                                    <path d="M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zm0 10.99h7c-.53 4.12-3.28 7.79-7 8.94V12H5V6.3l7-3.11v8.8z"/>
                                </svg> Authentification à double facteur (2FA)
                                <span class="status-badge inactive" id="2faStatus">
                                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                                        <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
                                    </svg>
                                    <span id="2faStatusText">Désactivé</span>
                                </span>
                            </h3>

                            <div class="toggle-container">
                                <div class="toggle-info">
                                    <h4>Activer l'authentification 2FA</h4>
                                    <p>Protégez votre compte avec une couche de sécurité supplémentaire</p>
                                </div>
                                <label class="toggle-switch">
                                    <input type="checkbox" id="toggle2FA" onchange="toggle2FA()">
                                    <span class="toggle-slider"></span>
                                </label>
                            </div>

                            <!-- Section QR Code (cachée par défaut) -->
                            <div class="qr-section" id="qrSection">
                                <p class="qr-instructions">
                                    <strong>Étape 1:</strong> Téléchargez une application d'authentification comme <strong>Google Authenticator</strong>, <strong>Microsoft Authenticator</strong> ou <strong>Authy</strong>.<br><br>
                                    <strong>Étape 2:</strong> Scannez ce QR code avec l'application :
                                </p>

                                <div class="qr-code-container" id="qrCodeContainer">
                                    <!-- Le QR code sera généré ici -->
                                </div>

                                <p class="qr-instructions">
                                    Ou entrez manuellement cette clé secrète :
                                </p>
                                <div class="secret-key" id="secretKey">XXXX XXXX XXXX XXXX</div>

                                <p class="qr-instructions">
                                    <strong>Étape 3:</strong> Entrez le code à 6 chiffres généré par l'application :
                                </p>

                                <div class="verification-input">
                                    <input type="text" maxlength="1" class="code-input" data-index="0" oninput="handleCodeInput(this)" onkeydown="handleCodeKeydown(event, this)">
                                    <input type="text" maxlength="1" class="code-input" data-index="1" oninput="handleCodeInput(this)" onkeydown="handleCodeKeydown(event, this)">
                                    <input type="text" maxlength="1" class="code-input" data-index="2" oninput="handleCodeInput(this)" onkeydown="handleCodeKeydown(event, this)">
                                    <input type="text" maxlength="1" class="code-input" data-index="3" oninput="handleCodeInput(this)" onkeydown="handleCodeKeydown(event, this)">
                                    <input type="text" maxlength="1" class="code-input" data-index="4" oninput="handleCodeInput(this)" onkeydown="handleCodeKeydown(event, this)">
                                    <input type="text" maxlength="1" class="code-input" data-index="5" oninput="handleCodeInput(this)" onkeydown="handleCodeKeydown(event, this)">
                                </div>

                                <div class="settings-btn-group" style="justify-content: center;">
                                    <button class="settings-btn" onclick="verify2FACode()">
                                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="20" height="20" fill="currentColor">
                                            <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
                                        </svg>
                                        Vérifier et activer
                                    </button>
                                    <button class="settings-btn secondary" onclick="cancel2FASetup()">
                                        Annuler
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- Section Données et Confidentialité (RGPD) -->
                        <div class="settings-section" style="border: 2px solid rgba(221, 172, 11, 0.3); background: rgba(221, 172, 11, 0.05);">
                            <h3 class="settings-section-title" style="color: #ddac0b;">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                                    <path d="M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zm-2 16l-4-4 1.41-1.41L10 14.17l6.59-6.59L18 9l-8 8z"/>
                                </svg> Mes données personnelles (RGPD)
                            </h3>

                            <div style="background: rgba(255, 255, 255, 0.05); padding: 15px; border-radius: 10px; margin-bottom: 20px;">
                                <p style="color: rgba(255, 255, 255, 0.9); margin: 0 0 10px 0; font-size: 0.95em;">
                                    📋 <strong>Vos droits RGPD</strong>
                                </p>
                                <ul style="color: rgba(255, 255, 255, 0.8); margin: 0; padding-left: 20px; font-size: 0.9em; line-height: 1.8;">
                                    <li>Droit d'accès à vos données</li>
                                    <li>Droit de rectification (via l'onglet Compte)</li>
                                    <li>Droit à l'effacement (suppression de compte)</li>
                                    <li>Droit à la portabilité (export de vos données)</li>
                                </ul>
                            </div>

                            <div class="settings-btn-group" style="gap: 15px;">
                                <button class="settings-btn" onclick="exportMyData()" style="background: linear-gradient(135deg, #3b82f6, #1e40af); flex: 1;">
                                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="20" height="20" fill="currentColor">
                                        <path d="M19 12v7H5v-7H3v7c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-7h-2zm-6 .67l2.59-2.58L17 11.5l-5 5-5-5 1.41-1.41L11 12.67V3h2z"/>
                                    </svg>
                                    📥 Télécharger mes données
                                </button>

                                <button class="settings-btn danger" onclick="deleteMyAccount()" style="background: linear-gradient(135deg, #ff4444, #cc0000); flex: 1;">
                                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="20" height="20" fill="currentColor">
                                        <path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"/>
                                    </svg>
                                    🗑️ Supprimer mon compte
                                </button>
                            </div>

                            <p style="color: rgba(255, 68, 68, 0.9); font-size: 0.85em; margin: 15px 0 0 0; text-align: center;">
                                ⚠️ La suppression de votre compte est <strong>irréversible</strong> et effacera toutes vos données conformément au RGPD.
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Navigation -->
        <div class="nav-wrapper">
            <button class="nav-edit-btn" id="navEditBtn" onclick="toggleNavEditMode()" style="display: none;" title="Modifier l'ordre de la navigation">
                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path>
                    <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path>
                </svg>
            </button>
            <nav id="mainNav">
                <ul id="navList">
                    <li data-nav-id="home"><a href="#" class="nav-link active" data-section="home">Accueil</a></li>
                    <li data-nav-id="evenements"><a href="#" class="nav-link" data-section="evenements">Évènements</a></li>
                    <li data-nav-id="creations"><a href="#" class="nav-link" data-section="creations">Créations Uniques</a></li>
                    <li data-nav-id="art"><a href="#" class="nav-link" data-section="art">Art & Expression</a></li>
                    <li data-nav-id="histoire"><a href="#" class="nav-link" data-section="histoire">Mon Histoire</a></li>
                </ul>
            </nav>
        </div>

        <!-- Section Accueil -->
        <div class="content-section active" id="home">
            <div class="main-card">
                <p class="about-text">
                    Bonjour, je m'appelle Alpha, j'ai 17 ans et je suis un artiste qui produit ses créations sur des vêtements. J'y raconte ma vie et les épreuves que j'ai endurées pour en arriver là où j'en suis.
                </p>

                <div style="text-align: center;">
                    <a href="#contact" class="social-btn" onclick="scrollToContact(event)">
                        <span>Rejoindre mes réseaux sociaux</span>
                    </a>
                </div>
            </div>

            <!-- Carrousel moderne horizontal -->
            <div class="carousel-container">
                <div class="carousel-wrapper">
                    <div class="carousel-inner" id="carouselInner">
                        <!-- Compteur -->
                        <div class="carousel-counter">
                            <span id="currentSlide">1</span> / <span id="totalSlides">4</span>
                        </div>

                        <!-- Track des slides -->
                        <div class="carousel-track" id="carouselTrack">
                            <!-- Slide 1 -->
                            <div class="carousel-slide">
                                <div class="carousel-placeholder">
                                    <div class="carousel-placeholder-text">IMAGE 1</div>
                                </div>
                            </div>

                            <!-- Slide 2 -->
                            <div class="carousel-slide">
                                <div class="carousel-placeholder">
                                    <div class="carousel-placeholder-text">IMAGE 2</div>
                                </div>
                            </div>

                            <!-- Slide 3 -->
                            <div class="carousel-slide">
                                <div class="carousel-placeholder">
                                    <div class="carousel-placeholder-text">IMAGE 3</div>
                                </div>
                            </div>

                            <!-- Slide 4 -->
                            <div class="carousel-slide">
                                <div class="carousel-placeholder">
                                    <div class="carousel-placeholder-text">IMAGE 4</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Contrôles du carrousel (en dehors) -->
                    <div class="carousel-controls">
                        <button class="carousel-btn" onclick="prevSlideHorizontal()" aria-label="Précédent">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                                <path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"/>
                            </svg>
                        </button>
                        <button class="carousel-btn" onclick="nextSlideHorizontal()" aria-label="Suivant">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                                <path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"/>
                            </svg>
                        </button>
                    </div>

                    <!-- Indicateurs -->
                    <div class="carousel-indicators" id="carouselIndicators">
                        <button class="carousel-indicator active" onclick="goToSlideHorizontal(0)" aria-label="Slide 1"></button>
                        <button class="carousel-indicator" onclick="goToSlideHorizontal(1)" aria-label="Slide 2"></button>
                        <button class="carousel-indicator" onclick="goToSlideHorizontal(2)" aria-label="Slide 3"></button>
                        <button class="carousel-indicator" onclick="goToSlideHorizontal(3)" aria-label="Slide 4"></button>
                    </div>
                </div>
            </div>

            <!-- Section Boutique transformée en onglet -->
            <div class="boutique-section">
                <h2>Boutique</h2>
                <p style="text-align: center; color: rgba(255, 255, 255, 0.8); font-size: 1.2em; margin-bottom: 40px;">
                    Découvrez ma collection de vêtements uniques
                </p>

                <div class="boutique-link-container" style="display: flex; justify-content: center;">
                    <a href="boutique.html" class="boutique-main-btn">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" style="width: 40px; height: 40px; margin-bottom: 15px;">
                            <path d="M7 18c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zM1 2v2h2l3.6 7.59-1.35 2.45c-.16.28-.25.61-.25.96 0 1.1.9 2 2 2h12v-2H7.42c-.14 0-.25-.11-.25-.25l.03-.12.9-1.63h7.45c.75 0 1.41-.41 1.75-1.03l3.58-6.49c.08-.14.12-.31.12-.48 0-.55-.45-1-1-1H5.21l-.94-2H1zm16 16c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2z"/>
                        </svg>
                        <span style="font-size: 1.5em; font-weight: 700;">Accéder à la boutique</span>
                        <span style="font-size: 0.9em; opacity: 0.8; margin-top: 10px;">Collections Homme • Femme • Enfant</span>
                    </a>
                </div>
            </div>
        </div>

        <!-- Section Évènements -->
        <div class="content-section" id="evenements">
            <div class="main-card">
                <h2 style="color: #ddac0b; font-size: 2.5em; text-align: center; margin-bottom: 30px; text-shadow: 0 0 20px rgba(221, 172, 11, 0.5);">Évènements</h2>
                <p class="about-text" style="text-align: center; margin-bottom: 40px;">
                    Retrouvez-moi lors de mes prochains évènements, expositions et collaborations artistiques.
                </p>
            </div>

            <div class="gallery">
                <div class="gallery-item" id="event1" style="position: relative;">
                    <div class="icon" onclick="openCardPopup('event1')" style="cursor: pointer;">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="#ddac0b" style="width: 80px; height: 80px;">
                            <path d="M19 4h-1V2h-2v2H8V2H6v2H5c-1.11 0-1.99.9-1.99 2L3 20c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 16H5V10h14v10zM9 14H7v-2h2v2zm4 0h-2v-2h2v2zm4 0h-2v-2h2v2zm-8 4H7v-2h2v2zm4 0h-2v-2h2v2zm4 0h-2v-2h2v2z"/>
                        </svg>
                    </div>
                    <h3 onclick="openCardPopup('event1')" style="cursor: pointer;">Expositions à venir</h3>
                    <p onclick="openCardPopup('event1')" style="cursor: pointer;">Découvrez mes prochaines expositions et vernissages où je présenterai mes dernières créations</p>
                    <a href="#contact" onclick="scrollToContact(event); return false;">
                        <span style="display: flex; align-items: center; justify-content: center; gap: 8px;">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" style="width: 20px; height: 20px;">
                                <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
                            </svg>
                            Rejoindre
                        </span>
                    </a>
                </div>

                <div class="gallery-item" id="event2" onclick="openCardPopup('event2')">
                    <div class="icon">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="#ddac0b" style="width: 80px; height: 80px;">
                            <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
                        </svg>
                    </div>
                    <h3>Évènements passés</h3>
                    <p>Revivez les moments forts de mes précédents évènements et collaborations artistiques</p>
                </div>

                <div class="gallery-item" id="event3" onclick="openCardPopup('event3')">
                    <div class="icon">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="#ddac0b" style="width: 80px; height: 80px;">
                            <path d="M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z"/>
                        </svg>
                    </div>
                    <h3>Collaborations</h3>
                    <p>Projets collaboratifs avec d'autres artistes et créateurs pour des évènements uniques</p>
                </div>
            </div>

            <!-- Timeline des évènements -->
            <div class="main-card" style="margin-top: 40px;">
                <h3 style="color: #ddac0b; font-size: 1.8em; text-align: center; margin-bottom: 30px; font-family: 'Montserrat', sans-serif; font-weight: 700;">Prochains rendez-vous</h3>

                <div class="event-item" data-event-id="event1" style="background: rgba(255, 255, 255, 0.05); border-radius: 15px; padding: 25px; margin-bottom: 20px; border-left: 4px solid #ddac0b; cursor: pointer; transition: all 0.3s ease; position: relative; z-index: 10;">
                    <div style="display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 15px; pointer-events: none;">
                        <div>
                            <h4 class="event-title" style="color: #ddac0b; font-size: 1.3em; margin-bottom: 8px; font-weight: 700;">Exposition "Mouvement Créatif"</h4>
                            <p class="event-location" style="color: rgba(255, 255, 255, 0.8); margin-bottom: 5px;">Galerie d'Art Moderne - Paris</p>
                            <p class="event-description" style="color: rgba(255, 255, 255, 0.6); font-size: 0.95em;">Collection complète de mes dernières créations vestimentaires</p>
                        </div>
                        <div style="background: rgba(221, 172, 11, 0.2); padding: 15px 25px; border-radius: 10px; text-align: center; min-width: 120px;">
                            <div class="event-status" style="color: #ddac0b; font-size: 1.5em; font-weight: 700;">À venir</div>
                            <div class="event-date" style="color: rgba(255, 255, 255, 0.8); font-size: 0.9em; margin-top: 5px;">Dates à confirmer</div>
                        </div>
                    </div>
                </div>

                <div class="event-item" data-event-id="event2" style="background: rgba(255, 255, 255, 0.05); border-radius: 15px; padding: 25px; margin-bottom: 20px; border-left: 4px solid #ddac0b; cursor: pointer; transition: all 0.3s ease; position: relative; z-index: 10;">
                    <div style="display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 15px; pointer-events: none;">
                        <div>
                            <h4 class="event-title" style="color: #ddac0b; font-size: 1.3em; margin-bottom: 8px; font-weight: 700;">Atelier Créatif Ouvert</h4>
                            <p class="event-location" style="color: rgba(255, 255, 255, 0.8); margin-bottom: 5px;">Studio AlphaMouv</p>
                            <p class="event-description" style="color: rgba(255, 255, 255, 0.6); font-size: 0.95em;">Venez découvrir mon processus créatif et échanger autour de l'art vestimentaire</p>
                        </div>
                        <div style="background: rgba(221, 172, 11, 0.2); padding: 15px 25px; border-radius: 10px; text-align: center; min-width: 120px;">
                            <div class="event-status" style="color: #ddac0b; font-size: 1.5em; font-weight: 700;">À venir</div>
                            <div class="event-date" style="color: rgba(255, 255, 255, 0.8); font-size: 0.9em; margin-top: 5px;">Dates à confirmer</div>
                        </div>
                    </div>
                </div>

                <div style="text-align: center; margin-top: 30px;">
                    <p style="color: rgba(255, 255, 255, 0.7); font-style: italic;">
                        Restez connecté sur mes réseaux sociaux pour ne manquer aucun évènement !
                    </p>
                </div>
            </div>

            <!-- Section Posts Instagram -->
            <div class="main-card" style="margin-top: 40px;">
                <div style="text-align: center; margin-bottom: 40px;">
                    <h3 style="color: #ddac0b; font-size: 2em; margin-bottom: 15px; font-family: 'Montserrat', sans-serif; font-weight: 700;">
                        Suivez mon actualité
                    </h3>
                    <p style="color: rgba(255, 255, 255, 0.8); font-size: 1.1em; max-width: 700px; margin: 0 auto;">
                        Découvrez mes dernières créations, coulisses et inspirations sur Instagram
                    </p>
                </div>

                <!-- Bouton ajouter post (visible admin uniquement) -->
                <div id="addInstagramPostBtn" style="display: none; text-align: center; margin-bottom: 30px;">
                    <button onclick="openAddInstagramPost()" style="
                        padding: 15px 35px;
                        background: linear-gradient(135deg, #ddac0b, #c4d10c);
                        border: 2px solid rgba(255, 255, 255, 0.3);
                        border-radius: 15px;
                        color: #000;
                        font-size: 1.1em;
                        font-weight: 700;
                        cursor: pointer;
                        box-shadow: 0 5px 20px rgba(221, 172, 11, 0.4);
                        transition: all 0.3s ease;
                    " onmouseover="this.style.transform='translateY(-3px)'; this.style.boxShadow='0 8px 25px rgba(221, 172, 11, 0.6)'" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 5px 20px rgba(221, 172, 11, 0.4)'">
                        ➕ Ajouter un post Instagram
                    </button>
                </div>

                <!-- Grille des posts Instagram -->
                <div id="instagramPostsGrid" style="
                    display: grid;
                    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
                    gap: 25px;
                    margin-bottom: 30px;
                ">
                    <!-- Les posts seront ajoutés ici dynamiquement -->
                </div>

                <!-- Message si aucun post -->
                <div id="noInstagramPosts" style="text-align: center; padding: 60px 20px; color: rgba(255, 255, 255, 0.5);">
                    <p style="font-size: 1.2em; margin-bottom: 10px;">Aucun post Instagram pour le moment</p>
                    <p style="font-size: 0.9em;">Les derniers posts apparaîtront ici</p>
                </div>

                <!-- Lien vers Instagram -->
                <div style="text-align: center; margin-top: 30px;">
                    <a href="https://www.instagram.com/b.a.b.empirevision?igsh=dnl3ZTIzbnI1Ymtl" target="_blank" style="
                        display: inline-block;
                        padding: 12px 30px;
                        background: rgba(255, 255, 255, 0.1);
                        border: 2px solid rgba(221, 172, 11, 0.3);
                        border-radius: 12px;
                        color: #ddac0b;
                        text-decoration: none;
                        font-weight: 600;
                        transition: all 0.3s ease;
                    " onmouseover="this.style.background='rgba(221, 172, 11, 0.15)'; this.style.borderColor='rgba(221, 172, 11, 0.6)'" onmouseout="this.style.background='rgba(255, 255, 255, 0.1)'; this.style.borderColor='rgba(221, 172, 11, 0.3)'">
                        → Voir plus sur Instagram
                    </a>
                </div>
            </div>
        </div>

        <!-- Section Créations Uniques -->
        <div class="content-section" id="creations">
            <div class="main-card">
                <h2 style="color: #ddac0b; font-size: 2.5em; text-align: center; margin-bottom: 30px; text-shadow: 0 0 20px rgba(221, 172, 11, 0.5);">Créations Uniques</h2>
                <p class="about-text">
                    Chaque vêtement que je crée est une pièce unique, pensée et réalisée à la main. Mes créations ne sont pas de simples habits, ce sont des toiles sur lesquelles j'exprime mes émotions, mes rêves et mon parcours personnel. Chaque trait, chaque couleur raconte
                    une partie de mon histoire.
                </p>
            </div>

            <div class="gallery">
                <div class="gallery-item" id="card1" onclick="openCardPopup('card1')">
                    <div class="icon">
                        <img src="images/1000007798.jpg" alt="Créations Uniques">
                    </div>
                    <h3>Art Vestimentaire</h3>
                    <p>Des pièces uniques qui fusionnent mode et expression artistique</p>
                </div>

                <div class="gallery-item" id="card2" onclick="openCardPopup('card2')">
                    <div class="icon">
                        <img src="images/1000013795.jpg" alt="Techniques">
                    </div>
                    <h3>Techniques Mixtes</h3>
                    <p>Peinture, dessin et customisation pour des résultats exceptionnels</p>
                </div>

                <div class="gallery-item" id="card3" onclick="openCardPopup('card3')">
                    <div class="icon">
                        <img src="images/1000007798.jpg" alt="Collection">
                    </div>
                    <h3>Collections Limitées</h3>
                    <p>Chaque création est produite en édition limitée ou unique</p>
                </div>
            </div>
        </div>

        <!-- Section Art & Expression -->
        <div class="content-section" id="art">
            <div class="main-card">
                <h2 style="color: #ddac0b; font-size: 2.5em; text-align: center; margin-bottom: 30px; text-shadow: 0 0 20px rgba(221, 172, 11, 0.5);">Art & Expression</h2>
                <p class="about-text">
                    L'art est mon langage, ma façon de communiquer avec le monde. À travers mes créations, j'exprime ce que les mots ne peuvent pas dire. Chaque œuvre porte en elle une émotion, un message, un fragment de mon âme. C'est ma manière de transformer la douleur
                    en beauté, les épreuves en force créatrice.
                </p>
            </div>

            <div class="gallery">
                <div class="gallery-item" id="card4" onclick="openCardPopup('card4')">
                    <div class="icon">
                        <img src="images/1000007790.jpg" alt="Expression">
                    </div>
                    <h3>Expression Personnelle</h3>
                    <p>L'art comme moyen d'exprimer mes émotions et mon vécu</p>
                </div>

                <div class="gallery-item" id="card5" onclick="openCardPopup('card5')">
                    <div class="icon">
                        <img src="images/1000007789.jpg" alt="Symbolisme">
                    </div>
                    <h3>Symbolisme</h3>
                    <p>Chaque élément de mes créations porte une signification profonde</p>
                </div>

                <div class="gallery-item" id="card6" onclick="openCardPopup('card6')">
                    <div class="icon">
                        <img src="images/1000007796.jpg" alt="Évolution">
                    </div>
                    <h3>Évolution Artistique</h3>
                    <p>Mon style évolue avec mon parcours et mes expériences</p>
                </div>
            </div>
        </div>

        <!-- Section Mon Histoire -->
        <div class="content-section" id="histoire">
            <div class="main-card">
                <h2 style="color: #ddac0b; font-size: 2.5em; text-align: center; margin-bottom: 30px; text-shadow: 0 0 20px rgba(221, 172, 11, 0.5);">Mon Histoire</h2>
                <p class="about-text">
                    Mon parcours n'a pas été facile. J'ai traversé des épreuves qui m'ont forgé, façonné en tant que personne et artiste. Chaque obstacle surmonté, chaque moment difficile est devenu une source d'inspiration. À 17 ans, je transforme mes expériences en art,
                    mes blessures en créations. Mon histoire est celle d'une renaissance par l'art, d'une transformation continue où chaque création marque une étape de mon évolution.
                </p>
            </div>

            <div class="gallery">
                <div class="gallery-item" id="card7" onclick="openCardPopup('card7')">
                    <div class="icon">
                        <img src="images/1000007798.jpg" alt="Parcours">
                    </div>
                    <h3>Mon Parcours</h3>
                    <p>Les épreuves qui m'ont construit et inspiré</p>
                </div>

                <div class="gallery-item" id="card8" onclick="openCardPopup('card8')">
                    <div class="icon">
                        <img src="images/1000013795.jpg" alt="Authenticité">
                    </div>
                    <h3>Authenticité</h3>
                    <p>Chaque création reflète ma vérité et mes expériences</p>
                </div>

                <div class="gallery-item" id="card9" onclick="openCardPopup('card9')">
                    <div class="icon">
                        <img src="images/1000007796.jpg" alt="Vision">
                    </div>
                    <h3>Ma Vision</h3>
                    <p>Créer un univers artistique unique et inspirant</p>
                </div>
            </div>
        </div>

        <!-- Section Contact & Newsletter -->
        <div class="contact-section" id="contact">
            <h2>Contact</h2>

            <div class="contact-grid">
                <div class="contact-box gmail-card">
                    <div class="gmail-content">
                        <div class="gmail-icon">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M20 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"/>
                            </svg>
                        </div>
                        <a href="https://mail.google.com/mail/?view=cm&to=bab.empirevision@gmail.com" class="gmail-btn" target="_blank">
                            Envoyer un Email
                        </a>
                    </div>
                </div>

                <div class="contact-box instagram-card">
                    <div class="instagram-content">
                        <div class="instagram-icon">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"/>
                            </svg>
                        </div>
                        <a href="https://www.instagram.com/b.a.b.empirevision?igsh=dnl3ZTIzbnI1Ymtl" class="instagram-btn" target="_blank">
                            Suivre sur Instagram
                        </a>
                    </div>
                </div>

                <div class="contact-box youtube-card">
                    <div class="youtube-content">
                        <div class="youtube-icon">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"/>
                            </svg>
                        </div>
                        <a href="https://www.youtube.com/@B-A-BEMPIRE-VISION" class="youtube-btn" target="_blank">
                            S'abonner sur YouTube
                        </a>
                    </div>
                </div>
            </div>

            <div class="newsletter-box">
                <h3>Newsletter</h3>
                <p>Restez informé de mes nouvelles créations, collections et évènements !</p>
                <form class="newsletter-form" onsubmit="return handleNewsletter(event)">
                    <input type="email" placeholder="Votre adresse email" required>
                    <button type="submit">S'inscrire</button>
                </form>
            </div>

        </div>

        <!-- Footer -->
        <footer>
            <p>© 2026 AlphaMouv - Artiste Créateur | Fait avec passion</p>
            <p style="font-size: 0.9em; color: rgba(255, 255, 255, 0.6);">Toutes les créations sont des œuvres originales et protégées</p>
        </footer>
    </div>

    <script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script>
    <script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script>
    <script>
        // Génération de particules animées
        const particlesContainer = document.getElementById('particles');
        const particleCount = 60;

        for (let i = 0; i < particleCount; i++) {
            const particle = document.createElement('div');
            particle.className = 'particle';

            const size = Math.random() * 6 + 2;
            particle.style.width = size + 'px';
            particle.style.height = size + 'px';
            particle.style.left = Math.random() * 100 + '%';
            particle.style.animationDelay = Math.random() * 20 + 's';
            particle.style.animationDuration = (Math.random() * 10 + 15) + 's';

            particlesContainer.appendChild(particle);
        }

        // Génération des étoiles scintillantes
        const starsContainer = document.getElementById('stars');
        const starCount = 150;

        for (let i = 0; i < starCount; i++) {
            const star = document.createElement('div');
            star.className = 'star';

            const size = Math.random() * 3 + 1;
            star.style.width = size + 'px';
            star.style.height = size + 'px';
            star.style.left = Math.random() * 100 + '%';
            star.style.top = Math.random() * 100 + '%';
            star.style.animationDelay = Math.random() * 3 + 's';
            star.style.animationDuration = (Math.random() * 2 + 2) + 's';

            starsContainer.appendChild(star);
        }


        // Génération des petites étoiles autour du titre
        const header = document.querySelector('header');
        const starSymbols = ['\u2605', '\u2726', '\u2727', '\u22C6', '\u2736', '\u2734'];
        const starColors = ['#FFD700', '#FFA500', '#FF6B6B', '#FFE066', '#FFAA00', '#ddac0b'];

        const forbiddenZones = [{
            xMin: 30,
            xMax: 70,
            yMin: 70,
            yMax: 150
        }, {
            xMin: 0,
            xMax: 25,
            yMin: 70,
            yMax: 150
        }, {
            xMin: 75,
            xMax: 100,
            yMin: 70,
            yMax: 150
        }];

        function isPositionForbidden(x, y) {
            return forbiddenZones.some(zone =>
                x >= zone.xMin && x <= zone.xMax &&
                y >= zone.yMin && y <= zone.yMax
            );
        }

        function isTooClose(x, y, existingStars, minDistanceX = 12, minDistanceY = 25) {
            return existingStars.some(star => {
                const dx = Math.abs(star.x - x);
                const dy = Math.abs(star.y - y);
                return dx < minDistanceX && dy < minDistanceY;
            });
        }

        const existingStars = [];
        const maxAttempts = 200;
        const targetStars = 25;
        let starsCreated = 0;

        while (starsCreated < targetStars) {
            let attempts = 0;
            let validPosition = false;
            let xPos, yPos;

            while (!validPosition && attempts < maxAttempts) {
                xPos = Math.random() * 100;
                if (Math.random() > 0.5) {
                    yPos = Math.random() * 60 + 5;
                } else {
                    yPos = Math.random() * 50 + 155;
                }

                if (!isPositionForbidden(xPos, yPos) &&
                    !isTooClose(xPos, yPos, existingStars)) {
                    validPosition = true;
                }
                attempts++;
            }

            if (validPosition) {
                const star = document.createElement('div');
                star.className = 'tiny-star';
                const symbol = starSymbols[Math.floor(Math.random() * starSymbols.length)];
                const color = starColors[Math.floor(Math.random() * starColors.length)];
                star.textContent = symbol;

                star.style.position = 'absolute';
                star.style.left = xPos + '%';
                star.style.top = yPos + 'px';
                star.style.fontSize = (Math.random() * 0.8 + 0.6) + 'em';
                star.style.color = color;
                star.style.opacity = Math.random() * 0.3 + 0.7;
                star.style.animation = 'twinkle ' + (Math.random() * 3 + 2) + 's infinite ease-in-out';
                star.style.animationDelay = Math.random() * 3 + 's';
                star.style.pointerEvents = 'none';
                star.style.textShadow = '0 0 8px ' + color + ', 0 0 15px ' + color;
                star.style.zIndex = '0';

                header.appendChild(star);
                existingStars.push({
                    x: xPos,
                    y: yPos
                });
                starsCreated++;
            } else {
                break;
            }
        }

        // Les images de fond sont maintenant gérées par CSS avec ::after

        // ===== ÉLÉMENTS FLOTTANTS PAR SECTION =====
        const floatingContainer = document.getElementById('floatingElements');
        let currentFloatingSection = 'home';

        // SVG des éléments pour chaque section
        const sectionElements = {
            home: {
                items: [
                    // Éclaboussures de peinture colorées
                    {
                        type: 'splash',
                        colors: ['#FF6B6B', '#FFE066', '#4ECDC4', '#A06CD5', '#FF8C42']
                    }
                ],
                splashCount: 12
            },
            evenements: {
                items: [
                    // Calendrier
                    {
                        type: 'svg',
                        svg: '<svg viewBox="0 0 40 40"><rect x="6" y="8" width="28" height="26" rx="2" fill="none" stroke="currentColor" stroke-width="1.5"/><line x1="6" y1="14" x2="34" y2="14" stroke="currentColor" stroke-width="1.5"/><line x1="13" y1="5" x2="13" y2="11" stroke="currentColor" stroke-width="2" stroke-linecap="round"/><line x1="27" y1="5" x2="27" y2="11" stroke="currentColor" stroke-width="2" stroke-linecap="round"/><circle cx="13" cy="20" r="2" fill="currentColor"/><circle cx="20" cy="20" r="2" fill="currentColor"/><circle cx="27" cy="20" r="2" fill="currentColor"/><circle cx="13" cy="27" r="2" fill="currentColor"/><circle cx="20" cy="27" r="2" fill="currentColor"/></svg>'
                    },
                    // Étoile (évènement spécial)
                    {
                        type: 'svg',
                        svg: '<svg viewBox="0 0 40 40"><path d="M20 6 L24 16 L35 18 L27 26 L29 37 L20 32 L11 37 L13 26 L5 18 L16 16 Z" fill="none" stroke="currentColor" stroke-width="1.5"/></svg>'
                    },
                    // Confettis
                    {
                        type: 'svg',
                        svg: '<svg viewBox="0 0 40 40"><rect x="8" y="12" width="4" height="8" fill="currentColor" opacity="0.7" transform="rotate(20 10 16)"/><rect x="18" y="8" width="3" height="6" fill="currentColor" opacity="0.6" transform="rotate(-15 19 11)"/><rect x="28" y="16" width="5" height="9" fill="currentColor" opacity="0.8" transform="rotate(35 30 20)"/><rect x="14" y="26" width="4" height="7" fill="currentColor" opacity="0.5" transform="rotate(-25 16 29)"/><circle cx="26" cy="30" r="2" fill="currentColor" opacity="0.7"/></svg>'
                    },
                    // Ballons
                    {
                        type: 'svg',
                        svg: '<svg viewBox="0 0 40 40"><ellipse cx="15" cy="15" rx="6" ry="8" fill="none" stroke="currentColor" stroke-width="1.5"/><line x1="15" y1="23" x2="15" y2="32" stroke="currentColor" stroke-width="1" stroke-dasharray="2,1"/><ellipse cx="25" cy="18" rx="5" ry="7" fill="none" stroke="currentColor" stroke-width="1.5"/><line x1="25" y1="25" x2="25" y2="34" stroke="currentColor" stroke-width="1" stroke-dasharray="2,1"/></svg>'
                    }
                ],
                colors: ['#ddac0b', '#FF6B6B', '#4ECDC4', '#FFE066', '#A06CD5']
            },
            creations: {
                items: [
                    // Bobine de fil
                    {
                        type: 'svg',
                        svg: '<svg viewBox="0 0 40 40"><ellipse cx="20" cy="8" rx="12" ry="5" fill="none" stroke="currentColor" stroke-width="1.5"/><path d="M8 8v24c0 2.5 5.4 5 12 5s12-2.5 12-5V8" fill="none" stroke="currentColor" stroke-width="1.5"/><ellipse cx="20" cy="32" rx="12" ry="5" fill="none" stroke="currentColor" stroke-width="1.5"/><line x1="8" y1="14" x2="32" y2="14" stroke="currentColor" stroke-width="1" opacity="0.5"/><line x1="8" y1="20" x2="32" y2="20" stroke="currentColor" stroke-width="1" opacity="0.5"/><line x1="8" y1="26" x2="32" y2="26" stroke="currentColor" stroke-width="1" opacity="0.5"/></svg>'
                    },
                    // Ciseaux
                    {
                        type: 'svg',
                        svg: '<svg viewBox="0 0 40 40"><circle cx="10" cy="12" r="6" fill="none" stroke="currentColor" stroke-width="1.5"/><circle cx="10" cy="28" r="6" fill="none" stroke="currentColor" stroke-width="1.5"/><path d="M14 14 L32 28 M14 26 L32 12" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>'
                    },
                    // Cintre
                    {
                        type: 'svg',
                        svg: '<svg viewBox="0 0 40 40"><path d="M20 8 L20 12 M16 12 C16 9 18 6 20 6 C22 6 24 9 24 12" fill="none" stroke="currentColor" stroke-width="1.5"/><path d="M6 28 L20 16 L34 28" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><line x1="6" y1="28" x2="34" y2="28" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>'
                    },
                    // Aiguille avec fil
                    {
                        type: 'svg',
                        svg: '<svg viewBox="0 0 40 40"><path d="M8 32 L28 12" stroke="currentColor" stroke-width="2" stroke-linecap="round"/><ellipse cx="30" cy="10" rx="3" ry="4" fill="none" stroke="currentColor" stroke-width="1.5" transform="rotate(-45 30 10)"/><path d="M8 32 Q4 28 8 24 Q12 20 8 16" fill="none" stroke="currentColor" stroke-width="1" opacity="0.6"/></svg>'
                    }
                ],
                colors: ['#ddac0b', '#c4d10c', '#FFE066', '#FFA500']
            },
            art: {
                items: [
                    // Pinceau
                    {
                        type: 'svg',
                        svg: '<svg viewBox="0 0 40 40"><path d="M8 34 L16 26 L24 18" stroke="currentColor" stroke-width="3" stroke-linecap="round"/><path d="M24 18 Q28 14 30 10 Q32 6 28 4 Q24 2 20 6 Q16 10 20 14 Z" fill="currentColor" opacity="0.7"/></svg>'
                    },
                    // Tube de peinture
                    {
                        type: 'svg',
                        svg: '<svg viewBox="0 0 40 40"><rect x="10" y="16" width="20" height="18" rx="2" fill="none" stroke="currentColor" stroke-width="1.5"/><path d="M14 16 L14 10 L26 10 L26 16" fill="none" stroke="currentColor" stroke-width="1.5"/><ellipse cx="20" cy="8" rx="4" ry="2" fill="none" stroke="currentColor" stroke-width="1.5"/><rect x="14" y="20" width="12" height="8" rx="1" fill="currentColor" opacity="0.4"/></svg>'
                    },
                    // Palette
                    {
                        type: 'svg',
                        svg: '<svg viewBox="0 0 40 40"><ellipse cx="20" cy="22" rx="16" ry="12" fill="none" stroke="currentColor" stroke-width="1.5"/><circle cx="12" cy="18" r="3" fill="currentColor" opacity="0.6"/><circle cx="20" cy="14" r="2.5" fill="currentColor" opacity="0.5"/><circle cx="27" cy="18" r="2" fill="currentColor" opacity="0.7"/><circle cx="24" cy="26" r="2.5" fill="currentColor" opacity="0.5"/><ellipse cx="28" cy="22" rx="4" ry="3" fill="none" stroke="currentColor" stroke-width="1"/></svg>'
                    },
                    // Chevalet
                    {
                        type: 'svg',
                        svg: '<svg viewBox="0 0 40 40"><rect x="10" y="6" width="20" height="16" fill="none" stroke="currentColor" stroke-width="1.5"/><line x1="8" y1="34" x2="16" y2="22" stroke="currentColor" stroke-width="2"/><line x1="32" y1="34" x2="24" y2="22" stroke="currentColor" stroke-width="2"/><line x1="20" y1="22" x2="20" y2="34" stroke="currentColor" stroke-width="2"/></svg>'
                    }
                ],
                colors: ['#FF6B6B', '#4ECDC4', '#A06CD5', '#FFE066', '#FF8C42']
            },
            histoire: {
                items: [
                    // Spirale abstraite
                    {
                        type: 'svg',
                        svg: '<svg viewBox="0 0 40 40"><path d="M20 20 Q25 15 25 20 Q25 25 20 25 Q15 25 15 20 Q15 12 23 12 Q31 12 31 20 Q31 28 20 28 Q9 28 9 17" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/></svg>'
                    },
                    // Lignes fluides
                    {
                        type: 'svg',
                        svg: '<svg viewBox="0 0 40 40"><path d="M5 20 Q15 10 20 20 Q25 30 35 20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"/><path d="M5 28 Q15 18 20 28 Q25 38 35 28" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" opacity="0.6"/></svg>'
                    },
                    // Cercles concentriques
                    {
                        type: 'svg',
                        svg: '<svg viewBox="0 0 40 40"><circle cx="20" cy="20" r="4" fill="none" stroke="currentColor" stroke-width="1.5"/><circle cx="20" cy="20" r="9" fill="none" stroke="currentColor" stroke-width="1" opacity="0.7"/><circle cx="20" cy="20" r="14" fill="none" stroke="currentColor" stroke-width="0.8" opacity="0.4"/></svg>'
                    },
                    // Courbe infinie
                    {
                        type: 'svg',
                        svg: '<svg viewBox="0 0 40 40"><path d="M8 20 Q14 10 20 20 Q26 30 32 20 Q26 10 20 20 Q14 30 8 20" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/></svg>'
                    },
                    // Points connectés
                    {
                        type: 'svg',
                        svg: '<svg viewBox="0 0 40 40"><circle cx="10" cy="15" r="2" fill="currentColor"/><circle cx="25" cy="10" r="2" fill="currentColor"/><circle cx="30" cy="25" r="2" fill="currentColor"/><circle cx="15" cy="30" r="2" fill="currentColor"/><line x1="10" y1="15" x2="25" y2="10" stroke="currentColor" stroke-width="1" opacity="0.5"/><line x1="25" y1="10" x2="30" y2="25" stroke="currentColor" stroke-width="1" opacity="0.5"/><line x1="30" y1="25" x2="15" y2="30" stroke="currentColor" stroke-width="1" opacity="0.5"/><line x1="15" y1="30" x2="10" y2="15" stroke="currentColor" stroke-width="1" opacity="0.5"/></svg>'
                    }
                ],
                colors: ['#ddac0b', '#4169e1', '#A06CD5', '#4ECDC4']
            }
        };

        function createFloatingElements(section) {
            floatingContainer.innerHTML = '';
            var config = sectionElements[section] || sectionElements.home;

            // Créer des éclaboussures pour la section accueil
            if (config.splashCount) {
                for (let i = 0; i < config.splashCount; i++) {
                    const splash = document.createElement('div');
                    splash.className = 'paint-splash';
                    const color = config.items[0].colors[Math.floor(Math.random() * config.items[0].colors.length)];
                    const size = Math.random() * 40 + 20;
                    const side = Math.random() > 0.5 ? 'left' : 'right';
                    const xPos = side === 'left' ? Math.random() * 12 : 88 + Math.random() * 12;

                    splash.style.cssText = `
                        width: ${size}px;
                        height: ${size * (0.6 + Math.random() * 0.4)}px;
                        background: ${color};
                        left: ${xPos}%;
                        top: ${Math.random() * 90}%;
                        opacity: ${0.2 + Math.random() * 0.3};
                        animation-delay: ${Math.random() * 5}s;
                        animation-duration: ${12 + Math.random() * 8}s;
                        transform: rotate(${Math.random() * 360}deg);
                    `;
                    floatingContainer.appendChild(splash);
                }
            }

            // Créer les éléments SVG pour les autres sections
            if (config.items && config.items[0].type === 'svg') {
                const itemCount = 10;
                for (let i = 0; i < itemCount; i++) {
                    const item = document.createElement('div');
                    item.className = 'floating-item';
                    const elementConfig = config.items[Math.floor(Math.random() * config.items.length)];
                    const color = config.colors[Math.floor(Math.random() * config.colors.length)];
                    const size = 25 + Math.random() * 30;
                    const side = Math.random() > 0.5 ? 'left' : 'right';
                    const xPos = side === 'left' ? Math.random() * 10 + 2 : 88 + Math.random() * 10;

                    item.innerHTML = elementConfig.svg;
                    item.style.cssText = `
                        width: ${size}px;
                        height: ${size}px;
                        left: ${xPos}%;
                        top: ${5 + Math.random() * 85}%;
                        color: ${color};
                        animation-delay: ${Math.random() * 10}s;
                        animation-duration: ${15 + Math.random() * 10}s;
                        transform: rotate(${Math.random() * 30 - 15}deg);
                    `;
                    floatingContainer.appendChild(item);
                }
            }
        }

        // Initialiser avec la section accueil
        createFloatingElements('home');

        // Navigation entre les sections
        let currentSectionIndex = 0;
        let sectionIds = ['home', 'evenements', 'creations', 'art', 'histoire'];

        // Fonction pour attacher les événements de navigation
        function attachNavEvents() {
            const navLinks = document.querySelectorAll('.nav-link');
            const contentSections = document.querySelectorAll('.content-section');

            navLinks.forEach((link, index) => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();

                    // Déterminer la direction de l'animation
                    const targetSectionId = this.getAttribute('data-section');
                    const targetIndex = sectionIds.indexOf(targetSectionId);
                    const direction = targetIndex > currentSectionIndex ? 'right' : 'left';

                    // Retirer la classe active de tous les liens
                    navLinks.forEach(l => l.classList.remove('active'));

                    // Ajouter la classe active au lien cliqué
                    this.classList.add('active');

                    // Cacher toutes les sections
                    contentSections.forEach(section => {
                        section.classList.remove('active', 'slide-in-right', 'slide-in-left');
                    });

                    // Afficher la section correspondante avec animation
                    const targetSection = document.getElementById(targetSectionId);
                    targetSection.classList.add('active');
                    targetSection.classList.add(direction === 'right' ? 'slide-in-right' : 'slide-in-left');

                    currentSectionIndex = targetIndex;

                    // Mettre à jour les éléments flottants
                    createFloatingElements(targetSectionId);

                    // Scroll vers le haut
                    window.scrollTo({
                        top: 0,
                        behavior: 'smooth'
                    });
                });
            });
        }

        // Note: attachNavEvents() sera appelé après applyNavOrder() dans DOMContentLoaded

        // Fonctions de recherche
        function toggleSearch() {
            const searchBox = document.getElementById('searchBox');
            const searchInput = document.getElementById('searchInput');
            searchBox.classList.toggle('active');
            if (searchBox.classList.contains('active')) {
                searchInput.focus();
            }
        }

        function handleSearchKeypress(event) {
            if (event.key === 'Enter') {
                performSearch();
            }
        }

        function performSearch() {
            const query = document.getElementById('searchInput').value.trim().toLowerCase();
            if (!query) return;

            const searchMap = {
                'accueil': 'home',
                'home': 'home',
                'bienvenue': 'home',
                'evenement': 'evenements',
                'evenements': 'evenements',
                'évènement': 'evenements',
                'évènements': 'evenements',
                'expo': 'evenements',
                'exposition': 'evenements',
                'atelier': 'evenements',
                'collab': 'evenements',
                'collaboration': 'evenements',
                'creation': 'creations',
                'creations': 'creations',
                'vetement': 'creations',
                'vetements': 'creations',
                'unique': 'creations',
                'art': 'art',
                'expression': 'art',
                'artistique': 'art',
                'dessin': 'art',
                'peinture': 'art',
                'histoire': 'histoire',
                'parcours': 'histoire',
                'about': 'histoire',
                'alpha': 'histoire',
                'contact': 'contact',
                'instagram': 'contact',
                'reseau': 'contact'
            };

            let targetSection = null;
            for (const [keyword, section] of Object.entries(searchMap)) {
                if (query.includes(keyword) || keyword.includes(query)) {
                    targetSection = section;
                    break;
                }
            }

            if (targetSection) {
                const targetLink = document.querySelector('[data-section="' + targetSection + '"]');

                if (targetLink) {
                    targetLink.click();
                } else if (targetSection === 'contact') {
                    const contactSection = document.getElementById('contact');
                    if (contactSection) {
                        contactSection.scrollIntoView({
                            behavior: 'smooth',
                            block: 'start'
                        });
                    }
                }

                document.getElementById('searchBox').classList.remove('active');
                document.getElementById('searchInput').value = '';
            } else {
                alert('Aucun résultat pour "' + query + '"\n\nEssayez : accueil, créations, art, histoire, contact');
            }
        }

        document.addEventListener('click', function(e) {
            const searchContainer = document.querySelector('.search-container');
            const searchBox = document.getElementById('searchBox');
            if (searchBox && searchContainer && !searchContainer.contains(e.target)) {
                searchBox.classList.remove('active');
            }
        });

        // Fonction de sélection de catégorie boutique
        function selectCategory(type, category) {
            event.preventDefault();
            alert('Catégorie : ' + type.charAt(0).toUpperCase() + type.slice(1) + ' - ' + category.charAt(0).toUpperCase() + category.slice(1) + '\n\nCette section sera bientôt disponible avec toutes mes créations !');
        }

        // ============ SYSTÈME DE CONNEXION COMPLET ============

        // Configuration Google OAuth (vous devrez remplacer par votre vrai Client ID)
        const GOOGLE_CLIENT_ID = 'VOTRE_CLIENT_ID_GOOGLE.apps.googleusercontent.com';

        // État de l'utilisateur
        let currentUser = JSON.parse(localStorage.getItem('alphamouv_user')) || null;
        let userCart = JSON.parse(localStorage.getItem('alphamouv_cart')) || [];

        // Initialiser l'interface utilisateur au chargement
        function initUserInterface() {
            if (currentUser) {
                // Utilisateur connecté
                document.getElementById('loginBtn').style.display = 'none';
                document.getElementById('userAvatar').classList.add('visible');
                document.getElementById('cartBtn').classList.add('visible');

                // Mettre à jour les infos utilisateur
                document.getElementById('userName').textContent = currentUser.name;
                document.getElementById('userEmail').textContent = currentUser.email;
                document.getElementById('userInitials').textContent = currentUser.name.charAt(0).toUpperCase();

                // Mettre à jour le compteur du panier
                updateCartCount();
            } else {
                // Utilisateur non connecté
                document.getElementById('loginBtn').style.display = 'flex';
                document.getElementById('userAvatar').classList.remove('visible');
                document.getElementById('cartBtn').classList.remove('visible');
            }
        }

        // ============ CONNEXION AVEC GOOGLE ============

        // Initialiser Google Sign-In
        function initGoogleSignIn() {
            if (typeof google !== 'undefined') {
                google.accounts.id.initialize({
                    client_id: GOOGLE_CLIENT_ID,
                    callback: handleGoogleCallback,
                    auto_select: false,
                    cancel_on_tap_outside: true
                });
            }
        }

        // Fonction appelée quand l'utilisateur clique sur "Continuer avec Google"
        function handleGoogleLogin() {
            if (typeof google === 'undefined') {
                // Si l'API Google n'est pas chargée, utiliser un mode démo
                console.log('Google API non chargée, mode démo activé');
                simulateGoogleLogin();
                return;
            }

            try {
                // Afficher le pop-up de sélection de compte Google
                google.accounts.id.prompt((notification) => {
                    if (notification.isNotDisplayed() || notification.isSkippedMoment()) {
                        // Si le prompt ne s'affiche pas, ouvrir manuellement
                        google.accounts.id.renderButton(
                            document.getElementById('googleSignInDiv'), {
                                theme: 'outline',
                                size: 'large'
                            }
                        );
                    }
                });
            } catch (error) {
                console.error('Erreur Google Sign-In:', error);
                simulateGoogleLogin();
            }
        }

        // Callback appelé après connexion Google réussie
        function handleGoogleCallback(response) {
            // La connexion Google nécessite une configuration serveur
            // Pour l'instant, on affiche un message d'information
            alert('La connexion avec Google n\'est pas encore disponible.\n\nVeuillez utiliser le formulaire de connexion classique.');
        }

        // Simulation de connexion Google (mode démo/développement)
        function simulateGoogleLogin() {
            // La connexion Google nécessite une configuration serveur
            alert('La connexion avec Google n\'est pas encore disponible.\n\nVeuillez utiliser le formulaire de connexion classique.');
        }

        // Ouvrir le pop-up de connexion
        function openAuthPopup() {
            document.getElementById('authOverlay').classList.add('active');
        }

        // Fermer le pop-up
        function closeAuthPopup(event) {
            if (!event || event.target.id === 'authOverlay') {
                document.getElementById('authOverlay').classList.remove('active');
            }
        }

        // Changer d'onglet (Connexion / Inscription)
        function switchAuthTab(tab) {
            const tabs = document.querySelectorAll('.auth-tab');
            const forms = document.querySelectorAll('.auth-form');

            tabs.forEach(t => t.classList.remove('active'));
            forms.forEach(f => f.classList.remove('active'));

            if (tab === 'login') {
                tabs[0].classList.add('active');
                document.getElementById('loginForm').classList.add('active');
            } else {
                tabs[1].classList.add('active');
                document.getElementById('registerForm').classList.add('active');
            }
        }

        // Gérer la soumission du formulaire de connexion
        async function handleLoginSubmit(event) {
            event.preventDefault();

            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;

            try {
                // Utiliser l'API pour la connexion
                const response = await AlphaMovAPI.Auth.login(email, password);

                if (response.success && response.user) {
                    // Vérifier si l'utilisateur est banni
                    if (checkUserBanned(email)) {
                        alert('🚫 Accès refusé\n\nVotre compte a été suspendu par un administrateur.\n\nPour plus d\'informations, veuillez contacter le support.');
                        event.target.reset();
                        return;
                    }

                    // Connexion réussie
                    currentUser = {
                        name: response.user.prenom || response.user.nom || email.split('@')[0],
                        email: response.user.email,
                        role: response.user.role,
                        joinDate: response.user.created_at
                    };
                    localStorage.setItem('alphamouv_user', JSON.stringify(currentUser));

                    // Fusionner le panier invité avec le compte
                    mergeGuestCart();

                    closeAuthPopup();
                    initUserInterface();
                    updateCartCount();

                    // Message de bienvenue
                    setTimeout(() => {
                        alert(' Bienvenue ' + currentUser.name + ' !\n\nVous êtes maintenant connecté(e) à votre espace AlphaMouv.');
                    }, 300);
                }
            } catch (error) {
                console.error('Erreur connexion:', error);
                alert(' Email ou mot de passe incorrect.\n\nVeuillez réessayer ou créer un compte.');
            }

            // Réinitialiser le formulaire
            event.target.reset();
        }

        // Gérer la soumission du formulaire d'inscription
        async function handleRegisterSubmit(event) {
            event.preventDefault();

            const name = document.getElementById('registerName').value;
            const email = document.getElementById('registerEmail').value;
            const password = document.getElementById('registerPassword').value;
            const confirmPassword = document.getElementById('registerConfirmPassword').value;

            // Récupérer les données d'adresse
            const address = document.getElementById('registerAddress').value;
            const address2 = document.getElementById('registerAddress2').value;
            const postalCode = document.getElementById('registerPostalCode').value;
            const city = document.getElementById('registerCity').value;
            const country = document.getElementById('registerCountry').value;
            const phone = document.getElementById('registerPhone').value;

            // Vérifier le consentement RGPD
            const consent = document.getElementById('registerConsent').checked;
            if (!consent) {
                alert(' Vous devez accepter la collecte de vos données pour créer un compte.\n\nCeci est nécessaire pour la gestion de vos commandes et livraisons.');
                return;
            }

            // Vérifier que les mots de passe correspondent
            if (password !== confirmPassword) {
                alert(' Les mots de passe ne correspondent pas.\n\nVeuillez réessayer.');
                return;
            }

            try {
                // Utiliser l'API pour l'inscription
                const response = await AlphaMovAPI.Auth.register({
                    nom: name,
                    prenom: name.split(' ')[0],
                    email: email,
                    password: password,
                    adresse: address,
                    code_postal: postalCode,
                    ville: city,
                    telephone: phone
                });

                if (response.success && response.user) {
                    // Connexion réussie après inscription
                    currentUser = {
                        name: response.user.prenom || response.user.nom || name,
                        email: response.user.email,
                        role: response.user.role,
                        joinDate: response.user.created_at
                    };
                    localStorage.setItem('alphamouv_user', JSON.stringify(currentUser));

                    // Fusionner le panier invité
                    mergeGuestCart();

                    closeAuthPopup();
                    initUserInterface();
                    updateCartCount();

                    // Log de création de compte
                    addLog('success', 'Nouveau compte créé: ' + email);

                    // Message de bienvenue
                    setTimeout(() => {
                        alert(' Bienvenue dans la famille AlphaMouv, ' + currentUser.name + ' !\n\nVotre compte a été créé avec succès.');
                    }, 300);
                }
            } catch (error) {
                console.error('Erreur inscription:', error);
                alert(' Erreur lors de l\'inscription.\n\n' + (error.message || 'Veuillez réessayer.'));
            }

            // Réinitialiser le formulaire
            event.target.reset();
        }

        // Toggle menu utilisateur
        function toggleUserDropdown() {
            const dropdown = document.getElementById('userDropdown');
            dropdown.classList.toggle('active');
        }

        // Fermer le menu si on clique ailleurs
        document.addEventListener('click', function(e) {
            const userMenu = document.getElementById('userMenu');
            const dropdown = document.getElementById('userDropdown');
            if (userMenu && !userMenu.contains(e.target)) {
                dropdown.classList.remove('active');
            }
        });

        // Ouvrir les paramètres de profil (onglet Compte - infos personnelles)
        function openProfileSettings(event) {
            event.preventDefault();
            toggleUserDropdown();
            openSettingsModal();
            // S'assurer que l'onglet "Compte" est actif
            switchSettingsTab('account');
        }

        // Ouvrir les paramètres (onglet Sécurité - mot de passe + RGPD)
        function openSettings(event) {
            event.preventDefault();
            toggleUserDropdown();
            openSettingsModal();
            // Ouvrir directement l'onglet "Sécurité"
            switchSettingsTab('security');
        }

        // Déconnexion
        function logout(event) {
            event.preventDefault();

            if (confirm('Voulez-vous vraiment vous déconnecter ?')) {
                // Utiliser l'API pour la déconnexion
                AlphaMovAPI.Auth.logout();
                currentUser = null;

                initUserInterface();
                toggleUserDropdown();

                alert(' Vous avez été déconnecté(e) avec succès.\n\nÀ bientôt sur AlphaMouv !');
            }
        }

        // ============ FONCTIONS RGPD (DROITS DES UTILISATEURS) ============

        // Exporter les données personnelles de l'utilisateur (Droit à la portabilité)
        async function exportMyData() {
            try {
                if (!currentUser) {
                    alert(' Vous devez être connecté pour exporter vos données.');
                    return;
                }

                // Récupérer les données de l'utilisateur depuis l'API
                let userData;
                try {
                    const profileResponse = await AlphaMovAPI.Auth.getProfile();
                    userData = profileResponse.user || profileResponse;
                } catch (e) {
                    // Fallback sur les données locales
                    userData = {
                        email: currentUser.email,
                        name: currentUser.name || 'Non renseigné',
                        joinDate: currentUser.joinDate || new Date().toISOString(),
                        hasConsent: true
                    };
                }

                // Récupérer le panier de manière sécurisée
                let cart = [];
                try {
                    cart = JSON.parse(localStorage.getItem('alphamouv_cart')) || [];
                } catch (e) {
                    console.log('Panier non disponible');
                }

                // Récupérer les sessions analytics (si consentement donné)
                let consent = null;
                let sessions = [];
                try {
                    consent = JSON.parse(localStorage.getItem('alphamouv_cookie_consent'));
                    if (consent && consent.analytics) {
                        const allSessions = JSON.parse(localStorage.getItem('alphamouv_analytics_sessions')) || [];
                        sessions = allSessions.filter(s => s && s.isLoggedIn);
                    }
                } catch (e) {
                    console.log('Analytics non disponibles');
                }

                // Créer l'objet de données complètes
                const exportData = {
                    exportDate: new Date().toISOString(),
                    personal: {
                        name: userData.name || 'Non renseigné',
                        email: userData.email || 'Non renseigné',
                        joinDate: userData.joinDate || 'Non renseigné',
                        consentDate: userData.consentDate || 'Non renseigné',
                        hasConsent: userData.hasConsent || false
                    },
                    address: userData.address || {
                        street: 'Non renseigné',
                        postalCode: 'Non renseigné',
                        city: 'Non renseigné',
                        country: 'Non renseigné'
                    },
                    cart: cart,
                    analytics: {
                        hasConsent: consent ? consent.analytics : false,
                        sessions: sessions,
                        totalSessions: sessions.length
                    },
                    rgpdInfo: {
                        dataController: 'AlphaMouv',
                        rightsExercised: 'Droit à la portabilité',
                        legalBasis: 'Consentement (Article 6(1)(a) RGPD)',
                        retentionPeriod: 'Jusqu\'à suppression du compte',
                        contact: 'Contact via formulaire du site'
                    }
                };

                // Créer un PDF professionnel avec jsPDF
                const {
                    jsPDF
                } = window.jspdf;
                const doc = new jsPDF();

                // Couleurs AlphaMouv
                const blueColor = [0, 31, 63];
                const goldColor = [221, 172, 11];

                let yPos = 20;

                // En-tête du document
                doc.setFillColor(...blueColor);
                doc.rect(0, 0, 210, 40, 'F');

                doc.setTextColor(221, 172, 11);
                doc.setFontSize(24);
                doc.setFont(undefined, 'bold');
                doc.text('AlphaMouv', 105, 20, {
                    align: 'center'
                });

                doc.setFontSize(12);
                doc.setTextColor(255, 255, 255);
                doc.text('Export de vos données personnelles - RGPD', 105, 30, {
                    align: 'center'
                });

                yPos = 50;

                // Date d'export
                doc.setTextColor(0, 0, 0);
                doc.setFontSize(10);
                doc.text('Date d\'export: ' + new Date().toLocaleDateString('fr-FR') + ' à ' + new Date().toLocaleTimeString('fr-FR'), 20, yPos);
                yPos += 15;

                // Section: Informations personnelles
                doc.setFontSize(14);
                doc.setTextColor(...goldColor);
                doc.setFont(undefined, 'bold');
                doc.text('Informations personnelles', 20, yPos);
                yPos += 8;

                doc.setFontSize(10);
                doc.setTextColor(0, 0, 0);
                doc.setFont(undefined, 'normal');
                doc.text('Nom: ' + (exportData.personal.name || 'Non renseigné'), 25, yPos);
                yPos += 6;
                doc.text('Email: ' + (exportData.personal.email || 'Non renseigné'), 25, yPos);
                yPos += 6;
                doc.text('Date d\'inscription: ' + (exportData.personal.joinDate ? new Date(exportData.personal.joinDate).toLocaleDateString('fr-FR') : 'Non renseigné'), 25, yPos);
                yPos += 6;
                doc.text('Consentement RGPD: ' + (exportData.personal.hasConsent ? 'Oui' : 'Non'), 25, yPos);
                yPos += 12;

                // Section: Adresse de livraison
                doc.setFontSize(14);
                doc.setTextColor(...goldColor);
                doc.setFont(undefined, 'bold');
                doc.text('Adresse de livraison', 20, yPos);
                yPos += 8;

                doc.setFontSize(10);
                doc.setTextColor(0, 0, 0);
                doc.setFont(undefined, 'normal');
                doc.text('Rue: ' + (exportData.address.street || 'Non renseigné'), 25, yPos);
                yPos += 6;
                doc.text('Code postal: ' + (exportData.address.postalCode || 'Non renseigné'), 25, yPos);
                yPos += 6;
                doc.text('Ville: ' + (exportData.address.city || 'Non renseigné'), 25, yPos);
                yPos += 6;
                doc.text('Pays: ' + (exportData.address.country || 'Non renseigné'), 25, yPos);
                yPos += 12;

                // Section: Panier actuel
                doc.setFontSize(14);
                doc.setTextColor(...goldColor);
                doc.setFont(undefined, 'bold');
                doc.text('Panier actuel', 20, yPos);
                yPos += 8;

                doc.setFontSize(10);
                doc.setTextColor(0, 0, 0);
                doc.setFont(undefined, 'normal');

                if (exportData.cart && exportData.cart.length > 0) {
                    exportData.cart.forEach((item, index) => {
                        if (yPos > 270) {
                            doc.addPage();
                            yPos = 20;
                        }
                        doc.text((index + 1) + '. ' + item.name + ' - ' + item.price + '€ (Qté: ' + item.quantity + ', Taille: ' + item.size + ')', 25, yPos);
                        yPos += 6;
                    });
                } else {
                    doc.text('Panier vide', 25, yPos);
                    yPos += 6;
                }

                yPos += 8;

                // Section: Analytics
                if (yPos > 250) {
                    doc.addPage();
                    yPos = 20;
                }

                doc.setFontSize(14);
                doc.setTextColor(...goldColor);
                doc.setFont(undefined, 'bold');
                doc.text('Données analytics', 20, yPos);
                yPos += 8;

                doc.setFontSize(10);
                doc.setTextColor(0, 0, 0);
                doc.setFont(undefined, 'normal');
                doc.text('Consentement analytics: ' + (exportData.analytics.hasConsent ? 'Oui' : 'Non'), 25, yPos);
                yPos += 6;
                doc.text('Nombre de sessions enregistrées: ' + exportData.analytics.totalSessions, 25, yPos);
                yPos += 12;

                // Section: Informations RGPD
                if (yPos > 230) {
                    doc.addPage();
                    yPos = 20;
                }

                doc.setFontSize(14);
                doc.setTextColor(...goldColor);
                doc.setFont(undefined, 'bold');
                doc.text('Informations RGPD', 20, yPos);
                yPos += 8;

                doc.setFontSize(10);
                doc.setTextColor(0, 0, 0);
                doc.setFont(undefined, 'normal');
                doc.text('Responsable de traitement: ' + exportData.rgpdInfo.dataController, 25, yPos);
                yPos += 6;
                doc.text('Droit exercé: ' + exportData.rgpdInfo.rightsExercised, 25, yPos);
                yPos += 6;
                doc.text('Base légale: ' + exportData.rgpdInfo.legalBasis, 25, yPos);
                yPos += 6;
                doc.text('Durée de conservation: ' + exportData.rgpdInfo.retentionPeriod, 25, yPos);
                yPos += 6;
                doc.text('Contact: ' + exportData.rgpdInfo.contact, 25, yPos);

                // Pied de page sur chaque page
                const pageCount = doc.internal.getNumberOfPages();
                for (let i = 1; i <= pageCount; i++) {
                    doc.setPage(i);
                    doc.setFontSize(8);
                    doc.setTextColor(150, 150, 150);
                    doc.text('Document confidentiel - AlphaMouv - Page ' + i + '/' + pageCount, 105, 285, {
                        align: 'center'
                    });
                }

                // Télécharger le PDF
                const filename = 'AlphaMouv_Donnees_RGPD_' + new Date().toISOString().split('T')[0] + '.pdf';
                doc.save(filename);

                addLog('info', 'Export PDF des données par: ' + currentUser.email);

                alert(' Vos données ont été exportées avec succès !\n\n📄 Le fichier PDF a été téléchargé et contient toutes vos informations personnelles conformément au RGPD.');

            } catch (error) {
                console.error('Erreur lors de l\'export:', error);
                alert(' Une erreur est survenue lors de l\'export de vos données.\n\nDétails: ' + error.message + '\n\nVeuillez réessayer ou nous contacter si le problème persiste.');
            }
        }

        // Supprimer le compte utilisateur (Droit à l'oubli)
        function deleteMyAccount() {
            if (!currentUser) {
                alert(' Vous devez être connecté pour supprimer votre compte.');
                return;
            }

            // Triple confirmation (c'est irréversible!)
            if (!confirm('⚠️ ATTENTION: Supprimer votre compte ?\n\nCette action est IRRÉVERSIBLE et supprimera:\n✗ Votre compte utilisateur\n✗ Votre adresse de livraison\n✗ Votre panier\n✗ Toutes vos commandes\n✗ Toutes vos données\n\nÊtes-vous absolument certain ?')) {
                return;
            }

            if (!confirm('🚨 DERNIÈRE CONFIRMATION\n\nVous êtes sur le point de supprimer définitivement votre compte.\n\nVoulez-vous d\'abord exporter vos données ?\n\nCliquez sur "Annuler" pour exporter d\'abord, ou "OK" pour supprimer sans exporter.')) {
                // Proposer l'export avant suppression
                exportMyData();
                return;
            }

            const finalConfirm = prompt('Pour confirmer la suppression définitive, tapez votre email :\n\n' + currentUser.email);

            if (finalConfirm !== currentUser.email) {
                alert(' Email incorrect. Suppression annulée.');
                return;
            }

            const userEmail = currentUser.email;

            // Vider le panier local
            localStorage.removeItem('alphamouv_cart');

            // Déconnecter l'utilisateur via l'API
            AlphaMovAPI.Auth.logout();
            currentUser = null;

            // Log de suppression
            addLog('warning', 'Demande de suppression de compte: ' + userEmail);

            // Fermer les modales
            closeSettingsModal();
            initUserInterface();

            // Message final - informer que la suppression serveur doit être demandée
            alert(' Vous avez été déconnecté et vos données locales ont été supprimées.\n\nPour la suppression complète de vos données serveur conformément au RGPD, veuillez nous contacter via le formulaire de contact.\n\nMerci d\'avoir utilisé AlphaMouv.');
        }

        // ============ SYSTÈME DE COLLECTE DE DONNÉES (RGPD COMPLIANT) ============

        // Variable globale pour le consentement
        let userConsent = {
            analytics: false,
            marketing: false,
            necessary: true // Toujours true pour les cookies essentiels
        };

        // Générer un ID anonyme pour les visiteurs
        function generateAnonymousId() {
            return 'visitor_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
        }

        // Obtenir ou créer un ID de session anonyme
        function getSessionId() {
            let sessionId = sessionStorage.getItem('alphamouv_session_id');
            if (!sessionId) {
                sessionId = 'session_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
                sessionStorage.setItem('alphamouv_session_id', sessionId);
            }
            return sessionId;
        }

        // Obtenir ou créer un ID visiteur anonyme
        function getVisitorId() {
            let visitorId = getCookie('alphamouv_visitor_id');
            if (!visitorId) {
                visitorId = generateAnonymousId();
                setCookie('alphamouv_visitor_id', visitorId, 365);
            }
            return visitorId;
        }

        // Initialiser la session analytics
        function initAnalytics() {
            const consent = JSON.parse(localStorage.getItem('alphamouv_cookie_consent'));
            if (!consent || !consent.analytics) return;

            const sessionId = getSessionId();
            const visitorId = getVisitorId();

            // Initialiser les données de session
            const sessionData = {
                sessionId: sessionId,
                visitorId: visitorId,
                startTime: Date.now(),
                pages: [],
                sections: [],
                cart: [],
                isLoggedIn: !!currentUser
            };

            sessionStorage.setItem('alphamouv_session_data', JSON.stringify(sessionData));
        }

        // Tracker une page visitée
        function trackPageView(pageName) {
            const consent = JSON.parse(localStorage.getItem('alphamouv_cookie_consent'));
            if (!consent || !consent.analytics) return;

            const sessionData = JSON.parse(sessionStorage.getItem('alphamouv_session_data'));
            if (!sessionData) return;

            sessionData.pages.push({
                page: pageName,
                timestamp: Date.now(),
                duration: 0
            });

            sessionStorage.setItem('alphamouv_session_data', JSON.stringify(sessionData));
        }

        // Tracker une section visitée
        function trackSectionView(sectionName) {
            const consent = JSON.parse(localStorage.getItem('alphamouv_cookie_consent'));
            if (!consent || !consent.analytics) return;

            const sessionData = JSON.parse(sessionStorage.getItem('alphamouv_session_data'));
            if (!sessionData) return;

            if (!sessionData.sections.includes(sectionName)) {
                sessionData.sections.push(sectionName);
                sessionStorage.setItem('alphamouv_session_data', JSON.stringify(sessionData));
            }
        }

        // Sauvegarder les données de session (appelé avant de quitter)
        function saveSessionData() {
            const consent = JSON.parse(localStorage.getItem('alphamouv_cookie_consent'));
            if (!consent || !consent.analytics) return;

            const sessionData = JSON.parse(sessionStorage.getItem('alphamouv_session_data'));
            if (!sessionData) return;

            // Calculer la durée de la session
            sessionData.endTime = Date.now();
            sessionData.totalDuration = sessionData.endTime - sessionData.startTime;

            // Sauvegarder dans localStorage pour analyse
            let allSessions = JSON.parse(localStorage.getItem('alphamouv_analytics_sessions')) || [];
            allSessions.push(sessionData);

            // Garder seulement les 100 dernières sessions
            if (allSessions.length > 100) {
                allSessions = allSessions.slice(-100);
            }

            localStorage.setItem('alphamouv_analytics_sessions', JSON.stringify(allSessions));
        }

        // Sauvegarder au déchargement de la page
        window.addEventListener('beforeunload', saveSessionData);

        // Afficher le bandeau cookies au chargement
        function showCookieBanner() {
            const consent = localStorage.getItem('alphamouv_cookie_consent');
            if (!consent) {
                setTimeout(() => {
                    document.getElementById('cookieBanner').classList.add('show');
                }, 1000);
            }
        }

        // Accepter les cookies
        function acceptCookies() {
            const consent = {
                analytics: true,
                marketing: true,
                necessary: true,
                timestamp: Date.now()
            };

            localStorage.setItem('alphamouv_cookie_consent', JSON.stringify(consent));
            document.getElementById('cookieBanner').classList.remove('show');

            // Initialiser les analytics
            initAnalytics();

            addLog('info', 'Consentement cookies accepté');
        }

        // Refuser les cookies
        function declineCookies() {
            const consent = {
                analytics: false,
                marketing: false,
                necessary: true,
                timestamp: Date.now()
            };

            localStorage.setItem('alphamouv_cookie_consent', JSON.stringify(consent));
            document.getElementById('cookieBanner').classList.remove('show');

            addLog('info', 'Consentement cookies refusé');
        }

        // Afficher la politique de confidentialité
        function showPrivacyPolicy() {
            alert('📋 Politique de confidentialité\n\n' +
                'Données collectées avec votre consentement :\n' +
                '• Durée de visite sur le site\n' +
                '• Pages et sections consultées\n' +
                '• Contenu du panier\n' +
                '• Adresse email (si compte créé)\n' +
                '• Adresse de livraison (pour les commandes)\n\n' +
                'Vos droits RGPD :\n' +
                '• Droit d\'accès à vos données\n' +
                '• Droit de rectification\n' +
                '• Droit à l\'effacement (droit à l\'oubli)\n' +
                '• Droit d\'opposition\n' +
                '• Droit à la portabilité\n\n' +
                'Conservation des données :\n' +
                '• Données de navigation : 13 mois\n' +
                '• Données de compte : Jusqu\'à suppression du compte\n' +
                '• Commandes : 3 ans (obligation légale)\n\n' +
                'Pour exercer vos droits, contactez-nous via le formulaire de contact.');
        }

        // ============ GESTION DES COOKIES ============

        // Créer/Modifier un cookie
        function setCookie(name, value, days) {
            let expires = '';
            if (days) {
                const date = new Date();
                date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));
                expires = '; expires=' + date.toUTCString();
            }
            document.cookie = name + '=' + (value || '') + expires + '; path=/; SameSite=Lax';
        }

        // Lire un cookie
        function getCookie(name) {
            const nameEQ = name + '=';
            const ca = document.cookie.split(';');
            for (let i = 0; i < ca.length; i++) {
                let c = ca[i];
                while (c.charAt(0) === ' ') c = c.substring(1, c.length);
                if (c.indexOf(nameEQ) === 0) return c.substring(nameEQ.length, c.length);
            }
            return null;
        }

        // Supprimer un cookie
        function deleteCookie(name) {
            document.cookie = name + '=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;';
        }

        // Sauvegarder le panier dans les cookies
        function saveCartToCookie(cart) {
            try {
                const cartJSON = JSON.stringify(cart);
                setCookie('alphamouv_guest_cart', cartJSON, 30); // 30 jours
            } catch (e) {
                console.error('Erreur lors de la sauvegarde du panier dans les cookies:', e);
            }
        }

        // Récupérer le panier depuis les cookies
        function getCartFromCookie() {
            try {
                const cartJSON = getCookie('alphamouv_guest_cart');
                if (cartJSON) {
                    return JSON.parse(cartJSON);
                }
            } catch (e) {
                console.error('Erreur lors de la récupération du panier depuis les cookies:', e);
            }
            return [];
        }

        // Obtenir le panier (localStorage pour connecté, cookie pour invité)
        function getCart() {
            if (currentUser) {
                // Utilisateur connecté : utiliser localStorage
                return JSON.parse(localStorage.getItem('alphamouv_cart')) || [];
            } else {
                // Invité : utiliser les cookies
                return getCartFromCookie();
            }
        }

        // Sauvegarder le panier (localStorage pour connecté, cookie pour invité)
        function saveCart(cart) {
            if (currentUser) {
                // Utilisateur connecté : sauvegarder dans localStorage
                localStorage.setItem('alphamouv_cart', JSON.stringify(cart));
            } else {
                // Invité : sauvegarder dans les cookies
                saveCartToCookie(cart);
            }
        }

        // Fusionner le panier cookie avec le panier du compte lors de la connexion
        function mergeGuestCart() {
            const guestCart = getCartFromCookie();
            if (guestCart.length > 0) {
                const userCart = JSON.parse(localStorage.getItem('alphamouv_cart')) || [];

                // Fusionner les deux paniers (éviter les doublons)
                guestCart.forEach(function(guestItem) {
                    const existingItem = userCart.find(function(item) {
                        return item.id === guestItem.id && item.selectedSize === guestItem.selectedSize;
                    });

                    if (existingItem) {
                        // Additionner les quantités
                        existingItem.quantity = (existingItem.quantity || 1) + (guestItem.quantity || 1);
                    } else {
                        // Ajouter le nouvel item
                        userCart.push(guestItem);
                    }
                });

                // Sauvegarder le panier fusionné
                localStorage.setItem('alphamouv_cart', JSON.stringify(userCart));

                // Supprimer le panier invité
                deleteCookie('alphamouv_guest_cart');

                // Notification
                if (guestCart.length > 0) {
                    console.log('✅ Panier invité fusionné avec votre compte (' + guestCart.length + ' article(s))');
                }
            }
        }

        // Ouvrir le panier latéral
        function openCart() {
            toggleCartSidebar();
        }

        // Toggle du panier latéral
        function toggleCartSidebar() {
            const sidebar = document.getElementById('cartSidebar');
            const overlay = document.getElementById('cartOverlay');
            sidebar.classList.toggle('open');
            overlay.classList.toggle('active');

            if (sidebar.classList.contains('open')) {
                updateCartUI();
            }
        }

        // Mettre à jour l'interface du panier
        function updateCartUI() {
            const cart = getCart();
            const cartItems = document.getElementById('cartItems');
            const cartTotal = document.getElementById('cartTotal');
            const cartFooter = document.getElementById('cartFooter');

            const totalPrice = cart.reduce(function(sum, item) {
                return sum + (item.price * (item.quantity || 1));
            }, 0);

            if (cart.length === 0) {
                cartItems.innerHTML = '<div class="empty-cart"><div class="empty-cart-icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="width: 80px; height: 80px; color: rgba(221, 172, 11, 0.5);"><circle cx="9" cy="21" r="1"></circle><circle cx="20" cy="21" r="1"></circle><path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path></svg></div><p>Votre panier est vide</p></div>';
                cartFooter.style.display = 'none';
            } else {
                var html = '';
                cart.forEach(function(item) {
                    html += '<div class="cart-item">';
                    if (item.image) {
                        html += '<img src="' + item.image + '" alt="' + item.name + '" class="cart-item-image">';
                    } else {
                        html += '<div class="cart-item-placeholder">' + (item.icon || '🛍️') + '</div>';
                    }
                    html += '<div class="cart-item-info">';
                    html += '<div class="cart-item-name">' + item.name + '</div>';
                    html += '<div class="cart-item-details">Taille: ' + (item.selectedSize || 'Unique') + '</div>';
                    html += '<div class="cart-item-quantity">';
                    html += '<button class="qty-btn" onclick="updateQuantity(' + item.id + ', -1)">-</button>';
                    html += '<span>' + (item.quantity || 1) + '</span>';
                    html += '<button class="qty-btn" onclick="updateQuantity(' + item.id + ', 1)">+</button>';
                    html += '</div>';
                    html += '<div class="cart-item-price">' + (item.price * (item.quantity || 1)) + '€</div>';
                    html += '<button class="remove-item" onclick="removeFromCart(' + item.id + ')">Retirer</button>';
                    html += '</div></div>';
                });
                cartItems.innerHTML = html;
                cartFooter.style.display = 'block';
                cartTotal.textContent = totalPrice + '€';
            }
        }

        // Modifier la quantité
        function updateQuantity(productId, change) {
            let cart = getCart();
            const item = cart.find(function(item) {
                return item.id === productId;
            });

            if (item) {
                item.quantity = (item.quantity || 1) + change;
                if (item.quantity <= 0) {
                    removeFromCart(productId);
                    return;
                }
                saveCart(cart);
                updateCartUI();
                updateCartCount();
            }
        }

        // Retirer du panier
        function removeFromCart(productId) {
            let cart = getCart();
            cart = cart.filter(function(item) {
                return item.id !== productId;
            });
            saveCart(cart);
            updateCartUI();
            updateCartCount();
        }

        // Commander
        function checkout() {
            const cart = getCart();

            if (cart.length === 0) {
                alert('Votre panier est vide !');
                return;
            }

            const total = cart.reduce(function(sum, item) {
                return sum + (item.price * (item.quantity || 1));
            }, 0);

            let itemsList = '';
            cart.forEach(function(item) {
                itemsList += '- ' + item.name + ' (x' + (item.quantity || 1) + ')\n';
            });

            alert(' Commande confirmée !\n\nArticles:\n' + itemsList + '\nTotal: ' + total + '€\n\nMerci pour votre commande ! Vous allez recevoir un email de confirmation.');

            // Vider le panier
            saveCart([]);
            updateCartUI();
            updateCartCount();
            toggleCartSidebar();
        }

        // Aller à la boutique
        function goToShop() {
            window.location.href = 'boutique.html';
        }

        // Mettre à jour le compteur du panier
        function updateCartCount() {
            const cart = getCart();
            const totalItems = cart.reduce((sum, item) => sum + (item.quantity || 1), 0);
            document.getElementById('cartCountMain').textContent = totalItems;
        }

        // Initialiser au chargement de la page
        window.addEventListener('DOMContentLoaded', function() {
            initUserInterface();

            // Initialiser les IDs des sections et appliquer l'ordre sauvegardé
            initializeSectionIDs();
            // applySavedSectionOrder(); // DÉSACTIVÉ - remplacé par applyNavOrder()

            // Appliquer l'ordre de navigation sauvegardé
            applyNavOrder();

            // Sauvegarder le contenu de la page pour l'éditeur visuel
            setTimeout(function() {
                savePageContentForEditing();
            }, 500);

            // Appliquer les modifications de textes sauvegardées
            applyPageTextModifications();

            // Appliquer les liens sociaux sauvegardés
            applySavedSocialLinks();

            // Afficher le bandeau cookies si nécessaire
            showCookieBanner();

            // Initialiser les analytics si consentement donné
            const consent = JSON.parse(localStorage.getItem('alphamouv_cookie_consent'));
            if (consent && consent.analytics) {
                initAnalytics();
                trackPageView('Accueil');
            }

            // Initialiser Google Sign-In après un court délai
            setTimeout(() => {
                initGoogleSignIn();
            }, 1000);
        });

        // Appliquer l'ordre des sections sauvegardé
        function applySavedSectionOrder() {
            var config = JSON.parse(localStorage.getItem('alphamouv_config')) || {};
            const sectionOrder = config.sectionOrder;

            if (!sectionOrder || sectionOrder.length === 0) {
                console.log('Aucun ordre de sections sauvegardé');
                return;
            }

            const homeSection = document.querySelector('#home');
            if (!homeSection) {
                console.log('Section #home non trouvée');
                return;
            }

            console.log('Application de l\'ordre des sections:', sectionOrder);

            // Créer un fragment pour réorganiser
            const fragment = document.createDocumentFragment();

            // Ajouter les sections dans l'ordre sauvegardé
            sectionOrder.forEach(function(sectionId) {
                const section = homeSection.querySelector('#' + sectionId);
                if (section) {
                    fragment.appendChild(section);
                }
            });

            // Ajouter les sections qui ne sont pas dans l'ordre sauvegardé (nouvelles sections)
            const allSections = homeSection.querySelectorAll('[id^="section-"]');
            allSections.forEach(function(section) {
                if (!sectionOrder.includes(section.id)) {
                    fragment.appendChild(section);
                }
            });

            // Vider la section home et ajouter le nouveau contenu
            homeSection.innerHTML = '';
            homeSection.appendChild(fragment);

            console.log('Ordre des sections appliqué avec succès');
        }

        // Appliquer les modifications de textes sauvegardées
        function applyPageTextModifications() {
            var config = JSON.parse(localStorage.getItem('alphamouv_config')) || {};
            const pageTexts = config.pageTexts;

            if (!pageTexts || !pageTexts.home) return;

            // Appliquer les modifications pour la page d'accueil (home)
            const homeTexts = pageTexts.home;

            Object.keys(homeTexts).forEach(function(textId) {
                const newText = homeTexts[textId];

                // Trouver l'élément correspondant dans la page
                // On va essayer de cibler les éléments par leur contenu ou position
                // Cette fonction est simplifiée et devrait être améliorée en production
            });
        }

        // Appliquer les liens sociaux sauvegardés
        function applySavedSocialLinks() {
            var config = JSON.parse(localStorage.getItem('alphamouv_config')) || {};
            const socialLinks = config.socialLinks;

            if (!socialLinks) return;

            // Appliquer les liens aux éléments de la page
            // Par exemple, trouver des liens vers Instagram, YouTube, etc. et les mettre à jour
            if (socialLinks.instagram) {
                const instagramLinks = document.querySelectorAll('a[href*="instagram"]');
                instagramLinks.forEach(function(link) {
                    link.href = socialLinks.instagram;
                });
            }

            if (socialLinks.youtube) {
                const youtubeLinks = document.querySelectorAll('a[href*="youtube"]');
                youtubeLinks.forEach(function(link) {
                    link.href = socialLinks.youtube;
                });
            }

            if (socialLinks.x) {
                const xLinks = document.querySelectorAll('a[href*="twitter"], a[href*="x.com"]');
                xLinks.forEach(function(link) {
                    link.href = socialLinks.x;
                });
            }

            if (socialLinks.twitch) {
                const twitchLinks = document.querySelectorAll('a[href*="twitch"]');
                twitchLinks.forEach(function(link) {
                    link.href = socialLinks.twitch;
                });
            }

            if (socialLinks.tiktok) {
                const tiktokLinks = document.querySelectorAll('a[href*="tiktok"]');
                tiktokLinks.forEach(function(link) {
                    link.href = socialLinks.tiktok;
                });
            }

            if (socialLinks.linkedin) {
                const linkedinLinks = document.querySelectorAll('a[href*="linkedin"]');
                linkedinLinks.forEach(function(link) {
                    link.href = socialLinks.linkedin;
                });
            }

            if (socialLinks.facebook) {
                const facebookLinks = document.querySelectorAll('a[href*="facebook"]');
                facebookLinks.forEach(function(link) {
                    link.href = socialLinks.facebook;
                });
            }
        }

        // Fonction pour scroller vers la section contact
        function scrollToContact(event) {
            event.preventDefault();
            const contactSection = document.getElementById('contact');
            contactSection.scrollIntoView({
                behavior: 'smooth',
                block: 'start'
            });
        }

        // Les cartes de galerie sont maintenant toujours visibles sans animation de slide

        // Gestion du formulaire newsletter
        function handleNewsletter(event) {
            event.preventDefault();
            const email = event.target.querySelector('input[type="email"]').value;

            // Ici, vous pourrez ajouter l'intégration avec un service d'emailing
            // Pour l'instant, on affiche juste un message
            alert('Merci pour votre inscription ! 🎉\n\nVous recevrez bientôt des nouvelles de mes créations à : ' + email);
            event.target.reset();
        }

        // ============ CARROUSEL HORIZONTAL MODERNE ============
        let currentSlideIndex = 0;
        const carouselTrack = document.getElementById('carouselTrack');
        const indicators = document.querySelectorAll('.carousel-indicator');
        const totalSlidesCount = document.querySelectorAll('.carousel-slide').length;
        let autoPlayInterval;

        // Mettre à jour le compteur
        document.getElementById('totalSlides').textContent = totalSlidesCount;

        function updateCarousel() {
            // Retirer toutes les classes des slides
            const allSlides = document.querySelectorAll('.carousel-slide');
            allSlides.forEach(slide => {
                slide.classList.remove('active', 'prev', 'next', 'behind', 'far-prev', 'far-next', 'behind-left', 'behind-right');
            });

            // Slide actif (au centre)
            if (allSlides[currentSlideIndex]) {
                allSlides[currentSlideIndex].classList.add('active');
            }

            // Slide précédent (à gauche)
            const prevIndex = (currentSlideIndex - 1 + totalSlidesCount) % totalSlidesCount;
            if (allSlides[prevIndex]) {
                allSlides[prevIndex].classList.add('prev');
            }

            // Slide suivant (à droite)
            const nextIndex = (currentSlideIndex + 1) % totalSlidesCount;
            if (allSlides[nextIndex]) {
                allSlides[nextIndex].classList.add('next');
            }

            // Pour l'effet roue : la 4ème image apparaît derrière au centre
            // Cela crée l'illusion d'une rotation circulaire
            if (totalSlidesCount >= 4) {
                const behindIndex = (currentSlideIndex + 2) % totalSlidesCount;
                // S'assurer que ce n'est pas déjà utilisé
                if (behindIndex !== currentSlideIndex && behindIndex !== prevIndex && behindIndex !== nextIndex) {
                    allSlides[behindIndex].classList.add('behind');
                }
            }

            // Mettre à jour les indicateurs
            indicators.forEach((indicator, index) => {
                if (index === currentSlideIndex) {
                    indicator.classList.add('active');
                } else {
                    indicator.classList.remove('active');
                }
            });

            // Mettre à jour le compteur
            document.getElementById('currentSlide').textContent = currentSlideIndex + 1;
        }

        function nextSlideHorizontal() {
            currentSlideIndex = (currentSlideIndex + 1) % totalSlidesCount;
            updateCarousel();
            resetAutoPlay();
        }

        function prevSlideHorizontal() {
            currentSlideIndex = (currentSlideIndex - 1 + totalSlidesCount) % totalSlidesCount;
            updateCarousel();
            resetAutoPlay();
        }

        function goToSlideHorizontal(index) {
            currentSlideIndex = index;
            updateCarousel();
            resetAutoPlay();
        }

        // Auto-play
        function startAutoPlay() {
            autoPlayInterval = setInterval(() => {
                nextSlideHorizontal();
            }, 4000);
        }

        function resetAutoPlay() {
            clearInterval(autoPlayInterval);
            startAutoPlay();
        }

        // Support du swipe sur mobile
        let touchStartX = 0;
        let touchEndX = 0;
        const carouselInner = document.getElementById('carouselInner');

        if (carouselInner) {
            carouselInner.addEventListener('touchstart', (e) => {
                touchStartX = e.changedTouches[0].screenX;
            });

            carouselInner.addEventListener('touchend', (e) => {
                touchEndX = e.changedTouches[0].screenX;
                handleSwipe();
            });

            // Pause au survol
            carouselInner.addEventListener('mouseenter', () => {
                clearInterval(autoPlayInterval);
            });

            carouselInner.addEventListener('mouseleave', () => {
                startAutoPlay();
            });
        }

        function handleSwipe() {
            if (touchEndX < touchStartX - 50) {
                nextSlideHorizontal();
            }
            if (touchEndX > touchStartX + 50) {
                prevSlideHorizontal();
            }
        }

        // Support des touches clavier
        document.addEventListener('keydown', (e) => {
            if (e.key === 'ArrowLeft') {
                prevSlideHorizontal();
            } else if (e.key === 'ArrowRight') {
                nextSlideHorizontal();
            }
        });

        // ============ GESTION DE LA FENÊTRE PARAMÈTRES ============

        // Variable pour stocker la clé secrète 2FA
        let current2FASecret = null;

        // Ouvrir la fenêtre de paramètres
        function openSettingsModal() {
            const overlay = document.getElementById('settingsOverlay');
            overlay.classList.add('active');
            document.body.style.overflow = 'hidden';
            loadUserSettings();
        }

        // Fermer la fenêtre de paramètres
        function closeSettingsModal(event) {
            if (event && event.target !== event.currentTarget) return;
            const overlay = document.getElementById('settingsOverlay');
            overlay.classList.remove('active');
            document.body.style.overflow = '';
            // Réinitialiser la section QR
            document.getElementById('qrSection').classList.remove('active');
            document.getElementById('toggle2FA').checked = currentUser && currentUser.twoFactorEnabled || false;
        }

        // Charger les paramètres de l'utilisateur
        function loadUserSettings() {
            if (!currentUser) return;

            // Séparer le nom en prénom et nom
            const nameParts = (currentUser.name || '').split(' ');
            const firstName = nameParts[0] || '';
            const lastName = nameParts.slice(1).join(' ') || '';

            document.getElementById('settingsFirstName').value = currentUser.firstName || firstName;
            document.getElementById('settingsLastName').value = currentUser.lastName || lastName;

            // Adresse
            document.getElementById('settingsAddress').value = currentUser.address || '';
            document.getElementById('settingsAddressComplement').value = currentUser.addressComplement || '';
            document.getElementById('settingsPostalCode').value = currentUser.postalCode || '';
            document.getElementById('settingsCity').value = currentUser.city || '';
            document.getElementById('settingsCountry').value = currentUser.country || 'France';

            // Email
            document.getElementById('settingsCurrentEmail').value = currentUser.email || '';

            // 2FA Status
            const is2FAEnabled = currentUser.twoFactorEnabled || false;
            document.getElementById('toggle2FA').checked = is2FAEnabled;
            update2FAStatus(is2FAEnabled);
        }

        // Mettre à jour le statut 2FA visuellement
        function update2FAStatus(enabled) {
            const statusBadge = document.getElementById('2faStatus');
            const statusText = document.getElementById('2faStatusText');

            if (enabled) {
                statusBadge.classList.remove('inactive');
                statusBadge.classList.add('active');
                statusText.textContent = 'Activé';
            } else {
                statusBadge.classList.remove('active');
                statusBadge.classList.add('inactive');
                statusText.textContent = 'Désactivé';
            }
        }

        // Changer d'onglet dans les paramètres
        function switchSettingsTab(tab) {
            // Mettre à jour les onglets
            document.querySelectorAll('.settings-tab').forEach(t => t.classList.remove('active'));
            event.target.closest('.settings-tab').classList.add('active');

            // Mettre à jour les panels
            document.querySelectorAll('.settings-panel').forEach(p => p.classList.remove('active'));
            document.getElementById(tab + 'Panel').classList.add('active');

            // Cacher le message
            hideSettingsMessage();
        }

        // Afficher un message de notification
        function showSettingsMessage(message, type) {
            type = type || 'success';
            const messageDiv = document.getElementById('settingsMessage');
            const messageText = document.getElementById('settingsMessageText');

            messageText.textContent = message;
            messageDiv.className = 'settings-message show ' + type;

            // Changer l'icône selon le type
            const svg = messageDiv.querySelector('svg');
            if (type === 'success') {
                svg.innerHTML = '<path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>';
            } else {
                svg.innerHTML = '<path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"/>';
            }

            // Auto-hide après 5 secondes
            setTimeout(function() {
                hideSettingsMessage();
            }, 5000);
        }

        // Cacher le message
        function hideSettingsMessage() {
            document.getElementById('settingsMessage').classList.remove('show');
        }

        // Sauvegarder les paramètres du compte
        async function saveAccountSettings() {
            const firstName = document.getElementById('settingsFirstName').value.trim();
            const lastName = document.getElementById('settingsLastName').value.trim();

            if (!firstName) {
                showSettingsMessage('Veuillez entrer votre prénom', 'error');
                return;
            }

            try {
                // Utiliser l'API pour mettre à jour le profil
                const profileData = {
                    prenom: firstName,
                    nom: lastName,
                    adresse: document.getElementById('settingsAddress').value.trim(),
                    code_postal: document.getElementById('settingsPostalCode').value.trim(),
                    ville: document.getElementById('settingsCity').value.trim()
                };

                await AlphaMovAPI.Auth.updateProfile(profileData);

                // Mettre à jour localement
                currentUser.firstName = firstName;
                currentUser.lastName = lastName;
                currentUser.name = firstName + (lastName ? ' ' + lastName : '');
                currentUser.address = profileData.adresse;
                currentUser.postalCode = profileData.code_postal;
                currentUser.city = profileData.ville;
                saveUserData();

                // Rafraîchir l'interface
                initUserInterface();

                showSettingsMessage('Vos informations ont été mises à jour avec succès !', 'success');
            } catch (error) {
                console.error('Erreur mise à jour profil:', error);
                showSettingsMessage(error.message || 'Erreur lors de la mise à jour', 'error');
            }
        }

        // Changer l'email
        async function changeEmail() {
            const newEmail = document.getElementById('settingsNewEmail').value.trim();
            const password = document.getElementById('settingsEmailPassword').value;

            if (!newEmail) {
                showSettingsMessage('Veuillez entrer un nouvel email', 'error');
                return;
            }

            if (!isValidEmail(newEmail)) {
                showSettingsMessage('Veuillez entrer un email valide', 'error');
                return;
            }

            if (!password) {
                showSettingsMessage('Veuillez entrer votre mot de passe pour confirmer', 'error');
                return;
            }

            try {
                // Utiliser l'API pour mettre à jour l'email
                const response = await AlphaMovAPI.Auth.updateProfile({ email: newEmail });

                if (response.success) {
                    // Mettre à jour localement
                    currentUser.email = newEmail;
                    localStorage.setItem('alphamouv_user', JSON.stringify(currentUser));

                    // Rafraîchir l'interface
                    document.getElementById('settingsCurrentEmail').value = newEmail;
                    document.getElementById('settingsNewEmail').value = '';
                    document.getElementById('settingsEmailPassword').value = '';
                    initUserInterface();

                    showSettingsMessage('Votre email a été mis à jour avec succès !', 'success');
                }
            } catch (error) {
                console.error('Erreur changement email:', error);
                showSettingsMessage(error.message || 'Erreur lors du changement d\'email', 'error');
            }
        }

        // Vérifier si l'email est valide
        function isValidEmail(email) {
            return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
        }

        // Changer le mot de passe
        async function changePassword() {
            const currentPassword = document.getElementById('settingsCurrentPassword').value;
            const newPassword = document.getElementById('settingsNewPassword').value;
            const confirmPassword = document.getElementById('settingsConfirmPassword').value;

            if (!currentPassword) {
                showSettingsMessage('Veuillez entrer votre mot de passe actuel', 'error');
                return;
            }

            if (!newPassword || newPassword.length < 6) {
                showSettingsMessage('Le nouveau mot de passe doit contenir au moins 6 caractères', 'error');
                return;
            }

            if (newPassword !== confirmPassword) {
                showSettingsMessage('Les mots de passe ne correspondent pas', 'error');
                return;
            }

            try {
                // Utiliser l'API pour changer le mot de passe
                await AlphaMovAPI.Auth.changePassword(currentPassword, newPassword);

                // Réinitialiser les champs
                document.getElementById('settingsCurrentPassword').value = '';
                document.getElementById('settingsNewPassword').value = '';
                document.getElementById('settingsConfirmPassword').value = '';

                showSettingsMessage('Votre mot de passe a été mis à jour avec succès !', 'success');
            } catch (error) {
                console.error('Erreur changement mot de passe:', error);
                showSettingsMessage(error.message || 'Mot de passe actuel incorrect', 'error');
            }
        }

        // Sauvegarder les données utilisateur (localement)
        function saveUserData() {
            localStorage.setItem('alphamouv_user', JSON.stringify(currentUser));
        }

        // Toggle 2FA
        function toggle2FA() {
            const isChecked = document.getElementById('toggle2FA').checked;

            if (isChecked) {
                // Générer la clé secrète et afficher le QR code
                generate2FASecret();
                document.getElementById('qrSection').classList.add('active');
            } else {
                // Désactiver le 2FA
                if (currentUser.twoFactorEnabled) {
                    if (confirm('Êtes-vous sûr de vouloir désactiver l\'authentification à double facteur ?')) {
                        currentUser.twoFactorEnabled = false;
                        currentUser.twoFactorSecret = null;
                        saveUserData();
                        update2FAStatus(false);
                        showSettingsMessage('L\'authentification à double facteur a été désactivée', 'success');
                    } else {
                        document.getElementById('toggle2FA').checked = true;
                    }
                }
                document.getElementById('qrSection').classList.remove('active');
            }
        }

        // Générer une clé secrète pour le 2FA
        function generate2FASecret() {
            // Générer une clé secrète aléatoire de 16 caractères (base32)
            const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ234567';
            let secret = '';
            for (let i = 0; i < 16; i++) {
                secret += chars.charAt(Math.floor(Math.random() * chars.length));
            }
            current2FASecret = secret;

            // Afficher la clé formatée
            const formattedSecret = secret.match(/.{1,4}/g).join(' ');
            document.getElementById('secretKey').textContent = formattedSecret;

            // Générer le QR code
            generateQRCode(secret);

            // Réinitialiser les inputs de code
            document.querySelectorAll('.code-input').forEach(function(input) {
                input.value = '';
            });
        }

        // Générer le QR code
        function generateQRCode(secret) {
            var container = document.getElementById('qrCodeContainer');
            const userEmail = encodeURIComponent(currentUser.email);
            const issuer = 'AlphaMouv'

            // URL TOTP standard pour les applications d'authentification
            const otpauthUrl = 'otpauth://totp/' + issuer + ':' + userEmail + '?secret=' + secret + '&issuer=' + issuer + '&algorithm=SHA1&digits=6&period=30';

            // Utiliser l'API QR Code gratuite
            const qrUrl = 'https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=' + encodeURIComponent(otpauthUrl);

            container.innerHTML = '<img src="' + qrUrl + '" alt="QR Code 2FA" width="200" height="200" style="border-radius: 10px;">';
        }

        // Gérer la saisie du code de vérification
        function handleCodeInput(input) {
            const value = input.value.replace(/[^0-9]/g, '');
            input.value = value;

            if (value.length === 1) {
                const index = parseInt(input.dataset.index);
                const inputs = document.querySelectorAll('.code-input');
                if (index < inputs.length - 1) {
                    inputs[index + 1].focus();
                }
            }
        }

        // Gérer les touches pour la navigation
        function handleCodeKeydown(event, input) {
            const index = parseInt(input.dataset.index);
            const inputs = document.querySelectorAll('.code-input');

            if (event.key === 'Backspace' && !input.value && index > 0) {
                inputs[index - 1].focus();
            } else if (event.key === 'ArrowLeft' && index > 0) {
                inputs[index - 1].focus();
            } else if (event.key === 'ArrowRight' && index < inputs.length - 1) {
                inputs[index + 1].focus();
            }
        }

        // Vérifier le code 2FA
        function verify2FACode() {
            const inputs = document.querySelectorAll('.code-input');
            let code = '';
            inputs.forEach(function(input) {
                code += input.value;
            });

            if (code.length !== 6) {
                showSettingsMessage('Veuillez entrer un code à 6 chiffres', 'error');
                return;
            }

            // Pour cette démo, on accepte n'importe quel code à 6 chiffres
            // Dans un vrai système, la vérification TOTP se ferait côté serveur

            // Activer le 2FA
            currentUser.twoFactorEnabled = true;
            currentUser.twoFactorSecret = current2FASecret;
            saveUserData();

            // Mettre à jour l'interface
            update2FAStatus(true);
            document.getElementById('qrSection').classList.remove('active');

            showSettingsMessage('L\'authentification à double facteur a été activée avec succès ! 🔐', 'success');
        }

        // Annuler la configuration 2FA
        function cancel2FASetup() {
            document.getElementById('toggle2FA').checked = currentUser.twoFactorEnabled || false;
            document.getElementById('qrSection').classList.remove('active');
            current2FASecret = null;
        }

        // Fermer avec Escape
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                const settingsOverlay = document.getElementById('settingsOverlay');
                if (settingsOverlay.classList.contains('active')) {
                    closeSettingsModal();
                }
            }
        });

        // Démarrer le carrousel automatique
        startAutoPlay();

        // ============ PANNEAU ADMINISTRATION ============

        // Configuration admin par défaut
        const DEFAULT_ADMIN_PASSWORD = 'admin123';
        let isAdminLoggedIn = false;
        let isAdmin = false; // Variable globale pour savoir si l'utilisateur est admin
        let currentImageTarget = null;

        // ============ MODULE INDEXEDDB POUR IMAGES ============
        const ImageDB = {
            db: null,
            dbName: 'AlphamouvImagesDB',
            dbVersion: 1,

            init: function() {
                return new Promise((resolve, reject) => {
                    const request = indexedDB.open(this.dbName, this.dbVersion);

                    request.onerror = () => {
                        console.error('❌ Erreur ouverture IndexedDB:', request.error);
                        reject(request.error);
                    };

                    request.onsuccess = () => {
                        this.db = request.result;
                        console.log('✅ IndexedDB initialisée');
                        resolve(this.db);
                    };

                    request.onupgradeneeded = (event) => {
                        const db = event.target.result;

                        if (!db.objectStoreNames.contains('carouselImages')) {
                            db.createObjectStore('carouselImages', {
                                keyPath: 'index'
                            });
                        }
                        if (!db.objectStoreNames.contains('productImages')) {
                            db.createObjectStore('productImages', {
                                keyPath: 'id'
                            });
                        }
                    };
                });
            },

            saveCarouselImage: function(index, imageData) {
                return new Promise((resolve, reject) => {
                    if (!this.db) return reject(new Error('DB non initialisée'));

                    const transaction = this.db.transaction(['carouselImages'], 'readwrite');
                    const store = transaction.objectStore('carouselImages');
                    const request = store.put({
                        index: index,
                        data: imageData,
                        timestamp: Date.now()
                    });

                    request.onsuccess = () => resolve();
                    request.onerror = () => reject(request.error);
                });
            },

            getCarouselImage: function(index) {
                return new Promise((resolve, reject) => {
                    if (!this.db) return reject(new Error('DB non initialisée'));

                    const transaction = this.db.transaction(['carouselImages'], 'readonly');
                    const store = transaction.objectStore('carouselImages');
                    const request = store.get(index);

                    request.onsuccess = () => resolve(request.result ? request.result.data : null);
                    request.onerror = () => reject(request.error);
                });
            },

            getAllCarouselImages: function() {
                return new Promise((resolve, reject) => {
                    if (!this.db) return reject(new Error('DB non initialisée'));

                    const transaction = this.db.transaction(['carouselImages'], 'readonly');
                    const store = transaction.objectStore('carouselImages');
                    const request = store.getAll();

                    request.onsuccess = () => {
                        const images = [null, null, null, null];
                        request.result.forEach(item => {
                            images[item.index] = item.data;
                        });
                        resolve(images);
                    };
                    request.onerror = () => reject(request.error);
                });
            },

            deleteCarouselImage: function(index) {
                return new Promise((resolve, reject) => {
                    if (!this.db) return reject(new Error('DB non initialisée'));

                    const transaction = this.db.transaction(['carouselImages'], 'readwrite');
                    const store = transaction.objectStore('carouselImages');
                    const request = store.delete(index);

                    request.onsuccess = () => resolve();
                    request.onerror = () => reject(request.error);
                });
            },

            getStorageUsage: function() {
                return new Promise(async(resolve, reject) => {
                    if (navigator.storage && navigator.storage.estimate) {
                        try {
                            const estimate = await navigator.storage.estimate();
                            const usedMB = (estimate.usage / (1024 * 1024)).toFixed(2);
                            const quotaMB = (estimate.quota / (1024 * 1024)).toFixed(2);
                            const percentage = Math.round((estimate.usage / estimate.quota) * 100);

                            resolve({
                                used: usedMB,
                                total: quotaMB,
                                percentage: percentage
                            });
                        } catch (error) {
                            reject(error);
                        }
                    } else {
                        resolve({
                            used: '?',
                            total: '~100',
                            percentage: 0
                        });
                    }
                });
            }
        };

        // Migrer les anciennes images vers IndexedDB
        async function migrateOldImages() {
            try {
                const oldImages = JSON.parse(localStorage.getItem('alphamouv_images'));
                if (oldImages && oldImages.carousel) {
                    console.log('🔄 Migration des images carrousel vers IndexedDB...');
                    let migrated = 0;
                    for (let i = 0; i < oldImages.carousel.length; i++) {
                        if (oldImages.carousel[i]) {
                            await ImageDB.saveCarouselImage(i, oldImages.carousel[i]);
                            migrated++;
                        }
                    }
                    if (migrated > 0) {
                        console.log(`✅ ${migrated} images carrousel migrées`);
                        oldImages.carousel = [null, null, null, null];
                        localStorage.setItem('alphamouv_images', JSON.stringify(oldImages));
                        addLog('success', `Migration: ${migrated} images déplacées vers IndexedDB`);
                    }
                }
            } catch (error) {
                console.error('Erreur migration:', error);
            }
        }

        // Initialiser le système admin
        async function initAdminSystem() {
            // Initialiser IndexedDB
            try {
                await ImageDB.init();
                console.log('✅ IndexedDB initialisée');
                await migrateOldImages();
            } catch (error) {
                console.error('⚠️ Erreur IndexedDB:', error);
            }
            // Créer les données admin si elles n'existent pas
            if (!localStorage.getItem('alphamouv_admin')) {
                localStorage.setItem('alphamouv_admin', JSON.stringify({
                    password: DEFAULT_ADMIN_PASSWORD,
                    admins: ['admin@alphamouv.com']
                }));
            }

            // Créer les logs si ils n'existent pas
            if (!localStorage.getItem('alphamouv_logs')) {
                localStorage.setItem('alphamouv_logs', JSON.stringify([]));
            }

            // Créer le stockage d'images si il n'existe pas
            if (!localStorage.getItem('alphamouv_images')) {
                localStorage.setItem('alphamouv_images', JSON.stringify({
                    carousel: [null, null, null, null],
                    gallery: [],
                    products: {}
                }));
            }

            // Vérifier si l'utilisateur actuel est admin
            checkAdminStatus();

            // Logger la visite
            addLog('info', 'Page visitée: ' + window.location.pathname);
        }

        // Vérifier si l'utilisateur est admin
        function checkAdminStatus() {
            const adminData = JSON.parse(localStorage.getItem('alphamouv_admin')) || {};
            const currentUser = JSON.parse(localStorage.getItem('alphamouv_user'));

            // Verifier le role du serveur OU la liste locale d'admins
            const isServerAdmin = currentUser && currentUser.role === 'admin';
            const isLocalAdmin = currentUser && adminData.admins && adminData.admins.includes(currentUser.email);

            if (isServerAdmin || isLocalAdmin) {
                isAdmin = true;
                document.getElementById('adminSidebarToggle').classList.add('visible');
                document.getElementById('navEditBtn').style.display = 'flex';
            } else {
                isAdmin = false;
                document.getElementById('adminSidebarToggle').classList.remove('visible');
                document.getElementById('navEditBtn').style.display = 'none';
            }

            updateEventEditability();
        }

        // Navigation Edit Mode - Système de flèches
        var isNavEditMode = false;

        function toggleNavEditMode() {
            isNavEditMode = !isNavEditMode;
            var nav = document.getElementById('mainNav');
            var navList = document.getElementById('navList');
            var btn = document.getElementById('navEditBtn');

            if (isNavEditMode) {
                nav.classList.add('edit-mode');
                btn.classList.add('active');

                // Nettoyer les styles inline qui pourraient interférer
                var navItems = navList.querySelectorAll('li');
                navItems.forEach(function(item) {
                    item.style.order = '';
                });

                addNavArrows();
                addLog('info', 'Mode édition navigation activé - Utilisez les flèches pour réorganiser');
            } else {
                nav.classList.remove('edit-mode');
                btn.classList.remove('active');
                removeNavArrows();
                saveNavOrder();
                addLog('success', 'Ordre de navigation sauvegardé');
            }
        }

        function addNavArrows() {
            var navItems = document.querySelectorAll('#navList li');
            console.log('🎯 addNavArrows - Nombre d\'items:', navItems.length);

            navItems.forEach(function(item, index) {
                // Créer le conteneur de flèches
                var arrowsDiv = document.createElement('div');
                arrowsDiv.className = 'nav-arrows';
                arrowsDiv.style.pointerEvents = 'all';
                arrowsDiv.style.zIndex = '1000';

                // Flèche gauche
                var leftBtn = document.createElement('button');
                leftBtn.className = 'nav-arrow-btn';
                leftBtn.innerHTML = '←';
                leftBtn.style.pointerEvents = 'all';
                leftBtn.type = 'button';
                leftBtn.onclick = function(e) {
                    console.log('👈 CLIC sur flèche gauche!');
                    e.preventDefault();
                    e.stopPropagation();
                    moveNavItem(item, -1);
                };
                if (index === 0) {
                    leftBtn.disabled = true;
                }

                // Flèche droite
                var rightBtn = document.createElement('button');
                rightBtn.className = 'nav-arrow-btn';
                rightBtn.innerHTML = '→';
                rightBtn.style.pointerEvents = 'all';
                rightBtn.type = 'button';
                rightBtn.onclick = function(e) {
                    console.log('👉 CLIC sur flèche droite!');
                    e.preventDefault();
                    e.stopPropagation();
                    moveNavItem(item, 1);
                };
                if (index === navItems.length - 1) {
                    rightBtn.disabled = true;
                }

                arrowsDiv.appendChild(leftBtn);
                arrowsDiv.appendChild(rightBtn);
                item.appendChild(arrowsDiv);

                console.log('✅ Flèches ajoutées pour:', item.textContent.trim());
            });
        }

        function removeNavArrows() {
            var arrows = document.querySelectorAll('.nav-arrows');
            arrows.forEach(function(arrow) {
                arrow.remove();
            });
        }

        function moveNavItem(item, direction) {
            console.log('🔄 moveNavItem appelé - direction:', direction);

            var navList = document.getElementById('navList');
            console.log('navList:', navList);

            var allItems = Array.from(navList.querySelectorAll('li'));
            console.log('Nombre d\'items:', allItems.length);

            var currentIndex = allItems.indexOf(item);
            var targetIndex = currentIndex + direction;

            console.log('currentIndex:', currentIndex, 'targetIndex:', targetIndex);

            // Vérifier que l'index cible est valide
            if (targetIndex < 0 || targetIndex >= allItems.length) {
                console.log('❌ Index invalide, abandon');
                return;
            }

            var targetItem = allItems[targetIndex];
            console.log('Item à déplacer:', item.textContent.trim());
            console.log('Item cible:', targetItem.textContent.trim());

            // Animation de swap
            item.classList.add('swapping');
            targetItem.classList.add('swapping');

            // Échanger les éléments dans le DOM
            try {
                if (direction === -1) {
                    // Déplacer vers la gauche
                    console.log('⬅️ Déplacement vers la gauche avec insertBefore');
                    navList.insertBefore(item, targetItem);
                } else {
                    // Déplacer vers la droite
                    console.log('➡️ Déplacement vers la droite avec insertBefore');
                    navList.insertBefore(targetItem, item);
                }
                console.log('✅ insertBefore exécuté!');
            } catch (error) {
                console.error('❌ Erreur insertBefore:', error);
            }

            // Retirer l'animation après
            setTimeout(function() {
                item.classList.remove('swapping');
                targetItem.classList.remove('swapping');

                // Mettre à jour uniquement les états disabled des boutons
                updateArrowStates();

                console.log('✅ Animation terminée, états des flèches mis à jour');
            }, 400);

            addLog('info', 'Onglet déplacé: ' + item.textContent.trim());
        }

        function updateArrowStates() {
            var navList = document.getElementById('navList');
            var navItems = Array.from(navList.querySelectorAll('li'));

            navItems.forEach(function(item, index) {
                var arrows = item.querySelector('.nav-arrows');
                if (!arrows) return;

                var leftBtn = arrows.querySelector('button:first-child');
                var rightBtn = arrows.querySelector('button:last-child');

                if (leftBtn) {
                    leftBtn.disabled = (index === 0);
                }
                if (rightBtn) {
                    rightBtn.disabled = (index === navItems.length - 1);
                }
            });

            console.log('🔄 États des flèches mis à jour');
        }

        function saveNavOrder() {
            console.log('💾 saveNavOrder appelée');
            var navList = document.getElementById('navList');
            var navItems = Array.from(navList.querySelectorAll('li'));

            var order = navItems.map(function(item) {
                return item.getAttribute('data-nav-id');
            });

            console.log('Nouvel ordre à sauvegarder:', order);

            var configString = localStorage.getItem('alphamouv_config');
            var config = configString ? JSON.parse(configString) : {};

            // Sauvegarder dans navOrder (ancien système)
            config.navOrder = order;

            // IMPORTANT: Aussi réorganiser config.sections pour synchroniser
            if (config.sections && config.sections.length > 0) {
                var oldSections = config.sections;
                var newSections = [];

                // Réorganiser sections selon le nouvel ordre
                order.forEach(function(id) {
                    var section = oldSections.find(function(s) {
                        return s.id === id;
                    });
                    if (section) {
                        newSections.push(section);
                    }
                });

                config.sections = newSections;
                console.log('✅ config.sections mis à jour:', config.sections.map(s => s.name));
            }

            localStorage.setItem('alphamouv_config', JSON.stringify(config));

            // Vérifier immédiatement
            var verif = JSON.parse(localStorage.getItem('alphamouv_config'));
            console.log('✅ Vérification après save - sections:', verif.sections ? verif.sections.map(s => s.name) : 'PAS DE SECTIONS');
        }

        function applyNavOrder() {
            console.log('=== applyNavOrder appelée ===');

            var configString = localStorage.getItem('alphamouv_config');
            console.log('Config brute du localStorage:', configString ? 'existe' : 'n\'existe pas');

            var config = configString ? JSON.parse(configString) : {};

            // Si aucune config de sections, initialiser avec les sections par défaut
            if (!config.sections) {
                console.log('Aucune config.sections trouvée, initialisation avec defaultSections');
                config.sections = JSON.parse(JSON.stringify(defaultSections)); // Copie profonde
                localStorage.setItem('alphamouv_config', JSON.stringify(config));
            } else {
                console.log('Config.sections trouvée dans localStorage');
            }

            var sections = config.sections;
            console.log('Ordre des sections au chargement:', sections.map(s => s.name));

            // Utiliser l'ordre des sections pour régénérer la navigation
            reorderPageSections(sections);
        }

        // Toggle Admin Sidebar
        function toggleAdminSidebar() {
            const sidebar = document.getElementById('adminSidebar');
            const contentPanel = document.getElementById('adminContentPanel');

            sidebar.classList.toggle('active');
            contentPanel.classList.toggle('active');

            if (sidebar.classList.contains('active')) {
                loadAdminDashboard();
            }
        }

        // Switch Admin Section
        function switchAdminSection(section) {
            // Remove active class from all nav items
            document.querySelectorAll('.admin-nav-item').forEach(item => {
                item.classList.remove('active');
            });

            // Add active class to clicked nav item
            document.querySelector(`[data-section="${section}"]`).classList.add('active');

            // Hide all sections
            document.querySelectorAll('.admin-section-content').forEach(sec => {
                sec.classList.remove('active');
            });

            // Show selected section
            document.getElementById(`adminSection-${section}`).classList.add('active');

            // Load content for the section
            loadAdminSectionContent(section);
        }

        // Load Admin Section Content
        function loadAdminSectionContent(section) {
            var config = JSON.parse(localStorage.getItem('alphamouv_config')) || {};

            switch (section) {
                case 'appearance':
                    loadAppearanceSection();
                    break;
                case 'content':
                    loadContentSection();
                    break;
                case 'cards':
                    loadCardsSection();
                    break;
                case 'instagram':
                    loadInstagramSection();
                    break;
                case 'events':
                    loadEventsSection();
                    break;
                case 'users':
                    loadUsersSection();
                    break;
                case 'logs':
                    loadLogsSection();
                    break;
            }
        }

        // Ouvrir la popup de login admin
        function resetAdminData() {
            // Réinitialiser les données admin dans localStorage
            localStorage.setItem('alphamouv_admin', JSON.stringify({
                password: DEFAULT_ADMIN_PASSWORD,
                admins: ['admin@alphamouv.com']
            }));
            console.log('✅ Données admin réinitialisées');
            alert('Données admin réinitialisées ! Essayez avec:\nEmail: admin@alphamouv.com\nMdp: admin123');
        }

        function openAdminLogin() {
            document.getElementById('adminLoginOverlay').classList.add('active');
            document.getElementById('adminPassword').value = '';
            document.getElementById('adminLoginError').style.display = 'none';
            document.getElementById('adminPassword').focus();
        }

        // Fermer la popup de login admin
        function closeAdminLogin() {
            document.getElementById('adminLoginOverlay').classList.remove('active');
        }

        // Vérifier le mot de passe admin
        function verifyAdminPassword() {
            const password = document.getElementById('adminPassword').value;
            const adminData = JSON.parse(localStorage.getItem('alphamouv_admin')) || {};

            if (password === adminData.password || password === DEFAULT_ADMIN_PASSWORD) {
                isAdminLoggedIn = true;
                closeAdminLogin();
                openAdminPanel();
                addLog('success', 'Connexion admin réussie');
            } else {
                document.getElementById('adminLoginError').style.display = 'block';
                addLog('warning', 'Tentative de connexion admin échouée');
            }
        }

        // Ouvrir le panneau admin
        function openAdminPanel() {
            // Open the new sidebar instead of the old panel
            toggleAdminSidebar();
        }

        // Fermer le panneau admin
        function closeAdminPanel() {
            // Close the new sidebar
            toggleAdminSidebar();
        }

        // Changer d'onglet admin
        function switchAdminTab(tab) {
            document.querySelectorAll('.admin-tab').forEach(function(t) {
                t.classList.remove('active');
            });

            // Trouver et activer le bon bouton
            var targetBtn = document.querySelector('.admin-tab[onclick*="' + tab + '"]');
            if (targetBtn) {
                targetBtn.classList.add('active');
            }

            document.querySelectorAll('.admin-panel-section').forEach(function(s) {
                s.classList.remove('active');
            });

            var targetSection = document.getElementById(tab + 'Section');
            if (targetSection) {
                targetSection.classList.add('active');

                // Charger le contenu spécifique selon l'onglet
                if (tab === 'appearance') {
                    loadAppearanceSection();
                } else if (tab === 'content') {
                    loadContentSection();
                    loadProductsManager();
                } else if (tab === 'images') {
                    loadImagesManager();
                } else if (tab === 'pages') {
                    loadPagesSection();
                } else if (tab === 'moderation') {
                    loadModerationSection();
                } else if (tab === 'logs') {
                    loadLogsSection();
                } else if (tab === 'settings') {
                    loadAdminSettings();
                } else if (tab === 'dashboard') {
                    loadAdminDashboard();
                }
            }
        }

        // Charger le dashboard
        async function loadAdminDashboard() {
            // Load the default section (appearance)
            loadAppearanceSection();
        }

        // Load Appearance Section
        function loadAppearanceSection() {
            var container = document.getElementById('appearanceContent');
            container.innerHTML = `
                <h4 style="color: var(--primary-color); margin-bottom: 20px;">Couleurs du site</h4>
                <div class="color-picker-group">
                    <div class="color-picker-item">
                        <label>Couleur Primaire (Accents dorés)</label>
                        <div class="color-picker-wrapper">
                            <input type="color" id="primaryColor" value="#ddac0b" oninput="updateColorRealtime('primaryColor', this.value)">
                            <input type="text" id="primaryColorText" value="#ddac0b" oninput="updateColorRealtime('primaryColor', this.value)" placeholder="#ddac0b">
                        </div>
                    </div>
                    <div class="color-picker-item">
                        <label>Couleur Secondaire (Dégradés)</label>
                        <div class="color-picker-wrapper">
                            <input type="color" id="secondaryColor" value="#b8900a" oninput="updateColorRealtime('secondaryColor', this.value)">
                            <input type="text" id="secondaryColorText" value="#b8900a" oninput="updateColorRealtime('secondaryColor', this.value)" placeholder="#b8900a">
                        </div>
                    </div>
                    <div class="color-picker-item">
                        <label>Couleur d'Accent (Highlights)</label>
                        <div class="color-picker-wrapper">
                            <input type="color" id="accentColor" value="#c4d10c" oninput="updateColorRealtime('accentColor', this.value)">
                            <input type="text" id="accentColorText" value="#c4d10c" oninput="updateColorRealtime('accentColor', this.value)" placeholder="#c4d10c">
                        </div>
                    </div>
                    <div class="color-picker-item">
                        <label>Couleur de Fond Sombre</label>
                        <div class="color-picker-wrapper">
                            <input type="color" id="backgroundDark" value="#000000" oninput="updateColorRealtime('backgroundDark', this.value)">
                            <input type="text" id="backgroundDarkText" value="#000000" oninput="updateColorRealtime('backgroundDark', this.value)" placeholder="#000000">
                        </div>
                    </div>
                    <div class="color-picker-item">
                        <label>Couleur de Fond Clair</label>
                        <div class="color-picker-wrapper">
                            <input type="color" id="backgroundLight" value="#1a1a1a" oninput="updateColorRealtime('backgroundLight', this.value)">
                            <input type="text" id="backgroundLightText" value="#1a1a1a" oninput="updateColorRealtime('backgroundLight', this.value)" placeholder="#1a1a1a">
                        </div>
                    </div>
                </div>

                <div style="margin: 20px 0;">
                    <button onclick="resetColors()" style="padding: 12px 24px; background: rgba(239, 68, 68, 0.2); color: #f87171; border: 1px solid rgba(239, 68, 68, 0.3); border-radius: 8px; cursor: pointer; font-weight: 600;">
                        Réinitialiser les couleurs par défaut
                    </button>
                </div>

                <h4 style="color: var(--primary-color); margin: 30px 0 15px;">Images</h4>
                <div id="imagesManagerContent"></div>
            `;

            loadImagesManager();
            loadCurrentColors();
        }

        // Load current colors from config
        function loadCurrentColors() {
            var config = JSON.parse(localStorage.getItem('alphamouv_config')) || {};
            const colors = config.colors || {};

            // Primary
            const primary = colors.primary || '#ddac0b';
            if (document.getElementById('primaryColor')) {
                document.getElementById('primaryColor').value = primary;
                document.getElementById('primaryColorText').value = primary;
            }

            // Secondary
            const secondary = colors.secondary || '#b8900a';
            if (document.getElementById('secondaryColor')) {
                document.getElementById('secondaryColor').value = secondary;
                document.getElementById('secondaryColorText').value = secondary;
            }

            // Accent
            const accent = colors.accent || '#c4d10c';
            if (document.getElementById('accentColor')) {
                document.getElementById('accentColor').value = accent;
                document.getElementById('accentColorText').value = accent;
            }

            // Background Dark
            const bgDark = colors.backgroundDark || '#000000';
            if (document.getElementById('backgroundDark')) {
                document.getElementById('backgroundDark').value = bgDark;
                document.getElementById('backgroundDarkText').value = bgDark;
            }

            // Background Light
            const bgLight = colors.backgroundLight || '#1a1a1a';
            if (document.getElementById('backgroundLight')) {
                document.getElementById('backgroundLight').value = bgLight;
                document.getElementById('backgroundLightText').value = bgLight;
            }

            // Apply colors to the site
            applyColors();
        }

        // Update color in real-time
        function updateColorRealtime(colorType, value) {
            var config = JSON.parse(localStorage.getItem('alphamouv_config')) || {};
            if (!config.colors) config.colors = {};

            switch (colorType) {
                case 'primaryColor':
                    config.colors.primary = value;
                    if (document.getElementById('primaryColor')) document.getElementById('primaryColor').value = value;
                    if (document.getElementById('primaryColorText')) document.getElementById('primaryColorText').value = value;
                    break;
                case 'secondaryColor':
                    config.colors.secondary = value;
                    if (document.getElementById('secondaryColor')) document.getElementById('secondaryColor').value = value;
                    if (document.getElementById('secondaryColorText')) document.getElementById('secondaryColorText').value = value;
                    break;
                case 'accentColor':
                    config.colors.accent = value;
                    if (document.getElementById('accentColor')) document.getElementById('accentColor').value = value;
                    if (document.getElementById('accentColorText')) document.getElementById('accentColorText').value = value;
                    break;
                case 'backgroundDark':
                    config.colors.backgroundDark = value;
                    if (document.getElementById('backgroundDark')) document.getElementById('backgroundDark').value = value;
                    if (document.getElementById('backgroundDarkText')) document.getElementById('backgroundDarkText').value = value;
                    break;
                case 'backgroundLight':
                    config.colors.backgroundLight = value;
                    if (document.getElementById('backgroundLight')) document.getElementById('backgroundLight').value = value;
                    if (document.getElementById('backgroundLightText')) document.getElementById('backgroundLightText').value = value;
                    break;
            }

            localStorage.setItem('alphamouv_config', JSON.stringify(config));
            applyColors();
        }

        // Apply colors to the site
        function applyColors() {
            var config = JSON.parse(localStorage.getItem('alphamouv_config')) || {};
            const colors = config.colors || {};

            // Apply all color variables
            document.documentElement.style.setProperty('--primary-color', colors.primary || '#ddac0b');
            document.documentElement.style.setProperty('--secondary-color', colors.secondary || '#b8900a');
            document.documentElement.style.setProperty('--accent-color', colors.accent || '#c4d10c');
            document.documentElement.style.setProperty('--background-dark', colors.backgroundDark || '#000000');
            document.documentElement.style.setProperty('--background-light', colors.backgroundLight || '#1a1a1a');
        }

        // Reset colors to default
        function resetColors() {
            if (confirm('Êtes-vous sûr de vouloir réinitialiser toutes les couleurs aux valeurs par défaut ?')) {
                var config = JSON.parse(localStorage.getItem('alphamouv_config')) || {};
                config.colors = {
                    primary: '#ddac0b',
                    secondary: '#b8900a',
                    accent: '#c4d10c',
                    backgroundDark: '#000000',
                    backgroundLight: '#1a1a1a'
                };
                localStorage.setItem('alphamouv_config', JSON.stringify(config));
                loadCurrentColors();
                addLog('info', 'Couleurs réinitialisées aux valeurs par défaut');
            }
        }

        // Load Content Section
        function loadContentSection() {
            var container = document.getElementById('contentContent');

            container.innerHTML = `
                <h4 style="color: var(--primary-color); margin-bottom: 20px;">Édition des textes du site</h4>
                <p style="color: rgba(255,255,255,0.6); margin-bottom: 30px;">
                    Modifiez tous les textes du site organisés par section. Les modifications sont appliquées en temps réel.
                </p>

                <div id="textSectionsContainer"></div>
            `;

            loadTextSections();
        }

        // Load all text sections
        function loadTextSections() {
            var container = document.getElementById('textSectionsContainer');
            var config = JSON.parse(localStorage.getItem('alphamouv_config')) || {};
            const texts = config.texts || getDefaultTexts();

            var html = '';

            // Section Navigation
            html += createTextSection('Navigation', 'navigation', [{
                key: 'logo',
                label: 'Texte du Logo',
                value: texts.navigation && texts.navigation.logo || 'AlphaMouv'
            }, {
                key: 'accueil',
                label: 'Accueil',
                value: texts.navigation && texts.navigation.accueil || 'Accueil'
            }, {
                key: 'apropos',
                label: 'À propos',
                value: texts.navigation && texts.navigation.apropos || 'À propos'
            }, {
                key: 'galerie',
                label: 'Galerie',
                value: texts.navigation && texts.navigation.galerie || 'Galerie'
            }, {
                key: 'evenements',
                label: 'Événements',
                value: texts.navigation && texts.navigation.evenements || 'Événements'
            }, {
                key: 'contact',
                label: 'Contact',
                value: texts.navigation && texts.navigation.contact || 'Contact'
            }]);

            // Section Accueil
            html += createTextSection('Page Accueil', 'home', [{
                key: 'presentation',
                label: 'Texte de présentation principal',
                value: texts.home && texts.home.presentation || 'Bonjour, je m\'appelle Alpha, j\'ai 17 ans et je suis un artiste qui produit ses créations sur des vêtements. J\'y raconte ma vie et les épreuves que j\'ai endurées pour en arriver là où j\'en suis.',
                multiline: true,
                rows: 4
            }, {
                key: 'ctaSocial',
                label: 'Bouton réseaux sociaux',
                value: texts.home && texts.home.ctaSocial || 'Rejoindre mes réseaux sociaux'
            }]);

            // Section Événements
            html += createTextSection('Page Événements', 'events', [{
                key: 'title',
                label: 'Titre de la section',
                value: texts.events && texts.events.title || 'Évènements'
            }, {
                key: 'subtitle',
                label: 'Sous-titre',
                value: texts.events && texts.events.subtitle || 'Retrouvez-moi lors de mes prochains évènements, expositions et collaborations artistiques.',
                multiline: true
            }, {
                key: 'card1Title',
                label: 'Carte 1 - Titre',
                value: texts.events && texts.events.card1Title || 'Expositions à venir'
            }, {
                key: 'card1Desc',
                label: 'Carte 1 - Description',
                value: texts.events && texts.events.card1Desc || 'Découvrez mes prochaines expositions et vernissages où je présenterai mes dernières créations',
                multiline: true
            }, {
                key: 'card2Title',
                label: 'Carte 2 - Titre',
                value: texts.events && texts.events.card2Title || 'Évènements passés'
            }, {
                key: 'card2Desc',
                label: 'Carte 2 - Description',
                value: texts.events && texts.events.card2Desc || 'Revivez les moments forts de mes précédents évènements et collaborations artistiques',
                multiline: true
            }, {
                key: 'card3Title',
                label: 'Carte 3 - Titre',
                value: texts.events && texts.events.card3Title || 'Collaborations'
            }, {
                key: 'card3Desc',
                label: 'Carte 3 - Description',
                value: texts.events && texts.events.card3Desc || 'Projets collaboratifs avec d\'autres artistes et créateurs pour des évènements uniques',
                multiline: true
            }]);

            // Section Créations Uniques
            html += createTextSection('Page Créations Uniques', 'creations', [{
                key: 'title',
                label: 'Titre de la section',
                value: texts.creations && texts.creations.title || 'Créations Uniques'
            }, {
                key: 'description',
                label: 'Description',
                value: texts.creations && texts.creations.description || 'Chaque vêtement que je crée est une pièce unique, pensée et réalisée à la main. Mes créations ne sont pas de simples habits, ce sont des toiles sur lesquelles j\'exprime mes émotions, mes rêves et mon parcours personnel. Chaque trait, chaque couleur raconte une partie de mon histoire.',
                multiline: true,
                rows: 5
            }, {
                key: 'card1Title',
                label: 'Carte 1 - Titre',
                value: texts.creations && texts.creations.card1Title || 'Art Vestimentaire'
            }, {
                key: 'card1Desc',
                label: 'Carte 1 - Description',
                value: texts.creations && texts.creations.card1Desc || 'Des pièces uniques qui fusionnent mode et expression artistique',
                multiline: true
            }, {
                key: 'card2Title',
                label: 'Carte 2 - Titre',
                value: texts.creations && texts.creations.card2Title || 'Techniques Mixtes'
            }, {
                key: 'card2Desc',
                label: 'Carte 2 - Description',
                value: texts.creations && texts.creations.card2Desc || 'Peinture, dessin et customisation pour des résultats exceptionnels',
                multiline: true
            }, {
                key: 'card3Title',
                label: 'Carte 3 - Titre',
                value: texts.creations && texts.creations.card3Title || 'Collections Limitées'
            }, {
                key: 'card3Desc',
                label: 'Carte 3 - Description',
                value: texts.creations && texts.creations.card3Desc || 'Chaque création est produite en édition limitée ou unique',
                multiline: true
            }]);

            // Section Art & Expression
            html += createTextSection('Page Art & Expression', 'art', [{
                key: 'title',
                label: 'Titre de la section',
                value: texts.art && texts.art.title || 'Art & Expression'
            }, {
                key: 'description',
                label: 'Description',
                value: texts.art && texts.art.description || 'L\'art est mon langage, ma façon de communiquer avec le monde. À travers mes créations, j\'exprime ce que les mots ne peuvent pas dire. Chaque œuvre porte en elle une émotion, un message, un fragment de mon âme. C\'est ma manière de transformer la douleur en beauté, les épreuves en force créatrice.',
                multiline: true,
                rows: 5
            }, {
                key: 'card4Title',
                label: 'Carte 4 - Titre',
                value: texts.art && texts.art.card4Title || 'Expression Personnelle'
            }, {
                key: 'card4Desc',
                label: 'Carte 4 - Description',
                value: texts.art && texts.art.card4Desc || 'L\'art comme moyen d\'exprimer mes émotions et mon vécu',
                multiline: true
            }, {
                key: 'card5Title',
                label: 'Carte 5 - Titre',
                value: texts.art && texts.art.card5Title || 'Symbolisme'
            }, {
                key: 'card5Desc',
                label: 'Carte 5 - Description',
                value: texts.art && texts.art.card5Desc || 'Chaque élément de mes créations porte une signification profonde',
                multiline: true
            }, {
                key: 'card6Title',
                label: 'Carte 6 - Titre',
                value: texts.art && texts.art.card6Title || 'Évolution Artistique'
            }, {
                key: 'card6Desc',
                label: 'Carte 6 - Description',
                value: texts.art && texts.art.card6Desc || 'Mon style évolue avec mon parcours et mes expériences',
                multiline: true
            }]);

            // Section Mon Histoire
            html += createTextSection('Page Mon Histoire', 'histoire', [{
                key: 'title',
                label: 'Titre de la section',
                value: texts.histoire && texts.histoire.title || 'Mon Histoire'
            }, {
                key: 'description',
                label: 'Description',
                value: texts.histoire && texts.histoire.description || 'Mon parcours n\'a pas été facile. J\'ai traversé des épreuves qui m\'ont forgé, façonné en tant que personne et artiste. Chaque obstacle surmonté, chaque moment difficile est devenu une source d\'inspiration. À 17 ans, je transforme mes expériences en art, mes blessures en créations. Mon histoire est celle d\'une renaissance par l\'art, d\'une transformation continue où chaque création marque une étape de mon évolution.',
                multiline: true,
                rows: 6
            }, {
                key: 'card7Title',
                label: 'Carte 7 - Titre',
                value: texts.histoire && texts.histoire.card7Title || 'Mon Parcours'
            }, {
                key: 'card7Desc',
                label: 'Carte 7 - Description',
                value: texts.histoire && texts.histoire.card7Desc || 'Les épreuves qui m\'ont construit et inspiré',
                multiline: true
            }, {
                key: 'card8Title',
                label: 'Carte 8 - Titre',
                value: texts.histoire && texts.histoire.card8Title || 'Authenticité'
            }, {
                key: 'card8Desc',
                label: 'Carte 8 - Description',
                value: texts.histoire && texts.histoire.card8Desc || 'Chaque création reflète ma vérité et mes expériences',
                multiline: true
            }, {
                key: 'card9Title',
                label: 'Carte 9 - Titre',
                value: texts.histoire && texts.histoire.card9Title || 'Ma Vision'
            }, {
                key: 'card9Desc',
                label: 'Carte 9 - Description',
                value: texts.histoire && texts.histoire.card9Desc || 'Créer un univers artistique unique et inspirant',
                multiline: true
            }]);

            // Section Contact
            html += createTextSection('Page Contact', 'contact', [{
                key: 'title',
                label: 'Titre de la section',
                value: texts.contact && texts.contact.title || 'Contactez-moi'
            }, {
                key: 'subtitle',
                label: 'Sous-titre',
                value: texts.contact && texts.contact.subtitle || 'N\'hésitez pas à me contacter pour toute question',
                multiline: true
            }, {
                key: 'emailLabel',
                label: 'Label bouton Email',
                value: texts.contact && texts.contact.emailLabel || 'Envoyer un Email'
            }, {
                key: 'instagramLabel',
                label: 'Label bouton Instagram',
                value: texts.contact && texts.contact.instagramLabel || 'Suivre sur Instagram'
            }, {
                key: 'youtubeLabel',
                label: 'Label bouton YouTube',
                value: texts.contact && texts.contact.youtubeLabel || 'S\'abonner sur YouTube'
            }]);

            // Section Footer
            html += createTextSection('Pied de page', 'footer', [{
                key: 'copyright',
                label: 'Copyright',
                value: texts.footer && texts.footer.copyright || '© 2026 AlphaMouv. Tous droits réservés.'
            }, {
                key: 'credits',
                label: 'Crédits',
                value: texts.footer && texts.footer.credits || 'Créé avec passion',
                multiline: true
            }]);

            container.innerHTML = html;
        }

        // Create a text section editor
        function createTextSection(title, sectionKey, fields) {
            var html = '<div style="background: rgba(255,255,255,0.03); border-radius: 12px; padding: 20px; margin-bottom: 20px; border: 1px solid rgba(255,255,255,0.1);">';
            html += '<h5 style="color: var(--primary-color); margin-bottom: 15px; font-size: 1.1em; display: flex; align-items: center; gap: 10px;">';
            html += '<svg style="width: 20px; height: 20px;" fill="currentColor" viewBox="0 0 20 20">';
            html += '<path d="M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"/>';
            html += '</svg>';
            html += title;
            html += '</h5>';
            html += '<div style="display: grid; gap: 15px;">';

            for (var i = 0; i < fields.length; i++) {
                var field = fields[i];
                var inputId = 'text_' + sectionKey + '_' + field.key;
                var escapedValue = (field.value || '').replace(/"/g, '&quot;');

                html += '<div>';
                html += '<label style="display: block; color: rgba(255,255,255,0.8); font-size: 0.9em; margin-bottom: 8px; font-weight: 500;">';
                html += field.label;
                html += '</label>';

                if (field.multiline) {
                    var minHeight = field.rows ? field.rows * 24 : 60;
                    html += '<textarea ';
                    html += 'id="' + inputId + '" ';
                    html += 'oninput="updateTextRealtime(\'' + sectionKey + '\', \'' + field.key + '\', this.value)" ';
                    html += 'style="width: 100%; padding: 12px; background: rgba(0,0,0,0.3); border: 1px solid rgba(255,255,255,0.2); border-radius: 8px; color: white; font-family: \'Quicksand\', sans-serif; resize: vertical; min-height: ' + minHeight + 'px;" ';
                    html += 'placeholder="' + escapedValue + '">';
                    html += field.value || '';
                    html += '</textarea>';
                } else {
                    html += '<input type="text" ';
                    html += 'id="' + inputId + '" ';
                    html += 'value="' + escapedValue + '" ';
                    html += 'oninput="updateTextRealtime(\'' + sectionKey + '\', \'' + field.key + '\', this.value)" ';
                    html += 'style="width: 100%; padding: 12px; background: rgba(0,0,0,0.3); border: 1px solid rgba(255,255,255,0.2); border-radius: 8px; color: white; font-family: \'Quicksand\', sans-serif;" ';
                    html += 'placeholder="' + escapedValue + '">';
                }

                html += '</div>';
            }

            html += '</div>';
            html += '</div>';

            return html;
        }

        // Get default texts
        function getDefaultTexts() {
            return {
                navigation: {
                    logo: 'AlphaMouv',
                    accueil: 'Accueil',
                    apropos: 'À propos',
                    galerie: 'Galerie',
                    evenements: 'Événements',
                    contact: 'Contact'
                },
                home: {
                    presentation: 'Bonjour, je m\'appelle Alpha, j\'ai 17 ans et je suis un artiste qui produit ses créations sur des vêtements. J\'y raconte ma vie et les épreuves que j\'ai endurées pour en arriver là où j\'en suis.',
                    ctaSocial: 'Rejoindre mes réseaux sociaux'
                },
                events: {
                    title: 'Évènements',
                    subtitle: 'Retrouvez-moi lors de mes prochains évènements, expositions et collaborations artistiques.',
                    card1Title: 'Expositions à venir',
                    card1Desc: 'Découvrez mes prochaines expositions et vernissages où je présenterai mes dernières créations',
                    card2Title: 'Évènements passés',
                    card2Desc: 'Revivez les moments forts de mes précédents évènements et collaborations artistiques',
                    card3Title: 'Collaborations',
                    card3Desc: 'Projets collaboratifs avec d\'autres artistes et créateurs pour des évènements uniques'
                },
                creations: {
                    title: 'Créations Uniques',
                    description: 'Chaque vêtement que je crée est une pièce unique, pensée et réalisée à la main. Mes créations ne sont pas de simples habits, ce sont des toiles sur lesquelles j\'exprime mes émotions, mes rêves et mon parcours personnel. Chaque trait, chaque couleur raconte une partie de mon histoire.',
                    card1Title: 'Art Vestimentaire',
                    card1Desc: 'Des pièces uniques qui fusionnent mode et expression artistique',
                    card2Title: 'Techniques Mixtes',
                    card2Desc: 'Peinture, dessin et customisation pour des résultats exceptionnels',
                    card3Title: 'Collections Limitées',
                    card3Desc: 'Chaque création est produite en édition limitée ou unique'
                },
                art: {
                    title: 'Art & Expression',
                    description: 'L\'art est mon langage, ma façon de communiquer avec le monde. À travers mes créations, j\'exprime ce que les mots ne peuvent pas dire. Chaque œuvre porte en elle une émotion, un message, un fragment de mon âme. C\'est ma manière de transformer la douleur en beauté, les épreuves en force créatrice.',
                    card4Title: 'Expression Personnelle',
                    card4Desc: 'L\'art comme moyen d\'exprimer mes émotions et mon vécu',
                    card5Title: 'Symbolisme',
                    card5Desc: 'Chaque élément de mes créations porte une signification profonde',
                    card6Title: 'Évolution Artistique',
                    card6Desc: 'Mon style évolue avec mon parcours et mes expériences'
                },
                histoire: {
                    title: 'Mon Histoire',
                    description: 'Mon parcours n\'a pas été facile. J\'ai traversé des épreuves qui m\'ont forgé, façonné en tant que personne et artiste. Chaque obstacle surmonté, chaque moment difficile est devenu une source d\'inspiration. À 17 ans, je transforme mes expériences en art, mes blessures en créations. Mon histoire est celle d\'une renaissance par l\'art, d\'une transformation continue où chaque création marque une étape de mon évolution.',
                    card7Title: 'Mon Parcours',
                    card7Desc: 'Les épreuves qui m\'ont construit et inspiré',
                    card8Title: 'Authenticité',
                    card8Desc: 'Chaque création reflète ma vérité et mes expériences',
                    card9Title: 'Ma Vision',
                    card9Desc: 'Créer un univers artistique unique et inspirant'
                },
                contact: {
                    title: 'Contactez-moi',
                    subtitle: 'N\'hésitez pas à me contacter pour toute question',
                    emailLabel: 'Envoyer un Email',
                    instagramLabel: 'Suivre sur Instagram',
                    youtubeLabel: 'S\'abonner sur YouTube'
                },
                footer: {
                    copyright: '© 2024 AlphaMouv. Tous droits réservés.',
                    credits: 'Créé avec passion'
                }
            };
        }

        // Update text in real-time
        function updateTextRealtime(section, key, value) {
            var config = JSON.parse(localStorage.getItem('alphamouv_config')) || {};
            if (!config.texts) config.texts = getDefaultTexts();
            if (!config.texts[section]) config.texts[section] = {};

            config.texts[section][key] = value;
            localStorage.setItem('alphamouv_config', JSON.stringify(config));

            // Apply text changes to the actual page
            applyTextsToPage();
        }

        // Apply saved texts to the page
        function applyTextsToPage() {
            var config = JSON.parse(localStorage.getItem('alphamouv_config')) || {};
            var texts = config.texts || getDefaultTexts();

            // Apply main title (H1 in header)
            if (texts.navigation && texts.navigation.logo) {
                var h1Title = document.querySelector('header h1');
                if (h1Title) {
                    h1Title.textContent = texts.navigation.logo;
                }
            }

            // Apply navigation texts
            var logoElements = document.querySelectorAll('.logo-text, .nav-logo, [data-text="navigation.logo"]');
            logoElements.forEach(function(el) {
                if (texts.navigation && texts.navigation.logo) {
                    el.textContent = texts.navigation.logo;
                }
            });

            // Apply all navigation links
            var navLinks = {
                'accueil': '.nav-link[href="#home"], [data-text="navigation.accueil"]',
                'apropos': '.nav-link[href="#about"], [data-text="navigation.apropos"]',
                'galerie': '.nav-link[href="#gallery"], [data-text="navigation.galerie"]',
                'evenements': '.nav-link[href="#events"], [data-text="navigation.evenements"]',
                'contact': '.nav-link[href="#contact"], [data-text="navigation.contact"]'
            };

            for (var key in navLinks) {
                if (texts.navigation && texts.navigation[key]) {
                    var elements = document.querySelectorAll(navLinks[key]);
                    elements.forEach(function(el) {
                        el.textContent = texts.navigation[key];
                    });
                }
            }

            // Apply home section texts
            if (texts.home) {
                if (texts.home.presentation) {
                    var presentationEls = document.querySelectorAll('[data-text="home.presentation"], .presentation-text');
                    presentationEls.forEach(function(el) {
                        el.textContent = texts.home.presentation;
                    });
                }
                if (texts.home.ctaSocial) {
                    var ctaEls = document.querySelectorAll('[data-text="home.ctaSocial"], .cta-social');
                    ctaEls.forEach(function(el) {
                        el.textContent = texts.home.ctaSocial;
                    });
                }
            }

            // Apply events section texts
            if (texts.events && texts.events.title) {
                var eventsTitleEls = document.querySelectorAll('[data-text="events.title"], #events h2, .events-title');
                eventsTitleEls.forEach(function(el) {
                    el.textContent = texts.events.title;
                });
            }

            // Apply events cards texts
            if (texts.events) {
                // Card 1 - Expositions à venir
                var event1Title = document.querySelector('#event1 h3');
                var event1Desc = document.querySelector('#event1 p');
                if (event1Title && texts.events.card1Title) {
                    event1Title.childNodes[0].textContent = texts.events.card1Title;
                }
                if (event1Desc && texts.events.card1Desc) {
                    event1Desc.childNodes[0].textContent = texts.events.card1Desc;
                }

                // Card 2 - Évènements passés
                var event2Title = document.querySelector('#event2 h3');
                var event2Desc = document.querySelector('#event2 p');
                if (event2Title && texts.events.card2Title) {
                    event2Title.textContent = texts.events.card2Title;
                }
                if (event2Desc && texts.events.card2Desc) {
                    event2Desc.textContent = texts.events.card2Desc;
                }

                // Card 3 - Collaborations
                var event3Title = document.querySelector('#event3 h3');
                var event3Desc = document.querySelector('#event3 p');
                if (event3Title && texts.events.card3Title) {
                    event3Title.textContent = texts.events.card3Title;
                }
                if (event3Desc && texts.events.card3Desc) {
                    event3Desc.textContent = texts.events.card3Desc;
                }
            }

            // Apply footer texts
            if (texts.footer) {
                if (texts.footer.credits) {
                    var creditsEls = document.querySelectorAll('[data-text="footer.credits"], .footer-credits');
                    creditsEls.forEach(function(el) {
                        el.textContent = texts.footer.credits;
                    });
                }
            }
        }

        // Load Cards Section
        function loadCardsSection() {
            var container = document.getElementById('cardsContent');
            var config = JSON.parse(localStorage.getItem('alphamouv_config')) || {};
            var cards = config.cards || getDefaultCards();

            var html = '<h4 style="color: var(--primary-color); margin-bottom: 20px;">Gestion des cartes du site</h4>';
            html += '<p style="color: rgba(255,255,255,0.6); margin-bottom: 30px;">Organisez et personnalisez les cartes affichées dans chaque section du site.</p>';

            // Section Créations Uniques
            html += createCardsManager('Créations Uniques', 'creations', cards.creations || []);

            // Section Art & Expression
            html += createCardsManager('Art & Expression', 'art', cards.art || []);

            // Section Mon Histoire
            html += createCardsManager('Mon Histoire', 'histoire', cards.histoire || []);

            // Section Pop-ups / Événements
            html += '<div style="background: rgba(255,255,255,0.05); border-radius: 12px; padding: 20px; margin-top: 30px; border: 1px solid rgba(255,255,255,0.15);">';
            html += '<h4 style="color: var(--primary-color); margin-bottom: 15px;">🎴 Pop-ups & Événements</h4>';
            html += '<p style="color: rgba(255,255,255,0.6); margin-bottom: 20px;">Gérez le contenu des fenêtres pop-up qui s\'ouvrent quand on clique sur les cartes.</p>';
            html += '<div id="cardsEditorContainer">';
            html += '</div>';
            html += '</div>';

            container.innerHTML = html;

            // Load the cards editor (event1, event2, event3, etc.)
            loadCardsEditor();
        }

        // Create cards manager for a section
        function createCardsManager(sectionTitle, sectionKey, cards) {
            var html = '<div style="background: rgba(255,255,255,0.03); border-radius: 12px; padding: 20px; margin-bottom: 25px; border: 1px solid rgba(255,255,255,0.1);">';
            html += '<div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 20px;">';
            html += '<h5 style="color: var(--primary-color); font-size: 1.1em; display: flex; align-items: center; gap: 10px;">';
            html += '<svg style="width: 20px; height: 20px;" fill="currentColor" viewBox="0 0 20 20">';
            html += '<path d="M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V4zM3 10a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H4a1 1 0 01-1-1v-6zM14 9a1 1 0 00-1 1v6a1 1 0 001 1h2a1 1 0 001-1v-6a1 1 0 00-1-1h-2z"/>';
            html += '</svg>';
            html += sectionTitle;
            html += '</h5>';
            html += '<button onclick="openAddCardModal(\'' + sectionKey + '\')" style="padding: 8px 16px; background: linear-gradient(135deg, #ddac0b, #b8900a); color: #000; border: none; border-radius: 6px; cursor: pointer; font-weight: 600; font-size: 0.9em;">';
            html += '<svg style="width: 14px; height: 14px; display: inline-block; vertical-align: middle; margin-right: 6px;" fill="currentColor" viewBox="0 0 20 20">';
            html += '<path fill-rule="evenodd" d="M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z" clip-rule="evenodd"/>';
            html += '</svg>';
            html += 'Ajouter une carte';
            html += '</button>';
            html += '</div>';

            if (cards.length === 0) {
                html += '<p style="color: rgba(255,255,255,0.5); text-align: center; padding: 30px;">Aucune carte pour cette section. Cliquez sur "Ajouter une carte" pour commencer.</p>';
            } else {
                html += '<div style="display: grid; gap: 15px;">';
                for (var i = 0; i < cards.length; i++) {
                    var card = cards[i];
                    var index = i;
                    html += '<div style="background: rgba(0,0,0,0.3); border-radius: 10px; padding: 15px; border: 1px solid rgba(255,255,255,0.1);">';
                    html += '<div style="display: flex; gap: 15px;">';

                    // Card image preview
                    html += '<div style="width: 100px; height: 100px; border-radius: 8px; overflow: hidden; flex-shrink: 0; background: rgba(255,255,255,0.05);">';
                    if (card.image) {
                        html += '<img src="' + card.image + '" style="width: 100%; height: 100%; object-fit: cover;">';
                    } else {
                        html += '<div style="width: 100%; height: 100%; display: flex; align-items: center; justify-content: center; color: rgba(255,255,255,0.3);">Pas d\'image</div>';
                    }
                    html += '</div>';

                    // Card content
                    html += '<div style="flex: 1;">';
                    html += '<h6 style="color: #ddac0b; margin-bottom: 8px; font-size: 1em;">' + (card.title || 'Sans titre') + '</h6>';
                    html += '<p style="color: rgba(255,255,255,0.7); font-size: 0.9em; margin-bottom: 10px; line-height: 1.4;">' + (card.description || 'Sans description') + '</p>';
                    html += '<div style="display: flex; gap: 8px;">';
                    html += '<button onclick="editCard(\'' + sectionKey + '\', ' + index + ')" style="padding: 6px 12px; background: rgba(59, 130, 246, 0.2); color: #60a5fa; border: 1px solid rgba(59, 130, 246, 0.3); border-radius: 6px; cursor: pointer; font-size: 0.85em;">Modifier</button>';
                    html += '<button onclick="deleteCard(\'' + sectionKey + '\', ' + index + ')" style="padding: 6px 12px; background: rgba(239, 68, 68, 0.2); color: #f87171; border: 1px solid rgba(239, 68, 68, 0.3); border-radius: 6px; cursor: pointer; font-size: 0.85em;">Supprimer</button>';
                    html += '</div>';
                    html += '</div>';
                    html += '</div>';
                    html += '</div>';
                }
                html += '</div>';
            }

            html += '</div>';
            return html;
        }

        // Get default cards
        function getDefaultCards() {
            return {
                creations: [{
                    id: 'card1',
                    title: 'Art Vestimentaire',
                    description: 'Des pièces uniques qui fusionnent mode et expression artistique',
                    image: 'images/1000007798.jpg'
                }, {
                    id: 'card2',
                    title: 'Techniques Mixtes',
                    description: 'Peinture, dessin et customisation pour des résultats exceptionnels',
                    image: 'images/1000013795.jpg'
                }, {
                    id: 'card3',
                    title: 'Collections Limitées',
                    description: 'Chaque création est produite en édition limitée ou unique',
                    image: 'images/1000007798.jpg'
                }],
                art: [{
                    id: 'card4',
                    title: 'Expression Personnelle',
                    description: 'L\'art comme moyen d\'exprimer mes émotions et mon vécu',
                    image: 'images/1000007790.jpg'
                }, {
                    id: 'card5',
                    title: 'Symbolisme',
                    description: 'Chaque élément de mes créations porte une signification profonde',
                    image: 'images/1000007789.jpg'
                }, {
                    id: 'card6',
                    title: 'Évolution Artistique',
                    description: 'Mon style évolue avec mon parcours et mes expériences',
                    image: 'images/1000007796.jpg'
                }],
                histoire: [{
                    id: 'card7',
                    title: 'Mon Parcours',
                    description: 'Les épreuves qui m\'ont construit et inspiré',
                    image: 'images/1000007798.jpg'
                }, {
                    id: 'card8',
                    title: 'Authenticité',
                    description: 'Chaque création reflète ma vérité et mes expériences',
                    image: 'images/1000013795.jpg'
                }, {
                    id: 'card9',
                    title: 'Ma Vision',
                    description: 'Créer un univers artistique unique et inspirant',
                    image: 'images/1000007796.jpg'
                }]
            };
        }

        // Open add card modal
        function openAddCardModal(section) {
            document.getElementById('editorModalTitle').textContent = 'Ajouter une nouvelle carte';

            var html = '<div style="display: grid; gap: 20px;">';

            // Basic card info
            html += '<div style="background: rgba(255,255,255,0.05); padding: 15px; border-radius: 8px;">';
            html += '<h4 style="color: #ddac0b; margin-bottom: 15px;">Informations de base</h4>';

            html += '<div style="margin-bottom: 15px;">';
            html += '<label style="display: block; color: rgba(255,255,255,0.8); margin-bottom: 8px; font-size: 0.9em;">Titre</label>';
            html += '<input type="text" id="editCardTitle" placeholder="Titre de la carte" style="width: 100%; padding: 10px; background: rgba(0,0,0,0.3); border: 1px solid rgba(255,255,255,0.2); border-radius: 6px; color: white; font-family: \'Quicksand\', sans-serif;">';
            html += '</div>';

            html += '<div style="margin-bottom: 15px;">';
            html += '<label style="display: block; color: rgba(255,255,255,0.8); margin-bottom: 8px; font-size: 0.9em;">Description courte</label>';
            html += '<textarea id="editCardDescription" placeholder="Description courte affichée sur la carte" style="width: 100%; padding: 10px; background: rgba(0,0,0,0.3); border: 1px solid rgba(255,255,255,0.2); border-radius: 6px; color: white; font-family: \'Quicksand\', sans-serif; min-height: 80px; resize: vertical;"></textarea>';
            html += '</div>';

            html += '<div style="margin-bottom: 15px;">';
            html += '<label style="display: block; color: rgba(255,255,255,0.8); margin-bottom: 8px; font-size: 0.9em;">Image de la carte</label>';
            html += '<div style="display: flex; gap: 10px; align-items: center;">';
            html += '<input type="file" id="editCardImageFile" accept="image/*" onchange="previewCardImage(this)" style="flex: 1; padding: 8px; background: rgba(0,0,0,0.3); border: 1px solid rgba(255,255,255,0.2); border-radius: 6px; color: white;">';
            html += '<div id="cardImagePreview" style="width: 80px; height: 80px; border-radius: 6px; overflow: hidden; background: rgba(255,255,255,0.05); flex-shrink: 0; display: flex; align-items: center; justify-content: center; color: rgba(255,255,255,0.3); font-size: 0.8em;">Aperçu</div>';
            html += '</div>';
            html += '<input type="text" id="editCardImage" placeholder="ou URL de l\'image" style="width: 100%; padding: 8px; margin-top: 8px; background: rgba(0,0,0,0.3); border: 1px solid rgba(255,255,255,0.2); border-radius: 6px; color: white; font-size: 0.85em;">';
            html += '</div>';
            html += '</div>';

            // Popup content
            html += '<div style="background: rgba(255,255,255,0.05); padding: 15px; border-radius: 8px;">';
            html += '<h4 style="color: #ddac0b; margin-bottom: 15px;">Contenu du popup</h4>';

            html += '<div style="margin-bottom: 15px;">';
            html += '<label style="display: block; color: rgba(255,255,255,0.8); margin-bottom: 8px; font-size: 0.9em;">Titre du popup</label>';
            html += '<input type="text" id="editCardPopupTitle" placeholder="Titre affiché dans le popup" style="width: 100%; padding: 10px; background: rgba(0,0,0,0.3); border: 1px solid rgba(255,255,255,0.2); border-radius: 6px; color: white; font-family: \'Quicksand\', sans-serif;">';
            html += '</div>';

            html += '<div style="margin-bottom: 15px;">';
            html += '<label style="display: block; color: rgba(255,255,255,0.8); margin-bottom: 8px; font-size: 0.9em;">Contenu du popup (HTML)</label>';
            html += '<textarea id="editCardPopupText" placeholder="<h3>Titre</h3><p>Votre contenu ici...</p>" style="width: 100%; padding: 10px; background: rgba(0,0,0,0.3); border: 1px solid rgba(255,255,255,0.2); border-radius: 6px; color: white; font-family: \'Courier New\', monospace; min-height: 120px; resize: vertical; font-size: 0.9em;"></textarea>';
            html += '<p style="color: rgba(255,255,255,0.5); font-size: 0.8em; margin-top: 5px;">Vous pouvez utiliser du HTML : &lt;h3&gt;, &lt;p&gt;, &lt;strong&gt;, etc.</p>';
            html += '</div>';
            html += '</div>';

            // Images section
            html += '<div style="background: rgba(255,255,255,0.05); padding: 15px; border-radius: 8px;">';
            html += '<h4 style="color: #ddac0b; margin-bottom: 15px;">Images du popup (max 4)</h4>';

            html += '<div style="margin-bottom: 15px;">';
            html += '<label style="display: block; color: rgba(255,255,255,0.8); margin-bottom: 8px; font-size: 0.9em;">Disposition des images</label>';
            html += '<select id="editCardImageLayout" style="width: 100%; padding: 10px; background: rgba(0,0,0,0.3); border: 1px solid rgba(255,255,255,0.2); border-radius: 6px; color: white; font-family: \'Quicksand\', sans-serif;">';
            html += '<option value="layout-1">1 colonne (vertical)</option>';
            html += '<option value="layout-2">2 colonnes (grille 2x2)</option>';
            html += '<option value="layout-3">3 colonnes</option>';
            html += '<option value="layout-2-1">2-1 (grande + petite)</option>';
            html += '</select>';
            html += '</div>';

            html += '<div id="popupImagesContainer" style="display: grid; gap: 10px; margin-bottom: 15px;"></div>';

            html += '<button type="button" onclick="addPopupImageSlot()" style="width: 100%; padding: 10px; background: rgba(221, 172, 11, 0.2); color: #ddac0b; border: 1px solid rgba(221, 172, 11, 0.3); border-radius: 6px; cursor: pointer; font-weight: 600;">';
            html += '<svg style="width: 14px; height: 14px; display: inline-block; vertical-align: middle; margin-right: 6px;" fill="currentColor" viewBox="0 0 20 20">';
            html += '<path fill-rule="evenodd" d="M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z" clip-rule="evenodd"/>';
            html += '</svg>';
            html += 'Ajouter une image';
            html += '</button>';
            html += '</div>';

            html += '</div>';

            document.getElementById('editorModalBody').innerHTML = html;
            document.getElementById('editorModal').classList.add('active');

            // Store add context
            window.currentCardEdit = {
                section,
                index: -1,
                cardId: 'card' + Date.now(),
                isNew: true
            };
            window.popupImages = [];
            renderPopupImages();
        }

        // Edit card
        function editCard(section, index) {
            var config = JSON.parse(localStorage.getItem('alphamouv_config')) || {};
            if (!config.cards) config.cards = getDefaultCards();
            var card = config.cards[section][index];

            // Get card data with popup content
            var cardData = getCardData(card.id);

            // Open editor modal
            document.getElementById('editorModalTitle').textContent = 'Modifier la carte';

            var html = '<div style="display: grid; gap: 20px;">';

            // Basic card info
            html += '<div style="background: rgba(255,255,255,0.05); padding: 15px; border-radius: 8px;">';
            html += '<h4 style="color: #ddac0b; margin-bottom: 15px;">Informations de base</h4>';

            html += '<div style="margin-bottom: 15px;">';
            html += '<label style="display: block; color: rgba(255,255,255,0.8); margin-bottom: 8px; font-size: 0.9em;">Titre</label>';
            html += '<input type="text" id="editCardTitle" value="' + (card.title || '') + '" style="width: 100%; padding: 10px; background: rgba(0,0,0,0.3); border: 1px solid rgba(255,255,255,0.2); border-radius: 6px; color: white; font-family: \'Quicksand\', sans-serif;">';
            html += '</div>';

            html += '<div style="margin-bottom: 15px;">';
            html += '<label style="display: block; color: rgba(255,255,255,0.8); margin-bottom: 8px; font-size: 0.9em;">Description courte</label>';
            html += '<textarea id="editCardDescription" style="width: 100%; padding: 10px; background: rgba(0,0,0,0.3); border: 1px solid rgba(255,255,255,0.2); border-radius: 6px; color: white; font-family: \'Quicksand\', sans-serif; min-height: 80px; resize: vertical;">' + (card.description || '') + '</textarea>';
            html += '</div>';

            html += '<div style="margin-bottom: 15px;">';
            html += '<label style="display: block; color: rgba(255,255,255,0.8); margin-bottom: 8px; font-size: 0.9em;">Image de la carte</label>';
            html += '<div style="display: flex; gap: 10px; align-items: center;">';
            html += '<input type="file" id="editCardImageFile" accept="image/*" onchange="previewCardImage(this)" style="flex: 1; padding: 8px; background: rgba(0,0,0,0.3); border: 1px solid rgba(255,255,255,0.2); border-radius: 6px; color: white;">';
            html += '<div id="cardImagePreview" style="width: 80px; height: 80px; border-radius: 6px; overflow: hidden; background: rgba(255,255,255,0.05); flex-shrink: 0;">';
            if (card.image) {
                html += '<img src="' + card.image + '" style="width: 100%; height: 100%; object-fit: cover;">';
            }
            html += '</div>';
            html += '</div>';
            html += '<input type="text" id="editCardImage" value="' + (card.image || '') + '" placeholder="ou URL de l\'image" style="width: 100%; padding: 8px; margin-top: 8px; background: rgba(0,0,0,0.3); border: 1px solid rgba(255,255,255,0.2); border-radius: 6px; color: white; font-size: 0.85em;">';
            html += '</div>';
            html += '</div>';

            // Popup content
            html += '<div style="background: rgba(255,255,255,0.05); padding: 15px; border-radius: 8px;">';
            html += '<h4 style="color: #ddac0b; margin-bottom: 15px;">Contenu du popup</h4>';

            html += '<div style="margin-bottom: 15px;">';
            html += '<label style="display: block; color: rgba(255,255,255,0.8); margin-bottom: 8px; font-size: 0.9em;">Titre du popup</label>';
            html += '<input type="text" id="editCardPopupTitle" value="' + (cardData.title || card.title || '') + '" style="width: 100%; padding: 10px; background: rgba(0,0,0,0.3); border: 1px solid rgba(255,255,255,0.2); border-radius: 6px; color: white; font-family: \'Quicksand\', sans-serif;">';
            html += '</div>';

            html += '<div style="margin-bottom: 15px;">';
            html += '<label style="display: block; color: rgba(255,255,255,0.8); margin-bottom: 8px; font-size: 0.9em;">Contenu du popup (HTML)</label>';
            html += '<textarea id="editCardPopupText" style="width: 100%; padding: 10px; background: rgba(0,0,0,0.3); border: 1px solid rgba(255,255,255,0.2); border-radius: 6px; color: white; font-family: \'Courier New\', monospace; min-height: 120px; resize: vertical; font-size: 0.9em;">' + (cardData.text || '<p>Contenu à définir</p>') + '</textarea>';
            html += '<p style="color: rgba(255,255,255,0.5); font-size: 0.8em; margin-top: 5px;">Vous pouvez utiliser du HTML : &lt;h3&gt;, &lt;p&gt;, &lt;strong&gt;, etc.</p>';
            html += '</div>';
            html += '</div>';

            // Images section
            html += '<div style="background: rgba(255,255,255,0.05); padding: 15px; border-radius: 8px;">';
            html += '<h4 style="color: #ddac0b; margin-bottom: 15px;">Images du popup (max 4)</h4>';

            html += '<div style="margin-bottom: 15px;">';
            html += '<label style="display: block; color: rgba(255,255,255,0.8); margin-bottom: 8px; font-size: 0.9em;">Disposition des images</label>';
            html += '<select id="editCardImageLayout" style="width: 100%; padding: 10px; background: rgba(0,0,0,0.3); border: 1px solid rgba(255,255,255,0.2); border-radius: 6px; color: white; font-family: \'Quicksand\', sans-serif;">';
            html += '<option value="layout-1"' + (cardData.imageLayout === 'layout-1' ? ' selected' : '') + '>1 colonne (vertical)</option>';
            html += '<option value="layout-2"' + (cardData.imageLayout === 'layout-2' ? ' selected' : '') + '>2 colonnes (grille 2x2)</option>';
            html += '<option value="layout-3"' + (cardData.imageLayout === 'layout-3' ? ' selected' : '') + '>3 colonnes</option>';
            html += '<option value="layout-2-1"' + (cardData.imageLayout === 'layout-2-1' ? ' selected' : '') + '>2-1 (grande + petite)</option>';
            html += '</select>';
            html += '</div>';

            html += '<div id="popupImagesContainer" style="display: grid; gap: 10px; margin-bottom: 15px;"></div>';

            html += '<button type="button" onclick="addPopupImageSlot()" style="width: 100%; padding: 10px; background: rgba(221, 172, 11, 0.2); color: #ddac0b; border: 1px solid rgba(221, 172, 11, 0.3); border-radius: 6px; cursor: pointer; font-weight: 600;">';
            html += '<svg style="width: 14px; height: 14px; display: inline-block; vertical-align: middle; margin-right: 6px;" fill="currentColor" viewBox="0 0 20 20">';
            html += '<path fill-rule="evenodd" d="M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z" clip-rule="evenodd"/>';
            html += '</svg>';
            html += 'Ajouter une image';
            html += '</button>';
            html += '</div>';

            html += '</div>';

            document.getElementById('editorModalBody').innerHTML = html;
            document.getElementById('editorModal').classList.add('active');

            // Store edit context
            window.currentCardEdit = {
                section,
                index,
                cardId: card.id
            };
            window.popupImages = cardData.images || [];
            renderPopupImages();
        }

        // Preview card image
        function previewCardImage(input) {
            if (input.files && input.files[0]) {
                var reader = new FileReader();
                reader.onload = function(e) {
                    document.getElementById('cardImagePreview').innerHTML = '<img src="' + e.target.result + '" style="width: 100%; height: 100%; object-fit: cover;">';
                    document.getElementById('editCardImage').value = e.target.result;
                };
                reader.readAsDataURL(input.files[0]);
            }
        }

        // Add popup image slot
        function addPopupImageSlot() {
            if (window.popupImages.length >= 4) {
                alert('Vous pouvez ajouter un maximum de 4 images au popup.');
                return;
            }
            window.popupImages.push('');
            renderPopupImages();
        }

        // Render popup images
        function renderPopupImages() {
            var container = document.getElementById('popupImagesContainer');
            if (!container) return;

            if (window.popupImages.length === 0) {
                container.innerHTML = '<p style="color: rgba(255,255,255,0.5); text-align: center; padding: 20px; font-size: 0.9em;">Aucune image. Cliquez sur "Ajouter une image" pour commencer.</p>';
                return;
            }

            var html = '';
            for (var index = 0; index < window.popupImages.length; index++) {
                var img = window.popupImages[index];
                html += '<div style="background: rgba(0,0,0,0.3); padding: 12px; border-radius: 8px; border: 1px solid rgba(255,255,255,0.1);">';
                html += '<div style="display: flex; gap: 10px; align-items: center; margin-bottom: 10px;">';
                html += '<span style="color: #ddac0b; font-weight: 600; font-size: 0.9em;">Image ' + (index + 1) + '</span>';
                html += '<button type="button" onclick="removePopupImage(' + index + ')" style="margin-left: auto; padding: 4px 10px; background: rgba(239, 68, 68, 0.2); color: #f87171; border: 1px solid rgba(239, 68, 68, 0.3); border-radius: 4px; cursor: pointer; font-size: 0.8em;">Supprimer</button>';
                html += '</div>';

                html += '<div style="display: flex; gap: 10px; align-items: center;">';
                html += '<input type="file" accept="image/*" onchange="previewPopupImage(' + index + ', this)" style="flex: 1; padding: 6px; background: rgba(0,0,0,0.3); border: 1px solid rgba(255,255,255,0.2); border-radius: 4px; color: white; font-size: 0.85em;">';
                html += '<div id="popupImagePreview' + index + '" style="width: 60px; height: 60px; border-radius: 4px; overflow: hidden; background: rgba(255,255,255,0.05); flex-shrink: 0; display: flex; align-items: center; justify-content: center; font-size: 0.7em; color: rgba(255,255,255,0.3);">';
                if (img) {
                    html += '<img src="' + img + '" style="width: 100%; height: 100%; object-fit: cover;">';
                } else {
                    html += 'Aperçu';
                }
                html += '</div>';
                html += '</div>';

                html += '<input type="text" id="popupImageUrl' + index + '" value="' + (img || '') + '" placeholder="ou URL de l\'image" onchange="updatePopupImageUrl(' + index + ', this.value)" style="width: 100%; padding: 6px; margin-top: 8px; background: rgba(0,0,0,0.3); border: 1px solid rgba(255,255,255,0.2); border-radius: 4px; color: white; font-size: 0.8em;">';
                html += '</div>';
            }

            container.innerHTML = html;
        }

        // Preview popup image
        function previewPopupImage(index, input) {
            if (input.files && input.files[0]) {
                var reader = new FileReader();
                reader.onload = function(e) {
                    window.popupImages[index] = e.target.result;
                    document.getElementById('popupImagePreview' + index).innerHTML = '<img src="' + e.target.result + '" style="width: 100%; height: 100%; object-fit: cover;">';
                    document.getElementById('popupImageUrl' + index).value = e.target.result;
                };
                reader.readAsDataURL(input.files[0]);
            }
        }

        // Update popup image URL
        function updatePopupImageUrl(index, value) {
            window.popupImages[index] = value;
            if (value) {
                document.getElementById('popupImagePreview' + index).innerHTML = '<img src="' + value + '" style="width: 100%; height: 100%; object-fit: cover;">';
            } else {
                document.getElementById('popupImagePreview' + index).innerHTML = 'Aperçu';
            }
        }

        // Remove popup image
        function removePopupImage(index) {
            window.popupImages.splice(index, 1);
            renderPopupImages();
        }

        // Delete card
        function deleteCard(section, index) {
            if (confirm('Êtes-vous sûr de vouloir supprimer cette carte ?')) {
                var config = JSON.parse(localStorage.getItem('alphamouv_config')) || {};
                if (!config.cards) config.cards = getDefaultCards();

                config.cards[section].splice(index, 1);

                localStorage.setItem('alphamouv_config', JSON.stringify(config));
                loadCardsSection();
            }
        }

        // Load Instagram Section
        function loadInstagramSection() {
            var container = document.getElementById('instagramContent');
            var config = JSON.parse(localStorage.getItem('alphamouv_config')) || {};
            const posts = config.instagramPosts || [];

            var html = `
                <button onclick="openAddInstagramPost()" style="padding: 12px 24px; background: linear-gradient(135deg, #ddac0b, #b8900a); color: #000; border: none; border-radius: 8px; cursor: pointer; font-weight: 600; margin-bottom: 20px;">
                    <svg style="width: 16px; height: 16px; display: inline-block; vertical-align: middle; margin-right: 8px;" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z" clip-rule="evenodd"/>
                    </svg>
                    Ajouter un post
                </button>

                <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); gap: 20px;">
            `;

            posts.forEach(post => {
                const isReel = post.instagramUrl.includes('/reel/');
                html += `
                    <div style="background: rgba(255,255,255,0.05); border-radius: 12px; overflow: hidden; border: 1px solid rgba(255,255,255,0.1);">
                        <div style="position: relative;">
                            <img src="${post.image}" style="width: 100%; height: 250px; object-fit: cover;">
                            ${isReel ? '<div style="position: absolute; top: 10px; right: 10px; background: rgba(0,0,0,0.8); padding: 6px 12px; border-radius: 6px; color: #ddac0b; font-size: 0.8em; font-weight: 600;">REEL</div>' : ''}
                        </div>
                        <div style="padding: 15px;">
                            <p style="color: rgba(255,255,255,0.8); font-size: 0.9em; margin-bottom: 10px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;">${post.instagramUrl}</p>
                            <div style="display: flex; gap: 10px;">
                                <button onclick="editInstagramPost('${post.id}')" style="flex: 1; padding: 8px; background: rgba(59, 130, 246, 0.2); color: #60a5fa; border: 1px solid rgba(59, 130, 246, 0.3); border-radius: 6px; cursor: pointer; font-size: 0.85em;">
                                    Modifier
                                </button>
                                <button onclick="deleteInstagramPost('${post.id}')" style="flex: 1; padding: 8px; background: rgba(239, 68, 68, 0.2); color: #f87171; border: 1px solid rgba(239, 68, 68, 0.3); border-radius: 6px; cursor: pointer; font-size: 0.85em;">
                                    Supprimer
                                </button>
                            </div>
                        </div>
                    </div>
                `;
            });

            html += '</div>';
            container.innerHTML = html;
        }

        // Load Events Section
        function loadEventsSection() {
            var container = document.getElementById('eventsContent');
            var config = JSON.parse(localStorage.getItem('alphamouv_config')) || {};
            const events = config.events || [];

            var html = `
                <button onclick="openAddEvent()" style="padding: 12px 24px; background: linear-gradient(135deg, #ddac0b, #b8900a); color: #000; border: none; border-radius: 8px; cursor: pointer; font-weight: 600; margin-bottom: 20px;">
                    <svg style="width: 16px; height: 16px; display: inline-block; vertical-align: middle; margin-right: 8px;" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z" clip-rule="evenodd"/>
                    </svg>
                    Ajouter un événement
                </button>

                <div style="display: grid; gap: 15px;">
            `;

            events.forEach(event => {
                html += `
                    <div style="background: rgba(255,255,255,0.05); border-radius: 12px; padding: 20px; border: 1px solid rgba(255,255,255,0.1);">
                        <h4 style="color: #ddac0b; margin-bottom: 10px;">${event.title}</h4>
                        <p style="color: rgba(255,255,255,0.6); font-size: 0.9em; margin-bottom: 8px;">${event.date}</p>
                        <p style="color: rgba(255,255,255,0.6); font-size: 0.9em; margin-bottom: 8px;">${event.location}</p>
                        <p style="color: rgba(255,255,255,0.8); margin-bottom: 12px;">${event.description}</p>
                        <div style="display: flex; gap: 10px;">
                            <button onclick="editEventAdmin('${event.id}')" style="padding: 8px 16px; background: rgba(59, 130, 246, 0.2); color: #60a5fa; border: 1px solid rgba(59, 130, 246, 0.3); border-radius: 6px; cursor: pointer; font-size: 0.85em;">
                                Modifier
                            </button>
                            <button onclick="deleteEventAdmin('${event.id}')" style="padding: 8px 16px; background: rgba(239, 68, 68, 0.2); color: #f87171; border: 1px solid rgba(239, 68, 68, 0.3); border-radius: 6px; cursor: pointer; font-size: 0.85em;">
                                Supprimer
                            </button>
                        </div>
                    </div>
                `;
            });

            html += '</div>';
            container.innerHTML = html;
        }

        // Generate avatar color based on name
        function getAvatarColor(name) {
            const colors = [
                '#ef4444', '#f97316', '#f59e0b', '#eab308', '#84cc16',
                '#22c55e', '#10b981', '#14b8a6', '#06b6d4', '#0ea5e9',
                '#3b82f6', '#6366f1', '#8b5cf6', '#a855f7', '#d946ef',
                '#ec4899', '#f43f5e'
            ];

            let hash = 0;
            for (let i = 0; i < name.length; i++) {
                hash = name.charCodeAt(i) + ((hash << 5) - hash);
            }

            return colors[Math.abs(hash) % colors.length];
        }

        // Generate user avatar HTML
        function generateUserAvatar(user) {
            const initial = user.name.charAt(0).toUpperCase();
            const color = getAvatarColor(user.name);

            return `
                <div style="
                    width: 60px;
                    height: 60px;
                    border-radius: 50%;
                    background: ${color};
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    font-size: 24px;
                    font-weight: 700;
                    color: white;
                    border: 2px solid rgba(221, 172, 11, 0.3);
                    flex-shrink: 0;
                ">
                    ${initial}
                </div>
            `;
        }

        // Load Users Section
        async function loadUsersSection() {
            var container = document.getElementById('usersContent');
            const currentUserData = JSON.parse(localStorage.getItem('alphamouv_user'));

            try {
                // Charger les utilisateurs depuis l'API
                const users = await AlphaMovAPI.Users.getAll();

                var html = `<div style="display: grid; gap: 15px;">`;

                users.forEach(user => {
                    const isAdmin = user.role === 'admin';
                    const isCurrentUser = currentUserData && currentUserData.email === user.email;
                    const avatarHtml = generateUserAvatar({ name: user.prenom || user.nom || user.email, email: user.email });

                    html += `
                        <div style="background: rgba(255,255,255,0.05); border-radius: 12px; padding: 20px; border: 1px solid rgba(255,255,255,0.1);">
                            <div style="display: flex; align-items: center; gap: 15px; margin-bottom: 15px;">
                                ${avatarHtml}
                                <div style="flex: 1;">
                                    <h4 style="color: #ddac0b; margin-bottom: 5px; font-size: 1.1em;">${user.prenom || ''} ${user.nom || user.email} ${isCurrentUser ? '(Vous)' : ''}</h4>
                                    <p style="color: rgba(255,255,255,0.6); font-size: 0.9em; margin-bottom: 8px;">${user.email}</p>
                                    ${isAdmin ? '<span style="display: inline-block; padding: 4px 12px; background: rgba(221, 172, 11, 0.2); color: #ddac0b; border-radius: 12px; font-size: 0.8em; font-weight: 600;">Admin</span>' : '<span style="display: inline-block; padding: 4px 12px; background: rgba(255, 255, 255, 0.1); color: rgba(255,255,255,0.6); border-radius: 12px; font-size: 0.8em;">Utilisateur</span>'}
                                </div>
                            </div>
                            ${!isCurrentUser ? `
                                <div style="display: flex; gap: 10px; flex-wrap: wrap;">
                                    ${!isAdmin ? `
                                        <button onclick="promoteToAdmin(${user.id})" style="padding: 8px 16px; background: rgba(34, 197, 94, 0.2); color: #4ade80; border: 1px solid rgba(34, 197, 94, 0.3); border-radius: 6px; cursor: pointer; font-size: 0.85em;">
                                            Promouvoir Admin
                                        </button>
                                    ` : `
                                        <button onclick="demoteFromAdmin(${user.id})" style="padding: 8px 16px; background: rgba(234, 179, 8, 0.2); color: #fbbf24; border: 1px solid rgba(234, 179, 8, 0.3); border-radius: 6px; cursor: pointer; font-size: 0.85em;">
                                            Rétrograder
                                        </button>
                                    `}
                                    <button onclick="deleteUser(${user.id})" style="padding: 8px 16px; background: rgba(239, 68, 68, 0.2); color: #f87171; border: 1px solid rgba(239, 68, 68, 0.3); border-radius: 6px; cursor: pointer; font-size: 0.85em;">
                                        Supprimer l'utilisateur
                                    </button>
                                </div>
                            ` : ''}
                        </div>
                    `;
                });

                html += '</div>';
                container.innerHTML = html;
            } catch (error) {
                console.error('Erreur chargement utilisateurs:', error);
                container.innerHTML = '<p style="color: #f87171;">Erreur lors du chargement des utilisateurs</p>';
            }
        }

        // Promote user to admin
        async function promoteToAdmin(userId) {
            if (confirm('Êtes-vous sûr de vouloir promouvoir cet utilisateur en admin ?')) {
                try {
                    await AlphaMovAPI.Users.updateRole(userId, 'admin');
                    loadUsersSection();
                    addLog('success', `Utilisateur promu admin`);
                } catch (error) {
                    console.error('Erreur promotion admin:', error);
                    alert('Erreur lors de la promotion: ' + (error.message || 'Erreur serveur'));
                }
            }
        }

        // Demote user from admin
        async function demoteFromAdmin(userId) {
            if (confirm('Êtes-vous sûr de vouloir rétrograder cet admin ?')) {
                try {
                    await AlphaMovAPI.Users.updateRole(userId, 'user');
                    loadUsersSection();
                    addLog('warning', `Admin rétrogradé`);
                } catch (error) {
                    console.error('Erreur rétrogradation:', error);
                    alert('Erreur lors de la rétrogradation: ' + (error.message || 'Erreur serveur'));
                }
            }
        }

        // Delete user
        async function deleteUser(userId) {
            if (confirm('Êtes-vous sûr de vouloir supprimer cet utilisateur ? Cette action est irréversible.')) {
                try {
                    await AlphaMovAPI.Users.delete(userId);
                    loadUsersSection();
                    addLog('error', `Utilisateur supprimé`);
                } catch (error) {
                    console.error('Erreur suppression:', error);
                    alert('Erreur lors de la suppression: ' + (error.message || 'Erreur serveur'));
                }
            }
        }

        // Load Logs Section
        function loadLogsSection() {
            var container = document.getElementById('logsContent');
            var logs = JSON.parse(localStorage.getItem('alphamouv_logs')) || [];
            var recentLogs = logs.slice(-50).reverse();

            var html = '<h4 style="color: var(--primary-color); margin-bottom: 15px;">Backups automatiques</h4>';
            html += '<div style="background: rgba(255,255,255,0.05); border-radius: 12px; padding: 20px; margin-bottom: 30px;">';
            html += '<p style="color: rgba(255,255,255,0.7); margin-bottom: 15px;">Le système crée automatiquement une backup toutes les 24h. Les 7 dernières backups sont conservées.</p>';

            // Show available backups
            var lastBackup = localStorage.getItem('alphamouv_last_backup');
            if (lastBackup) {
                html += '<p style="color: rgba(255,255,255,0.6); font-size: 0.9em; margin-bottom: 20px;">Dernière backup: ' + new Date(parseInt(lastBackup)).toLocaleString('fr-FR') + '</p>';
            }

            html += '<div style="display: grid; gap: 10px;">';

            // Check for available backups
            for (var i = 1; i <= 7; i++) {
                var backupData = localStorage.getItem('alphamouv_backup_day' + i);
                if (backupData) {
                    var backup = JSON.parse(backupData);
                    html += '<div style="display: flex; justify-content: space-between; align-items: center; background: rgba(0,0,0,0.3); padding: 12px; border-radius: 8px;">';
                    html += '<span style="color: rgba(255,255,255,0.8);">Backup J-' + i + ' : ' + new Date(backup.timestamp).toLocaleString('fr-FR') + '</span>';
                    html += '<button onclick="restoreBackup(' + i + ')" style="padding: 6px 16px; background: rgba(59, 130, 246, 0.2); color: #60a5fa; border: 1px solid rgba(59, 130, 246, 0.3); border-radius: 6px; cursor: pointer; font-size: 0.85em;">Restaurer</button>';
                    html += '</div>';
                }
            }

            html += '</div>';
            html += '</div>';

            html += '<h4 style="color: var(--primary-color); margin-bottom: 15px;">Logs système</h4>';
            html += '<div style="display: grid; gap: 10px;">';

            for (var j = 0; j < recentLogs.length; j++) {
                var log = recentLogs[j];
                var typeColors = {
                    'success': '#22c55e',
                    'info': '#60a5fa',
                    'warning': '#eab308',
                    'error': '#ef4444'
                };
                var color = typeColors[log.type] || '#ddac0b';

                html += '<div style="background: rgba(255,255,255,0.05); border-radius: 8px; padding: 15px; border-left: 3px solid ' + color + ';">';
                html += '<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 5px;">';
                html += '<span style="color: ' + color + '; font-weight: 600; font-size: 0.85em; text-transform: uppercase;">' + log.type + '</span>';
                html += '<span style="color: rgba(255,255,255,0.5); font-size: 0.8em;">' + formatLogTime(log.timestamp) + '</span>';
                html += '</div>';
                html += '<p style="color: rgba(255,255,255,0.8); font-size: 0.9em;">' + log.message + '</p>';
                html += '</div>';
            }

            html += '</div>';
            container.innerHTML = html || '<p style="color: rgba(255,255,255,0.5); text-align: center;">Aucun log disponible</p>';
        }

        // Open Add Event Modal
        function openAddEvent() {
            const modal = document.createElement('div');
            modal.style.cssText = 'position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); z-index: 20000; display: flex; align-items: center; justify-content: center;';

            modal.innerHTML = `
                <div style="background: #1a1a1a; border-radius: 16px; padding: 30px; max-width: 500px; width: 90%; border: 1px solid rgba(221, 172, 11, 0.3);">
                    <h3 style="color: #ddac0b; margin-bottom: 20px;">Ajouter un événement</h3>
                    <div style="display: grid; gap: 15px;">
                        <div>
                            <label style="color: rgba(255,255,255,0.8); font-size: 0.9em; display: block; margin-bottom: 5px;">Titre</label>
                            <input type="text" id="newEventTitle" style="width: 100%; padding: 12px; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.2); border-radius: 8px; color: white;">
                        </div>
                        <div>
                            <label style="color: rgba(255,255,255,0.8); font-size: 0.9em; display: block; margin-bottom: 5px;">Date</label>
                            <input type="text" id="newEventDate" style="width: 100%; padding: 12px; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.2); border-radius: 8px; color: white;">
                        </div>
                        <div>
                            <label style="color: rgba(255,255,255,0.8); font-size: 0.9em; display: block; margin-bottom: 5px;">Lieu</label>
                            <input type="text" id="newEventLocation" style="width: 100%; padding: 12px; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.2); border-radius: 8px; color: white;">
                        </div>
                        <div>
                            <label style="color: rgba(255,255,255,0.8); font-size: 0.9em; display: block; margin-bottom: 5px;">Description</label>
                            <textarea id="newEventDescription" style="width: 100%; padding: 12px; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.2); border-radius: 8px; color: white; min-height: 80px; font-family: inherit;"></textarea>
                        </div>
                        <div>
                            <label style="color: rgba(255,255,255,0.8); font-size: 0.9em; display: block; margin-bottom: 5px;">Statut</label>
                            <input type="text" id="newEventStatus" value="À venir" style="width: 100%; padding: 12px; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.2); border-radius: 8px; color: white;">
                        </div>
                        <div style="display: flex; gap: 10px; margin-top: 10px;">
                            <button onclick="saveNewEvent()" style="flex: 1; padding: 12px; background: linear-gradient(135deg, #ddac0b, #b8900a); color: #000; border: none; border-radius: 8px; cursor: pointer; font-weight: 600;">
                                Ajouter
                            </button>
                            <button onclick="this.closest('div[style*=\"position: fixed\"]').remove()" style="flex: 1; padding: 12px; background: rgba(255,255,255,0.1); color: white; border: none; border-radius: 8px; cursor: pointer;">
                                Annuler
                            </button>
                        </div>
                    </div>
                </div>
            `;

            document.body.appendChild(modal);
        }

        // Save New Event
        function saveNewEvent() {
            var config = JSON.parse(localStorage.getItem('alphamouv_config')) || {};
            if (!config.events) config.events = [];

            const newEvent = {
                id: Date.now().toString(),
                title: document.getElementById('newEventTitle').value,
                date: document.getElementById('newEventDate').value,
                location: document.getElementById('newEventLocation').value,
                description: document.getElementById('newEventDescription').value,
                status: document.getElementById('newEventStatus').value
            };

            config.events.push(newEvent);
            localStorage.setItem('alphamouv_config', JSON.stringify(config));

            // Reload events section and main page
            loadEventsSection();
            loadEvents();

            // Close modal
            document.querySelector('[style*="position: fixed"]').remove();
        }

        // Edit Event Admin
        function editEventAdmin(eventId) {
            var config = JSON.parse(localStorage.getItem('alphamouv_config')) || {};
            const event = config.events.find(e => e.id === eventId);
            if (!event) return;

            const modal = document.createElement('div');
            modal.style.cssText = 'position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); z-index: 20000; display: flex; align-items: center; justify-content: center;';

            modal.innerHTML = `
                <div style="background: #1a1a1a; border-radius: 16px; padding: 30px; max-width: 500px; width: 90%; border: 1px solid rgba(221, 172, 11, 0.3);">
                    <h3 style="color: #ddac0b; margin-bottom: 20px;">Modifier l'événement</h3>
                    <div style="display: grid; gap: 15px;">
                        <div>
                            <label style="color: rgba(255,255,255,0.8); font-size: 0.9em; display: block; margin-bottom: 5px;">Titre</label>
                            <input type="text" id="editEventTitle" value="${event.title}" style="width: 100%; padding: 12px; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.2); border-radius: 8px; color: white;">
                        </div>
                        <div>
                            <label style="color: rgba(255,255,255,0.8); font-size: 0.9em; display: block; margin-bottom: 5px;">Date</label>
                            <input type="text" id="editEventDate" value="${event.date}" style="width: 100%; padding: 12px; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.2); border-radius: 8px; color: white;">
                        </div>
                        <div>
                            <label style="color: rgba(255,255,255,0.8); font-size: 0.9em; display: block; margin-bottom: 5px;">Lieu</label>
                            <input type="text" id="editEventLocation" value="${event.location}" style="width: 100%; padding: 12px; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.2); border-radius: 8px; color: white;">
                        </div>
                        <div>
                            <label style="color: rgba(255,255,255,0.8); font-size: 0.9em; display: block; margin-bottom: 5px;">Description</label>
                            <textarea id="editEventDescription" style="width: 100%; padding: 12px; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.2); border-radius: 8px; color: white; min-height: 80px; font-family: inherit;">${event.description}</textarea>
                        </div>
                        <div>
                            <label style="color: rgba(255,255,255,0.8); font-size: 0.9em; display: block; margin-bottom: 5px;">Statut</label>
                            <input type="text" id="editEventStatus" value="${event.status}" style="width: 100%; padding: 12px; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.2); border-radius: 8px; color: white;">
                        </div>
                        <div style="display: flex; gap: 10px; margin-top: 10px;">
                            <button onclick="updateEvent('${eventId}')" style="flex: 1; padding: 12px; background: linear-gradient(135deg, #ddac0b, #b8900a); color: #000; border: none; border-radius: 8px; cursor: pointer; font-weight: 600;">
                                Mettre à jour
                            </button>
                            <button onclick="this.closest('div[style*=\"position: fixed\"]').remove()" style="flex: 1; padding: 12px; background: rgba(255,255,255,0.1); color: white; border: none; border-radius: 8px; cursor: pointer;">
                                Annuler
                            </button>
                        </div>
                    </div>
                </div>
            `;

            document.body.appendChild(modal);
        }

        // Update Event
        function updateEvent(eventId) {
            var config = JSON.parse(localStorage.getItem('alphamouv_config')) || {};
            const eventIndex = config.events.findIndex(e => e.id === eventId);

            if (eventIndex !== -1) {
                config.events[eventIndex] = {
                    id: eventId,
                    title: document.getElementById('editEventTitle').value,
                    date: document.getElementById('editEventDate').value,
                    location: document.getElementById('editEventLocation').value,
                    description: document.getElementById('editEventDescription').value,
                    status: document.getElementById('editEventStatus').value
                };

                localStorage.setItem('alphamouv_config', JSON.stringify(config));

                // Reload events section and main page
                loadEventsSection();
                loadEvents();

                // Close modal
                document.querySelector('[style*="position: fixed"]').remove();
            }
        }

        // Delete Event Admin
        function deleteEventAdmin(eventId) {
            if (confirm('Êtes-vous sûr de vouloir supprimer cet événement ?')) {
                var config = JSON.parse(localStorage.getItem('alphamouv_config')) || {};
                config.events = config.events.filter(e => e.id !== eventId);
                localStorage.setItem('alphamouv_config', JSON.stringify(config));

                // Reload events section and main page
                loadEventsSection();
                loadEvents();
            }
        }

        // Calculer l'utilisation du stockage (IndexedDB)
        async function calculateStorageUsage() {
            try {
                return await ImageDB.getStorageUsage();
            } catch (error) {
                console.error('Erreur calcul stockage:', error);
                // Fallback sur localStorage
                let total = 0;
                for (let key in localStorage) {
                    if (localStorage.hasOwnProperty(key)) {
                        total += localStorage[key].length + key.length;
                    }
                }
                const estimatedLimit = 5 * 1024 * 1024;
                const usedKB = (total / 1024).toFixed(2);
                const totalKB = (estimatedLimit / 1024).toFixed(0);
                const percentage = Math.min(100, Math.round((total / estimatedLimit) * 100));

                return { used: usedKB, total: totalKB, percentage: percentage };
            }
        }

        // Charger le gestionnaire d'images
        async function loadImagesManager() {
            const grid = document.getElementById('imagesManagerContent') || document.getElementById('imagesGrid');

            // Charger les images du carrousel depuis IndexedDB
            let carouselImages = [null, null, null, null];
            try {
                carouselImages = await ImageDB.getAllCarouselImages();
            } catch (error) {
                console.error('Erreur chargement carrousel:', error);
            }


            var html = '';

            // Images du carrousel (depuis IndexedDB)
            html += '<h4 style="color: white; grid-column: 1/-1; margin-bottom: 10px;">Images du Carrousel (IndexedDB)</h4>';
            for (let i = 0; i < 4; i++) {
                var img = carouselImages[i];
                html += '<div class="image-card" data-card-id="carousel-' + i + '">' +
                    '<div class="image-preview">' +
                        (img ? '<img src="' + img + '" alt="Slide ' + (i+1) + '" onload="detectImageOrientation(this)">' : '<span class="placeholder-icon"><svg style="width: 48px; height: 48px;" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z" clip-rule="evenodd"/></svg></span>') +
                    '</div>' +
                    '<div class="image-info">' +
                        '<h4>Slide ' + (i+1) + '</h4>' +
                        '<p>' + (img ? 'Image personnalisée' : 'Aucune image définie') + '</p>' +
                        '<div class="image-actions">' +
                            '<button class="btn-change-image" onclick="selectImage(\'carousel\', ' + i + ')">Changer</button>' +
                            (img ? '<button class="btn-remove-image" onclick="removeImage(\'carousel\', ' + i + ')"><svg style="width: 14px; height: 14px;" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z" clip-rule="evenodd"/></svg></button>' : '') +
                        '</div>' +
                    '</div>' +
                '</div>';
            }

            // Logo (depuis localStorage)
            const localImages = JSON.parse(localStorage.getItem('alphamouv_images')) || {};
            html += '<h4 style="color: white; grid-column: 1/-1; margin-top: 20px; margin-bottom: 10px;">Logo et Bannières</h4>';

            const logoImg = localImages.logo || null;
            html += '<div class="image-card" data-card-id="logo-0">' +
                '<div class="image-preview">' +
                    (logoImg ? '<img src="' + logoImg + '" alt="Logo" onload="detectImageOrientation(this)">' : '<span class="placeholder-icon"><svg style="width: 48px; height: 48px;" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z" clip-rule="evenodd"/></svg></span>') +
                '</div>' +
                '<div class="image-info">' +
                    '<h4>Logo du site</h4>' +
                    '<p>' + (logoImg ? 'Logo personnalisé' : 'Logo par défaut (texte)') + '</p>' +
                    '<div class="image-actions">' +
                        '<button class="btn-change-image" onclick="selectImage(\'logo\', 0)">Changer</button>' +
                        (logoImg ? '<button class="btn-remove-image" onclick="removeImage(\'logo\', 0)"><svg style="width: 14px; height: 14px;" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z" clip-rule="evenodd"/></svg></button>' : '') +
                    '</div>' +
                '</div>' +
            '</div>';
            
            grid.innerHTML = html;
        }

        // Détecter l'orientation de l'image et adapter la carte
        function detectImageOrientation(img) {
            var card = img.closest('.image-card');
            if (!card) return;

            // Retirer les classes d'orientation existantes
            card.classList.remove('portrait', 'landscape', 'square');

            // Calculer le ratio de l'image
            const ratio = img.naturalWidth / img.naturalHeight;

            let orientationClass = '';
            let orientationText = '';

            // Définir l'orientation selon le ratio
            if (ratio > 1.2) {
                // Image en paysage (horizontale)
                orientationClass = 'landscape';
                orientationText = 'Paysage';
            } else if (ratio < 0.8) {
                // Image en portrait (verticale)
                orientationClass = 'portrait';
                orientationText = 'Portrait';
            } else {
                // Image carrée ou presque carrée
                orientationClass = 'square';
                orientationText = 'Carré';
            }

            card.classList.add(orientationClass);

            // Ajouter ou mettre à jour le badge des dimensions
            const imageInfo = card.querySelector('.image-info');
            if (imageInfo) {
                let dimensionsBadge = card.querySelector('.image-dimensions');

                if (!dimensionsBadge) {
                    dimensionsBadge = document.createElement('div');
                    dimensionsBadge.className = 'image-dimensions';
                    imageInfo.insertBefore(dimensionsBadge, imageInfo.firstChild);
                }

                dimensionsBadge.textContent = orientationText + ' • ' + img.naturalWidth + 'x' + img.naturalHeight + 'px';
            }
        }

        // Sélectionner une image à changer
        function selectImage(type, index) {
            currentImageTarget = { type: type, index: index };
            document.getElementById('imageUploadInput').click();
        }

        // Gérer l'upload d'image
        function handleImageUpload(event) {
            const file = event.target.files[0];
            if (!file) {
                console.log('Aucun fichier sélectionné');
                return;
            }

            // Vérifier que c'est bien une image
            if (!file.type.startsWith('image/')) {
                alert(' Erreur: Veuillez sélectionner un fichier image valide (JPG, PNG, GIF, WebP, etc.)');
                event.target.value = '';
                return;
            }

            // Vérifier la taille (max 5MB)
            const maxSize = 5 * 1024 * 1024; // 5MB
            if (file.size > maxSize) {
                alert(' Erreur: L\'image est trop volumineuse.\n\nTaille maximale: 5MB\nTaille actuelle: ' + (file.size / 1024 / 1024).toFixed(2) + 'MB\n\nVeuillez compresser ou réduire l\'image avant de l\'uploader.');
                event.target.value = '';
                return;
            }

            console.log('📤 Upload en cours...', {
                nom: file.name,
                type: file.type,
                taille: (file.size / 1024).toFixed(2) + ' KB'
            });

            var reader = new FileReader();

            reader.onerror = function(error) {
                console.error('❌ Erreur lors de la lecture du fichier:', error);
                alert(' Erreur lors de la lecture du fichier. Veuillez réessayer avec une autre image.');
                event.target.value = '';
            };

            reader.onload = function(e) {
                try {
                    const imageData = e.target.result;
                    console.log('✓ Image chargée, taille des données:', (imageData.length / 1024).toFixed(2) + ' KB');

                    // Créer une image pour vérifier qu'elle est valide avant de sauvegarder
                    var img = new Image();
                    img.onload = function() {
                        console.log('✓ Image valide:', img.width + 'x' + img.height + ' pixels');
                        saveImage(currentImageTarget.type, currentImageTarget.index, imageData);
                    };
                    img.onerror = function() {
                        console.error('❌ Image corrompue');
                        alert(' Erreur: L\'image est corrompue ou dans un format non supporté.\n\nFormats acceptés: JPG, PNG, GIF, WebP, BMP');
                        event.target.value = '';
                    };
                    img.src = imageData;

                } catch (error) {
                    console.error('❌ Erreur lors du traitement:', error);
                    alert(' Erreur lors du traitement de l\'image: ' + error.message);
                    event.target.value = '';
                }
            };

            reader.readAsDataURL(file);
            event.target.value = '';
        }

        // Sauvegarder une image
        async function saveImage(type, index, imageData) {
            try {
                if (type === 'carousel') {
                    await ImageDB.saveCarouselImage(index, imageData);
                    console.log('✅ Image carrousel #' + (index + 1) + ' sauvegardée dans IndexedDB');
                } else if (type === 'logo') {
                    // Pour le logo, on utilise encore localStorage (petit fichier)
                    const images = JSON.parse(localStorage.getItem('alphamouv_images')) || {};
                    images.logo = imageData;
                    localStorage.setItem('alphamouv_images', JSON.stringify(images));
                    console.log('📸 Logo sauvegardé');
                } else if (type === 'product') {
                    // Pour les produits, localStorage pour l'instant
                    const images = JSON.parse(localStorage.getItem('alphamouv_images')) || { products: {} };
                    images.products = images.products || {};
                    images.products[index] = imageData;
                    localStorage.setItem('alphamouv_images', JSON.stringify(images));
                    console.log('📸 Produit sauvegardé');
                }

                loadImagesManager();
                applyImageToPage(type, index, imageData);

                const imageName = type === 'carousel' ? ('Carrousel #' + (index + 1)) :
                                 type === 'product' ? ('Produit #' + index) : type;

                addLog('success', 'Image modifiée: ' + imageName);

                // Afficher les stats de stockage
                const storage = await ImageDB.getStorageUsage();
                alert(' Image mise à jour avec succès!\n\n' +
                      imageName + '\n\n' +
                      '💾 Stockage IndexedDB: ' + storage.used + ' MB / ' + storage.total + ' MB (' + storage.percentage + '%)');

            } catch (error) {
                console.error('❌ Erreur lors de la sauvegarde:', error);
                alert(' Erreur lors de la sauvegarde:\n' + error.message);
                addLog('error', 'Erreur sauvegarde image: ' + error.message);
            }
        }

        // Appliquer une image sur la page en temps réel
        function applyImageToPage(type, index, imageData) {
            if (type === 'carousel') {
                // Mettre à jour le slide du carrousel
                const slides = document.querySelectorAll('.carousel-slide');
                if (slides[index]) {
                    if (imageData) {
                        slides[index].innerHTML = '<img src="' + imageData + '" alt="Slide ' + (index + 1) + '" style="width: 100%; height: 100%; object-fit: cover; border-radius: 15px;">';
                    } else {
                        slides[index].innerHTML = '<div class="carousel-placeholder"><div class="carousel-placeholder-text">IMAGE ' + (index + 1) + '</div></div>';
                    }
                }
            } else if (type === 'logo') {
                // Mettre à jour le logo (si on ajoute un logo image plus tard)
                const logos = document.querySelectorAll('.logo');
                logos.forEach(function(logo) {
                    // Pour l'instant on garde le texte, mais on pourrait ajouter une image
                });
            }
        }

        // Supprimer une image
        async function removeImage(type, index) {
            if (!confirm('Êtes-vous sûr de vouloir supprimer cette image ?')) return;

            try {
                if (type === 'carousel') {
                    await ImageDB.deleteCarouselImage(index);
                    console.log('✓ Image carrousel supprimée');
                } else if (type === 'logo') {
                    const images = JSON.parse(localStorage.getItem('alphamouv_images')) || {};
                    images.logo = null;
                    localStorage.setItem('alphamouv_images', JSON.stringify(images));
                } else if (type === 'product') {
                    const images = JSON.parse(localStorage.getItem('alphamouv_images')) || { products: {} };
                    delete images.products[index];
                    localStorage.setItem('alphamouv_images', JSON.stringify(images));
                }

                loadImagesManager();
                applyImageToPage(type, index, null);
                addLog('info', 'Image supprimée: ' + type + ' #' + (index + 1));

            } catch (error) {
                console.error('Erreur suppression:', error);
                alert(' Erreur: ' + error.message);
            }
        }

        // Ajouter un log
        function addLog(type, message) {
            const logs = JSON.parse(localStorage.getItem('alphamouv_logs')) || [];
            logs.push({
                type: type,
                message: message,
                timestamp: new Date().toISOString()
            });
            
            // Garder seulement les 500 derniers logs
            if (logs.length > 500) {
                logs.splice(0, logs.length - 500);
            }
            
            localStorage.setItem('alphamouv_logs', JSON.stringify(logs));
        }

        // Charger les logs
        function loadLogs() {
            const logs = JSON.parse(localStorage.getItem('alphamouv_logs')) || [];
            var container = document.getElementById('logsContainer');
            
            const reversedLogs = logs.slice().reverse();
            
            container.innerHTML = reversedLogs.map(function(log) {
                return '<div class="log-entry ' + log.type + '">' +
                    '<span class="log-time">' + formatLogTime(log.timestamp) + '</span>' +
                    '<span class="log-type">' + log.type + '</span>' +
                    '<span class="log-message">' + log.message + '</span>' +
                '</div>';
            }).join('') || '<p style="color: rgba(255,255,255,0.5); text-align: center; padding: 40px;">Aucun log disponible</p>';
        }

        // Formater l'heure du log
        function formatLogTime(timestamp) {
            const date = new Date(timestamp);
            return date.toLocaleDateString('fr-FR') + ' ' + date.toLocaleTimeString('fr-FR');
        }

        // Actualiser les logs
        function refreshLogs() {
            loadLogs();
            addLog('info', 'Logs actualisés');
        }

        // Exporter les logs
        function exportLogs() {
            const logs = JSON.parse(localStorage.getItem('alphamouv_logs')) || [];
            const text = logs.map(function(log) {
                return '[' + formatLogTime(log.timestamp) + '] [' + log.type.toUpperCase() + '] ' + log.message;
            }).join('\n');
            
            const blob = new Blob([text], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'alphamouv_logs_' + new Date().toISOString().slice(0, 10) + '.txt';
            a.click();
            URL.revokeObjectURL(url);
            
            addLog('info', 'Logs exportés');
        }

        // Vider les logs
        function clearLogs() {
            if (!confirm('Êtes-vous sûr de vouloir supprimer tous les logs ?')) return;
            
            localStorage.setItem('alphamouv_logs', JSON.stringify([]));
            loadLogs();
            addLog('warning', 'Logs vidés par l\'administrateur');
            loadLogs();
        }

        // ============ PERSONNALISATION DE L'APPARENCE ============
        
        // Charger les paramètres d'apparence
        function loadAppearanceSettings() {
            var config = JSON.parse(localStorage.getItem('alphamouv_config')) || {};
            
            // Nom du site
            if (config.siteName) {
                document.getElementById('siteNameInput').value = config.siteName;
            }
            
            // Couleurs du dégradé
            if (config.gradientColor1) {
                document.getElementById('gradientColor1').value = config.gradientColor1;
                document.getElementById('gradientColor1Text').value = config.gradientColor1;
            }
            if (config.gradientColor2) {
                document.getElementById('gradientColor2').value = config.gradientColor2;
                document.getElementById('gradientColor2Text').value = config.gradientColor2;
            }
            
            // Couleurs d'accent
            if (config.accentColor1) {
                document.getElementById('accentColor1').value = config.accentColor1;
                document.getElementById('accentColor1Text').value = config.accentColor1;
            }
            if (config.accentColor2) {
                document.getElementById('accentColor2').value = config.accentColor2;
                document.getElementById('accentColor2Text').value = config.accentColor2;
            }
            
            updateGradientPreview();
            updateAccentPreview();
        }

        // Synchroniser couleur depuis le texte
        function syncColorFromText(inputId) {
            const textInput = document.getElementById(inputId + 'Text');
            const colorInput = document.getElementById(inputId);
            colorInput.value = textInput.value;
            
            if (inputId.includes('gradient')) {
                updateGradientPreview();
            } else {
                updateAccentPreview();
            }
        }

        // Mettre à jour l'aperçu du dégradé
        function updateGradientPreview() {
            const color1 = document.getElementById('gradientColor1').value;
            const color2 = document.getElementById('gradientColor2').value;
            document.getElementById('gradientColor1Text').value = color1;
            document.getElementById('gradientColor2Text').value = color2;
            document.getElementById('gradientPreview').style.background = 
                'linear-gradient(135deg, ' + color1 + ', ' + color2 + ')';
        }

        // Mettre à jour l'aperçu des accents
        function updateAccentPreview() {
            const color1 = document.getElementById('accentColor1').value;
            const color2 = document.getElementById('accentColor2').value;
            document.getElementById('accentColor1Text').value = color1;
            document.getElementById('accentColor2Text').value = color2;
            document.getElementById('accentPreview').style.background = 
                'linear-gradient(135deg, ' + color1 + ', ' + color2 + ')';
        }

        // Sauvegarder le nom du site
        function saveSiteName() {
            const name = document.getElementById('siteNameInput').value.trim();
            if (!name) {
                alert('Veuillez entrer un nom de site');
                return;
            }
            
            var config = JSON.parse(localStorage.getItem('alphamouv_config')) || {};
            config.siteName = name;
            localStorage.setItem('alphamouv_config', JSON.stringify(config));
            
            // Appliquer le changement
            applySiteName(name);
            addLog('success', 'Nom du site modifié: ' + name);
            alert(' Nom du site mis à jour !');
        }

        // Appliquer le nom du site
        function applySiteName(name) {
            // Changer le titre H1
            const h1 = document.querySelector('h1');
            if (h1) h1.textContent = name;
            
            // Changer le titre de la page
            document.title = name;
            
            // Changer les logos texte
            const logos = document.querySelectorAll('.logo');
            logos.forEach(function(logo) {
                if (logo.textContent.includes('ALPHAMOUV') || logo.textContent.includes(name.toUpperCase())) {
                    logo.textContent = name.toUpperCase();
                }
            });
        }

        // Sauvegarder les couleurs du dégradé
        function saveGradientColors() {
            const color1 = document.getElementById('gradientColor1').value;
            const color2 = document.getElementById('gradientColor2').value;
            
            var config = JSON.parse(localStorage.getItem('alphamouv_config')) || {};
            config.gradientColor1 = color1;
            config.gradientColor2 = color2;
            localStorage.setItem('alphamouv_config', JSON.stringify(config));
            
            // Appliquer le dégradé
            applyGradientColors(color1, color2);
            addLog('success', 'Couleurs du dégradé modifiées');
            alert(' Dégradé de fond mis à jour !');
        }

        // Appliquer les couleurs du dégradé
        function applyGradientColors(color1, color2) {
            document.body.style.background = 'linear-gradient(135deg, ' + color1 + ' 0%, ' + color2 + ' 25%, ' + color1 + ' 50%, ' + color2 + ' 75%, ' + color1 + ' 100%)';
            document.body.style.backgroundSize = '400% 400%';
        }

        // Sauvegarder les couleurs d'accent
        function saveAccentColors() {
            const color1 = document.getElementById('accentColor1').value;
            const color2 = document.getElementById('accentColor2').value;
            
            var config = JSON.parse(localStorage.getItem('alphamouv_config')) || {};
            config.accentColor1 = color1;
            config.accentColor2 = color2;
            localStorage.setItem('alphamouv_config', JSON.stringify(config));
            
            // Appliquer les accents
            applyAccentColors(color1, color2);
            addLog('success', 'Couleurs d\'accent modifiées');
            alert(' Couleurs d\'accent mises à jour !');
        }

        // Appliquer les couleurs d'accent
        function applyAccentColors(color1, color2) {
            // Créer une feuille de style dynamique
            let styleSheet = document.getElementById('dynamic-accent-styles');
            if (!styleSheet) {
                styleSheet = document.createElement('style');
                styleSheet.id = 'dynamic-accent-styles';
                document.head.appendChild(styleSheet);
            }
            
            styleSheet.textContent = `
                h1, .logo, .filters-title, .product-category, .product-price, 
                .cart-header h2, .cart-total-amount, .user-name, .settings-section-title,
                .section-title, .gallery-title { 
                    color: ${color1} !important; 
                }
                .add-to-cart-btn, .checkout-btn, .auth-submit, .social-btn,
                .auth-tab.active, nav a.active {
                    background: linear-gradient(135deg, ${color1}, ${color2}) !important;
                }
                .cart-icon, .login-btn, .cart-btn, .user-avatar {
                    background: linear-gradient(135deg, rgba(${hexToRgb(color1)}, 0.9), rgba(${hexToRgb(color2)}, 0.9)) !important;
                }
            `;
        }

        // Convertir hex en rgb
        function hexToRgb(hex) {
            const result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
            return result ? 
                parseInt(result[1], 16) + ', ' + parseInt(result[2], 16) + ', ' + parseInt(result[3], 16) : 
                '221, 172, 11';
        }

        // Réinitialiser l'apparence
        function resetAppearance() {
            if (!confirm('Réinitialiser toutes les couleurs aux valeurs par défaut ?')) return;
            
            var config = JSON.parse(localStorage.getItem('alphamouv_config')) || {};
            delete config.gradientColor1;
            delete config.gradientColor2;
            delete config.accentColor1;
            delete config.accentColor2;
            delete config.siteName;
            localStorage.setItem('alphamouv_config', JSON.stringify(config));
            
            // Recharger la page pour appliquer les défauts
            addLog('info', 'Apparence réinitialisée');
            location.reload();
        }

        // Charger l'apparence au démarrage
        function loadSavedAppearance() {
            var config = JSON.parse(localStorage.getItem('alphamouv_config')) || {};
            
            if (config.siteName) {
                applySiteName(config.siteName);
            }
            
            if (config.gradientColor1 && config.gradientColor2) {
                applyGradientColors(config.gradientColor1, config.gradientColor2);
            }
            
            if (config.accentColor1 && config.accentColor2) {
                applyAccentColors(config.accentColor1, config.accentColor2);
            }
            
            // Charger les images sauvegardées
            loadSavedImages();

            // Appliquer la visibilité des sections
            applySectionVisibility();

            // Note: L'ordre des sections est géré par applyNavOrder() qui est appelé dans un autre DOMContentLoaded
            // applySectionOrder(); // DÉSACTIVÉ - remplacé par reorderPageSections()
        }

        // Charger les images sauvegardées
        function loadSavedImages() {
            const images = JSON.parse(localStorage.getItem('alphamouv_images')) || {};
            
            // Charger les images du carrousel
            if (images.carousel) {
                images.carousel.forEach(function(imageData, index) {
                    if (imageData) {
                        applyImageToPage('carousel', index, imageData);
                    }
                });
            }
        }

        // Appliquer la visibilité des sections
        function applySectionVisibility() {
            var config = JSON.parse(localStorage.getItem('alphamouv_config')) || {};
            const sections = config.sections || defaultSections;
            
            sections.forEach(function(section) {
                // Masquer/afficher la section
                const sectionEl = document.getElementById(section.id);
                if (sectionEl && section.visible === false) {
                    sectionEl.style.display = 'none';
                }
                
                // Masquer/afficher l'onglet de navigation
                const navLink = document.querySelector('a[data-section="' + section.id + '"]');
                if (navLink && navLink.parentElement && section.visible === false) {
                    navLink.parentElement.style.display = 'none';
                }
            });
        }

        // Appliquer l'ordre des sections sur la page
        function applySectionOrder() {
            var config = JSON.parse(localStorage.getItem('alphamouv_config')) || {};
            const sections = config.sections;
            
            if (!sections || sections.length === 0) return;
            
            const nav = document.querySelector('nav ul');
            if (nav) {
                nav.style.display = 'flex';
                nav.style.flexWrap = 'wrap';
                
                sections.forEach(function(section, index) {
                    const navItem = nav.querySelector('a[data-section="' + section.id + '"]');
                    if (navItem && navItem.parentElement) {
                        navItem.parentElement.style.order = index;
                    }
                });
            }
            
            // Réorganiser les sections de contenu
            sections.forEach(function(section, index) {
                const sectionEl = document.getElementById(section.id);
                if (sectionEl) {
                    sectionEl.style.order = index;
                }
            });
        }

        // ============ GESTION DU CONTENU ============
        
        // Sections par défaut
        const defaultSections = [
            { id: 'home', name: 'Accueil', icon: '🏠', visible: true },
            { id: 'evenements', name: 'Évènements', icon: '📅', visible: true },
            { id: 'creations', name: 'Créations Uniques', icon: '🎨', visible: true },
            { id: 'art', name: 'Art & Expression', icon: '✨', visible: true },
            { id: 'histoire', name: 'Mon Histoire', icon: '📖', visible: true }
        ];

        // Charger les sections
        function loadSectionsManager() {
            console.log('📋 loadSectionsManager appelée');
            var configString = localStorage.getItem('alphamouv_config');
            var config = configString ? JSON.parse(configString) : {};
            console.log('Config chargée:', config.sections ? 'sections trouvées' : 'PAS de sections');
            const sections = config.sections || defaultSections;
            console.log('Sections à afficher:', sections.map(s => s.name));
            var container = document.getElementById('sectionsContainer');
            
            container.innerHTML = sections.map(function(section, index) {
                return '<div class="section-editor" data-section-id="' + section.id + '" data-index="' + index + '">' +
                    '<div class="section-editor-header">' +
                        '<div style="display: flex; align-items: center; gap: 15px;">' +
                            '<div class="section-order-controls">' +
                                '<button class="btn-move-section" onclick="moveSectionUp(\'' + section.id + '\')" ' + (index === 0 ? 'disabled style="opacity:0.3"' : '') + ' title="Monter">⬆️</button>' +
                                '<button class="btn-move-section" onclick="moveSectionDown(\'' + section.id + '\')" ' + (index === sections.length - 1 ? 'disabled style="opacity:0.3"' : '') + ' title="Descendre">⬇️</button>' +
                            '</div>' +
                            '<h4>' +
                                '<span class="section-position">#' + (index + 1) + '</span> ' +
                                section.icon + ' ' + section.name +
                            '</h4>' +
                        '</div>' +
                        '<div class="section-editor-controls">' +
                            '<button class="btn-edit-section" onclick="editSection(\'' + section.id + '\')">✏️ Éditer</button>' +
                            '<button class="btn-toggle-section" onclick="toggleSectionVisibility(\'' + section.id + '\')">' +
                                (section.visible !== false ? '👁️ Visible' : '🚫 Masqué') +
                            '</button>' +
                            '<button class="btn-expand-section" onclick="toggleSectionContent(\'' + section.id + '\')">📂</button>' +
                        '</div>' +
                    '</div>' +
                    '<div class="section-editor-content" id="content-' + section.id + '">' +
                        '<div class="content-blocks" id="blocks-' + section.id + '">' +
                            loadSectionBlocks(section.id) +
                        '</div>' +
                        '<button class="btn-add-new" style="margin-top: 15px; width: 100%;" onclick="addBlockToSection(\'' + section.id + '\')">' +
                            '➕ Ajouter un élément' +
                        '</button>' +
                    '</div>' +
                '</div>';
            }).join('');
        }

        // Déplacer une section vers le haut
        function moveSectionUp(sectionId) {
            console.log('🔼 moveSectionUp appelée pour:', sectionId);

            var configString = localStorage.getItem('alphamouv_config');
            console.log('Config avant modification:', configString);

            var config = configString ? JSON.parse(configString) : {};

            // Charger les sections actuelles
            const sections = config.sections;

            if (!sections || sections.length === 0) {
                console.error('❌ Aucune section trouvée! config.sections:', sections);
                return;
            }

            const index = sections.findIndex(function(s) { return s.id === sectionId; });
            console.log('Index de la section:', index, '/', sections.length);

            if (index > 0) {
                // Échanger avec l'élément précédent
                const temp = sections[index];
                sections[index] = sections[index - 1];
                sections[index - 1] = temp;

                console.log('Nouvel ordre:', sections.map(s => s.name));

                localStorage.setItem('alphamouv_config', JSON.stringify(config));

                // Vérifier immédiatement après la sauvegarde
                var verif = localStorage.getItem('alphamouv_config');
                console.log('✅ Vérification immédiate après save:', JSON.parse(verif).sections.map(s => s.name));

                loadSectionsManager();

                // Appliquer en temps réel sur la page
                reorderPageSections(sections);

                addLog('info', 'Section déplacée vers le haut: ' + temp.name);
            }
        }

        // Déplacer une section vers le bas
        function moveSectionDown(sectionId) {
            console.log('🔽 moveSectionDown appelée pour:', sectionId);

            var configString = localStorage.getItem('alphamouv_config');
            console.log('Config avant modification:', configString);

            var config = configString ? JSON.parse(configString) : {};

            // Charger les sections actuelles
            const sections = config.sections;

            if (!sections || sections.length === 0) {
                console.error('❌ Aucune section trouvée! config.sections:', sections);
                return;
            }

            const index = sections.findIndex(function(s) { return s.id === sectionId; });
            console.log('Index de la section:', index, '/', sections.length);

            if (index < sections.length - 1) {
                // Échanger avec l'élément suivant
                const temp = sections[index];
                sections[index] = sections[index + 1];
                sections[index + 1] = temp;

                console.log('Nouvel ordre:', sections.map(s => s.name));

                localStorage.setItem('alphamouv_config', JSON.stringify(config));

                // Vérifier immédiatement après la sauvegarde
                var verif = localStorage.getItem('alphamouv_config');
                console.log('✅ Vérification immédiate après save:', JSON.parse(verif).sections.map(s => s.name));

                loadSectionsManager();

                // Appliquer en temps réel sur la page
                reorderPageSections(sections);

                addLog('info', 'Section déplacée vers le bas: ' + temp.name);
            }
        }

        // Réorganiser les sections sur la page en temps réel
        function reorderPageSections(sections) {
            const navList = document.getElementById('navList');
            if (!navList) {
                console.error('navList introuvable!');
                return;
            }

            console.log('reorderPageSections appelée avec:', sections.map(s => s.name));

            // Sauvegarder l'onglet actif actuel
            const activeLink = navList.querySelector('.nav-link.active');
            const activeSection = activeLink ? activeLink.getAttribute('data-section') : 'home';

            // Mettre à jour l'ordre des sections (pour les animations)
            sectionIds = sections.map(function(section) {
                return section.id;
            });

            console.log('Nouvel ordre sectionIds:', sectionIds);

            // Vider la navigation
            navList.innerHTML = '';

            // Régénérer les onglets dans le nouvel ordre
            sections.forEach(function(section) {
                const li = document.createElement('li');
                li.setAttribute('data-nav-id', section.id);

                const a = document.createElement('a');
                a.href = '#';
                a.className = 'nav-link';
                if (section.id === activeSection) {
                    a.classList.add('active');
                }
                a.setAttribute('data-section', section.id);
                a.textContent = section.name;

                li.appendChild(a);
                navList.appendChild(li);
            });

            // Vérifier l'ordre dans le DOM
            console.log('Ordre des liens après régénération:',
                Array.from(navList.querySelectorAll('li')).map(li => li.getAttribute('data-nav-id')));

            // Réattacher les événements de navigation
            attachNavEvents();

            // Réorganiser les sections de contenu
            sections.forEach(function(section, index) {
                const sectionEl = document.getElementById(section.id);
                if (sectionEl) {
                    sectionEl.style.order = index;
                }
            });

            // Appliquer flex au conteneur des sections
            const sectionsParent = document.querySelector('.content-section')?.parentElement;
            if (sectionsParent) {
                sectionsParent.style.display = 'flex';
                sectionsParent.style.flexDirection = 'column';
            }
        }

        // Toggle le contenu de la section (expand/collapse)
        function toggleSectionContent(sectionId) {
            const content = document.getElementById('content-' + sectionId);
            if (content) {
                content.classList.toggle('open');
            }
        }

        // Charger les blocs d'une section
        function loadSectionBlocks(sectionId) {
            var config = JSON.parse(localStorage.getItem('alphamouv_config')) || {};
            const blocks = config.sectionBlocks ? config.sectionBlocks[sectionId] : null;
            
            if (!blocks || blocks.length === 0) {
                return '<p style="color: rgba(255,255,255,0.5); text-align: center; padding: 20px;">Aucun élément personnalisé</p>';
            }
            
            return blocks.map(function(block, index) {
                return '<div class="content-block" draggable="true">' +
                    '<div class="content-block-preview">' +
                        (block.image ? '<img src="' + block.image + '">' : '<span class="placeholder">' + (block.icon || '📄') + '</span>') +
                    '</div>' +
                    '<div class="content-block-info">' +
                        '<h5>' + (block.title || 'Sans titre') + '</h5>' +
                        '<p>' + (block.type || 'Texte') + '</p>' +
                    '</div>' +
                    '<div class="content-block-actions">' +
                        '<button style="background: #3b82f6; color: white;" onclick="editBlock(\'' + sectionId + '\', ' + index + ')">✏️</button>' +
                        '<button style="background: #ef4444; color: white;" onclick="deleteBlock(\'' + sectionId + '\', ' + index + ')">🗑️</button>' +
                    '</div>' +
                '</div>';
            }).join('');
        }

        // Variables pour l'édition
        let currentEditSection = null;
        let currentEditBlockIndex = null;

        // Éditer une section
        function editSection(sectionId) {
            currentEditSection = sectionId;
            var config = JSON.parse(localStorage.getItem('alphamouv_config')) || {};
            const sections = config.sections || defaultSections;
            const section = sections.find(function(s) { return s.id === sectionId; });
            
            document.getElementById('editorModalTitle').textContent = 'Éditer la section: ' + section.name;
            document.getElementById('editorModalBody').innerHTML = 
                '<div class="editor-form-group">' +
                    '<label>Nom de la section</label>' +
                    '<input type="text" id="editSectionName" value="' + section.name + '">' +
                '</div>' +
                '<div class="editor-form-group">' +
                    '<label>Icône (emoji)</label>' +
                    '<input type="text" id="editSectionIcon" value="' + section.icon + '">' +
                '</div>';
            
            document.getElementById('editorSaveBtn').onclick = function() { saveSectionEdit(); };
            document.getElementById('editorModal').classList.add('active');
        }

        // Sauvegarder l'édition de section
        function saveSectionEdit() {
            var config = JSON.parse(localStorage.getItem('alphamouv_config')) || {};
            const sections = config.sections || defaultSections;
            const sectionIndex = sections.findIndex(function(s) { return s.id === currentEditSection; });
            
            if (sectionIndex !== -1) {
                sections[sectionIndex].name = document.getElementById('editSectionName').value;
                sections[sectionIndex].icon = document.getElementById('editSectionIcon').value;
                config.sections = sections;
                localStorage.setItem('alphamouv_config', JSON.stringify(config));
                
                loadSectionsManager();
                closeEditorModal();
                addLog('success', 'Section modifiée: ' + sections[sectionIndex].name);
            }
        }

        // Toggle visibilité section
        function toggleSectionVisibility(sectionId) {
            var config = JSON.parse(localStorage.getItem('alphamouv_config')) || {};
            const sections = config.sections || [...defaultSections];
            const sectionIndex = sections.findIndex(function(s) { return s.id === sectionId; });
            
            if (sectionIndex !== -1) {
                sections[sectionIndex].visible = !sections[sectionIndex].visible;
                const isVisible = sections[sectionIndex].visible;
                config.sections = sections;
                localStorage.setItem('alphamouv_config', JSON.stringify(config));
                
                // Masquer/afficher la section sur la page
                const sectionEl = document.getElementById(sectionId);
                if (sectionEl) {
                    sectionEl.style.display = isVisible ? '' : 'none';
                }
                
                // Masquer/afficher l'onglet de navigation correspondant
                const navLink = document.querySelector('a[data-section="' + sectionId + '"]');
                if (navLink && navLink.parentElement) {
                    navLink.parentElement.style.display = isVisible ? '' : 'none';
                }
                
                loadSectionsManager();
                addLog('info', 'Visibilité de ' + sections[sectionIndex].name + ': ' + (isVisible ? 'visible' : 'masqué'));
            }
        }

        // Ajouter un bloc à une section
        function addBlockToSection(sectionId) {
            currentEditSection = sectionId;
            currentEditBlockIndex = null;
            
            document.getElementById('editorModalTitle').textContent = 'Ajouter un élément';
            document.getElementById('editorModalBody').innerHTML = 
                '<div class="editor-form-group">' +
                    '<label>Type d\'élément</label>' +
                    '<select id="blockType" onchange="updateBlockForm()">' +
                        '<option value="text">Texte</option>' +
                        '<option value="image">Image</option>' +
                        '<option value="card">Carte avec image</option>' +
                    '</select>' +
                '</div>' +
                '<div id="blockFormContent">' +
                    '<div class="editor-form-group">' +
                        '<label>Titre</label>' +
                        '<input type="text" id="blockTitle" placeholder="Titre de l\'élément">' +
                    '</div>' +
                    '<div class="editor-form-group">' +
                        '<label>Contenu</label>' +
                        '<textarea id="blockContent" placeholder="Texte de l\'élément"></textarea>' +
                    '</div>' +
                '</div>';
            
            document.getElementById('editorSaveBtn').onclick = function() { saveNewBlock(); };
            document.getElementById('editorModal').classList.add('active');
        }

        // Mettre à jour le formulaire selon le type
        function updateBlockForm() {
            const type = document.getElementById('blockType').value;
            var html = '<div class="editor-form-group">' +
                '<label>Titre</label>' +
                '<input type="text" id="blockTitle" placeholder="Titre de l\'élément">' +
            '</div>';
            
            if (type === 'text') {
                html += '<div class="editor-form-group">' +
                    '<label>Contenu</label>' +
                    '<textarea id="blockContent" placeholder="Texte de l\'élément"></textarea>' +
                '</div>';
            } else if (type === 'image' || type === 'card') {
                html += '<div class="editor-form-group">' +
                    '<label>Image</label>' +
                    '<div class="image-upload-area" onclick="document.getElementById(\'blockImageInput\').click()">' +
                        '<div class="upload-icon">📷</div>' +
                        '<p>Cliquez pour sélectionner une image</p>' +
                        '<div class="image-upload-preview" id="blockImagePreview"></div>' +
                    '</div>' +
                    '<input type="file" id="blockImageInput" style="display:none" accept="image/*" onchange="previewBlockImage(event)">' +
                    '<input type="hidden" id="blockImageData">' +
                '</div>';
                
                if (type === 'card') {
                    html += '<div class="editor-form-group">' +
                        '<label>Description</label>' +
                        '<textarea id="blockContent" placeholder="Description de la carte"></textarea>' +
                    '</div>';
                }
            }
            
            document.getElementById('blockFormContent').innerHTML = html;
        }

        // Prévisualiser l'image du bloc
        function previewBlockImage(event) {
            const file = event.target.files[0];
            if (!file) return;
            
            var reader = new FileReader();
            reader.onload = function(e) {
                document.getElementById('blockImagePreview').innerHTML = '<img src="' + e.target.result + '">';
                document.getElementById('blockImageData').value = e.target.result;
            };
            reader.readAsDataURL(file);
        }

        // Sauvegarder le nouveau bloc
        function saveNewBlock() {
            var config = JSON.parse(localStorage.getItem('alphamouv_config')) || {};
            if (!config.sectionBlocks) config.sectionBlocks = {};
            if (!config.sectionBlocks[currentEditSection]) config.sectionBlocks[currentEditSection] = [];
            
            const block = {
                type: document.getElementById('blockType').value,
                title: document.getElementById('blockTitle').value,
                content: document.getElementById('blockContent') ? document.getElementById('blockContent').value : '',
                image: document.getElementById('blockImageData') ? document.getElementById('blockImageData').value : null,
                icon: '📄'
            };
            
            if (currentEditBlockIndex !== null) {
                config.sectionBlocks[currentEditSection][currentEditBlockIndex] = block;
            } else {
                config.sectionBlocks[currentEditSection].push(block);
            }
            
            localStorage.setItem('alphamouv_config', JSON.stringify(config));
            loadSectionsManager();
            closeEditorModal();
            addLog('success', 'Élément ajouté à la section');
        }

        // Éditer un bloc
        function editBlock(sectionId, blockIndex) {
            currentEditSection = sectionId;
            currentEditBlockIndex = blockIndex;
            
            var config = JSON.parse(localStorage.getItem('alphamouv_config')) || {};
            const block = config.sectionBlocks[sectionId][blockIndex];
            
            document.getElementById('editorModalTitle').textContent = 'Éditer l\'élément';
            document.getElementById('editorModalBody').innerHTML = 
                '<div class="editor-form-group">' +
                    '<label>Titre</label>' +
                    '<input type="text" id="blockTitle" value="' + (block.title || '') + '">' +
                '</div>' +
                '<div class="editor-form-group">' +
                    '<label>Contenu</label>' +
                    '<textarea id="blockContent">' + (block.content || '') + '</textarea>' +
                '</div>' +
                (block.image ? '<div class="editor-form-group"><label>Image actuelle</label><img src="' + block.image + '" style="max-width:200px; border-radius:10px;"></div>' : '') +
                '<input type="hidden" id="blockType" value="' + block.type + '">' +
                '<input type="hidden" id="blockImageData" value="' + (block.image || '') + '">';
            
            document.getElementById('editorSaveBtn').onclick = function() { saveNewBlock(); };
            document.getElementById('editorModal').classList.add('active');
        }

        // Supprimer un bloc
        function deleteBlock(sectionId, blockIndex) {
            if (!confirm('Supprimer cet élément ?')) return;
            
            var config = JSON.parse(localStorage.getItem('alphamouv_config')) || {};
            config.sectionBlocks[sectionId].splice(blockIndex, 1);
            localStorage.setItem('alphamouv_config', JSON.stringify(config));
            
            loadSectionsManager();
            addLog('warning', 'Élément supprimé');
        }

        // Ajouter une nouvelle section
        function addNewSection() {
            document.getElementById('editorModalTitle').textContent = 'Nouvelle section';
            document.getElementById('editorModalBody').innerHTML = 
                '<div class="editor-form-group">' +
                    '<label>Nom de la section</label>' +
                    '<input type="text" id="newSectionName" placeholder="Ma nouvelle section">' +
                '</div>' +
                '<div class="editor-form-group">' +
                    '<label>Icône (emoji)</label>' +
                    '<input type="text" id="newSectionIcon" value="📌">' +
                '</div>';
            
            document.getElementById('editorSaveBtn').onclick = function() { saveNewSection(); };
            document.getElementById('editorModal').classList.add('active');
        }

        // Sauvegarder nouvelle section
        function saveNewSection() {
            const name = document.getElementById('newSectionName').value.trim();
            const icon = document.getElementById('newSectionIcon').value.trim();
            
            if (!name) {
                alert('Veuillez entrer un nom');
                return;
            }
            
            var config = JSON.parse(localStorage.getItem('alphamouv_config')) || {};
            const sections = config.sections || defaultSections;
            
            const newId = 'section-' + Date.now();
            sections.push({
                id: newId,
                name: name,
                icon: icon,
                visible: true
            });
            
            config.sections = sections;
            localStorage.setItem('alphamouv_config', JSON.stringify(config));
            
            loadSectionsManager();
            closeEditorModal();
            addLog('success', 'Nouvelle section créée: ' + name);
        }

        // Drag & Drop sections
        let draggedSection = null;

        function dragSection(e) {
            draggedSection = e.target.closest('.section-editor');
            e.dataTransfer.effectAllowed = 'move';
        }

        function allowDrop(e) {
            e.preventDefault();
        }

        function dropSection(e) {
            e.preventDefault();
            const target = e.target.closest('.section-editor');
            if (target && draggedSection && target !== draggedSection) {
                var container = document.getElementById('sectionsContainer');
                const allSections = Array.from(container.children);
                const draggedIndex = allSections.indexOf(draggedSection);
                const targetIndex = allSections.indexOf(target);
                
                if (draggedIndex < targetIndex) {
                    target.after(draggedSection);
                } else {
                    target.before(draggedSection);
                }
                
                // Sauvegarder le nouvel ordre
                saveSectionOrder();
            }
        }

        function saveSectionOrder() {
            var config = JSON.parse(localStorage.getItem('alphamouv_config')) || {};
            var container = document.getElementById('sectionsContainer');
            const newOrder = [];
            
            container.querySelectorAll('.section-editor').forEach(function(el) {
                const sectionId = el.dataset.sectionId;
                const sections = config.sections || defaultSections;
                const section = sections.find(function(s) { return s.id === sectionId; });
                if (section) newOrder.push(section);
            });
            
            config.sections = newOrder;
            localStorage.setItem('alphamouv_config', JSON.stringify(config));
            addLog('info', 'Ordre des sections modifié');
        }

        // Fermer le modal d'édition
        function closeEditorModal() {
            document.getElementById('editorModal').classList.remove('active');
            currentEditSection = null;
            currentEditBlockIndex = null;
            window.currentCardEdit = null;
        }

        // Save editor content
        function saveEditorContent() {
            // Check if we're editing a card
            if (window.currentCardEdit) {
                const { section, index, cardId, isNew } = window.currentCardEdit;
                var config = JSON.parse(localStorage.getItem('alphamouv_config')) || {};
                if (!config.cards) config.cards = getDefaultCards();
                if (!config.cardsData) config.cardsData = {};

                // Get form values
                const title = document.getElementById('editCardTitle').value;
                const description = document.getElementById('editCardDescription').value;
                const image = document.getElementById('editCardImage').value;
                const popupTitle = document.getElementById('editCardPopupTitle').value;
                const popupText = document.getElementById('editCardPopupText').value;
                const imageLayout = document.getElementById('editCardImageLayout').value;

                // Validate required fields
                if (!title) {
                    alert('Le titre est requis !');
                    return;
                }

                if (isNew) {
                    // Add new card
                    if (!config.cards[section]) config.cards[section] = [];

                    config.cards[section].push({
                        id: cardId,
                        title: title,
                        description: description,
                        image: image
                    });
                } else {
                    // Update existing card
                    var existingCard = config.cards[section][index];
                    config.cards[section][index] = {
                        id: existingCard.id,
                        title: title,
                        description: description,
                        image: image
                    };
                }

                // Clean popup images (remove empty ones)
                var cleanedImages = [];
                for (var i = 0; i < window.popupImages.length; i++) {
                    var img = window.popupImages[i];
                    if (img && img.trim() !== '') {
                        cleanedImages.push(img);
                    }
                }

                // Update/Create card popup data
                config.cardsData[cardId] = {
                    title: popupTitle || title,
                    text: popupText || '<p>Contenu à définir</p>',
                    imageMode: 'fixed',
                    images: cleanedImages,
                    imageLayout: imageLayout || 'layout-2'
                };

                localStorage.setItem('alphamouv_config', JSON.stringify(config));
                closeEditorModal();
                loadCardsSection();

                alert(isNew ? 'Carte ajoutée avec succès !' : 'Carte mise à jour avec succès !');
                return;
            }

            // Original save logic for other content...
        }

        // ============================================
        // GESTION DE LA BOUTIQUE
        // ============================================

        function loadProductsManager() {
            var config = JSON.parse(localStorage.getItem('alphamouv_config')) || {};
            var products = config.products || [];
            var container = document.getElementById('productsContainer');

            if (products.length === 0) {
                container.innerHTML = '<p style="color: rgba(255,255,255,0.5); text-align: center; padding: 40px;">Aucun produit. Commencez par ajouter votre premier produit!</p>';
                return;
            }

            container.innerHTML = products.map(function(product, index) {
                return `
                    <div class="product-card" style="background: linear-gradient(135deg, rgba(221, 172, 11, 0.1), rgba(196, 209, 12, 0.05)); border: 2px solid rgba(221, 172, 11, 0.3); border-radius: 15px; padding: 20px; display: flex; gap: 20px; align-items: center;">
                        <div style="width: 100px; height: 100px; background: rgba(0,0,0,0.3); border-radius: 10px; overflow: hidden; flex-shrink: 0;">
                            ${product.image ? `<img src="${product.image}" style="width: 100%; height: 100%; object-fit: cover;">` : '<div style="display: flex; align-items: center; justify-content: center; height: 100%; color: rgba(255,255,255,0.3); font-size: 2em;">🛍️</div>'}
                        </div>
                        <div style="flex: 1;">
                            <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 10px;">
                                <div>
                                    <h4 style="color: white; margin: 0 0 5px 0;">${product.name}</h4>
                                    <span style="display: inline-block; padding: 4px 12px; background: rgba(221, 172, 11, 0.2); border: 1px solid rgba(221, 172, 11, 0.5); border-radius: 20px; font-size: 0.85em; color: #ddac0b; margin-right: 8px;">${product.category}</span>
                                    ${product.stock ? `<span style="display: inline-block; padding: 4px 12px; background: rgba(34, 197, 94, 0.2); border: 1px solid rgba(34, 197, 94, 0.5); border-radius: 20px; font-size: 0.85em; color: #22c55e;">En stock: ${product.stock}</span>` : ''}
                                </div>
                                <div style="font-size: 1.5em; font-weight: 700; color: #ddac0b;">${product.price}€</div>
                            </div>
                            <p style="color: rgba(255,255,255,0.7); margin: 10px 0; font-size: 0.9em;">${product.description || 'Aucune description'}</p>
                            <div style="display: flex; gap: 10px; margin-top: 15px;">
                                <button onclick="editProduct(${index})" style="padding: 8px 16px; background: rgba(59, 130, 246, 0.2); border: 1px solid rgba(59, 130, 246, 0.5); border-radius: 8px; color: #60a5fa; cursor: pointer; font-weight: 600;">✏️ Modifier</button>
                                <button onclick="deleteProduct(${index})" style="padding: 8px 16px; background: rgba(239, 68, 68, 0.2); border: 1px solid rgba(239, 68, 68, 0.5); border-radius: 8px; color: #f87171; cursor: pointer; font-weight: 600;">🗑️ Supprimer</button>
                            </div>
                        </div>
                    </div>
                `;
            }).join('');
        }

        function addNewProduct() {
            document.getElementById('editorModalTitle').textContent = 'Ajouter un nouveau produit';
            document.getElementById('editorModalBody').innerHTML = `
                <div class="editor-form-group">
                    <label>Nom du produit</label>
                    <input type="text" id="productName" placeholder="T-shirt Premium">
                </div>
                <div class="editor-form-group">
                    <label>Catégorie</label>
                    <select id="productCategory" style="width: 100%; padding: 12px; background: rgba(255,255,255,0.1); border: 2px solid rgba(255,255,255,0.2); border-radius: 8px; color: white; font-size: 1em;">
                        <option value="Homme">Homme</option>
                        <option value="Femme">Femme</option>
                        <option value="Enfant">Enfant</option>
                        <option value="Accessoires">Accessoires</option>
                        <option value="Créations Uniques">Créations Uniques</option>
                    </select>
                </div>
                <div class="editor-form-group">
                    <label>Prix (€)</label>
                    <input type="number" id="productPrice" placeholder="29.99" step="0.01" min="0">
                </div>
                <div class="editor-form-group">
                    <label>Stock disponible</label>
                    <input type="number" id="productStock" placeholder="10" min="0">
                </div>
                <div class="editor-form-group">
                    <label>Description</label>
                    <textarea id="productDescription" rows="4" placeholder="Décrivez votre produit..." style="width: 100%; padding: 12px; background: rgba(255,255,255,0.1); border: 2px solid rgba(255,255,255,0.2); border-radius: 8px; color: white; font-size: 1em; resize: vertical;"></textarea>
                </div>
                <div class="editor-form-group">
                    <label>URL de l'image</label>
                    <input type="text" id="productImage" placeholder="https://example.com/image.jpg">
                    <small style="color: rgba(255,255,255,0.5); display: block; margin-top: 8px;">Collez l'URL d'une image ou uploadez-la dans la section Images</small>
                </div>
            `;

            document.getElementById('editorSaveBtn').onclick = function() { saveNewProduct(); };
            document.getElementById('editorModal').classList.add('active');
        }

        function saveNewProduct() {
            var name = document.getElementById('productName').value.trim();
            var category = document.getElementById('productCategory').value;
            var price = document.getElementById('productPrice').value;
            var stock = document.getElementById('productStock').value;
            var description = document.getElementById('productDescription').value.trim();
            var image = document.getElementById('productImage').value.trim();

            if (!name || !price) {
                alert('Le nom et le prix sont obligatoires!');
                return;
            }

            var config = JSON.parse(localStorage.getItem('alphamouv_config')) || {};
            if (!config.products) config.products = [];

            config.products.push({
                id: 'product-' + Date.now(),
                name: name,
                category: category,
                price: parseFloat(price),
                stock: parseInt(stock) || 0,
                description: description,
                image: image,
                createdAt: new Date().toISOString()
            });

            localStorage.setItem('alphamouv_config', JSON.stringify(config));
            closeEditorModal();
            loadProductsManager();
            addLog('success', 'Produit ajouté: ' + name);
        }

        function editProduct(index) {
            var config = JSON.parse(localStorage.getItem('alphamouv_config')) || {};
            var product = config.products[index];

            if (!product) return;

            document.getElementById('editorModalTitle').textContent = 'Modifier le produit';
            document.getElementById('editorModalBody').innerHTML = `
                <div class="editor-form-group">
                    <label>Nom du produit</label>
                    <input type="text" id="productName" placeholder="T-shirt Premium" value="${product.name}">
                </div>
                <div class="editor-form-group">
                    <label>Catégorie</label>
                    <select id="productCategory" style="width: 100%; padding: 12px; background: rgba(255,255,255,0.1); border: 2px solid rgba(255,255,255,0.2); border-radius: 8px; color: white; font-size: 1em;">
                        <option value="Homme" ${product.category === 'Homme' ? 'selected' : ''}>Homme</option>
                        <option value="Femme" ${product.category === 'Femme' ? 'selected' : ''}>Femme</option>
                        <option value="Enfant" ${product.category === 'Enfant' ? 'selected' : ''}>Enfant</option>
                        <option value="Accessoires" ${product.category === 'Accessoires' ? 'selected' : ''}>Accessoires</option>
                        <option value="Créations Uniques" ${product.category === 'Créations Uniques' ? 'selected' : ''}>Créations Uniques</option>
                    </select>
                </div>
                <div class="editor-form-group">
                    <label>Prix (€)</label>
                    <input type="number" id="productPrice" placeholder="29.99" step="0.01" min="0" value="${product.price}">
                </div>
                <div class="editor-form-group">
                    <label>Stock disponible</label>
                    <input type="number" id="productStock" placeholder="10" min="0" value="${product.stock || 0}">
                </div>
                <div class="editor-form-group">
                    <label>Description</label>
                    <textarea id="productDescription" rows="4" placeholder="Décrivez votre produit..." style="width: 100%; padding: 12px; background: rgba(255,255,255,0.1); border: 2px solid rgba(255,255,255,0.2); border-radius: 8px; color: white; font-size: 1em; resize: vertical;">${product.description || ''}</textarea>
                </div>
                <div class="editor-form-group">
                    <label>URL de l'image</label>
                    <input type="text" id="productImage" placeholder="https://example.com/image.jpg" value="${product.image || ''}">
                    <small style="color: rgba(255,255,255,0.5); display: block; margin-top: 8px;">Collez l'URL d'une image ou uploadez-la dans la section Images</small>
                </div>
            `;

            document.getElementById('editorSaveBtn').onclick = function() { saveProductEdit(index); };
            document.getElementById('editorModal').classList.add('active');
        }

        function saveProductEdit(index) {
            var name = document.getElementById('productName').value.trim();
            var category = document.getElementById('productCategory').value;
            var price = document.getElementById('productPrice').value;
            var stock = document.getElementById('productStock').value;
            var description = document.getElementById('productDescription').value.trim();
            var image = document.getElementById('productImage').value.trim();

            if (!name || !price) {
                alert('Le nom et le prix sont obligatoires!');
                return;
            }

            var config = JSON.parse(localStorage.getItem('alphamouv_config')) || {};

            config.products[index] = {
                ...config.products[index],
                name: name,
                category: category,
                price: parseFloat(price),
                stock: parseInt(stock) || 0,
                description: description,
                image: image,
                updatedAt: new Date().toISOString()
            };

            localStorage.setItem('alphamouv_config', JSON.stringify(config));
            closeEditorModal();
            loadProductsManager();
            addLog('success', 'Produit modifié: ' + name);
        }

        function deleteProduct(index) {
            var config = JSON.parse(localStorage.getItem('alphamouv_config')) || {};
            var product = config.products[index];

            if (!confirm('Supprimer le produit "' + product.name + '" ?')) {
                return;
            }

            config.products.splice(index, 1);
            localStorage.setItem('alphamouv_config', JSON.stringify(config));
            loadProductsManager();
            addLog('warning', 'Produit supprimé: ' + product.name);
        }

        // ============ ÉDITEUR VISUEL DE PAGE ============

        let currentEditingPage = null;
        let pageTextElements = [];
        let selectedTextElement = null;
        let savedPageContent = null;

        // Initialiser les IDs uniques pour chaque section
        function initializeSectionIDs() {
            const homeSection = document.querySelector('#home');
            if (!homeSection) return;

            // Trouver tous les blocs principaux et leur donner un ID unique
            const mainCard = homeSection.querySelector('.main-card');
            if (mainCard && !mainCard.id) mainCard.id = 'section-intro';

            const carousel = homeSection.querySelector('.carousel-container');
            if (carousel && !carousel.id) carousel.id = 'section-carousel';

            const boutique = homeSection.querySelector('.boutique-section');
            if (boutique && !boutique.id) boutique.id = 'section-boutique';

            const gallery = homeSection.querySelector('.gallery');
            if (gallery && !gallery.id) gallery.id = 'section-gallery';

            console.log('IDs des sections initialisés');
        }

        // Sauvegarder le contenu de la page au chargement
        function savePageContentForEditing() {
            // D'abord initialiser les IDs
            initializeSectionIDs();

            const homeSection = document.querySelector('#home');
            if (!homeSection) {
                console.error('Section #home non trouvée');
                return;
            }

            savedPageContent = homeSection.innerHTML;
            console.log('Contenu de la section home sauvegardé, longueur:', savedPageContent.length);
        }

        function editPage(pageId) {
            var config = JSON.parse(localStorage.getItem('alphamouv_config')) || {};
            const pages = config.pages || [
                { id: 'home', name: 'Page d\'accueil', file: 'page 2.html', icon: '🏠' },
                { id: 'shop', name: 'Boutique', file: 'boutique.html', icon: '🛒' }
            ];

            const page = pages.find(function(p) { return p.id === pageId; });
            if (!page) return;

            currentEditingPage = page;
            document.getElementById('editingPageName').textContent = page.name;

            // Charger les liens sociaux existants
            loadSocialLinks();

            // Charger la page dans la prévisualisation
            loadPagePreview(page);

            // Ouvrir l'éditeur visuel
            document.getElementById('visualPageEditor').classList.add('active');
            addLog('info', 'Édition de la page: ' + page.name);
        }

        function loadSocialLinks() {
            var config = JSON.parse(localStorage.getItem('alphamouv_config')) || {};
            const socialLinks = config.socialLinks || {};

            document.getElementById('instagramLink').value = socialLinks.instagram || '';
            document.getElementById('youtubeLink').value = socialLinks.youtube || '';
            document.getElementById('xLink').value = socialLinks.x || '';
            document.getElementById('twitchLink').value = socialLinks.twitch || '';
            document.getElementById('tiktokLink').value = socialLinks.tiktok || '';
            document.getElementById('linkedinLink').value = socialLinks.linkedin || '';
            document.getElementById('facebookLink').value = socialLinks.facebook || '';
        }

        function loadPagePreview(page) {
            const previewContent = document.getElementById('visualPreviewContent');

            // S'assurer que le contenu est sauvegardé
            if (!savedPageContent) {
                savePageContentForEditing();
            }

            // Créer une structure simulant la page d'accueil
            let pageHTML = '<div class="content-section active" id="home-preview" style="padding: 20px;">';

            if (savedPageContent) {
                pageHTML += savedPageContent;
            } else {
                pageHTML += '<div style="padding: 40px; text-align: center; color: white;">' +
                    '<h1>❌ Aucun contenu trouvé</h1>' +
                    '<p>Impossible de charger le contenu de la section home.</p>' +
                    '</div>';
            }

            pageHTML += '</div>';

            console.log('HTML de la page chargé, longueur:', pageHTML.length);

            // Injecter le HTML dans la prévisualisation
            previewContent.innerHTML = pageHTML;

            // Attendre que le contenu soit injecté puis initialiser les fonctionnalités
            setTimeout(function() {
                // Rendre les blocs déplaçables
                makeBlocksDraggable(previewContent);

                // Rendre les textes éditables
                makeTextsEditable(previewContent);

                // Appliquer les liens sociaux
                applySocialLinksToPreview(previewContent);

                // Désactiver tous les liens dans la prévisualisation
                previewContent.querySelectorAll('a').forEach(function(link) {
                    link.addEventListener('click', function(e) {
                        e.preventDefault();
                        e.stopPropagation();
                    });
                });

                // Désactiver tous les boutons dans la prévisualisation
                previewContent.querySelectorAll('button').forEach(function(btn) {
                    const originalOnclick = btn.onclick;
                    btn.onclick = null;
                    btn.addEventListener('click', function(e) {
                        e.preventDefault();
                        e.stopPropagation();
                    });
                });

                console.log('Prévisualisation chargée: ' + pageTextElements.length + ' textes trouvés');
            }, 100);
        }

        // Variables pour le drag & drop
        let draggedBlock = null;
        let pageBlocks = [];

        function makeBlocksDraggable(container) {
            pageBlocks = [];

            // Cibler les sections principales avec IDs dans home-preview
            const homePreview = container.querySelector('#home-preview');
            if (!homePreview) {
                console.log('home-preview non trouvé');
                return;
            }

            // Sélectionner les éléments directs avec des IDs (nos sections principales)
            const blocks = homePreview.querySelectorAll('#section-intro, #section-carousel, #section-boutique, #section-gallery');

            console.log('Blocs draggables trouvés:', blocks.length);

            blocks.forEach(function(block, index) {
                // Ajouter un identifiant et des attributs de drag
                block.dataset.blockId = 'block-' + index;
                block.classList.add('draggable-block');
                block.setAttribute('draggable', 'true');

                // Sauvegarder le bloc
                pageBlocks.push({
                    id: 'block-' + index,
                    element: block,
                    originalIndex: index
                });

                // Ajouter une poignée de glissement visible
                const dragHandle = document.createElement('div');
                dragHandle.className = 'drag-handle';
                dragHandle.innerHTML = '⋮⋮';
                dragHandle.title = 'Maintenir et glisser pour déplacer';
                block.style.position = 'relative';
                block.insertBefore(dragHandle, block.firstChild);

                // Évènements de drag & drop
                block.addEventListener('dragstart', handleDragStart);
                block.addEventListener('dragend', handleDragEnd);
                block.addEventListener('dragover', handleDragOver);
                block.addEventListener('drop', handleDrop);
                block.addEventListener('dragenter', handleDragEnter);
                block.addEventListener('dragleave', handleDragLeave);
            });
        }

        let dragPlaceholder = null;

        function handleDragStart(e) {
            draggedBlock = this;

            // Ajouter la classe dragging pour les animations
            this.classList.add('dragging');

            e.dataTransfer.effectAllowed = 'move';
            e.dataTransfer.setData('text/html', this.innerHTML);

            // Créer un placeholder visuel
            dragPlaceholder = document.createElement('div');
            dragPlaceholder.className = 'drag-placeholder';
            dragPlaceholder.innerHTML = '⬇️ Déposer ici';
            dragPlaceholder.style.height = this.offsetHeight + 'px';
        }

        function handleDragEnd(e) {
            // Retirer la classe dragging
            this.classList.remove('dragging');

            // Retirer le placeholder
            if (dragPlaceholder && dragPlaceholder.parentNode) {
                dragPlaceholder.parentNode.removeChild(dragPlaceholder);
            }
            dragPlaceholder = null;

            // Retirer les classes de survol de tous les blocs
            document.querySelectorAll('.draggable-block').forEach(function(block) {
                block.classList.remove('drag-over');
            });
        }

        function handleDragOver(e) {
            if (e.preventDefault) {
                e.preventDefault();
            }
            e.dataTransfer.dropEffect = 'move';

            // Insérer le placeholder à la position du curseur
            if (dragPlaceholder && this !== draggedBlock) {
                const afterElement = getDragAfterElement(this.parentNode, e.clientY);
                if (afterElement == null) {
                    this.parentNode.appendChild(dragPlaceholder);
                } else {
                    this.parentNode.insertBefore(dragPlaceholder, afterElement);
                }
            }

            return false;
        }

        function handleDragEnter(e) {
            if (this !== draggedBlock) {
                this.classList.add('drag-over');
            }
        }

        function handleDragLeave(e) {
            // Vérifier si on sort vraiment de l'élément (pas juste dans un enfant)
            const rect = this.getBoundingClientRect();
            if (e.clientY < rect.top || e.clientY >= rect.bottom ||
                e.clientX < rect.left || e.clientX >= rect.right) {
                this.classList.remove('drag-over');
            }
        }

        function handleDrop(e) {
            if (e.stopPropagation) {
                e.stopPropagation();
            }

            if (draggedBlock !== this) {
                // Réorganiser les éléments avec animation fluide
                const allBlocks = Array.from(document.querySelectorAll('.draggable-block'));
                const draggedIndex = allBlocks.indexOf(draggedBlock);
                const targetIndex = allBlocks.indexOf(this);

                // Animation de déplacement
                if (draggedIndex < targetIndex) {
                    this.parentNode.insertBefore(draggedBlock, this.nextSibling);
                } else {
                    this.parentNode.insertBefore(draggedBlock, this);
                }

                // Notifier que l'ordre a changé
                console.log('✅ Bloc déplacé avec succès !');

                // Effet visuel de confirmation
                draggedBlock.style.animation = 'none';
                setTimeout(function() {
                    draggedBlock.style.animation = '';
                }, 10);
            }

            this.classList.remove('drag-over');
            return false;
        }

        // Fonction helper pour déterminer où insérer le placeholder
        function getDragAfterElement(container, y) {
            const draggableElements = [...container.querySelectorAll('.draggable-block:not(.dragging)')];

            return draggableElements.reduce((closest, child) => {
                const box = child.getBoundingClientRect();
                const offset = y - box.top - box.height / 2;

                if (offset < 0 && offset > closest.offset) {
                    return { offset: offset, element: child };
                } else {
                    return closest;
                }
            }, { offset: Number.NEGATIVE_INFINITY }).element;
        }

        function makeTextsEditable(container) {
            pageTextElements = [];

            // Identifier tous les éléments texte modifiables
            const textSelectors = 'h1, h2, h3, h4, p, a, button, .hero-title, .hero-subtitle';
            const elements = container.querySelectorAll(textSelectors);

            console.log('Éléments texte trouvés:', elements.length);

            elements.forEach(function(el, index) {
                // Ignorer les éléments vides ou très courts
                const text = el.textContent.trim();
                if (text.length < 2) return;

                // Ignorer les éléments dans le drag handle
                if (el.closest('.drag-handle')) return;

                // Ajouter un identifiant unique
                el.dataset.textId = 'text-' + index;
                el.classList.add('editable-element');

                // Trouver le cadre parent pour afficher son contexte
                let parentBlock = el.closest('.section, .gallery-item, .hero, .feature-card');
                let blockName = 'Texte';
                if (parentBlock) {
                    if (parentBlock.classList.contains('hero')) blockName = 'Section Hero';
                    else if (parentBlock.classList.contains('gallery-item')) blockName = 'Carte Gallery';
                    else if (parentBlock.classList.contains('section')) blockName = 'Section';
                    else if (parentBlock.classList.contains('feature-card')) blockName = 'Carte Feature';
                }

                // Sauvegarder l'élément
                pageTextElements.push({
                    id: 'text-' + index,
                    element: el,
                    originalText: text,
                    currentText: text,
                    tagName: el.tagName.toLowerCase(),
                    blockName: blockName
                });

                // Ajouter l'évènement de clic
                el.addEventListener('click', function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    selectTextElement(el.dataset.textId);
                });
            });

            // Afficher la liste des textes dans le panneau
            updateTextsPanel();
        }

        function updateTextsPanel() {
            var container = document.getElementById('textsEditorContainer');

            if (pageTextElements.length === 0) {
                container.innerHTML = '<p style="color: rgba(255,255,255,0.5); text-align: center; padding: 20px;">Aucun texte modifiable trouvé</p>';
                return;
            }

            container.innerHTML = pageTextElements.map(function(item) {
                return '<div class="editor-field" style="margin-bottom: 20px;">' +
                    '<label style="display: flex; align-items: center; gap: 8px; margin-bottom: 8px;">' +
                        '<span style="background: rgba(255,68,68,0.2); padding: 3px 8px; border-radius: 4px; font-size: 0.75em;">' + item.blockName + '</span>' +
                        '<span style="background: rgba(255,255,255,0.1); padding: 3px 8px; border-radius: 4px; font-size: 0.75em;">' + item.tagName.toUpperCase() + '</span>' +
                    '</label>' +
                    '<div style="color: rgba(255,255,255,0.5); font-size: 0.85em; margin-bottom: 5px;">' + (item.currentText.substring(0, 50) + (item.currentText.length > 50 ? '...' : '')) + '</div>' +
                    '<textarea data-text-id="' + item.id + '" oninput="updateTextPreview(\'' + item.id + '\', this.value)" style="width: 100%; min-height: 80px; padding: 10px; background: rgba(255,255,255,0.08); border: 2px solid rgba(255,255,255,0.15); border-radius: 8px; color: white; font-size: 0.95em;">' + item.currentText + '</textarea>' +
                '</div>';
            }).join('');
        }

        function selectTextElement(textId) {
            // Retirer la sélection précédente
            if (selectedTextElement) {
                const prevEl = document.querySelector('[data-text-id="' + selectedTextElement + '"]');
                if (prevEl) prevEl.classList.remove('selected');
            }

            // Sélectionner le nouveau
            selectedTextElement = textId;
            const el = document.querySelector('[data-text-id="' + textId + '"]');
            if (el) {
                el.classList.add('selected');

                // Scroller vers le champ dans le panneau
                const field = document.querySelector('textarea[data-text-id="' + textId + '"]');
                if (field) {
                    field.focus();
                    field.scrollIntoView({ behavior: 'smooth', block: 'center' });
                }
            }

            // Changer vers l'onglet Textes si on n'y est pas
            switchVisualEditorTab('texts');
        }

        function updateTextPreview(textId, newText) {
            const textItem = pageTextElements.find(function(item) { return item.id === textId; });
            if (!textItem) return;

            textItem.currentText = newText;
            textItem.element.textContent = newText;
        }

        function applySocialLinksToPreview(container) {
            var config = JSON.parse(localStorage.getItem('alphamouv_config')) || {};
            const socialLinks = config.socialLinks || {};

            // Appliquer les liens aux éléments de la prévisualisation
            // Cette fonction peut être étendue pour cibler des éléments spécifiques
        }

        function switchVisualEditorTab(tabName) {
            // Désactiver tous les onglets et sections
            document.querySelectorAll('.visual-editor-tab').forEach(function(tab) {
                tab.classList.remove('active');
            });
            document.querySelectorAll('.editor-section').forEach(function(section) {
                section.classList.remove('active');
            });

            // Activer l'onglet et la section appropriés
            if (tabName === 'texts') {
                document.querySelectorAll('.visual-editor-tab')[0].classList.add('active');
                document.getElementById('textsSection').classList.add('active');
            } else if (tabName === 'links') {
                document.querySelectorAll('.visual-editor-tab')[1].classList.add('active');
                document.getElementById('linksSection').classList.add('active');
            }
        }

        function closeVisualPageEditor() {
            if (confirm('Fermer l\'éditeur sans enregistrer ?')) {
                document.getElementById('visualPageEditor').classList.remove('active');
                currentEditingPage = null;
                pageTextElements = [];
                selectedTextElement = null;
            }
        }

        function saveVisualPageChanges() {
            var config = JSON.parse(localStorage.getItem('alphamouv_config')) || {};

            // Sauvegarder les modifications de textes
            if (!config.pageTexts) config.pageTexts = {};
            if (!config.pageTexts[currentEditingPage.id]) config.pageTexts[currentEditingPage.id] = {};

            pageTextElements.forEach(function(item) {
                if (item.currentText !== item.originalText) {
                    config.pageTexts[currentEditingPage.id][item.id] = item.currentText;
                }
            });

            // Sauvegarder l'ordre des blocs avec leurs IDs réels
            if (!config.sectionOrder) config.sectionOrder = {};
            const homePreview = document.getElementById('home-preview');
            if (homePreview) {
                const sections = homePreview.querySelectorAll('[id^="section-"]');
                const sectionsOrder = [];

                sections.forEach(function(section) {
                    sectionsOrder.push(section.id);
                });

                config.sectionOrder = sectionsOrder;
                console.log('Ordre des sections sauvegardé:', sectionsOrder);
            }

            // Sauvegarder les liens sociaux
            config.socialLinks = {
                instagram: document.getElementById('instagramLink').value.trim(),
                youtube: document.getElementById('youtubeLink').value.trim(),
                x: document.getElementById('xLink').value.trim(),
                twitch: document.getElementById('twitchLink').value.trim(),
                tiktok: document.getElementById('tiktokLink').value.trim(),
                linkedin: document.getElementById('linkedinLink').value.trim(),
                facebook: document.getElementById('facebookLink').value.trim()
            };

            localStorage.setItem('alphamouv_config', JSON.stringify(config));

            addLog('success', 'Modifications enregistrées pour: ' + currentEditingPage.name);
            alert(' Modifications enregistrées !\n\nNote: Pour que les changements soient visibles sur la page réelle, il faut actualiser la page.');

            closeVisualPageEditor();
        }

        // ============ GESTION DES PAGES ============

        function loadPagesManager() {
            var config = JSON.parse(localStorage.getItem('alphamouv_config')) || {};
            const pages = config.pages || [
                { id: 'home', name: 'Page d\'accueil', file: 'page 2.html', icon: '🏠' },
                { id: 'shop', name: 'Boutique', file: 'boutique.html', icon: '🛒' }
            ];
            
            var container = document.getElementById('pagesList');
            container.innerHTML = pages.map(function(page) {
                return '<div class="page-item">' +
                    '<div class="page-item-info">' +
                        '<span class="page-icon">' + page.icon + '</span>' +
                        '<div>' +
                            '<h4>' + page.name + '</h4>' +
                            '<p>' + page.file + '</p>' +
                        '</div>' +
                    '</div>' +
                    '<div class="page-item-actions">' +
                        '<button style="background: #3b82f6; color: white; padding: 8px 15px; border: none; border-radius: 6px; cursor: pointer;" onclick="editPage(\'' + page.id + '\')">✏️ Éditer</button>' +
                        (page.id !== 'home' && page.id !== 'shop' ? 
                            '<button style="background: #ef4444; color: white; padding: 8px 15px; border: none; border-radius: 6px; cursor: pointer;" onclick="deletePage(\'' + page.id + '\')">🗑️</button>' : '') +
                    '</div>' +
                '</div>';
            }).join('');
        }

        function addNewPage() {
            document.getElementById('editorModalTitle').textContent = 'Créer une nouvelle page';
            document.getElementById('editorModalBody').innerHTML = 
                '<div class="editor-form-group">' +
                    '<label>Nom de la page</label>' +
                    '<input type="text" id="newPageName" placeholder="Ma nouvelle page">' +
                '</div>' +
                '<div class="editor-form-group">' +
                    '<label>Nom du fichier</label>' +
                    '<input type="text" id="newPageFile" placeholder="ma-page.html">' +
                '</div>' +
                '<div class="editor-form-group">' +
                    '<label>Icône (emoji)</label>' +
                    '<input type="text" id="newPageIcon" value="📄">' +
                '</div>';
            
            document.getElementById('editorSaveBtn').onclick = function() { saveNewPage(); };
            document.getElementById('editorModal').classList.add('active');
        }

        function saveNewPage() {
            const name = document.getElementById('newPageName').value.trim();
            const file = document.getElementById('newPageFile').value.trim();
            const icon = document.getElementById('newPageIcon').value.trim();
            
            if (!name || !file) {
                alert('Veuillez remplir tous les champs');
                return;
            }
            
            var config = JSON.parse(localStorage.getItem('alphamouv_config')) || {};
            if (!config.pages) {
                config.pages = [
                    { id: 'home', name: 'Page d\'accueil', file: 'page 2.html', icon: '🏠' },
                    { id: 'shop', name: 'Boutique', file: 'boutique.html', icon: '🛒' }
                ];
            }
            
            config.pages.push({
                id: 'page-' + Date.now(),
                name: name,
                file: file,
                icon: icon
            });
            
            localStorage.setItem('alphamouv_config', JSON.stringify(config));
            loadPagesManager();
            closeEditorModal();
            addLog('success', 'Page créée: ' + name);
            alert(' Page créée ! Note: Le fichier HTML doit être créé manuellement.');
        }

        // Export/Import configuration
        function exportSiteConfig() {
            var config = localStorage.getItem('alphamouv_config') || '{}';
            const images = localStorage.getItem('alphamouv_images') || '{}';
            
            const exportData = {
                config: JSON.parse(config),
                images: JSON.parse(images),
                exportDate: new Date().toISOString()
            };
            
            const blob = new Blob([JSON.stringify(exportData, null, 2)], { type: 'application/json' });
            const a = document.createElement('a');
            a.href = URL.createObjectURL(blob);
            a.download = 'alphamouv_config_' + new Date().toISOString().slice(0, 10) + '.json';
            a.click();
            
            addLog('success', 'Configuration exportée');
        }

        function importSiteConfig(event) {
            const file = event.target.files[0];
            if (!file) return;
            
            var reader = new FileReader();
            reader.onload = function(e) {
                try {
                    const data = JSON.parse(e.target.result);
                    
                    if (data.config) {
                        localStorage.setItem('alphamouv_config', JSON.stringify(data.config));
                    }
                    if (data.images) {
                        localStorage.setItem('alphamouv_images', JSON.stringify(data.images));
                    }
                    
                    addLog('success', 'Configuration importée');
                    alert(' Configuration importée avec succès ! La page va se recharger.');
                    location.reload();
                } catch (err) {
                    alert(' Erreur lors de l\'import: fichier invalide');
                }
            };
            reader.readAsText(file);
            event.target.value = '';
        }

        // Charger les paramètres admin
        function loadPagesSection() {
            // La section Pages est déjà dans le HTML avec le contenu statique
            // On pourrait charger dynamiquement la liste des pages ici si nécessaire
            console.log('Section Pages chargée');
        }

        function loadModerationSection() {
            // Charger tous les utilisateurs par défaut
            loadModerationUsers('all');
        }

        function loadAdminSettings() {
            const adminData = JSON.parse(localStorage.getItem('alphamouv_admin')) || {};
            const adminsList = document.getElementById('adminsList');
            
            if (adminData.admins && adminData.admins.length > 0) {
                adminsList.innerHTML = adminData.admins.map(function(email) {
                    return '<div style="display: flex; justify-content: space-between; align-items: center; padding: 10px; background: rgba(255,255,255,0.05); border-radius: 8px; margin-bottom: 8px;">' +
                        '<span>' + email + '</span>' +
                        '<button onclick="removeAdmin(\'' + email + '\')" style="background: #ff4444; border: none; color: white; padding: 5px 10px; border-radius: 5px; cursor: pointer;">Retirer</button>' +
                    '</div>';
                }).join('');
            } else {
                adminsList.innerHTML = '<p>Aucun administrateur configuré</p>';
            }
        }

        // Changer le mot de passe admin
        function changeAdminPassword() {
            const newPass = document.getElementById('newAdminPassword').value;
            const confirmPass = document.getElementById('confirmAdminPassword').value;
            
            if (!newPass || newPass.length < 6) {
                alert('Le mot de passe doit contenir au moins 6 caractères');
                return;
            }
            
            if (newPass !== confirmPass) {
                alert('Les mots de passe ne correspondent pas');
                return;
            }
            
            const adminData = JSON.parse(localStorage.getItem('alphamouv_admin')) || {};
            adminData.password = newPass;
            localStorage.setItem('alphamouv_admin', JSON.stringify(adminData));
            
            document.getElementById('newAdminPassword').value = '';
            document.getElementById('confirmAdminPassword').value = '';
            
            addLog('warning', 'Mot de passe admin modifié');
            alert(' Mot de passe admin modifié avec succès !');
        }

        // Ajouter un admin
        function addAdmin() {
            const email = document.getElementById('newAdminEmail').value.trim();
            
            if (!email || !email.includes('@')) {
                alert('Veuillez entrer un email valide');
                return;
            }
            
            const adminData = JSON.parse(localStorage.getItem('alphamouv_admin')) || { admins: [] };
            
            if (!adminData.admins.includes(email)) {
                adminData.admins.push(email);
                localStorage.setItem('alphamouv_admin', JSON.stringify(adminData));
                document.getElementById('newAdminEmail').value = '';
                loadAdminSettings();
                addLog('success', 'Nouvel admin ajouté: ' + email);
                alert(' ' + email + ' a été ajouté comme administrateur');
            } else {
                alert('Cet email est déjà administrateur');
            }
        }

        // Retirer un admin
        function removeAdmin(email) {
            if (!confirm('Retirer ' + email + ' des administrateurs ?')) return;
            
            const adminData = JSON.parse(localStorage.getItem('alphamouv_admin')) || { admins: [] };
            adminData.admins = adminData.admins.filter(function(e) { return e !== email; });
            localStorage.setItem('alphamouv_admin', JSON.stringify(adminData));
            loadAdminSettings();
            checkAdminStatus();
            addLog('warning', 'Admin retiré: ' + email);
        }

        // ============ MODÉRATION DES UTILISATEURS ============

        // Charger les utilisateurs pour la modération
        async function loadModerationUsers(filter) {
            var container = document.getElementById('moderationUsersList');

            try {
                const users = await AlphaMovAPI.Users.getAll();

                var html = '';
                let userCount = 0;

                users.forEach(user => {
                    const isAdmin = user.role === 'admin';

                    userCount++;

                    html += '<div class="moderation-user-card">';
                    html += '<div class="moderation-user-info">';
                    html += '<h4>' + (user.prenom || '') + ' ' + (user.nom || user.email) + '</h4>';
                    html += '<p>' + user.email + '</p>';

                    html += '<div class="moderation-user-badges">';
                    if (isAdmin) {
                        html += '<span class="moderation-badge admin">⚡ Administrateur</span>';
                    } else {
                        html += '<span class="moderation-badge active">✅ Actif</span>';
                    }
                    html += '</div>';

                    html += '</div>';

                    html += '<div class="moderation-user-actions">';
                    html += '<button class="moderation-action-btn delete" onclick="deleteUser(' + user.id + ')">🗑️ Supprimer</button>';
                    html += '</div>';

                    html += '</div>';
                });

                if (userCount === 0) {
                    html = '<div style="text-align: center; padding: 40px; color: rgba(255,255,255,0.6);">';
                    html += '<p style="font-size: 1.2em; margin: 0;">Aucun utilisateur trouvé</p>';
                    html += '</div>';
                }

                container.innerHTML = html;
            } catch (error) {
                console.error('Erreur chargement utilisateurs:', error);
                container.innerHTML = '<p style="color: #f87171; text-align: center;">Erreur lors du chargement des utilisateurs</p>';
            }
        }

        // Bannir un utilisateur
        function banUser(email) {
            if (!confirm('Bannir l\'utilisateur ' + email + ' ?\n\nCet utilisateur ne pourra plus se connecter.')) {
                return;
            }

            let bannedUsers = JSON.parse(localStorage.getItem('alphamouv_banned_users')) || [];

            if (!bannedUsers.includes(email)) {
                bannedUsers.push(email);
                localStorage.setItem('alphamouv_banned_users', JSON.stringify(bannedUsers));

                addLog('warning', 'Utilisateur banni: ' + email);
                alert(' L\'utilisateur ' + email + ' a été banni.');

                // Recharger la liste
                loadModerationUsers('all');
            } else {
                alert('Cet utilisateur est déjà banni.');
            }
        }

        // Débannir un utilisateur
        function unbanUser(email) {
            if (!confirm('Débannir l\'utilisateur ' + email + ' ?')) {
                return;
            }

            let bannedUsers = JSON.parse(localStorage.getItem('alphamouv_banned_users')) || [];
            bannedUsers = bannedUsers.filter(function(e) { return e !== email; });
            localStorage.setItem('alphamouv_banned_users', JSON.stringify(bannedUsers));

            addLog('success', 'Utilisateur débanni: ' + email);
            alert(' L\'utilisateur ' + email + ' a été débanni.');

            // Recharger la liste
            loadModerationUsers('all');
        }

        // Supprimer un utilisateur (modération) - utilise deleteUser défini plus haut
        // Cette fonction est remplacée par la version API dans loadUsersSection

        // Vérifier si l'utilisateur est banni lors de la connexion
        function checkUserBanned(email) {
            const bannedUsers = JSON.parse(localStorage.getItem('alphamouv_banned_users')) || [];
            return bannedUsers.includes(email);
        }

        // ============ GESTION DES POP-UPS DE CADRES ============

        // Données par défaut des cadres
        const defaultCardsData = {
            'card1': {
                title: 'Art Vestimentaire',
                text: '<h3>L\'Art sur le Tissu</h3><p>L\'art vestimentaire est ma passion première. Chaque vêtement devient une toile sur laquelle j\'exprime ma créativité. Je transforme des pièces ordinaires en œuvres d\'art uniques qui racontent une histoire.</p><p>Ma technique combine plusieurs approches : peinture acrylique, marqueurs textiles, broderie et customisation. Le résultat ? Des pièces que vous ne trouverez nulle part ailleurs.</p>',
                imageMode: 'carousel',
                images: [],
                imageLayout: 'layout-2'
            },
            'card2': {
                title: 'Techniques Mixtes',
                text: '<h3>Un Mélange Unique</h3><p>Je combine plusieurs techniques artistiques pour créer des résultats uniques :</p><ul><li><strong>Peinture acrylique</strong> - Pour les détails et les couleurs vibrantes</li><li><strong>Marqueurs textiles</strong> - Pour les lignes précises</li><li><strong>Broderie</strong> - Pour ajouter de la texture</li><li><strong>Collage</strong> - Pour intégrer différents éléments</li></ul>',
                imageMode: 'fixed',
                images: [],
                imageLayout: 'layout-2'
            },
            'card3': {
                title: 'Collections Limitées',
                text: '<h3>L\'Exclusivité Avant Tout</h3><p>Chaque création est produite en édition très limitée, parfois même en exemplaire unique. Cette approche garantit l\'exclusivité de chaque pièce.</p><p>Quand vous portez une de mes créations, vous portez une œuvre d\'art unique que personne d\'autre ne possède.</p>',
                imageMode: 'fixed',
                images: [],
                imageLayout: 'layout-1'
            },
            'card4': {
                title: 'Expression Personnelle',
                text: '<h3>L\'Art Comme Langage</h3><p>Pour moi, l\'art est un moyen d\'expression quand les mots ne suffisent plus. Chaque création porte une partie de mon vécu, de mes émotions, de mon parcours.</p><p>À travers mes œuvres, je partage mon histoire de manière visuelle et tangible.</p>',
                imageMode: 'fixed',
                images: [],
                imageLayout: 'layout-2'
            },
            'card5': {
                title: 'Symbolisme',
                text: '<h3>Des Symboles Qui Parlent</h3><p>Chaque élément de mes créations est choisi avec soin. Les couleurs, les motifs, les formes - tout a une signification.</p><p>Je vous invite à découvrir les histoires cachées derrière chaque œuvre.</p>',
                imageMode: 'fixed',
                images: [],
                imageLayout: 'layout-3'
            },
            'card6': {
                title: 'Évolution Artistique',
                text: '<h3>Un Parcours En Constante Évolution</h3><p>Mon style artistique évolue avec moi. Chaque nouvelle création reflète où j\'en suis dans ma vie, ce que j\'ai appris, ce que j\'ai traversé.</p><p>Cette évolution constante rend chaque période de ma création unique.</p>',
                imageMode: 'carousel',
                images: [],
                imageLayout: 'layout-1'
            },
            'card7': {
                title: 'Mon Parcours',
                text: '<h3>D\'Où Je Viens</h3><p>Mon parcours artistique a commencé il y a plusieurs années, né d\'un besoin de m\'exprimer autrement. Ce qui a commencé comme un hobby est devenu une véritable passion.</p>',
                imageMode: 'fixed',
                images: [],
                imageLayout: 'layout-2'
            },
            'card8': {
                title: 'Résilience',
                text: '<h3>La Force Dans L\'Adversité</h3><p>Les épreuves de la vie m\'ont forgé. Plutôt que de me laisser abattre, j\'ai transformé chaque difficulté en source d\'inspiration.</p>',
                imageMode: 'fixed',
                images: [],
                imageLayout: 'layout-1'
            },
            'card9': {
                title: 'Vision Future',
                text: '<h3>Vers L\'Avenir</h3><p>Mon objectif est de continuer à créer, à innover, à repousser les limites de ma créativité. Je rêve de partager mon art avec le monde entier.</p>',
                imageMode: 'fixed',
                images: [],
                imageLayout: 'layout-2'
            },
            'event1': {
                title: 'Évènements à Venir',
                text: '<h3>Restez Informés</h3><p>Je participe régulièrement à des évènements, expositions et marchés créatifs. Suivez-moi pour ne rien manquer !</p>',
                imageMode: 'fixed',
                images: [],
                imageLayout: 'layout-1'
            },
            'event2': {
                title: 'Expositions',
                text: '<h3>Mes Expositions</h3><p>Découvrez mes créations en personne lors de mes expositions. C\'est l\'occasion de voir le travail de près et d\'échanger directement avec moi.</p>',
                imageMode: 'carousel',
                images: [],
                imageLayout: 'layout-2'
            },
            'event3': {
                title: 'Ateliers',
                text: '<h3>Apprenez Avec Moi</h3><p>Je propose des ateliers pour partager mes techniques. Venez découvrir les secrets de la customisation textile !</p>',
                imageMode: 'fixed',
                images: [],
                imageLayout: 'layout-2'
            }
        };

        let currentPopupCardId = null;
        let popupCarouselIndex = 0;

        // Obtenir les données d'un cadre
        function getCardData(cardId) {
            var config = JSON.parse(localStorage.getItem('alphamouv_config')) || {};
            const cardsData = config.cardsData || {};
            return cardsData[cardId] || defaultCardsData[cardId] || {
                title: 'Titre',
                text: '<p>Contenu à définir</p>',
                imageMode: 'fixed',
                images: [],
                imageLayout: 'layout-1'
            };
        }

        // Ouvrir le pop-up d'un cadre
        function openCardPopup(cardId) {
            currentPopupCardId = cardId;
            popupCarouselIndex = 0;
            
            var cardData = getCardData(cardId);
            const cardElement = document.getElementById(cardId);

            // Si pas de données personnalisées, utiliser le titre du cadre
            let title = cardData.title;

            if (cardElement && !defaultCardsData[cardId]?.title) {
                const h3 = cardElement.querySelector('h3');
                if (h3) title = h3.textContent;
            }

            document.getElementById('cardPopupTitleText').textContent = title;
            
            // Construire le contenu
            let contentHTML = '';
            
            // Images
            if (cardData.images && cardData.images.length > 0) {
                if (cardData.imageMode === 'carousel') {
                    contentHTML += buildPopupCarousel(cardData.images);
                } else {
                    contentHTML += buildPopupImagesGrid(cardData.images, cardData.imageLayout);
                }
            }
            
            // Texte
            contentHTML += '<div class="popup-text-content">' + cardData.text + '</div>';
            
            document.getElementById('cardPopupContent').innerHTML = contentHTML;
            
            // Afficher le pop-up
            document.getElementById('cardPopupOverlay').classList.add('active');
            document.body.style.overflow = 'hidden';
            
            addLog('info', 'Pop-up ouvert: ' + title);
        }

        // Construire le carrousel du pop-up
        function buildPopupCarousel(images) {
            if (images.length === 0) return '';
            
            var html = '<div class="popup-carousel">';
            html += '<div class="popup-carousel-track" id="popupCarouselTrack">';
            
            images.forEach(function(img, index) {
                html += '<div class="popup-carousel-slide">';
                html += '<img src="' + img + '" alt="Image ' + (index + 1) + '">';
                html += '</div>';
            });
            
            html += '</div>';
            
            if (images.length > 1) {
                html += '<div class="popup-carousel-controls">';
                html += '<button class="popup-carousel-btn" onclick="popupCarouselPrev()">❮</button>';
                html += '<button class="popup-carousel-btn" onclick="popupCarouselNext()">❯</button>';
                html += '</div>';
                
                html += '<div class="popup-carousel-indicators">';
                images.forEach(function(_, index) {
                    html += '<button class="popup-carousel-dot' + (index === 0 ? ' active' : '') + '" onclick="popupCarouselGoTo(' + index + ')"></button>';
                });
                html += '</div>';
            }
            
            html += '</div>';
            return html;
        }

        // Construire la grille d'images fixes
        function buildPopupImagesGrid(images, layout) {
            if (images.length === 0) return '';
            
            var html = '<div class="popup-images-grid ' + (layout || 'layout-2') + '">';
            
            images.forEach(function(img, index) {
                html += '<div class="popup-image-item">';
                html += '<img src="' + img + '" alt="Image ' + (index + 1) + '">';
                html += '</div>';
            });
            
            html += '</div>';
            return html;
        }

        // Navigation du carrousel popup
        function popupCarouselPrev() {
            var cardData = getCardData(currentPopupCardId);
            const total = cardData.images.length;
            popupCarouselIndex = (popupCarouselIndex - 1 + total) % total;
            updatePopupCarousel();
        }

        function popupCarouselNext() {
            var cardData = getCardData(currentPopupCardId);
            const total = cardData.images.length;
            popupCarouselIndex = (popupCarouselIndex + 1) % total;
            updatePopupCarousel();
        }

        function popupCarouselGoTo(index) {
            popupCarouselIndex = index;
            updatePopupCarousel();
        }

        function updatePopupCarousel() {
            const track = document.getElementById('popupCarouselTrack');
            if (track) {
                track.style.transform = 'translateX(-' + (popupCarouselIndex * 100) + '%)';
            }
            
            // Mettre à jour les indicateurs
            document.querySelectorAll('.popup-carousel-dot').forEach(function(dot, index) {
                dot.classList.toggle('active', index === popupCarouselIndex);
            });
        }

        // Fermer le pop-up
        function closeCardPopup(event) {
            if (event && event.target !== event.currentTarget) return;
            
            document.getElementById('cardPopupOverlay').classList.remove('active');
            document.body.style.overflow = '';
            currentPopupCardId = null;
        }

        // Fermer avec Escape
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                const popupOverlay = document.getElementById('cardPopupOverlay');
                if (popupOverlay && popupOverlay.classList.contains('active')) {
                    closeCardPopup();
                }
            }
        });

        // ============ ÉDITEUR DE POP-UP DANS L'ADMIN ============

        // Charger la liste des cadres dans l'admin
        function loadCardsEditor() {
            var container = document.getElementById('cardsEditorContainer');
            if (!container) return;
            
            const allCards = Object.keys(defaultCardsData);
            
            var html = '';
            allCards.forEach(function(cardId) {
                var cardData = getCardData(cardId);
                html += '<div class="section-editor">';
                html += '<div class="section-editor-header">';
                html += '<h4>' + cardData.title + '</h4>';
                html += '<div class="section-editor-controls">';
                html += '<button class="btn-edit-section" onclick="openCardEditor(\'' + cardId + '\')">✏️ Éditer le contenu</button>';
                html += '</div>';
                html += '</div>';
                html += '</div>';
            });
            
            container.innerHTML = html;
        }

        // Ouvrir l'éditeur de cadre
        function openCardEditor(cardId) {
            currentPopupCardId = cardId;
            var cardData = getCardData(cardId);
            
            document.getElementById('editorModalTitle').textContent = 'Éditer: ' + cardData.title;
            
            var html = '';
            
            // Titre et icône
            html += '<div class="popup-editor-section">';
            html += '<h4>📝 Informations de base</h4>';
            html += '<div class="editor-form-group">';
            html += '<label>Titre</label>';
            html += '<input type="text" id="cardEditorTitle" value="' + (cardData.title || '') + '">';
            html += '</div>';
            html += '</div>';

            // Éditeur de texte
            html += '<div class="popup-editor-section">';
            html += '<h4>✍️ Contenu texte</h4>';
            html += '<div class="text-editor-toolbar">';
            html += '<button onclick="formatText(\'bold\')" title="Gras"><b>G</b></button>';
            html += '<button onclick="formatText(\'italic\')" title="Italique"><i>I</i></button>';
            html += '<button onclick="formatText(\'underline\')" title="Souligné"><u>S</u></button>';
            html += '<select onchange="formatHeading(this.value)">';
            html += '<option value="">Paragraphe</option>';
            html += '<option value="h3">Titre</option>';
            html += '<option value="h4">Sous-titre</option>';
            html += '</select>';
            html += '<button onclick="formatText(\'insertUnorderedList\')" title="Liste">• Liste</button>';
            html += '<select onchange="changeFontFamily(this.value)">';
            html += '<option value="">Police par défaut</option>';
            html += '<option value="Arial">Arial</option>';
            html += '<option value="Georgia">Georgia</option>';
            html += '<option value="Courier New">Courier New</option>';
            html += '<option value="Oswald">Oswald</option>';
            html += '<option value="Montserrat">Montserrat</option>';
            html += '</select>';
            html += '<select onchange="changeFontSize(this.value)">';
            html += '<option value="">Taille</option>';
            html += '<option value="1">Petit</option>';
            html += '<option value="3">Normal</option>';
            html += '<option value="5">Grand</option>';
            html += '<option value="7">Très grand</option>';
            html += '</select>';
            html += '</div>';
            html += '<div class="rich-text-editor" id="cardEditorText" contenteditable="true">' + (cardData.text || '') + '</div>';
            html += '</div>';
            
            // Mode d'affichage des images
            html += '<div class="popup-editor-section">';
            html += '<h4>🖼️ Images</h4>';
            html += '<div class="editor-form-group">';
            html += '<label>Mode d\'affichage</label>';
            html += '<select id="cardEditorImageMode" onchange="toggleImageLayoutOptions()">';
            html += '<option value="fixed"' + (cardData.imageMode !== 'carousel' ? ' selected' : '') + '>Images fixes</option>';
            html += '<option value="carousel"' + (cardData.imageMode === 'carousel' ? ' selected' : '') + '>Carrousel</option>';
            html += '</select>';
            html += '</div>';
            
            // Layout pour images fixes
            html += '<div id="imageLayoutOptions" style="' + (cardData.imageMode === 'carousel' ? 'display:none' : '') + '">';
            html += '<label>Disposition des images</label>';
            html += '<div class="image-layout-selector">';
            html += '<div class="layout-option' + (cardData.imageLayout === 'layout-1' ? ' selected' : '') + '" onclick="selectImageLayout(\'layout-1\')" data-layout="layout-1">';
            html += '<div class="layout-box" style="width:80%;height:50px;"></div>';
            html += '</div>';
            html += '<div class="layout-option' + (cardData.imageLayout === 'layout-2' || !cardData.imageLayout ? ' selected' : '') + '" onclick="selectImageLayout(\'layout-2\')" data-layout="layout-2">';
            html += '<div class="layout-box" style="width:35px;height:40px;"></div>';
            html += '<div class="layout-box" style="width:35px;height:40px;"></div>';
            html += '</div>';
            html += '<div class="layout-option' + (cardData.imageLayout === 'layout-3' ? ' selected' : '') + '" onclick="selectImageLayout(\'layout-3\')" data-layout="layout-3">';
            html += '<div class="layout-box" style="width:25px;height:40px;"></div>';
            html += '<div class="layout-box" style="width:25px;height:40px;"></div>';
            html += '<div class="layout-box" style="width:25px;height:40px;"></div>';
            html += '</div>';
            html += '<div class="layout-option' + (cardData.imageLayout === 'layout-2-1' ? ' selected' : '') + '" onclick="selectImageLayout(\'layout-2-1\')" data-layout="layout-2-1">';
            html += '<div class="layout-box" style="width:50px;height:40px;"></div>';
            html += '<div class="layout-box" style="width:25px;height:40px;"></div>';
            html += '</div>';
            html += '</div>';
            html += '</div>';
            
            // Images
            html += '<div class="popup-images-manager" id="cardImagesManager">';
            if (cardData.images && cardData.images.length > 0) {
                cardData.images.forEach(function(img, index) {
                    html += '<div class="popup-image-preview">';
                    html += '<img src="' + img + '">';
                    html += '<button class="remove-btn" onclick="removeCardImage(' + index + ')">×</button>';
                    html += '</div>';
                });
            }
            html += '<div class="popup-image-upload" onclick="addCardImage()">';
            html += '<span>➕</span>';
            html += '<small>Ajouter</small>';
            html += '</div>';
            html += '</div>';
            html += '<input type="file" id="cardImageInput" style="display:none" accept="image/*" onchange="handleCardImageUpload(event)">';
            html += '</div>';
            
            document.getElementById('editorModalBody').innerHTML = html;
            document.getElementById('editorSaveBtn').onclick = function() { saveCardEditor(); };
            document.getElementById('editorModal').classList.add('active');
        }

        // Fonctions de formatage de texte
        function formatText(command) {
            document.execCommand(command, false, null);
            document.getElementById('cardEditorText').focus();
        }

        function formatHeading(tag) {
            if (tag) {
                document.execCommand('formatBlock', false, tag);
            } else {
                document.execCommand('formatBlock', false, 'p');
            }
            document.getElementById('cardEditorText').focus();
        }

        function changeFontFamily(font) {
            if (font) {
                document.execCommand('fontName', false, font);
            }
            document.getElementById('cardEditorText').focus();
        }

        function changeFontSize(size) {
            if (size) {
                document.execCommand('fontSize', false, size);
            }
            document.getElementById('cardEditorText').focus();
        }

        // Toggle options de layout
        function toggleImageLayoutOptions() {
            const mode = document.getElementById('cardEditorImageMode').value;
            const options = document.getElementById('imageLayoutOptions');
            options.style.display = mode === 'carousel' ? 'none' : '';
        }

        // Sélectionner un layout
        let selectedImageLayout = 'layout-2';
        function selectImageLayout(layout) {
            selectedImageLayout = layout;
            document.querySelectorAll('.layout-option').forEach(function(opt) {
                opt.classList.toggle('selected', opt.dataset.layout === layout);
            });
        }

        // Ajouter une image au cadre
        function addCardImage() {
            document.getElementById('cardImageInput').click();
        }

        function handleCardImageUpload(event) {
            const file = event.target.files[0];
            if (!file) return;
            
            var reader = new FileReader();
            reader.onload = function(e) {
                var config = JSON.parse(localStorage.getItem('alphamouv_config')) || {};
                if (!config.cardsData) config.cardsData = {};
                if (!config.cardsData[currentPopupCardId]) {
                    config.cardsData[currentPopupCardId] = { ...getCardData(currentPopupCardId) };
                }
                if (!config.cardsData[currentPopupCardId].images) {
                    config.cardsData[currentPopupCardId].images = [];
                }
                config.cardsData[currentPopupCardId].images.push(e.target.result);
                localStorage.setItem('alphamouv_config', JSON.stringify(config));
                
                // Rafraîchir l'affichage
                openCardEditor(currentPopupCardId);
            };
            reader.readAsDataURL(file);
            event.target.value = '';
        }

        // Supprimer une image du cadre
        function removeCardImage(index) {
            var config = JSON.parse(localStorage.getItem('alphamouv_config')) || {};
            if (config.cardsData && config.cardsData[currentPopupCardId] && config.cardsData[currentPopupCardId].images) {
                config.cardsData[currentPopupCardId].images.splice(index, 1);
                localStorage.setItem('alphamouv_config', JSON.stringify(config));
                openCardEditor(currentPopupCardId);
            }
        }

        // Sauvegarder l'éditeur de cadre
        function saveCardEditor() {
            var config = JSON.parse(localStorage.getItem('alphamouv_config')) || {};
            if (!config.cardsData) config.cardsData = {};
            
            const existingData = config.cardsData[currentPopupCardId] || getCardData(currentPopupCardId);
            
            config.cardsData[currentPopupCardId] = {
                title: document.getElementById('cardEditorTitle').value,
                text: document.getElementById('cardEditorText').innerHTML,
                imageMode: document.getElementById('cardEditorImageMode').value,
                images: existingData.images || [],
                imageLayout: selectedImageLayout
            };
            
            localStorage.setItem('alphamouv_config', JSON.stringify(config));
            
            closeEditorModal();
            addLog('success', 'Cadre modifié: ' + config.cardsData[currentPopupCardId].title);
            alert(' Cadre mis à jour avec succès !');
        }

        // Charger les images du carrousel depuis IndexedDB au démarrage
        async function loadCarouselImagesFromDB() {
            try {
                const images = await ImageDB.getAllCarouselImages();
                const slides = document.querySelectorAll('.carousel-slide');
                images.forEach((imageData, index) => {
                    if (imageData && slides[index]) {
                        slides[index].innerHTML = '<img src="' + imageData + '" alt="Slide ' + (index + 1) + '" style="width: 100%; height: 100%; object-fit: cover;">';
                    }
                });
                console.log('✓ Images carrousel chargées depuis IndexedDB');
            } catch (error) {
                console.error('Erreur chargement carrousel:', error);
            }
        }

        // Initialiser le système admin au chargement
        window.addEventListener('DOMContentLoaded', async function() {
            await initAdminSystem();
            await loadCarouselImagesFromDB();
            loadSavedAppearance();
        });

        // Mettre à jour le statut admin quand l'utilisateur change
        const originalInitUserInterface = initUserInterface;
        initUserInterface = function() {
            originalInitUserInterface();
            checkAdminStatus();
        };

        // ===== GESTION DE L'ÉDITION DES ÉVÉNEMENTS =====

        // Fonction pour éditer un événement (admin uniquement)
        function editEventIfAdmin(element) {
            // Vérifier si l'utilisateur est admin
            if (!isAdmin) {
                return; // Ne rien faire si pas admin (silencieux)
            }

            const eventId = element.dataset.eventId;
            const currentData = {
                title: element.querySelector('.event-title').textContent,
                location: element.querySelector('.event-location').textContent.replace('📍 ', ''),
                description: element.querySelector('.event-description').textContent,
                status: element.querySelector('.event-status').textContent,
                date: element.querySelector('.event-date').textContent
            };

            // Créer le modal d'édition
            const modal = document.createElement('div');
            modal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0, 0, 0, 0.8);
                backdrop-filter: blur(10px);
                z-index: 10000;
                display: flex;
                align-items: center;
                justify-content: center;
                animation: fadeIn 0.3s ease;
            `;

            modal.innerHTML = `
                <div style="
                    background: linear-gradient(135deg, rgba(30, 58, 138, 0.95), rgba(37, 99, 235, 0.85));
                    backdrop-filter: blur(25px) saturate(180%);
                    border-radius: 30px;
                    padding: 40px;
                    max-width: 600px;
                    width: 90%;
                    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5), 0 0 0 2px rgba(221, 172, 11, 0.3) inset;
                    border: 2px solid rgba(221, 172, 11, 0.4);
                    animation: slideUp 0.4s cubic-bezier(0.16, 1, 0.3, 1);
                ">
                    <h2 style="color: #ddac0b; margin-bottom: 30px; font-size: 1.8em; text-align: center;">
                        ✏️ Modifier l'événement
                    </h2>

                    <div style="margin-bottom: 20px;">
                        <label style="display: block; color: rgba(255, 255, 255, 0.9); margin-bottom: 8px; font-weight: 600;">
                            Titre de l'événement
                        </label>
                        <input type="text" id="eventTitle" value="${currentData.title}" style="
                            width: 100%;
                            padding: 12px 15px;
                            background: rgba(0, 0, 0, 0.3);
                            border: 2px solid rgba(221, 172, 11, 0.3);
                            border-radius: 10px;
                            color: white;
                            font-size: 1em;
                            transition: all 0.3s ease;
                        " onfocus="this.style.borderColor='rgba(221, 172, 11, 0.6)'" onblur="this.style.borderColor='rgba(221, 172, 11, 0.3)'">
                    </div>

                    <div style="margin-bottom: 20px;">
                        <label style="display: block; color: rgba(255, 255, 255, 0.9); margin-bottom: 8px; font-weight: 600;">
                            Lieu
                        </label>
                        <input type="text" id="eventLocation" value="${currentData.location}" style="
                            width: 100%;
                            padding: 12px 15px;
                            background: rgba(0, 0, 0, 0.3);
                            border: 2px solid rgba(221, 172, 11, 0.3);
                            border-radius: 10px;
                            color: white;
                            font-size: 1em;
                            transition: all 0.3s ease;
                        " onfocus="this.style.borderColor='rgba(221, 172, 11, 0.6)'" onblur="this.style.borderColor='rgba(221, 172, 11, 0.3)'">
                    </div>

                    <div style="margin-bottom: 20px;">
                        <label style="display: block; color: rgba(255, 255, 255, 0.9); margin-bottom: 8px; font-weight: 600;">
                            Description
                        </label>
                        <textarea id="eventDescription" rows="3" style="
                            width: 100%;
                            padding: 12px 15px;
                            background: rgba(0, 0, 0, 0.3);
                            border: 2px solid rgba(221, 172, 11, 0.3);
                            border-radius: 10px;
                            color: white;
                            font-size: 1em;
                            resize: vertical;
                            transition: all 0.3s ease;
                        " onfocus="this.style.borderColor='rgba(221, 172, 11, 0.6)'" onblur="this.style.borderColor='rgba(221, 172, 11, 0.3)'">${currentData.description}</textarea>
                    </div>

                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 30px;">
                        <div>
                            <label style="display: block; color: rgba(255, 255, 255, 0.9); margin-bottom: 8px; font-weight: 600;">
                                Statut
                            </label>
                            <input type="text" id="eventStatus" value="${currentData.status}" style="
                                width: 100%;
                                padding: 12px 15px;
                                background: rgba(0, 0, 0, 0.3);
                                border: 2px solid rgba(221, 172, 11, 0.3);
                                border-radius: 10px;
                                color: white;
                                font-size: 1em;
                                transition: all 0.3s ease;
                            " onfocus="this.style.borderColor='rgba(221, 172, 11, 0.6)'" onblur="this.style.borderColor='rgba(221, 172, 11, 0.3)'">
                        </div>

                        <div>
                            <label style="display: block; color: rgba(255, 255, 255, 0.9); margin-bottom: 8px; font-weight: 600;">
                                Date
                            </label>
                            <input type="text" id="eventDate" value="${currentData.date}" style="
                                width: 100%;
                                padding: 12px 15px;
                                background: rgba(0, 0, 0, 0.3);
                                border: 2px solid rgba(221, 172, 11, 0.3);
                                border-radius: 10px;
                                color: white;
                                font-size: 1em;
                                transition: all 0.3s ease;
                            " onfocus="this.style.borderColor='rgba(221, 172, 11, 0.6)'" onblur="this.style.borderColor='rgba(221, 172, 11, 0.3)'">
                        </div>
                    </div>

                    <div style="display: flex; gap: 15px; justify-content: flex-end;">
                        <button onclick="closeEventEditor()" style="
                            padding: 12px 30px;
                            background: rgba(255, 255, 255, 0.1);
                            border: 2px solid rgba(255, 255, 255, 0.3);
                            border-radius: 12px;
                            color: white;
                            font-size: 1em;
                            font-weight: 600;
                            cursor: pointer;
                            transition: all 0.3s ease;
                        " onmouseover="this.style.background='rgba(255, 255, 255, 0.2)'" onmouseout="this.style.background='rgba(255, 255, 255, 0.1)'">
                            Annuler
                        </button>

                        <button onclick="saveEvent('${eventId}')" style="
                            padding: 12px 30px;
                            background: linear-gradient(135deg, #ddac0b, #c4d10c);
                            border: 2px solid rgba(255, 255, 255, 0.3);
                            border-radius: 12px;
                            color: #000;
                            font-size: 1em;
                            font-weight: 700;
                            cursor: pointer;
                            box-shadow: 0 4px 15px rgba(221, 172, 11, 0.4);
                            transition: all 0.3s ease;
                        " onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 6px 20px rgba(221, 172, 11, 0.6)'" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 15px rgba(221, 172, 11, 0.4)'">
                            💾 Sauvegarder
                        </button>
                    </div>
                </div>
            `;

            document.body.appendChild(modal);
        }

        // Fonction pour fermer le modal d'édition
        function closeEventEditor() {
            const modal = document.querySelector('[style*="z-index: 10000"]');
            if (modal) {
                modal.style.animation = 'fadeOut 0.3s ease';
                setTimeout(() => modal.remove(), 300);
            }
        }

        // Fonction pour sauvegarder l'événement modifié
        function saveEvent(eventId) {
            const newData = {
                title: document.getElementById('eventTitle').value,
                location: document.getElementById('eventLocation').value,
                description: document.getElementById('eventDescription').value,
                status: document.getElementById('eventStatus').value,
                date: document.getElementById('eventDate').value
            };

            // Sauvegarder dans localStorage
            var config = JSON.parse(localStorage.getItem('alphamouv_config')) || {};
            if (!config.events) config.events = {};
            config.events[eventId] = newData;
            localStorage.setItem('alphamouv_config', JSON.stringify(config));

            // Mettre à jour le DOM
            const eventElement = document.querySelector(`[data-event-id="${eventId}"]`);
            if (eventElement) {
                eventElement.querySelector('.event-title').textContent = newData.title;
                eventElement.querySelector('.event-location').textContent = '📍 ' + newData.location;
                eventElement.querySelector('.event-description').textContent = newData.description;
                eventElement.querySelector('.event-status').textContent = newData.status;
                eventElement.querySelector('.event-date').textContent = newData.date;
            }

            // Log et notification
            addLog('success', 'Événement modifié: ' + newData.title);

            // Fermer le modal
            closeEventEditor();

            // Afficher une notification de succès
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: linear-gradient(135deg, #ddac0b, #c4d10c);
                color: #000;
                padding: 20px 30px;
                border-radius: 15px;
                box-shadow: 0 10px 30px rgba(221, 172, 11, 0.5);
                font-weight: 700;
                z-index: 10001;
                animation: slideInRight 0.4s ease;
            `;
            notification.textContent = '✅ Événement mis à jour avec succès !';
            document.body.appendChild(notification);

            setTimeout(() => {
                notification.style.animation = 'fadeOut 0.3s ease';
                setTimeout(() => notification.remove(), 300);
            }, 3000);
        }

        // Charger les événements sauvegardés au démarrage
        function loadSavedEvents() {
            var config = JSON.parse(localStorage.getItem('alphamouv_config')) || {};
            if (config.events) {
                Object.keys(config.events).forEach(eventId => {
                    const eventElement = document.querySelector(`[data-event-id="${eventId}"]`);
                    const eventData = config.events[eventId];
                    if (eventElement && eventData) {
                        eventElement.querySelector('.event-title').textContent = eventData.title;
                        eventElement.querySelector('.event-location').textContent = '📍 ' + eventData.location;
                        eventElement.querySelector('.event-description').textContent = eventData.description;
                        eventElement.querySelector('.event-status').textContent = eventData.status;
                        eventElement.querySelector('.event-date').textContent = eventData.date;
                    }
                });
            }
        }

        // Ajouter l'indicateur visuel pour les événements éditables (admin uniquement)
        function updateEventEditability() {
            const eventItems = document.querySelectorAll('.event-item');

            eventItems.forEach(item => {
                // Supprimer tous les anciens event listeners
                const newItem = item.cloneNode(true);
                item.parentNode.replaceChild(newItem, item);

                if (isAdmin) {
                    newItem.style.cursor = 'pointer';

                    // Ajouter le click handler
                    newItem.addEventListener('click', function(e) {
                        e.stopPropagation();
                        editEventIfAdmin(this);
                    });

                    // Effets visuels au survol
                    newItem.addEventListener('mouseenter', function() {
                        this.style.background = 'rgba(221, 172, 11, 0.15)';
                        this.style.borderLeftColor = '#ddac0b';
                        this.style.transform = 'translateX(5px)';
                    });

                    newItem.addEventListener('mouseleave', function() {
                        this.style.background = 'rgba(255, 255, 255, 0.05)';
                        this.style.borderLeftColor = '#ddac0b';
                        this.style.transform = 'translateX(0)';
                    });
                } else {
                    newItem.style.cursor = 'default';
                }
            });
        }

        // Charger les événements au chargement de la page
        window.addEventListener('DOMContentLoaded', function() {
            loadSavedEvents();
            // updateEventEditability() est maintenant appelé par checkAdminStatus()
        });

        // ===== GESTION DES POSTS INSTAGRAM =====

        let currentEditingPostId = null;

        // Charger et afficher les posts Instagram
        function loadInstagramPosts() {
            var config = JSON.parse(localStorage.getItem('alphamouv_config')) || {};
            const posts = config.instagramPosts || [];

            const grid = document.getElementById('instagramPostsGrid');
            const noPostsMsg = document.getElementById('noInstagramPosts');

            if (posts.length === 0) {
                grid.style.display = 'none';
                noPostsMsg.style.display = 'block';
                return;
            }

            grid.style.display = 'grid';
            noPostsMsg.style.display = 'none';
            grid.innerHTML = '';

            posts.forEach((post, index) => {
                // Détecter si c'est un Reel
                const isReel = post.instagramUrl.includes('/reel/');

                const postCard = document.createElement('div');
                postCard.className = 'instagram-post-card';
                postCard.dataset.postId = post.id;
                postCard.dataset.isReel = isReel;
                postCard.style.cssText = `
                    background: linear-gradient(135deg, rgba(30, 58, 138, 0.3), rgba(37, 99, 235, 0.2));
                    border-radius: 20px;
                    overflow: hidden;
                    border: 2px solid rgba(221, 172, 11, 0.3);
                    box-shadow: 0 5px 20px rgba(0, 0, 0, 0.3);
                    transition: all 0.4s ease;
                    cursor: pointer;
                    position: relative;
                `;

                postCard.innerHTML = `
                    <div style="position: relative; width: 100%; padding-top: 100%; overflow: hidden;">
                        <img src="${post.image}" alt="${isReel ? 'Reel' : 'Post'} Instagram" style="
                            position: absolute;
                            top: 0;
                            left: 0;
                            width: 100%;
                            height: 100%;
                            object-fit: cover;
                        ">
                        ${isReel ? `
                            <div style="
                                position: absolute;
                                top: 15px;
                                right: 15px;
                                background: linear-gradient(135deg, rgba(221, 172, 11, 0.95), rgba(196, 209, 12, 0.95));
                                padding: 8px 15px;
                                border-radius: 20px;
                                font-weight: 700;
                                font-size: 0.85em;
                                color: #000;
                                box-shadow: 0 4px 15px rgba(221, 172, 11, 0.5);
                                pointer-events: none;
                            ">
                                🎬 REEL
                            </div>
                        ` : ''}
                        ${isReel ? `
                            <div style="
                                position: absolute;
                                top: 50%;
                                left: 50%;
                                transform: translate(-50%, -50%);
                                width: 70px;
                                height: 70px;
                                background: rgba(0, 0, 0, 0.7);
                                backdrop-filter: blur(10px);
                                border-radius: 50%;
                                display: flex;
                                align-items: center;
                                justify-content: center;
                                pointer-events: none;
                                border: 3px solid rgba(255, 255, 255, 0.8);
                            ">
                                <div style="
                                    width: 0;
                                    height: 0;
                                    border-left: 20px solid white;
                                    border-top: 12px solid transparent;
                                    border-bottom: 12px solid transparent;
                                    margin-left: 5px;
                                "></div>
                            </div>
                        ` : ''}
                        <div style="
                            position: absolute;
                            bottom: 0;
                            left: 0;
                            right: 0;
                            background: linear-gradient(to top, rgba(0,0,0,0.9), transparent);
                            padding: 20px 15px 15px;
                            pointer-events: none;
                        ">
                            <p style="
                                color: white;
                                font-size: 0.9em;
                                margin: 0;
                                overflow: hidden;
                                text-overflow: ellipsis;
                                display: -webkit-box;
                                -webkit-line-clamp: 2;
                                -webkit-box-orient: vertical;
                            ">${post.caption || (isReel ? 'Reel Instagram' : 'Post Instagram')}</p>
                        </div>
                    </div>
                `;

                // Effet hover
                postCard.addEventListener('mouseenter', function() {
                    this.style.transform = 'translateY(-8px) scale(1.02)';
                    this.style.boxShadow = '0 10px 30px rgba(221, 172, 11, 0.4)';
                    this.style.borderColor = 'rgba(221, 172, 11, 0.6)';
                });

                postCard.addEventListener('mouseleave', function() {
                    this.style.transform = 'translateY(0) scale(1)';
                    this.style.boxShadow = '0 5px 20px rgba(0, 0, 0, 0.3)';
                    this.style.borderColor = 'rgba(221, 172, 11, 0.3)';
                });

                // Click handler
                postCard.addEventListener('click', function() {
                    if (isAdmin) {
                        editInstagramPost(post.id);
                    } else {
                        openInstagramPopupEmbed(post);
                    }
                });

                grid.appendChild(postCard);
            });
        }

        // Ouvrir le popup d'ajout de post
        function openAddInstagramPost() {
            currentEditingPostId = null;
            showInstagramModal({
                id: null,
                instagramUrl: '',
                image: '',
                caption: ''
            });
        }

        // Éditer un post existant
        function editInstagramPost(postId) {
            var config = JSON.parse(localStorage.getItem('alphamouv_config')) || {};
            const posts = config.instagramPosts || [];
            const post = posts.find(p => p.id === postId);

            if (post) {
                currentEditingPostId = postId;
                showInstagramModal(post);
            }
        }

        // Afficher le modal d'édition/ajout
        function showInstagramModal(post) {
            const modal = document.createElement('div');
            modal.id = 'instagramModal';
            modal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0, 0, 0, 0.85);
                backdrop-filter: blur(10px);
                z-index: 10000;
                display: flex;
                align-items: center;
                justify-content: center;
                animation: fadeIn 0.3s ease;
            `;

            modal.innerHTML = `
                <div style="
                    background: linear-gradient(135deg, rgba(30, 58, 138, 0.95), rgba(37, 99, 235, 0.9));
                    backdrop-filter: blur(25px) saturate(180%);
                    border-radius: 30px;
                    padding: 40px;
                    max-width: 600px;
                    width: 90%;
                    max-height: 90vh;
                    overflow-y: auto;
                    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5), 0 0 0 2px rgba(221, 172, 11, 0.3) inset;
                    border: 2px solid rgba(221, 172, 11, 0.4);
                    animation: slideUp 0.4s cubic-bezier(0.16, 1, 0.3, 1);
                ">
                    <h2 style="color: #ddac0b; margin-bottom: 30px; font-size: 1.8em; text-align: center;">
                        ${post.id ? '✏️ Modifier le post' : '➕ Ajouter un post Instagram'}
                    </h2>

                    <div style="margin-bottom: 20px;">
                        <label style="display: block; color: rgba(255, 255, 255, 0.9); margin-bottom: 8px; font-weight: 600;">
                            URL du post Instagram *
                        </label>
                        <input type="url" id="instagramUrl" value="${post.instagramUrl || ''}" placeholder="https://www.instagram.com/p/..." style="
                            width: 100%;
                            padding: 12px 15px;
                            background: rgba(0, 0, 0, 0.3);
                            border: 2px solid rgba(221, 172, 11, 0.3);
                            border-radius: 10px;
                            color: white;
                            font-size: 1em;
                            transition: all 0.3s ease;
                        " onfocus="this.style.borderColor='rgba(221, 172, 11, 0.6)'" onblur="this.style.borderColor='rgba(221, 172, 11, 0.3)'">
                        <p style="color: rgba(255, 255, 255, 0.6); font-size: 0.85em; margin-top: 5px;">
                            Exemple: https://www.instagram.com/p/ABC123/
                        </p>
                    </div>

                    <div style="margin-bottom: 20px;">
                        <label style="display: block; color: rgba(255, 255, 255, 0.9); margin-bottom: 8px; font-weight: 600;">
                            Image de prévisualisation *
                        </label>
                        <div style="display: flex; gap: 10px; align-items: center;">
                            <input type="file" id="instagramImageInput" accept="image/*" style="display: none;" onchange="handleInstagramImageUpload(event)">
                            <button type="button" onclick="document.getElementById('instagramImageInput').click()" style="
                                padding: 10px 20px;
                                background: rgba(221, 172, 11, 0.2);
                                border: 2px solid rgba(221, 172, 11, 0.4);
                                border-radius: 10px;
                                color: #ddac0b;
                                font-weight: 600;
                                cursor: pointer;
                                transition: all 0.3s ease;
                            " onmouseover="this.style.background='rgba(221, 172, 11, 0.3)'" onmouseout="this.style.background='rgba(221, 172, 11, 0.2)'">
                                📁 Choisir une image
                            </button>
                            <span id="imageFileName" style="color: rgba(255, 255, 255, 0.7); font-size: 0.9em;">
                                ${post.image ? 'Image sélectionnée' : 'Aucune image'}
                            </span>
                        </div>
                        ${post.image ? `
                            <div style="margin-top: 15px;">
                                <img src="${post.image}" alt="Preview" style="width: 100%; max-width: 300px; border-radius: 10px; border: 2px solid rgba(221, 172, 11, 0.3);">
                            </div>
                        ` : ''}
                    </div>

                    <div style="margin-bottom: 30px;">
                        <label style="display: block; color: rgba(255, 255, 255, 0.9); margin-bottom: 8px; font-weight: 600;">
                            Légende (optionnel)
                        </label>
                        <textarea id="instagramCaption" rows="3" placeholder="Ajoutez une courte description..." style="
                            width: 100%;
                            padding: 12px 15px;
                            background: rgba(0, 0, 0, 0.3);
                            border: 2px solid rgba(221, 172, 11, 0.3);
                            border-radius: 10px;
                            color: white;
                            font-size: 1em;
                            resize: vertical;
                            transition: all 0.3s ease;
                        " onfocus="this.style.borderColor='rgba(221, 172, 11, 0.6)'" onblur="this.style.borderColor='rgba(221, 172, 11, 0.3)'">${post.caption || ''}</textarea>
                    </div>

                    <div style="display: flex; gap: 15px; justify-content: space-between;">
                        <div style="display: flex; gap: 15px;">
                            <button onclick="closeInstagramModal()" style="
                                padding: 12px 30px;
                                background: rgba(255, 255, 255, 0.1);
                                border: 2px solid rgba(255, 255, 255, 0.3);
                                border-radius: 12px;
                                color: white;
                                font-size: 1em;
                                font-weight: 600;
                                cursor: pointer;
                                transition: all 0.3s ease;
                            " onmouseover="this.style.background='rgba(255, 255, 255, 0.2)'" onmouseout="this.style.background='rgba(255, 255, 255, 0.1)'">
                                Annuler
                            </button>

                            <button onclick="saveInstagramPost()" style="
                                padding: 12px 30px;
                                background: linear-gradient(135deg, #ddac0b, #c4d10c);
                                border: 2px solid rgba(255, 255, 255, 0.3);
                                border-radius: 12px;
                                color: #000;
                                font-size: 1em;
                                font-weight: 700;
                                cursor: pointer;
                                box-shadow: 0 4px 15px rgba(221, 172, 11, 0.4);
                                transition: all 0.3s ease;
                            " onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 6px 20px rgba(221, 172, 11, 0.6)'" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 15px rgba(221, 172, 11, 0.4)'">
                                💾 Sauvegarder
                            </button>
                        </div>

                        ${post.id ? `
                            <button onclick="deleteInstagramPost('${post.id}')" style="
                                padding: 12px 30px;
                                background: rgba(255, 68, 68, 0.2);
                                border: 2px solid rgba(255, 68, 68, 0.4);
                                border-radius: 12px;
                                color: #ff4444;
                                font-size: 1em;
                                font-weight: 600;
                                cursor: pointer;
                                transition: all 0.3s ease;
                            " onmouseover="this.style.background='rgba(255, 68, 68, 0.3)'" onmouseout="this.style.background='rgba(255, 68, 68, 0.2)'">
                                🗑️ Supprimer
                            </button>
                        ` : ''}
                    </div>
                </div>
            `;

            document.body.appendChild(modal);
        }

        // Gérer l'upload d'image
        let tempImageData = null;
        function handleInstagramImageUpload(event) {
            const file = event.target.files[0];
            if (!file) return;

            var reader = new FileReader();
            reader.onload = function(e) {
                tempImageData = e.target.result;
                document.getElementById('imageFileName').textContent = file.name;
            };
            reader.readAsDataURL(file);
        }

        // Fermer le modal
        function closeInstagramModal() {
            const modal = document.getElementById('instagramModal');
            if (modal) {
                modal.style.animation = 'fadeOut 0.3s ease';
                setTimeout(() => modal.remove(), 300);
            }
            tempImageData = null;
        }

        // Sauvegarder le post
        function saveInstagramPost() {
            const url = document.getElementById('instagramUrl').value.trim();
            const caption = document.getElementById('instagramCaption').value.trim();

            if (!url) {
                alert(' Veuillez entrer l\'URL du post Instagram');
                return;
            }

            // Vérifier que c'est une URL Instagram valide
            if (!url.includes('instagram.com')) {
                alert(' L\'URL doit être un lien Instagram valide');
                return;
            }

            var config = JSON.parse(localStorage.getItem('alphamouv_config')) || {};
            if (!config.instagramPosts) config.instagramPosts = [];

            if (currentEditingPostId) {
                // Modifier un post existant
                const index = config.instagramPosts.findIndex(p => p.id === currentEditingPostId);
                if (index !== -1) {
                    config.instagramPosts[index] = {
                        ...config.instagramPosts[index],
                        instagramUrl: url,
                        caption: caption,
                        image: tempImageData || config.instagramPosts[index].image
                    };
                }
            } else {
                // Ajouter un nouveau post
                if (!tempImageData) {
                    alert(' Veuillez sélectionner une image de prévisualisation');
                    return;
                }

                const newPost = {
                    id: 'post_' + Date.now(),
                    instagramUrl: url,
                    image: tempImageData,
                    caption: caption,
                    addedDate: new Date().toISOString()
                };
                config.instagramPosts.unshift(newPost); // Ajouter au début
            }

            localStorage.setItem('alphamouv_config', JSON.stringify(config));
            addLog('success', 'Post Instagram ' + (currentEditingPostId ? 'modifié' : 'ajouté'));

            closeInstagramModal();
            loadInstagramPosts();

            // Notification de succès
            showNotification('✅ Post Instagram ' + (currentEditingPostId ? 'modifié' : 'ajouté') + ' avec succès !');
        }

        // Supprimer un post
        function deleteInstagramPost(postId) {
            if (!confirm('Êtes-vous sûr de vouloir supprimer ce post Instagram ?')) {
                return;
            }

            var config = JSON.parse(localStorage.getItem('alphamouv_config')) || {};
            config.instagramPosts = (config.instagramPosts || []).filter(p => p.id !== postId);
            localStorage.setItem('alphamouv_config', JSON.stringify(config));

            addLog('warning', 'Post Instagram supprimé');
            closeInstagramModal();
            loadInstagramPosts();
            showNotification('🗑️ Post Instagram supprimé');
        }

        // Ouvrir le popup avec style Instagram (pour les non-admin)
        function openInstagramPopup(post) {
            // Détecter si c'est un Reel
            const isReel = post.instagramUrl.includes('/reel/');

            const modal = document.createElement('div');
            modal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0, 0, 0, 0.9);
                z-index: 10000;
                display: flex;
                align-items: center;
                justify-content: center;
                animation: fadeIn 0.3s ease;
            `;

            modal.innerHTML = `
                <div style="
                    background: #000000;
                    border-radius: 8px;
                    max-width: 470px;
                    width: 90%;
                    max-height: 95vh;
                    overflow: hidden;
                    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.8);
                    border: 2px solid rgba(221, 172, 11, 0.3);
                    display: flex;
                    flex-direction: column;
                ">
                    <!-- Header style Instagram -->
                    <div style="
                        padding: 14px 16px;
                        border-bottom: 1px solid #262626;
                        display: flex;
                        justify-content: space-between;
                        align-items: center;
                    ">
                        <div style="display: flex; align-items: center; gap: 12px;">
                            <div style="
                                width: 32px;
                                height: 32px;
                                border-radius: 50%;
                                background: linear-gradient(45deg, #f09433 0%, #e6683c 25%, #dc2743 50%, #cc2366 75%, #bc1888 100%);
                                display: flex;
                                align-items: center;
                                justify-content: center;
                                color: white;
                                font-weight: 700;
                                font-size: 14px;
                            ">
                                B
                            </div>
                            <span style="color: #f5f5f5; font-weight: 600; font-size: 14px; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;">
                                b.a.b.empirevision
                            </span>
                        </div>
                        <button onclick="this.closest('[style*=\\'z-index: 10000\\']').remove()" style="
                            background: none;
                            border: none;
                            color: #f5f5f5;
                            font-size: 28px;
                            cursor: pointer;
                            padding: 0;
                            line-height: 1;
                            font-weight: 300;
                        ">×</button>
                    </div>

                    <!-- Image du post -->
                    <div style="
                        width: 100%;
                        max-height: 600px;
                        background: #000;
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        position: relative;
                    ">
                        <img src="${post.image}" alt="Post" style="
                            width: 100%;
                            height: auto;
                            max-height: 600px;
                            object-fit: contain;
                        ">
                        ${isReel ? `
                            <div style="
                                position: absolute;
                                top: 50%;
                                left: 50%;
                                transform: translate(-50%, -50%);
                                width: 60px;
                                height: 60px;
                                background: rgba(0, 0, 0, 0.6);
                                border-radius: 50%;
                                display: flex;
                                align-items: center;
                                justify-content: center;
                                border: 3px solid white;
                            ">
                                <div style="
                                    width: 0;
                                    height: 0;
                                    border-left: 16px solid white;
                                    border-top: 10px solid transparent;
                                    border-bottom: 10px solid transparent;
                                    margin-left: 4px;
                                "></div>
                            </div>
                        ` : ''}
                    </div>

                    <!-- Actions style Instagram -->
                    <div style="padding: 12px 16px; border-bottom: 1px solid #262626;">
                        <div style="display: flex; gap: 16px; align-items: center;">
                            <svg aria-label="J'aime" fill="#f5f5f5" height="24" viewBox="0 0 24 24" width="24">
                                <path d="M16.792 3.904A4.989 4.989 0 0 1 21.5 9.122c0 3.072-2.652 4.959-5.197 7.222-2.512 2.243-3.865 3.469-4.303 3.752-.477-.309-2.143-1.823-4.303-3.752C5.141 14.072 2.5 12.167 2.5 9.122a4.989 4.989 0 0 1 4.708-5.218 4.21 4.21 0 0 1 3.675 1.941c.84 1.175.98 1.763 1.12 1.763s.278-.588 1.11-1.766a4.17 4.17 0 0 1 3.679-1.938m0-2a6.04 6.04 0 0 0-4.797 2.127 6.052 6.052 0 0 0-4.787-2.127A6.985 6.985 0 0 0 .5 9.122c0 3.61 2.55 5.827 5.015 7.97.283.246.569.494.853.747l1.027.918a44.998 44.998 0 0 0 3.518 3.018 2 2 0 0 0 2.174 0 45.263 45.263 0 0 0 3.626-3.115l.922-.824c.293-.26.59-.519.885-.774 2.334-2.025 4.98-4.32 4.98-7.94a6.985 6.985 0 0 0-6.708-7.218Z"></path>
                            </svg>
                            <svg aria-label="Commenter" fill="#f5f5f5" height="24" viewBox="0 0 24 24" width="24">
                                <path d="M20.656 17.008a9.993 9.993 0 1 0-3.59 3.615L22 22Z" fill="none" stroke="currentColor" stroke-linejoin="round" stroke-width="2"></path>
                            </svg>
                            <svg aria-label="Partager" fill="#f5f5f5" height="24" viewBox="0 0 24 24" width="24">
                                <line fill="none" stroke="currentColor" stroke-linejoin="round" stroke-width="2" x1="22" x2="9.218" y1="3" y2="10.083"></line>
                                <polygon fill="none" points="11.698 20.334 22 3.001 2 3.001 9.218 10.084 11.698 20.334" stroke="currentColor" stroke-linejoin="round" stroke-width="2"></polygon>
                            </svg>
                        </div>
                    </div>

                    <!-- Légende -->
                    ${post.caption ? `
                        <div style="padding: 8px 16px;">
                            <p style="color: #f5f5f5; font-size: 14px; line-height: 18px; margin: 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;">
                                <span style="font-weight: 600;">b.a.b.empirevision</span> ${post.caption}
                            </p>
                        </div>
                    ` : ''}

                    <!-- Bouton voir sur Instagram -->
                    <div style="padding: 16px;">
                        <a href="${post.instagramUrl}" target="_blank" style="
                            display: block;
                            text-align: center;
                            padding: 12px;
                            background: #0095f6;
                            border-radius: 8px;
                            color: #fff;
                            text-decoration: none;
                            font-weight: 600;
                            font-size: 14px;
                            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
                            transition: all 0.2s ease;
                        " onmouseover="this.style.background='#1877f2'" onmouseout="this.style.background='#0095f6'">
                            ${isReel ? '▶️ Voir le Reel sur Instagram' : 'Voir sur Instagram'}
                        </a>
                    </div>
                </div>
            `;

            // Fermer au clic sur le fond
            modal.addEventListener('click', function(e) {
                if (e.target === modal) {
                    modal.remove();
                }
            });

            document.body.appendChild(modal);
        }

        // VERSION ALTERNATIVE : Popup avec uniquement l'embed Instagram (pour tester)
        // Pour l'utiliser, remplacez "openInstagramPopup" par "openInstagramPopupEmbed" dans loadInstagramPosts()
        function openInstagramPopupEmbed(post) {
            const isReel = post.instagramUrl.includes('/reel/');

            const modal = document.createElement('div');
            modal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0, 0, 0, 0.9);
                z-index: 10000;
                display: flex;
                align-items: center;
                justify-content: center;
                animation: fadeIn 0.3s ease;
            `;

            // Extraire l'ID du post/reel Instagram depuis l'URL
            const postMatch = post.instagramUrl.match(/instagram\.com\/p\/([^\/]+)/);
            const reelMatch = post.instagramUrl.match(/instagram\.com\/reel\/([^\/]+)/);
            const postId = postMatch ? postMatch[1] : (reelMatch ? reelMatch[1] : '');
            const embedUrl = postId ? `https://www.instagram.com/${isReel ? 'reel' : 'p'}/${postId}/embed` : '';

            modal.innerHTML = `
                <div style="
                    background: #000000;
                    border-radius: 8px;
                    max-width: 500px;
                    width: 90%;
                    max-height: 95vh;
                    overflow: hidden;
                    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.8);
                    display: flex;
                    flex-direction: column;
                ">
                    <!-- Header simple -->
                    <div style="
                        padding: 14px 16px;
                        border-bottom: 1px solid #262626;
                        display: flex;
                        justify-content: space-between;
                        align-items: center;
                    ">
                        <h3 style="color: #f5f5f5; margin: 0; font-size: 16px; font-weight: 600;">
                            ${isReel ? '🎬 Reel Instagram' : '📸 Post Instagram'}
                        </h3>
                        <button onclick="this.closest('[style*=\\'z-index: 10000\\']').remove()" style="
                            background: none;
                            border: none;
                            color: #f5f5f5;
                            font-size: 28px;
                            cursor: pointer;
                            padding: 0;
                            line-height: 1;
                            font-weight: 300;
                        ">×</button>
                    </div>

                    <!-- Embed Instagram (iframe) -->
                    <div style="flex: 1; overflow-y: auto; background: #000;">
                        ${embedUrl ? `
                            <iframe src="${embedUrl}"
                                    width="100%"
                                    height="700"
                                    frameborder="0"
                                    scrolling="no"
                                    allowtransparency="true"
                                    style="background: #fff; display: block;">
                            </iframe>
                        ` : `
                            <div style="
                                text-align: center;
                                padding: 60px 20px;
                                color: #999;
                            ">
                                <p style="font-size: 16px; margin-bottom: 10px;">⚠️ Impossible de charger l'embed Instagram</p>
                                <p style="font-size: 14px; color: #666;">L'embed Instagram nécessite HTTPS</p>
                            </div>
                        `}
                    </div>

                    <!-- Bouton voir sur Instagram -->
                    <div style="padding: 16px; border-top: 1px solid #262626;">
                        <a href="${post.instagramUrl}" target="_blank" style="
                            display: block;
                            text-align: center;
                            padding: 12px;
                            background: #0095f6;
                            border-radius: 8px;
                            color: #fff;
                            text-decoration: none;
                            font-weight: 600;
                            font-size: 14px;
                            transition: all 0.2s ease;
                        " onmouseover="this.style.background='#1877f2'" onmouseout="this.style.background='#0095f6'">
                            ${isReel ? '▶️ Voir le Reel sur Instagram' : 'Voir sur Instagram'}
                        </a>
                    </div>
                </div>
            `;

            // Fermer au clic sur le fond
            modal.addEventListener('click', function(e) {
                if (e.target === modal) {
                    modal.remove();
                }
            });

            document.body.appendChild(modal);
        }

        // Notification helper
        function showNotification(message) {
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: linear-gradient(135deg, #ddac0b, #c4d10c);
                color: #000;
                padding: 20px 30px;
                border-radius: 15px;
                box-shadow: 0 10px 30px rgba(221, 172, 11, 0.5);
                font-weight: 700;
                z-index: 10001;
                animation: slideInRight 0.4s ease;
            `;
            notification.textContent = message;
            document.body.appendChild(notification);

            setTimeout(() => {
                notification.style.animation = 'fadeOut 0.3s ease';
                setTimeout(() => notification.remove(), 300);
            }, 3000);
        }

        // Mettre à jour l'affichage du bouton admin et charger les posts
        function updateInstagramSection() {
            const addBtn = document.getElementById('addInstagramPostBtn');
            if (addBtn) {
                addBtn.style.display = isAdmin ? 'block' : 'none';
            }
            loadInstagramPosts();
        }

        // Charger au démarrage
        // Automatic backup system - runs every 24 hours
        function createAutoBackup() {
            var lastBackup = localStorage.getItem('alphamouv_last_backup');
            var now = new Date().getTime();
            var twentyFourHours = 24 * 60 * 60 * 1000;

            if (!lastBackup || (now - parseInt(lastBackup)) > twentyFourHours) {
                // Create backup in localStorage
                var backupData = {
                    timestamp: now,
                    config: localStorage.getItem('alphamouv_config'),
                    users: localStorage.getItem('alphamouv_users'),
                    admin: localStorage.getItem('alphamouv_admin'),
                    events: localStorage.getItem('alphamouv_events'),
                    logs: localStorage.getItem('alphamouv_logs')
                };

                // Save current backup
                localStorage.setItem('alphamouv_backup_current', JSON.stringify(backupData));

                // Rotate old backups (keep last 7 days)
                for (var i = 6; i >= 1; i--) {
                    var oldBackup = localStorage.getItem('alphamouv_backup_day' + i);
                    if (oldBackup) {
                        localStorage.setItem('alphamouv_backup_day' + (i + 1), oldBackup);
                    }
                }

                // Move current to day1
                var currentBackup = localStorage.getItem('alphamouv_backup_current');
                if (currentBackup) {
                    localStorage.setItem('alphamouv_backup_day1', currentBackup);
                }

                // Remove day8 if exists
                localStorage.removeItem('alphamouv_backup_day8');

                // Update last backup time
                localStorage.setItem('alphamouv_last_backup', now.toString());

                console.log('Backup automatique créée:', new Date(now).toLocaleString('fr-FR'));
            }
        }

        // Restore backup function
        function restoreBackup(dayNumber) {
            var backupKey = dayNumber === 0 ? 'alphamouv_backup_current' : 'alphamouv_backup_day' + dayNumber;
            var backupData = localStorage.getItem(backupKey);

            if (!backupData) {
                alert('Aucune backup trouvée pour ce jour.');
                return false;
            }

            if (!confirm('Êtes-vous sûr de vouloir restaurer la backup du ' + new Date(JSON.parse(backupData).timestamp).toLocaleString('fr-FR') + ' ?\n\nCela remplacera toutes les données actuelles.')) {
                return false;
            }

            var backup = JSON.parse(backupData);

            if (backup.config) localStorage.setItem('alphamouv_config', backup.config);
            if (backup.users) localStorage.setItem('alphamouv_users', backup.users);
            if (backup.admin) localStorage.setItem('alphamouv_admin', backup.admin);
            if (backup.events) localStorage.setItem('alphamouv_events', backup.events);
            if (backup.logs) localStorage.setItem('alphamouv_logs', backup.logs);

            alert('Backup restaurée avec succès! La page va se recharger.');
            location.reload();
            return true;
        }

        window.addEventListener('DOMContentLoaded', function() {
            updateInstagramSection();
            applyColors(); // Apply saved colors on page load
            applyTextsToPage(); // Apply saved texts on page load
            applyNavOrder(); // Apply saved navigation order
            createAutoBackup(); // Check and create backup if needed
        });

        // Mettre à jour quand le statut admin change
        const originalCheckAdminStatus = checkAdminStatus;
        checkAdminStatus = function() {
            originalCheckAdminStatus();
            updateInstagramSection();
        };

        // Masquer l'overlay de chargement quand la page est 100% prete
        function removeOverlayWhenReady() {
            const overlay = document.getElementById('page-loading-overlay');
            if (!overlay) return;

            // S'assurer que la page commence en haut
            window.scrollTo(0, 0);

            // Fonction pour retirer l'overlay apres verification complete
            function doRemove() {
                // Attendre plusieurs frames pour etre sur que tout est rendu
                requestAnimationFrame(function() {
                    requestAnimationFrame(function() {
                        requestAnimationFrame(function() {
                            overlay.remove();
                        });
                    });
                });
            }

            // Attendre polices + images + animations
            const fontsReady = document.fonts ? document.fonts.ready : Promise.resolve();

            fontsReady.then(function() {
                // Attendre un peu plus pour les animations CSS
                setTimeout(doRemove, 100);
            });
        }

        window.addEventListener('load', removeOverlayWhenReady);
    </script>
</body>

</html>