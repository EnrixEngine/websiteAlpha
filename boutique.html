<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AlphaMouv - Boutique</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preload" href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;600;700;800;900&family=Oswald:wght@700&family=Quicksand:wght@400;500;600;700&family=Allura&family=Great+Vibes&family=Tangerine:wght@400;700&family=Alex+Brush&family=Parisienne&family=Mr+Dafoe&display=swap" as="style">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;600;700;800;900&family=Oswald:wght@700&family=Quicksand:wght@400;500;600;700&family=Allura&family=Great+Vibes&family=Tangerine:wght@400;700&family=Alex+Brush&family=Parisienne&family=Mr+Dafoe&display=swap"
        rel="stylesheet">
    <style>
        /* Overlay de transition */
        .page-loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background-image: url('images/Capture%20d%27écran%202026-01-22%20010843.png');
            background-size: cover;
            background-position: center top;
            background-color: #0d1a2d;
            z-index: 99999;
            pointer-events: none;
        }
    </style>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Quicksand', sans-serif;
            background: radial-gradient(ellipse 150% 150% at 20% 30%, rgba(30, 58, 138, 0.03) 0%, rgba(30, 58, 138, 0.015) 20%, rgba(30, 58, 138, 0.005) 45%, transparent 80%), radial-gradient(ellipse 140% 140% at 50% 50%, rgba(37, 99, 235, 0.025) 0%, rgba(37, 99, 235, 0.012) 18%, rgba(37, 99, 235, 0.004) 40%, transparent 75%), radial-gradient(ellipse 160% 160% at 85% 70%, rgba(255, 255, 255, 0.01) 0%, rgba(255, 255, 255, 0.005) 25%, rgba(255, 255, 255, 0.002) 50%, transparent 85%), radial-gradient(ellipse 130% 130% at 10% 80%, rgba(255, 255, 255, 0.008) 0%, rgba(255, 255, 255, 0.004) 22%, rgba(255, 255, 255, 0.001) 48%, transparent 80%), radial-gradient(ellipse 145% 145% at 90% 20%, rgba(29, 78, 216, 0.028) 0%, rgba(29, 78, 216, 0.014) 20%, rgba(29, 78, 216, 0.006) 42%, transparent 78%), linear-gradient(135deg, #000000 0%, #020510 18%, #050a1a 30%, #030712 45%, #000000 55%, #04080f 70%, #080f1f 82%, #000000 100%);
            background-size: 400% 400%;
            min-height: 100vh;
            animation: gradientShift 25s ease infinite;
            color: white;
            position: relative;
        }
        
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: repeating-linear-gradient( 0deg, transparent, transparent 2px, rgba(255, 255, 255, 0.01) 2px, rgba(255, 255, 255, 0.01) 4px);
            pointer-events: none;
            z-index: 1;
        }
        
        .container {
            position: relative;
            z-index: 2;
        }
        
        @keyframes gradientShift {
            0% {
                background-position: 0% 50%;
            }
            25% {
                background-position: 50% 25%;
            }
            50% {
                background-position: 100% 50%;
            }
            75% {
                background-position: 50% 75%;
            }
            100% {
                background-position: 0% 50%;
            }
        }
        /* Animations premium modernes */
        
        @keyframes shimmerEffect {
            0% {
                transform: translateX(-100%);
            }
            100% {
                transform: translateX(100%);
            }
        }
        
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        @keyframes glowPulse {
            0%,
            100% {
                box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3), 0 0 0 1px rgba(255, 255, 255, 0.1) inset, 0 0 25px rgba(100, 180, 255, 0.1);
            }
            50% {
                box-shadow: 0 10px 40px rgba(0, 0, 0, 0.35), 0 0 0 1px rgba(255, 255, 255, 0.15) inset, 0 0 35px rgba(100, 180, 255, 0.2);
            }
        }
        
        @keyframes floatGentle {
            0%,
            100% {
                transform: translateY(0px);
            }
            50% {
                transform: translateY(-5px);
            }
        }
        /* En-tête */
        
        header {
            background: transparent;
            backdrop-filter: none;
            -webkit-backdrop-filter: none;
            padding: 40px 0 60px 0;
            position: sticky;
            top: 0;
            z-index: 1000;
            border: none;
            box-shadow: none;
            position: relative;
        }
        
        header::after {
            display: none;
        }
        
        header::before {
            display: none;
        }
        
        .header-content {
            max-width: 100%;
            margin: 0;
            padding: 0 30px 0 20px;
            display: grid;
            grid-template-columns: auto 1fr auto;
            align-items: start;
            gap: 40px;
        }
        
        .logo {
            font-family: 'Alex Brush', 'Mr Dafoe', 'Parisienne', 'Allura', cursive;
            font-size: 7em;
            color: white;
            text-decoration: none;
            transition: all 0.4s ease;
            letter-spacing: 5px;
            font-weight: 400;
            text-align: center;
            grid-column: 2;
            cursor: default;
            pointer-events: none;
            font-style: normal;
            -webkit-text-stroke: 0.5px rgba(221, 172, 11, 0.3);
            filter: drop-shadow(0 0 8px rgba(221, 172, 11, 0.25)) drop-shadow(0 0 12px rgba(221, 172, 11, 0.15));
            margin-top: 20px;
            line-height: 1.2;
        }
        
        .logo::first-letter {
            font-size: 1em;
            font-weight: 400;
            -webkit-text-stroke: 0.5px rgba(221, 172, 11, 0.3);
            filter: drop-shadow(0 0 8px rgba(221, 172, 11, 0.25)) drop-shadow(0 0 12px rgba(221, 172, 11, 0.15));
        }
        
        .header-nav {
            display: flex;
            gap: 15px;
            align-items: center;
            grid-column: 1;
        }
        
        .filters-toggle-header {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.15);
            color: white;
            padding: 12px 20px;
            cursor: pointer;
            transition: all 0.5s cubic-bezier(0.16, 1, 0.3, 1);
            backdrop-filter: blur(10px);
            text-transform: uppercase;
            letter-spacing: 1.5px;
            font-size: 0.85em;
            font-weight: 500;
            font-family: 'Quicksand', sans-serif;
        }
        
        .filters-toggle-header:hover {
            background: rgba(221, 172, 11, 0.15);
            border-color: rgba(221, 172, 11, 0.4);
            color: rgba(221, 172, 11, 1);
        }
        
        .filters-toggle-header.active {
            background: rgba(221, 172, 11, 0.25);
            border-color: rgba(221, 172, 11, 0.7);
            color: rgba(221, 172, 11, 1);
            box-shadow: 0 0 15px rgba(221, 172, 11, 0.3);
        }
        
        .menu-button {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.15);
            cursor: pointer;
            padding: 12px;
            width: 50px;
            height: 50px;
            position: relative;
            z-index: 1002;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            gap: 6px;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        }
        
        .menu-button:hover {
            background: rgba(221, 172, 11, 0.15);
            border-color: rgba(221, 172, 11, 0.4);
        }
        
        .menu-line {
            display: block;
            width: 26px;
            height: 2.5px;
            background: white;
            transition: all 0.5s cubic-bezier(0.16, 1, 0.3, 1);
            transform-origin: center;
            box-shadow: 0 0 8px rgba(255, 255, 255, 0.3);
        }
        
        .menu-button:hover .menu-line {
            background: rgba(221, 172, 11, 1);
            box-shadow: 0 0 12px rgba(221, 172, 11, 0.6);
        }
        
        .menu-button.active .menu-line:nth-child(1) {
            transform: translateY(8.5px) rotate(45deg);
        }
        
        .menu-button.active .menu-line:nth-child(2) {
            opacity: 0;
            transform: translateX(-20px);
        }
        
        .menu-button.active .menu-line:nth-child(3) {
            transform: translateY(-8.5px) rotate(-45deg);
        }
        
        .nav-menu {
            position: fixed;
            top: 0;
            left: -100%;
            width: 480px;
            height: 100vh;
            background: linear-gradient( 135deg, rgba(5, 10, 25, 0.98) 0%, rgba(10, 20, 40, 0.97) 100%);
            backdrop-filter: blur(0px);
            padding: 100px 60px 60px;
            border: none;
            border-right: 1px solid rgba(221, 172, 11, 0);
            opacity: 0;
            transform: translateX(-30px);
            transition: all 0.7s cubic-bezier(0.16, 1, 0.3, 1);
            z-index: 1001;
            overflow-y: auto;
            pointer-events: none;
        }
        
        .nav-menu.active {
            left: 0;
            opacity: 1;
            transform: translateX(0);
            backdrop-filter: blur(30px);
            border-right-color: rgba(221, 172, 11, 0.2);
            pointer-events: auto;
        }
        
        .nav-menu-close {
            position: absolute;
            top: 30px;
            right: 30px;
            background: transparent;
            border: none;
            color: white;
            font-size: 2.5em;
            cursor: pointer;
            transition: all 0.6s cubic-bezier(0.16, 1, 0.3, 1);
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10;
            opacity: 0;
            transform: scale(0.8) rotate(-90deg);
        }
        
        .nav-menu.active .nav-menu-close {
            opacity: 1;
            transform: scale(1) rotate(0deg);
            transition-delay: 0.3s;
        }
        
        .nav-menu-close:hover {
            color: rgba(221, 172, 11, 0.9);
            transform: rotate(90deg);
            filter: drop-shadow(0 0 10px rgba(221, 172, 11, 0.6));
        }
        
        .menu-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(5px);
            opacity: 0;
            visibility: hidden;
            transition: all 0.7s cubic-bezier(0.16, 1, 0.3, 1);
            z-index: 999;
        }
        
        .menu-overlay.active {
            opacity: 1;
            visibility: visible;
        }
        
        .nav-link {
            color: rgba(255, 255, 255, 0.7);
            text-decoration: none;
            font-weight: 300;
            transition: all 0.6s cubic-bezier(0.16, 1, 0.3, 1);
            padding: 20px 0;
            display: block;
            letter-spacing: 2px;
            text-transform: uppercase;
            font-size: 1.1em;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            position: relative;
            overflow: hidden;
            cursor: pointer;
            z-index: 1;
            opacity: 0;
            transform: translateX(-30px);
        }
        
        .nav-menu.active .nav-link {
            opacity: 1;
            transform: translateX(0);
        }
        
        .nav-menu.active .nav-link:nth-child(2) {
            transition-delay: 0.1s;
        }
        
        .nav-menu.active .nav-link:nth-child(3) {
            transition-delay: 0.15s;
        }
        
        .nav-menu.active .nav-link:nth-child(4) {
            transition-delay: 0.2s;
        }
        
        .nav-menu.active .nav-link:nth-child(5) {
            transition-delay: 0.25s;
        }
        
        .nav-link::before {
            content: '';
            position: absolute;
            left: -100%;
            top: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient( 90deg, transparent, rgba(221, 172, 11, 0.1), transparent);
            transition: left 0.6s ease;
            pointer-events: none;
            z-index: -1;
        }
        
        .nav-link:hover::before {
            left: 100%;
        }
        
        .nav-link:hover {
            color: rgba(221, 172, 11, 0.95);
            padding-left: 15px;
        }
        
        .header-right {
            display: flex;
            gap: 20px;
            align-items: center;
            grid-column: 3;
        }
        
        .cart-icon {
            position: relative;
            cursor: pointer;
            padding: 8px;
            background: transparent;
            border: none;
            transition: all 0.3s ease;
            filter: drop-shadow(0 0 0 transparent);
            opacity: 0;
            visibility: hidden;
            transform: scale(0.8);
        }
        
        .cart-icon.has-items {
            opacity: 1;
            visibility: visible;
            transform: scale(1);
        }
        
        .cart-icon svg {
            width: 24px;
            height: 24px;
        }
        
        .cart-icon:hover {
            filter: drop-shadow(0 0 10px rgba(221, 172, 11, 0.8));
            transform: translateY(-2px) scale(1);
        }
        
        .cart-icon.has-items:hover {
            transform: translateY(-2px) scale(1.05);
        }
        
        .cart-count {
            position: absolute;
            top: -8px;
            right: -8px;
            background: linear-gradient(135deg, #ddac0b, #ffd700);
            color: #001f3f;
            border-radius: 50%;
            width: 26px;
            height: 26px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 13px;
            font-weight: 700;
            border: 2px solid rgba(255, 255, 255, 0.3);
            box-shadow: 0 4px 15px rgba(221, 172, 11, 0.6), 0 0 20px rgba(221, 172, 11, 0.4);
            animation: floatGentle 2s ease-in-out infinite;
        }
        /* Container principal */
        
        .container {
            max-width: 100%;
            margin: 0;
            padding: 40px 30px 40px 20px;
        }
        /* Filtres */
        
        .filters-section {
            margin-bottom: 30px;
            position: relative;
            padding-left: 0;
        }
        
        .filters-content {
            background: linear-gradient( 135deg, rgba(0, 0, 0, 0.85) 0%, rgba(5, 10, 25, 0.9) 25%, rgba(10, 20, 40, 0.88) 50%, rgba(5, 10, 25, 0.9) 75%, rgba(0, 0, 0, 0.85) 100%);
            backdrop-filter: blur(0px) saturate(100%);
            -webkit-backdrop-filter: blur(0px) saturate(100%);
            border-radius: 0;
            padding: 0 50px;
            border: 1px solid rgba(221, 172, 11, 0);
            box-shadow: 0 0 0px rgba(0, 0, 0, 0), inset 0 0 0px rgba(0, 0, 0, 0), 0 0 0px rgba(221, 172, 11, 0);
            position: relative;
            overflow: hidden;
            max-height: 0;
            opacity: 0;
            transform: translateY(-15px) scaleY(0.95);
            transition: max-height 0.8s cubic-bezier(0.16, 1, 0.3, 1), opacity 0.7s ease-in-out, transform 0.7s cubic-bezier(0.16, 1, 0.3, 1), padding 0.7s cubic-bezier(0.16, 1, 0.3, 1), backdrop-filter 0.7s ease-in-out, border-color 0.7s ease-in-out, box-shadow 0.7s ease-in-out;
            pointer-events: none;
        }
        
        .filters-content.active {
            max-height: 500px;
            opacity: 1;
            padding: 50px;
            transform: translateY(0) scaleY(1);
            backdrop-filter: blur(20px) saturate(150%);
            -webkit-backdrop-filter: blur(20px) saturate(150%);
            border-color: rgba(221, 172, 11, 0.3);
            box-shadow: 0 0 40px rgba(0, 0, 0, 0.7), inset 0 0 60px rgba(0, 0, 0, 0.4), 0 0 20px rgba(221, 172, 11, 0.15);
            pointer-events: all;
        }
        
        .filters-content::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient( 135deg, rgba(221, 172, 11, 0.03) 0%, transparent 50%, rgba(221, 172, 11, 0.03) 100%);
            pointer-events: none;
        }
        
        .filters-content::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 2px;
            background: linear-gradient( 90deg, transparent 0%, rgba(221, 172, 11, 0.5) 50%, transparent 100%);
            pointer-events: none;
        }
        
        .filters-title {
            background: linear-gradient(135deg, #ddac0b 0%, #ffd700 50%, #ddac0b 100%);
            background-size: 200% auto;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-size: 1.8em;
            margin-bottom: 30px;
            font-family: 'Montserrat', sans-serif;
            font-weight: 600;
            position: relative;
            z-index: 1;
            filter: none;
            letter-spacing: 2px;
            text-transform: uppercase;
            opacity: 0;
            transform: translateY(-10px);
            transition: opacity 0.6s ease-out, transform 0.6s cubic-bezier(0.16, 1, 0.3, 1);
        }
        
        .filters-content.active .filters-title {
            opacity: 1;
            transform: translateY(0);
            transition-delay: 0.05s;
        }
        
        .filters-title::after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 0;
            width: 60px;
            height: 1px;
            background: linear-gradient(90deg, rgba(221, 172, 11, 0.8), transparent);
            box-shadow: none;
        }
        
        .filters-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
        }
        
        .filter-group {
            display: flex;
            flex-direction: column;
            gap: 10px;
            opacity: 0;
            transform: translateY(10px);
            transition: opacity 0.5s ease-out, transform 0.5s cubic-bezier(0.16, 1, 0.3, 1);
        }
        
        .filters-content.active .filter-group {
            opacity: 1;
            transform: translateY(0);
        }
        
        .filters-content.active .filter-group:nth-child(1) {
            transition-delay: 0.1s;
        }
        
        .filters-content.active .filter-group:nth-child(2) {
            transition-delay: 0.15s;
        }
        
        .filters-content.active .filter-group:nth-child(3) {
            transition-delay: 0.2s;
        }
        
        .filters-content.active .filter-group:nth-child(4) {
            transition-delay: 0.25s;
        }
        
        .filter-group label {
            color: rgba(221, 172, 11, 0.95);
            font-weight: 600;
            font-size: 0.95em;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .filter-select {
            padding: 15px 20px;
            border-radius: 2px;
            border: 1px solid rgba(221, 172, 11, 0.4);
            background: linear-gradient( 135deg, rgba(0, 0, 0, 0.7) 0%, rgba(5, 10, 25, 0.75) 50%, rgba(0, 0, 0, 0.7) 100%);
            backdrop-filter: blur(15px) saturate(140%);
            -webkit-backdrop-filter: blur(15px) saturate(140%);
            color: rgba(255, 255, 255, 0.95);
            font-family: 'Quicksand', sans-serif;
            font-size: 1em;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.16, 1, 0.3, 1);
            box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.08), 0 4px 15px rgba(0, 0, 0, 0.3);
            position: relative;
            z-index: 1;
        }
        
        .filter-select:hover,
        .filter-select:focus {
            border-color: rgba(221, 172, 11, 0.7);
            background: linear-gradient( 135deg, rgba(5, 10, 25, 0.8) 0%, rgba(221, 172, 11, 0.15) 50%, rgba(5, 10, 25, 0.8) 100%);
            box-shadow: 0 0 20px rgba(221, 172, 11, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.1), 0 6px 20px rgba(0, 0, 0, 0.4);
            outline: none;
            transform: translateY(-2px);
        }
        
        .filter-select option {
            background: rgba(5, 10, 25, 0.95);
            color: white;
            padding: 10px;
        }
        /* Grille de produits */
        
        .products-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 30px;
            margin-bottom: 50px;
            padding: 20px 0;
            width: 100%;
        }
        
        .product-card {
            background: transparent;
            border-radius: 0;
            overflow: hidden;
            border: none;
            cursor: pointer;
            position: relative;
            aspect-ratio: 3/4;
            transition: transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
        }
        
        .product-card:hover {
            transform: translateY(-5px);
        }
        
        .product-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.6s cubic-bezier(0.34, 1.56, 0.64, 1);
        }
        
        .product-card:hover .product-image {
            transform: scale(1.05);
        }
        
        .product-image-placeholder {
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, rgba(65, 105, 225, 0.3), rgba(221, 172, 11, 0.2));
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 80px;
        }
        
        .product-name-overlay {
            position: absolute;
            bottom: 20px;
            right: 20px;
            font-family: 'Alex Brush', 'Mr Dafoe', 'Parisienne', 'Allura', cursive;
            font-size: 2.5em;
            color: #ddac0b;
            text-align: right;
            opacity: 0;
            pointer-events: none;
            transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            z-index: 10;
            white-space: nowrap;
            padding: 0 10px;
            -webkit-text-stroke: 0.5px rgba(255, 255, 255, 0.5);
            text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.95), 2px 2px 6px rgba(0, 0, 0, 0.9), 3px 3px 10px rgba(0, 0, 0, 0.8), 0 0 20px rgba(255, 255, 255, 0.4), 0 0 30px rgba(255, 255, 255, 0.3), 0 0 40px rgba(221, 172, 11, 0.4);
            filter: drop-shadow(0 2px 8px rgba(0, 0, 0, 0.9)) drop-shadow(0 0 15px rgba(255, 255, 255, 0.2));
            transform: translateY(30px);
        }
        
        .product-card:hover .product-name-overlay {
            opacity: 1;
            transform: translateY(0);
        }
        
        .product-info {
            padding: 35px 35px 30px;
            position: relative;
            z-index: 2;
            background: linear-gradient( 180deg, rgba(0, 0, 0, 0.3) 0%, rgba(0, 0, 0, 0.4) 100%);
        }
        
        .product-info::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 1px;
            background: linear-gradient( 90deg, transparent 0%, rgba(221, 172, 11, 0.4) 30%, rgba(221, 172, 11, 0.6) 50%, rgba(221, 172, 11, 0.4) 70%, transparent 100%);
            box-shadow: 0 0 15px rgba(221, 172, 11, 0.3);
        }
        
        .product-category {
            background: linear-gradient(135deg, #ddac0b 0%, #ffd700 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-size: 0.8em;
            text-transform: uppercase;
            letter-spacing: 2.5px;
            font-weight: 600;
            margin-bottom: 12px;
            filter: none;
            font-family: 'Montserrat', sans-serif;
        }
        
        .product-name {
            font-size: 1.5em;
            font-weight: 600;
            margin-bottom: 12px;
            color: rgba(255, 255, 255, 0.95);
            font-family: 'Montserrat', sans-serif;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            text-shadow: none;
            letter-spacing: 0.5px;
        }
        
        .product-card:hover .product-name {
            color: rgba(221, 172, 11, 0.95);
            text-shadow: none;
            transform: translateY(-1px);
            letter-spacing: 1px;
        }
        
        .product-description {
            color: rgba(255, 255, 255, 0.85);
            font-size: 0.95em;
            line-height: 1.7;
            margin-bottom: 20px;
            font-weight: 400;
            letter-spacing: 0.3px;
        }
        
        .product-details {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .product-price {
            font-size: 2em;
            font-weight: 600;
            background: linear-gradient(135deg, #ddac0b 0%, #ffd700 50%, #ddac0b 100%);
            background-size: 200% auto;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-family: 'Montserrat', sans-serif;
            filter: none;
            transition: all 0.4s ease;
            letter-spacing: 1px;
        }
        
        .product-card:hover .product-price {
            background-position: right center;
            filter: none;
            letter-spacing: 2px;
        }
        
        .product-sizes {
            display: flex;
            gap: 8px;
        }
        
        .size-badge {
            padding: 6px 14px;
            background: linear-gradient( 180deg, rgba(0, 0, 0, 0.3) 0%, rgba(0, 15, 30, 0.25) 100%);
            backdrop-filter: blur(10px);
            border-radius: 0;
            font-size: 0.85em;
            font-weight: 600;
            border: none;
            border-bottom: 1px solid rgba(221, 172, 11, 0.25);
            transition: all 0.3s ease;
            box-shadow: none;
            letter-spacing: 0.5px;
        }
        
        .size-badge:hover {
            background: linear-gradient( 180deg, rgba(221, 172, 11, 0.15) 0%, rgba(221, 172, 11, 0.25) 100%);
            border-bottom-color: rgba(221, 172, 11, 0.6);
            transform: translateY(-1px);
            box-shadow: 0 4px 15px rgba(221, 172, 11, 0.3);
        }
        
        .add-to-cart-btn {
            width: 100%;
            padding: 20px 40px;
            background: linear-gradient( 135deg, rgba(221, 172, 11, 0.9) 0%, rgba(255, 215, 0, 0.95) 50%, rgba(221, 172, 11, 0.9) 100%);
            border: 1px solid rgba(255, 215, 0, 0.4);
            border-radius: 2px;
            color: rgba(0, 0, 0, 0.9);
            font-weight: 700;
            font-size: 1.15em;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            font-family: 'Montserrat', sans-serif;
            text-transform: uppercase;
            letter-spacing: 2.5px;
            position: relative;
            overflow: hidden;
            box-shadow: 0 4px 15px rgba(221, 172, 11, 0.4), inset 0 1px 0 rgba(255, 255, 255, 0.3);
        }
        
        .add-to-cart-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient( 90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            transition: left 0.5s ease;
        }
        
        .add-to-cart-btn:hover::before {
            left: 100%;
        }
        
        .add-to-cart-btn:hover {
            background: linear-gradient( 135deg, rgba(255, 215, 0, 1) 0%, rgba(255, 235, 59, 1) 50%, rgba(255, 215, 0, 1) 100%);
            color: rgba(0, 0, 0, 1);
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(221, 172, 11, 0.6), inset 0 1px 0 rgba(255, 255, 255, 0.5);
            border-color: rgba(255, 215, 0, 0.6);
        }
        
        .add-to-cart-btn:active {
            transform: translateY(0);
            box-shadow: 0 2px 10px rgba(221, 172, 11, 0.4), inset 0 1px 0 rgba(255, 255, 255, 0.3);
        }
        /* Panier latéral */
        
        .cart-sidebar {
            position: fixed;
            right: -450px;
            top: 0;
            width: 450px;
            height: 100vh;
            background: linear-gradient( 180deg, rgba(0, 0, 0, 0.95) 0%, rgba(0, 15, 30, 0.97) 50%, rgba(0, 31, 63, 0.98) 100%);
            backdrop-filter: blur(40px) saturate(180%);
            -webkit-backdrop-filter: blur(40px) saturate(180%);
            box-shadow: -10px 0 50px rgba(0, 0, 0, 0.6);
            transition: right 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            z-index: 2000;
            display: flex;
            flex-direction: column;
            border-left: 1px solid rgba(221, 172, 11, 0.3);
        }
        
        .cart-sidebar.open {
            right: 0;
        }
        
        .cart-header {
            padding: 30px;
            border-bottom: 2px solid rgba(221, 172, 11, 0.5);
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: linear-gradient(135deg, rgba(221, 172, 11, 0.1), rgba(196, 209, 12, 0.05));
            backdrop-filter: blur(20px);
        }
        
        .cart-header h2 {
            background: linear-gradient(135deg, #ddac0b 0%, #ffd700 50%, #ddac0b 100%);
            background-size: 200% auto;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-family: 'Oswald', sans-serif;
            font-size: 2em;
            filter: drop-shadow(0 0 20px rgba(221, 172, 11, 0.6));
        }
        
        .close-cart {
            background: none;
            border: none;
            color: white;
            font-size: 2em;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .close-cart:hover {
            color: #ddac0b;
            transform: rotate(90deg);
        }
        
        .cart-items {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
        }
        
        .cart-item {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.08), rgba(255, 255, 255, 0.04));
            backdrop-filter: blur(15px) saturate(150%);
            -webkit-backdrop-filter: blur(15px) saturate(150%);
            border-radius: 18px;
            padding: 18px;
            margin-bottom: 18px;
            display: flex;
            gap: 18px;
            border: 1.5px solid rgba(255, 255, 255, 0.15);
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2), 0 0 0 1px rgba(255, 255, 255, 0.05) inset;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .cart-item:hover {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.12), rgba(255, 255, 255, 0.08));
            border-color: rgba(221, 172, 11, 0.4);
            box-shadow: 0 6px 25px rgba(0, 0, 0, 0.25), 0 0 30px rgba(221, 172, 11, 0.15), 0 0 0 1px rgba(255, 255, 255, 0.1) inset;
            transform: translateX(-3px);
        }
        
        .cart-item-image {
            width: 80px;
            height: 80px;
            object-fit: cover;
            border-radius: 10px;
        }
        
        .cart-item-placeholder {
            width: 80px;
            height: 80px;
            background: linear-gradient(135deg, rgba(65, 105, 225, 0.3), rgba(221, 172, 11, 0.2));
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 30px;
        }
        
        .cart-item-info {
            flex: 1;
        }
        
        .cart-item-name {
            font-weight: 700;
            margin-bottom: 5px;
            color: white;
        }
        
        .cart-item-details {
            font-size: 0.9em;
            color: rgba(255, 255, 255, 0.7);
            margin-bottom: 8px;
        }
        
        .cart-item-quantity {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .qty-btn {
            width: 32px;
            height: 32px;
            border: 2px solid rgba(221, 172, 11, 0.5);
            background: linear-gradient(135deg, rgba(221, 172, 11, 0.25), rgba(196, 209, 12, 0.2));
            backdrop-filter: blur(10px);
            color: #ffd700;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 700;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 2px 10px rgba(221, 172, 11, 0.2);
        }
        
        .qty-btn:hover {
            background: linear-gradient(135deg, rgba(221, 172, 11, 0.8), rgba(196, 209, 12, 0.7));
            border-color: rgba(221, 172, 11, 0.9);
            color: #001f3f;
            box-shadow: 0 4px 15px rgba(221, 172, 11, 0.4), 0 0 20px rgba(221, 172, 11, 0.3);
            transform: scale(1.1);
        }
        
        .cart-item-price {
            color: #ddac0b;
            font-weight: 700;
            font-size: 1.1em;
        }
        
        .remove-item {
            background: rgba(255, 50, 50, 0.3);
            border: none;
            color: white;
            padding: 5px 10px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.85em;
            transition: all 0.3s ease;
            margin-top: 8px;
        }
        
        .remove-item:hover {
            background: rgba(255, 50, 50, 0.6);
        }
        
        .cart-footer {
            padding: 25px;
            border-top: 2px solid rgba(221, 172, 11, 0.3);
        }
        
        .cart-total {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            font-size: 1.4em;
            font-weight: 700;
        }
        
        .cart-total-label {
            color: rgba(255, 255, 255, 0.9);
        }
        
        .cart-total-amount {
            background: linear-gradient(135deg, #ddac0b 0%, #ffd700 50%, #ddac0b 100%);
            background-size: 200% auto;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            filter: drop-shadow(0 0 20px rgba(221, 172, 11, 0.7));
            font-size: 1.2em;
        }
        
        .checkout-btn {
            width: 100%;
            padding: 20px;
            background: linear-gradient(135deg, rgba(221, 172, 11, 0.95), rgba(196, 209, 12, 0.9));
            backdrop-filter: blur(15px);
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 18px;
            color: #001f3f;
            font-weight: 700;
            font-size: 1.3em;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            font-family: 'Montserrat', sans-serif;
            text-transform: uppercase;
            letter-spacing: 2px;
            box-shadow: 0 10px 35px rgba(221, 172, 11, 0.4), 0 0 0 1px rgba(255, 255, 255, 0.2) inset;
            position: relative;
            overflow: hidden;
        }
        
        .checkout-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
            transition: left 0.6s ease;
        }
        
        .checkout-btn:hover::before {
            left: 100%;
        }
        
        .checkout-btn:hover {
            background: linear-gradient(135deg, rgba(255, 200, 50, 1), rgba(221, 172, 11, 1));
            transform: translateY(-3px) scale(1.02);
            box-shadow: 0 15px 50px rgba(221, 172, 11, 0.6), 0 0 50px rgba(221, 172, 11, 0.4), 0 0 0 1px rgba(255, 255, 255, 0.3) inset;
            border-color: rgba(255, 255, 255, 0.5);
        }
        
        .empty-cart {
            text-align: center;
            padding: 40px 20px;
            color: rgba(255, 255, 255, 0.6);
        }
        
        .empty-cart-icon {
            font-size: 80px;
            margin-bottom: 20px;
            opacity: 0.5;
        }
        /* Overlay */
        
        .cart-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
            z-index: 1999;
        }
        
        .cart-overlay.active {
            opacity: 1;
            visibility: visible;
        }
        /* Panneau d'administration */
        
        .admin-panel {
            position: fixed;
            bottom: 30px;
            right: 30px;
            z-index: 25000;
        }
        
        .admin-toggle-btn {
            width: 70px;
            height: 70px;
            border-radius: 50%;
            background: linear-gradient(135deg, rgba(221, 172, 11, 0.95), rgba(196, 209, 12, 0.9));
            border: 3px solid rgba(255, 255, 255, 0.3);
            color: #001f3f;
            font-size: 32px;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 10px 35px rgba(221, 172, 11, 0.5), 0 0 0 1px rgba(255, 255, 255, 0.2) inset;
            display: none;
            align-items: center;
            justify-content: center;
        }
        
        .admin-toggle-btn.visible {
            display: flex;
        }
        
        .admin-toggle-btn:hover {
            transform: scale(1.1) rotate(90deg);
            box-shadow: 0 15px 50px rgba(221, 172, 11, 0.7), 0 0 50px rgba(221, 172, 11, 0.4);
        }
        
        .admin-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.85);
            backdrop-filter: blur(10px);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 21000;
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        
        .admin-modal.active {
            display: flex;
            opacity: 1;
        }
        
        .admin-modal-content {
            background: linear-gradient(135deg, rgba(0, 31, 63, 0.98), rgba(0, 50, 100, 0.98));
            backdrop-filter: blur(40px) saturate(180%);
            border-radius: 30px;
            padding: 40px;
            width: 90%;
            max-width: 1200px;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.6), 0 0 0 2px rgba(221, 172, 11, 0.5) inset;
            border: 3px solid rgba(221, 172, 11, 0.6);
        }
        
        .admin-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid rgba(221, 172, 11, 0.5);
        }
        
        .admin-header h2 {
            background: linear-gradient(135deg, #ddac0b 0%, #ffd700 50%, #ddac0b 100%);
            background-size: 200% auto;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-family: 'Oswald', sans-serif;
            font-size: 2.5em;
            filter: drop-shadow(0 0 20px rgba(221, 172, 11, 0.6));
        }
        
        .admin-close-btn {
            background: none;
            border: none;
            color: white;
            font-size: 2.5em;
            cursor: pointer;
            transition: all 0.3s ease;
            padding: 0;
            line-height: 1;
        }
        
        .admin-close-btn:hover {
            color: #ddac0b;
            transform: rotate(90deg);
        }
        
        .admin-tabs {
            display: flex;
            gap: 15px;
            margin-bottom: 30px;
        }
        
        .admin-tab-btn {
            padding: 15px 30px;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.08), rgba(255, 255, 255, 0.04));
            backdrop-filter: blur(15px);
            border: 2px solid rgba(221, 172, 11, 0.3);
            border-radius: 15px;
            color: rgba(255, 255, 255, 0.7);
            font-weight: 600;
            cursor: pointer;
            transition: all 0.4s ease;
            font-family: 'Montserrat', sans-serif;
        }
        
        .admin-tab-btn.active {
            background: linear-gradient(135deg, rgba(221, 172, 11, 0.3), rgba(196, 209, 12, 0.25));
            border-color: rgba(221, 172, 11, 0.8);
            color: #ffd700;
            box-shadow: 0 4px 20px rgba(221, 172, 11, 0.3);
        }
        
        .admin-tab-btn:hover {
            background: linear-gradient(135deg, rgba(221, 172, 11, 0.2), rgba(196, 209, 12, 0.15));
            border-color: rgba(221, 172, 11, 0.6);
            color: #ffd700;
        }
        
        .admin-tab-content {
            display: none;
        }
        
        .admin-tab-content.active {
            display: block;
        }
        
        .product-form {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 25px;
        }
        
        .form-group {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        .form-group.full-width {
            grid-column: 1 / -1;
        }
        
        .form-group label {
            color: #ffd700;
            font-weight: 600;
            font-size: 1.05em;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .form-group input,
        .form-group select,
        .form-group textarea {
            padding: 15px;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.12), rgba(255, 255, 255, 0.08));
            backdrop-filter: blur(15px);
            border: 2px solid rgba(221, 172, 11, 0.4);
            border-radius: 12px;
            color: white;
            font-family: 'Quicksand', sans-serif;
            font-size: 1em;
            transition: all 0.3s ease;
        }
        
        .form-group textarea {
            resize: vertical;
            min-height: 100px;
        }
        
        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: rgba(221, 172, 11, 0.8);
            background: linear-gradient(135deg, rgba(221, 172, 11, 0.15), rgba(196, 209, 12, 0.1));
            box-shadow: 0 0 25px rgba(221, 172, 11, 0.2);
        }
        
        .form-group input::placeholder,
        .form-group textarea::placeholder {
            color: rgba(255, 255, 255, 0.4);
        }
        
        .form-group select option {
            background: #001f3f;
            color: white;
        }
        
        .sizes-input-container {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            padding: 15px;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.08), rgba(255, 255, 255, 0.04));
            backdrop-filter: blur(10px);
            border: 2px solid rgba(221, 172, 11, 0.3);
            border-radius: 12px;
        }
        
        .size-tag {
            padding: 8px 15px;
            background: linear-gradient(135deg, rgba(221, 172, 11, 0.3), rgba(196, 209, 12, 0.25));
            border: 1px solid rgba(221, 172, 11, 0.5);
            border-radius: 20px;
            color: #ffd700;
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.95em;
        }
        
        .size-tag button {
            background: none;
            border: none;
            color: #ffd700;
            cursor: pointer;
            font-size: 1.2em;
            padding: 0;
            line-height: 1;
            transition: color 0.2s ease;
        }
        
        .size-tag button:hover {
            color: #ff4444;
        }
        
        .size-input-group {
            display: flex;
            gap: 10px;
            width: 100%;
        }
        
        .size-input-group input {
            flex: 1;
        }
        
        .size-input-group button {
            padding: 12px 25px;
            background: linear-gradient(135deg, rgba(221, 172, 11, 0.3), rgba(196, 209, 12, 0.25));
            border: 2px solid rgba(221, 172, 11, 0.6);
            border-radius: 12px;
            color: #ffd700;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .size-input-group button:hover {
            background: linear-gradient(135deg, rgba(221, 172, 11, 0.5), rgba(196, 209, 12, 0.45));
            box-shadow: 0 4px 20px rgba(221, 172, 11, 0.3);
        }
        
        .images-upload-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 15px;
            margin-bottom: 15px;
        }
        
        .image-slot {
            position: relative;
            aspect-ratio: 1;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.08), rgba(255, 255, 255, 0.04));
            backdrop-filter: blur(10px);
            border: 2px dashed rgba(221, 172, 11, 0.4);
            border-radius: 12px;
            overflow: hidden;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .image-slot:hover {
            border-color: rgba(221, 172, 11, 0.8);
            background: linear-gradient(135deg, rgba(221, 172, 11, 0.1), rgba(196, 209, 12, 0.05));
        }
        
        .image-slot img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .image-slot-placeholder {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100%;
            color: rgba(255, 255, 255, 0.5);
            font-size: 0.9em;
        }
        
        .image-slot-remove {
            position: absolute;
            top: 5px;
            right: 5px;
            background: rgba(220, 38, 38, 0.9);
            color: white;
            border: none;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            font-size: 18px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            z-index: 10;
        }
        
        .image-slot-remove:hover {
            background: rgba(220, 38, 38, 1);
            transform: scale(1.1);
        }
        
        .btn-add-image {
            padding: 12px 24px;
            background: linear-gradient(135deg, rgba(221, 172, 11, 0.3), rgba(196, 209, 12, 0.25));
            border: 2px solid rgba(221, 172, 11, 0.6);
            border-radius: 12px;
            color: #ffd700;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
        }
        
        .btn-add-image:hover {
            background: linear-gradient(135deg, rgba(221, 172, 11, 0.5), rgba(196, 209, 12, 0.45));
            box-shadow: 0 4px 20px rgba(221, 172, 11, 0.3);
        }
        
        .btn-add-image:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        .form-actions {
            grid-column: 1 / -1;
            display: flex;
            gap: 15px;
            margin-top: 20px;
        }
        
        .btn-primary,
        .btn-secondary {
            flex: 1;
            padding: 18px;
            border-radius: 15px;
            font-weight: 700;
            font-size: 1.1em;
            cursor: pointer;
            transition: all 0.4s ease;
            font-family: 'Montserrat', sans-serif;
            text-transform: uppercase;
            letter-spacing: 1.5px;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, rgba(221, 172, 11, 0.95), rgba(196, 209, 12, 0.9));
            border: 2px solid rgba(255, 255, 255, 0.3);
            color: #001f3f;
            box-shadow: 0 10px 35px rgba(221, 172, 11, 0.4);
        }
        
        .btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 50px rgba(221, 172, 11, 0.6);
        }
        
        .btn-secondary {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.12), rgba(255, 255, 255, 0.08));
            border: 2px solid rgba(221, 172, 11, 0.4);
            color: #ffd700;
        }
        
        .btn-secondary:hover {
            background: linear-gradient(135deg, rgba(221, 172, 11, 0.2), rgba(196, 209, 12, 0.15));
            border-color: rgba(221, 172, 11, 0.8);
        }
        
        .products-list {
            display: grid;
            gap: 20px;
        }
        
        .product-item-admin {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.08), rgba(255, 255, 255, 0.04));
            backdrop-filter: blur(15px);
            border: 2px solid rgba(221, 172, 11, 0.3);
            border-radius: 20px;
            padding: 25px;
            display: grid;
            grid-template-columns: 120px 1fr auto;
            gap: 25px;
            align-items: center;
            transition: all 0.3s ease;
        }
        
        .product-item-admin:hover {
            border-color: rgba(221, 172, 11, 0.6);
            box-shadow: 0 8px 30px rgba(221, 172, 11, 0.2);
        }
        
        .product-item-image {
            width: 120px;
            height: 120px;
            border-radius: 15px;
            object-fit: cover;
            background: rgba(255, 255, 255, 0.05);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 50px;
        }
        
        .product-item-info h3 {
            color: #ffd700;
            font-size: 1.4em;
            margin-bottom: 8px;
        }
        
        .product-item-info p {
            color: rgba(255, 255, 255, 0.7);
            margin-bottom: 5px;
        }
        
        .product-item-actions {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        .btn-edit,
        .btn-delete {
            padding: 12px 25px;
            border-radius: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid;
            white-space: nowrap;
        }
        
        .btn-edit {
            background: linear-gradient(135deg, rgba(221, 172, 11, 0.3), rgba(196, 209, 12, 0.25));
            border-color: rgba(221, 172, 11, 0.6);
            color: #ffd700;
        }
        
        .btn-edit:hover {
            background: linear-gradient(135deg, rgba(221, 172, 11, 0.5), rgba(196, 209, 12, 0.45));
            box-shadow: 0 4px 20px rgba(221, 172, 11, 0.3);
        }
        
        .btn-delete {
            background: linear-gradient(135deg, rgba(255, 68, 68, 0.3), rgba(255, 68, 68, 0.2));
            border-color: rgba(255, 68, 68, 0.6);
            color: #ff4444;
        }
        
        .btn-delete:hover {
            background: linear-gradient(135deg, rgba(255, 68, 68, 0.5), rgba(255, 68, 68, 0.4));
            box-shadow: 0 4px 20px rgba(255, 68, 68, 0.3);
        }
        
        .stock-indicator {
            display: inline-block;
            padding: 6px 15px;
            border-radius: 20px;
            font-size: 0.85em;
            font-weight: 600;
            margin-left: 10px;
        }
        
        .stock-indicator.in-stock {
            background: linear-gradient(135deg, rgba(34, 197, 94, 0.3), rgba(34, 197, 94, 0.2));
            border: 1px solid rgba(34, 197, 94, 0.6);
            color: #4ade80;
        }
        
        .stock-indicator.on-order {
            background: linear-gradient(135deg, rgba(251, 191, 36, 0.3), rgba(251, 191, 36, 0.2));
            border: 1px solid rgba(251, 191, 36, 0.6);
            color: #fbbf24;
        }
        
        .stock-indicator.out-of-stock {
            background: linear-gradient(135deg, rgba(239, 68, 68, 0.3), rgba(239, 68, 68, 0.2));
            border: 1px solid rgba(239, 68, 68, 0.6);
            color: #ef4444;
        }
        /* Modals personnalisés */
        
        .custom-modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.85);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 30000;
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        
        .custom-modal-overlay.active {
            display: flex;
            opacity: 1;
        }
        
        .custom-modal {
            background: linear-gradient(135deg, rgba(0, 31, 63, 0.98), rgba(0, 50, 100, 0.98));
            backdrop-filter: blur(40px) saturate(180%);
            -webkit-backdrop-filter: blur(40px) saturate(180%);
            border-radius: 25px;
            padding: 40px;
            max-width: 500px;
            width: 90%;
            border: 3px solid rgba(221, 172, 11, 0.6);
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.6), 0 0 0 2px rgba(221, 172, 11, 0.3) inset, 0 0 50px rgba(221, 172, 11, 0.2);
            transform: scale(0.9);
            transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .custom-modal-overlay.active .custom-modal {
            transform: scale(1);
        }
        
        .custom-modal-icon {
            font-size: 70px;
            text-align: center;
            margin-bottom: 20px;
            animation: iconBounce 0.6s ease;
        }
        
        @keyframes iconBounce {
            0%,
            100% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.2);
            }
        }
        
        .custom-modal-title {
            font-size: 1.8em;
            font-weight: 700;
            background: linear-gradient(135deg, #ddac0b 0%, #ffd700 50%, #ddac0b 100%);
            background-size: 200% auto;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-align: center;
            margin-bottom: 15px;
            font-family: 'Montserrat', sans-serif;
            filter: drop-shadow(0 0 20px rgba(221, 172, 11, 0.5));
        }
        
        .custom-modal-message {
            color: rgba(255, 255, 255, 0.9);
            text-align: center;
            font-size: 1.1em;
            line-height: 1.6;
            margin-bottom: 30px;
        }
        
        .custom-modal-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
        }
        
        .custom-modal-btn {
            padding: 15px 35px;
            border-radius: 15px;
            font-weight: 700;
            font-size: 1em;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            font-family: 'Montserrat', sans-serif;
            text-transform: uppercase;
            letter-spacing: 1.5px;
            border: 2px solid;
            min-width: 120px;
        }
        
        .custom-modal-btn-primary {
            background: linear-gradient(135deg, rgba(221, 172, 11, 0.95), rgba(196, 209, 12, 0.9));
            border-color: rgba(255, 255, 255, 0.3);
            color: #001f3f;
            box-shadow: 0 10px 35px rgba(221, 172, 11, 0.4);
        }
        
        .custom-modal-btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 50px rgba(221, 172, 11, 0.6);
        }
        
        .custom-modal-btn-secondary {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.12), rgba(255, 255, 255, 0.08));
            border-color: rgba(221, 172, 11, 0.4);
            color: #ffd700;
        }
        
        .custom-modal-btn-secondary:hover {
            background: linear-gradient(135deg, rgba(221, 172, 11, 0.2), rgba(196, 209, 12, 0.15));
            border-color: rgba(221, 172, 11, 0.8);
            transform: translateY(-2px);
        }
        
        .custom-modal-btn-danger {
            background: linear-gradient(135deg, rgba(239, 68, 68, 0.95), rgba(220, 38, 38, 0.9));
            border-color: rgba(255, 255, 255, 0.3);
            color: white;
            box-shadow: 0 10px 35px rgba(239, 68, 68, 0.4);
        }
        /* Modal détails produit */
        
        .product-detail-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0);
            backdrop-filter: blur(0px);
            z-index: 35000;
            overflow-y: auto;
            padding: 40px 20px;
            opacity: 0;
            transition: opacity 0.6s ease-in-out, backdrop-filter 0.6s ease-in-out, background 0.6s ease-in-out;
        }
        
        .product-detail-modal.active {
            display: flex;
            justify-content: center;
            align-items: flex-start;
            opacity: 1;
            background: rgba(0, 0, 0, 0.9);
            backdrop-filter: blur(10px);
        }
        
        .product-detail-modal.closing {
            opacity: 0;
            background: rgba(0, 0, 0, 0);
            backdrop-filter: blur(0px);
        }
        
        .product-detail-content {
            background: transparent;
            backdrop-filter: none;
            max-width: 1200px;
            max-height: 90vh;
            width: calc(100% - 40px);
            margin: 0 20px;
            border-radius: 0;
            border: none;
            position: relative;
            opacity: 0;
            transform: translateY(20px) scale(0.97);
            transition: opacity 0.6s ease-out, transform 0.6s cubic-bezier(0.16, 1, 0.3, 1);
            overflow-y: auto;
            overflow-x: hidden;
            box-sizing: border-box;
        }
        
        .product-detail-modal.active .product-detail-content {
            opacity: 1;
            transform: translateY(0) scale(1);
            transition-delay: 0.1s;
        }
        
        .product-detail-modal.closing .product-detail-content {
            opacity: 0;
            transform: translateY(-20px) scale(0.97);
            transition-delay: 0s;
        }
        
        .product-detail-content::-webkit-scrollbar {
            width: 10px;
        }
        
        .product-detail-content::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 5px;
        }
        
        .product-detail-content::-webkit-scrollbar-thumb {
            background: linear-gradient(135deg, rgba(221, 172, 11, 0.6), rgba(255, 215, 0, 0.5));
            border-radius: 5px;
            transition: all 0.3s ease;
        }
        
        .product-detail-content::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(135deg, rgba(221, 172, 11, 0.8), rgba(255, 215, 0, 0.7));
        }
        
        .product-detail-close {
            position: absolute;
            top: 20px;
            right: 20px;
            background: transparent;
            border: none;
            color: white;
            font-size: 2em;
            cursor: pointer;
            transition: all 0.3s ease;
            z-index: 10;
        }
        
        .product-detail-close:hover {
            color: rgba(221, 172, 11, 0.9);
            filter: drop-shadow(0 0 10px rgba(221, 172, 11, 0.6));
            transform: rotate(90deg);
        }
        
        .product-detail-grid {
            display: grid;
            grid-template-columns: minmax(450px, 1.8fr) minmax(350px, 1fr);
            gap: 100px;
            padding: 60px 80px;
            align-items: start;
            width: 100%;
            max-width: 100%;
            box-sizing: border-box;
        }
        
        @media (max-width: 1400px) {
            .product-detail-grid {
                grid-template-columns: 1fr 1fr;
                gap: 40px;
                padding: 40px;
            }
            .product-detail-info h2 {
                font-size: clamp(1.8em, 3.5vw, 4em);
            }
        }
        
        @media (max-width: 1100px) {
            .product-detail-grid {
                grid-template-columns: 1fr;
                gap: 30px;
                padding: 30px;
            }
            .product-detail-info h2 {
                font-size: clamp(2em, 5vw, 5em);
            }
        }
        
        .product-detail-images-container {
            display: flex;
            gap: 15px;
            align-items: flex-start;
            height: fit-content;
            min-width: 0;
            max-width: 100%;
        }
        
        .product-detail-thumbnails {
            display: flex;
            flex-direction: column;
            gap: 10px;
            width: 80px;
            flex-shrink: 0;
        }
        
        .product-thumbnail {
            width: 80px;
            height: 80px;
            object-fit: cover;
            cursor: pointer;
            border: 2px solid transparent;
            transition: all 0.3s ease;
            opacity: 0.6;
        }
        
        .product-thumbnail:hover {
            opacity: 1;
            border-color: rgba(221, 172, 11, 0.5);
        }
        
        .product-thumbnail.active {
            opacity: 1;
            border-color: rgba(221, 172, 11, 1);
            box-shadow: 0 0 15px rgba(221, 172, 11, 0.4);
        }
        
        .product-detail-image {
            flex: 1;
            width: 100%;
            max-height: calc(80vh - 120px);
            max-width: 100%;
            object-fit: contain;
            background: linear-gradient( 135deg, rgba(5, 10, 25, 0.95) 0%, rgba(10, 20, 40, 0.92) 50%, rgba(5, 10, 25, 0.95) 100%);
            border: 1px solid rgba(221, 172, 11, 0.2);
            box-shadow: 0 0 30px rgba(0, 0, 0, 0.5), inset 0 0 50px rgba(0, 0, 0, 0.3);
            padding: 20px;
        }
        
        .product-detail-left {
            display: flex;
            flex-direction: column;
            gap: 20px;
            height: fit-content;
        }
        
        .product-detail-info {
            display: flex;
            flex-direction: column;
            min-height: 0;
            min-width: 0;
            width: 100%;
        }
        
        .product-detail-info h2 {
            font-size: clamp(2em, 4vw, 5em);
            margin: 0 0 20px 0;
            color: #ddac0b;
            font-family: 'Alex Brush', 'Mr Dafoe', 'Parisienne', 'Allura', cursive;
            -webkit-text-stroke: 0.5px rgba(255, 255, 255, 0.3);
            filter: drop-shadow(0 0 8px rgba(221, 172, 11, 0.25));
            line-height: 1.2;
            width: 100%;
            word-wrap: break-word;
            overflow-wrap: break-word;
            white-space: normal;
        }
        
        .product-detail-category {
            color: rgba(221, 172, 11, 0.9);
            text-transform: uppercase;
            letter-spacing: 2px;
            font-size: 0.9em;
            margin-bottom: 15px;
            max-width: 100%;
            overflow-wrap: break-word;
        }
        
        .product-detail-price {
            font-size: 1.8em;
            background: linear-gradient(135deg, #ddac0b 0%, #ffd700 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-weight: 600;
            margin-bottom: 30px;
            max-width: 100%;
            overflow-wrap: break-word;
        }
        
        .product-detail-description {
            color: rgba(255, 255, 255, 0.9);
            line-height: 1.8;
            margin-bottom: 30px;
            font-size: 1.1em;
            max-width: 100%;
            word-wrap: break-word;
            overflow-wrap: break-word;
        }
        
        .product-detail-rating {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 15px 20px;
            background: rgba(0, 0, 0, 0.2);
            border-top: 1px solid rgba(221, 172, 11, 0.2);
            margin-top: 10px;
        }
        
        .rating-stars {
            display: flex;
            gap: 5px;
            font-size: 1.5em;
        }
        
        .star {
            color: rgba(221, 172, 11, 0.3);
        }
        
        .star.filled {
            color: rgba(221, 172, 11, 1);
            filter: drop-shadow(0 0 5px rgba(221, 172, 11, 0.5));
        }
        
        .rating-count {
            color: rgba(255, 255, 255, 0.7);
            font-size: 0.95em;
        }
        /* Section commentaires */
        
        .reviews-section {
            padding: 40px 60px 60px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .reviews-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
        }
        
        .reviews-header h3 {
            font-size: 1.8em;
            color: white;
        }
        
        .write-review-btn {
            padding: 12px 30px;
            background: linear-gradient( 180deg, rgba(221, 172, 11, 0.3) 0%, rgba(221, 172, 11, 0.4) 100%);
            border: none;
            border-top: 1px solid rgba(221, 172, 11, 0.5);
            color: white;
            cursor: pointer;
            text-transform: uppercase;
            letter-spacing: 1.5px;
            transition: all 0.3s ease;
        }
        
        .write-review-btn:hover {
            background: linear-gradient( 180deg, rgba(221, 172, 11, 0.5) 0%, rgba(221, 172, 11, 0.6) 100%);
            transform: translateY(-2px);
        }
        
        .review-form {
            background: rgba(0, 0, 0, 0.4);
            padding: 30px;
            margin-bottom: 40px;
            border-top: 1px solid rgba(221, 172, 11, 0.3);
            display: none;
        }
        
        .review-form.active {
            display: block;
        }
        
        .review-form-group {
            margin-bottom: 20px;
        }
        
        .review-form-group label {
            display: block;
            margin-bottom: 10px;
            color: rgba(255, 255, 255, 0.9);
            font-weight: 600;
        }
        
        .review-form-group input,
        .review-form-group textarea {
            width: 100%;
            padding: 15px;
            background: rgba(0, 0, 0, 0.3);
            border: none;
            border-bottom: 1px solid rgba(221, 172, 11, 0.3);
            color: white;
            font-family: 'Quicksand', sans-serif;
            transition: all 0.3s ease;
        }
        
        .review-form-group textarea {
            min-height: 120px;
            resize: vertical;
        }
        
        .review-form-group input:focus,
        .review-form-group textarea:focus {
            outline: none;
            border-bottom-color: rgba(221, 172, 11, 0.8);
        }
        
        .rating-input {
            display: flex;
            gap: 10px;
            font-size: 2em;
        }
        
        .rating-input .star {
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .rating-input .star:hover,
        .rating-input .star.selected {
            color: rgba(221, 172, 11, 1);
            filter: drop-shadow(0 0 8px rgba(221, 172, 11, 0.6));
        }
        
        .review-form-actions {
            display: flex;
            gap: 15px;
            margin-top: 25px;
        }
        
        .review-list {
            display: flex;
            flex-direction: column;
            gap: 25px;
        }
        
        .review-item {
            background: transparent;
            padding: 20px 0;
            border: none;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }
        
        .review-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 12px;
        }
        
        .review-author {
            font-weight: 600;
            color: white;
            font-size: 0.95em;
        }
        
        .review-date {
            color: rgba(255, 255, 255, 0.4);
            font-size: 0.85em;
        }
        
        .review-rating {
            display: flex;
            gap: 5px;
            margin-bottom: 10px;
        }
        
        .review-text {
            color: rgba(255, 255, 255, 0.9);
            line-height: 1.6;
            font-size: 0.95em;
        }
        
        .no-reviews {
            text-align: center;
            padding: 60px 20px;
            color: rgba(255, 255, 255, 0.5);
            font-style: italic;
        }
        
        @media (max-width: 968px) {
            .reviews-section {
                padding: 30px 40px 40px;
            }
        }
        
        .custom-modal-btn-danger:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 50px rgba(239, 68, 68, 0.6);
        }

        /* Modal Collections et À propos */
        .page-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.95);
            backdrop-filter: blur(15px);
            z-index: 20000;
            display: none;
            opacity: 0;
            transition: opacity 0.4s ease;
            overflow-y: auto;
        }

        .page-modal.active {
            display: block;
            opacity: 1;
        }

        .page-modal-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 40px 20px;
            min-height: 100vh;
        }

        .page-modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 40px;
            padding-bottom: 20px;
            border-bottom: 2px solid rgba(221, 172, 11, 0.3);
        }

        .page-modal-title {
            font-family: 'Alex Brush', cursive;
            font-size: 4em;
            color: white;
            text-shadow: 0 0 20px rgba(221, 172, 11, 0.5);
        }

        .page-modal-close {
            background: none;
            border: 2px solid rgba(255, 255, 255, 0.3);
            color: white;
            font-size: 2em;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .page-modal-close:hover {
            border-color: #ddac0b;
            color: #ddac0b;
            transform: rotate(90deg);
        }

        /* Collections Grid */
        .collections-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 30px;
            margin-top: 30px;
        }

        .collection-card {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.05), rgba(255, 255, 255, 0.02));
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            overflow: hidden;
            transition: all 0.4s ease;
            cursor: pointer;
        }

        .collection-card:hover {
            transform: translateY(-10px);
            border-color: rgba(221, 172, 11, 0.5);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3), 0 0 30px rgba(221, 172, 11, 0.2);
        }

        .collection-image {
            width: 100%;
            height: 250px;
            object-fit: cover;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .collection-info {
            padding: 25px;
        }

        .collection-name {
            font-family: 'Montserrat', sans-serif;
            font-size: 1.4em;
            font-weight: 600;
            color: white;
            margin-bottom: 10px;
        }

        .collection-description {
            color: rgba(255, 255, 255, 0.6);
            font-size: 0.95em;
            line-height: 1.6;
        }

        .collection-count {
            margin-top: 15px;
            color: #ddac0b;
            font-size: 0.9em;
            font-weight: 500;
        }

        /* À propos Section */
        .about-content {
            max-width: 900px;
            margin: 0 auto;
        }

        .about-section {
            margin-bottom: 50px;
        }

        .about-section-title {
            font-family: 'Montserrat', sans-serif;
            font-size: 1.8em;
            font-weight: 600;
            color: #ddac0b;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .about-section-title::before {
            content: '';
            width: 4px;
            height: 30px;
            background: linear-gradient(180deg, #ddac0b, transparent);
            border-radius: 2px;
        }

        .about-text {
            color: rgba(255, 255, 255, 0.85);
            font-size: 1.1em;
            line-height: 1.8;
            text-align: justify;
        }

        .about-artist-image {
            width: 200px;
            height: 200px;
            border-radius: 50%;
            object-fit: cover;
            border: 3px solid rgba(221, 172, 11, 0.5);
            margin: 0 auto 30px;
            display: block;
        }

        .about-empty {
            text-align: center;
            padding: 60px 20px;
            color: rgba(255, 255, 255, 0.5);
        }

        .about-empty-icon {
            font-size: 4em;
            margin-bottom: 20px;
        }

        /* Admin À propos editor */
        .about-editor-section {
            background: rgba(0, 0, 0, 0.2);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .about-editor-label {
            color: #ddac0b;
            font-weight: 600;
            margin-bottom: 10px;
            display: block;
        }

        .about-editor-textarea {
            width: 100%;
            min-height: 150px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            padding: 15px;
            color: white;
            font-family: 'Quicksand', sans-serif;
            font-size: 1em;
            resize: vertical;
            transition: border-color 0.3s ease;
        }

        .about-editor-textarea:focus {
            outline: none;
            border-color: #ddac0b;
        }

        /* Orders Modal */
        .orders-list {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .order-card {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.05), rgba(255, 255, 255, 0.02));
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 25px;
            transition: all 0.3s ease;
        }

        .order-card:hover {
            border-color: rgba(221, 172, 11, 0.3);
        }

        .order-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 15px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .order-number {
            font-weight: 600;
            color: #ddac0b;
            font-size: 1.1em;
        }

        .order-date {
            color: rgba(255, 255, 255, 0.5);
            font-size: 0.9em;
        }

        .order-status {
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.85em;
            font-weight: 600;
            text-transform: uppercase;
        }

        .order-status.pending { background: rgba(234, 179, 8, 0.2); color: #eab308; }
        .order-status.paid { background: rgba(34, 197, 94, 0.2); color: #22c55e; }
        .order-status.processing { background: rgba(59, 130, 246, 0.2); color: #3b82f6; }
        .order-status.shipped { background: rgba(139, 92, 246, 0.2); color: #8b5cf6; }
        .order-status.delivered { background: rgba(34, 197, 94, 0.3); color: #22c55e; }
        .order-status.cancelled { background: rgba(239, 68, 68, 0.2); color: #ef4444; }

        .order-items {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-bottom: 15px;
        }

        .order-item {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 10px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 10px;
        }

        .order-item-image {
            width: 50px;
            height: 50px;
            object-fit: cover;
            border-radius: 8px;
        }

        .order-item-info {
            flex: 1;
        }

        .order-item-name {
            color: white;
            font-weight: 500;
        }

        .order-item-details {
            color: rgba(255, 255, 255, 0.5);
            font-size: 0.85em;
        }

        .order-total {
            text-align: right;
            font-size: 1.2em;
            color: #ddac0b;
            font-weight: 600;
        }

        .orders-empty {
            text-align: center;
            padding: 60px 20px;
            color: rgba(255, 255, 255, 0.5);
        }

        /* Wishlist Modal */
        .wishlist-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
        }

        .wishlist-card {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.05), rgba(255, 255, 255, 0.02));
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            overflow: hidden;
            transition: all 0.3s ease;
        }

        .wishlist-card:hover {
            transform: translateY(-5px);
            border-color: rgba(221, 172, 11, 0.4);
        }

        .wishlist-card-image {
            width: 100%;
            height: 200px;
            object-fit: cover;
        }

        .wishlist-card-content {
            padding: 20px;
        }

        .wishlist-card-name {
            color: white;
            font-weight: 600;
            font-size: 1.1em;
            margin-bottom: 10px;
        }

        .wishlist-card-price {
            color: #ddac0b;
            font-weight: 600;
            font-size: 1.2em;
            margin-bottom: 15px;
        }

        .wishlist-card-actions {
            display: flex;
            gap: 10px;
        }

        .wishlist-btn {
            flex: 1;
            padding: 10px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .wishlist-btn-cart {
            background: linear-gradient(135deg, #ddac0b, #b8900a);
            color: #000;
        }

        .wishlist-btn-remove {
            background: rgba(239, 68, 68, 0.2);
            color: #ef4444;
        }

        .wishlist-btn:hover {
            transform: translateY(-2px);
        }

        /* Product Wishlist Button */
        .product-wishlist-btn {
            position: absolute;
            top: 15px;
            right: 15px;
            background: rgba(0, 0, 0, 0.5);
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            z-index: 10;
        }

        .product-wishlist-btn svg {
            width: 20px;
            height: 20px;
            fill: white;
            transition: all 0.3s ease;
        }

        .product-wishlist-btn:hover,
        .product-wishlist-btn.active {
            background: rgba(239, 68, 68, 0.8);
        }

        .product-wishlist-btn.active svg {
            fill: white;
        }

        /* Stock indicator */
        .stock-indicator {
            display: inline-flex;
            align-items: center;
            gap: 5px;
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 0.75em;
            font-weight: 600;
            margin-top: 8px;
        }

        .stock-indicator.in-stock {
            background: rgba(34, 197, 94, 0.2);
            color: #22c55e;
        }

        .stock-indicator.low-stock {
            background: rgba(234, 179, 8, 0.2);
            color: #eab308;
        }

        .stock-indicator.out-of-stock {
            background: rgba(239, 68, 68, 0.2);
            color: #ef4444;
        }

        /* Promo Code in Cart */
        .promo-code-section {
            padding: 15px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            margin-top: 15px;
        }

        .promo-code-input-group {
            display: flex;
            gap: 10px;
        }

        .promo-code-input {
            flex: 1;
            padding: 10px 15px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            color: white;
            font-size: 0.9em;
            text-transform: uppercase;
        }

        .promo-code-input:focus {
            outline: none;
            border-color: #ddac0b;
        }

        .promo-code-btn {
            padding: 10px 20px;
            background: rgba(221, 172, 11, 0.2);
            border: 1px solid rgba(221, 172, 11, 0.4);
            border-radius: 8px;
            color: #ddac0b;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .promo-code-btn:hover {
            background: rgba(221, 172, 11, 0.3);
        }

        .promo-code-success {
            margin-top: 10px;
            padding: 10px;
            background: rgba(34, 197, 94, 0.2);
            border-radius: 8px;
            color: #22c55e;
            font-size: 0.9em;
        }

        .promo-code-error {
            margin-top: 10px;
            padding: 10px;
            background: rgba(239, 68, 68, 0.2);
            border-radius: 8px;
            color: #ef4444;
            font-size: 0.9em;
        }

        .discount-line {
            display: flex;
            justify-content: space-between;
            padding: 5px 0;
            color: #22c55e;
            font-size: 0.9em;
        }

        /* Admin Stats Dashboard */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stats-card {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.05), rgba(255, 255, 255, 0.02));
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 25px;
            text-align: center;
        }

        .stats-card-icon {
            font-size: 2em;
            margin-bottom: 10px;
        }

        .stats-card-value {
            font-size: 2em;
            font-weight: 700;
            color: #ddac0b;
            margin-bottom: 5px;
        }

        .stats-card-label {
            color: rgba(255, 255, 255, 0.6);
            font-size: 0.9em;
        }

        /* Admin Orders Table */
        .admin-orders-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }

        .admin-orders-table th,
        .admin-orders-table td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .admin-orders-table th {
            color: #ddac0b;
            font-weight: 600;
            text-transform: uppercase;
            font-size: 0.85em;
        }

        .admin-orders-table td {
            color: rgba(255, 255, 255, 0.9);
        }

        .admin-orders-table tr:hover td {
            background: rgba(255, 255, 255, 0.02);
        }

        .status-select {
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            padding: 8px 12px;
            color: white;
            cursor: pointer;
        }

        /* Admin Promo Codes */
        .promo-form {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            padding: 20px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 15px;
            margin-bottom: 20px;
        }

        .promo-form input,
        .promo-form select {
            padding: 12px 15px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            color: white;
        }

        .promo-form input:focus,
        .promo-form select:focus {
            outline: none;
            border-color: #ddac0b;
        }

        .promo-table {
            width: 100%;
            border-collapse: collapse;
        }

        .promo-table th,
        .promo-table td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .promo-table th {
            color: #ddac0b;
            font-weight: 600;
        }

        .promo-table td {
            color: rgba(255, 255, 255, 0.9);
        }

        .promo-status {
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 0.8em;
            font-weight: 600;
        }

        .promo-status.active {
            background: rgba(34, 197, 94, 0.2);
            color: #22c55e;
        }

        .promo-status.inactive {
            background: rgba(239, 68, 68, 0.2);
            color: #ef4444;
        }

        /* Top Products */
        .top-products-list {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .top-product-item {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 15px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 10px;
        }

        .top-product-rank {
            width: 30px;
            height: 30px;
            background: linear-gradient(135deg, #ddac0b, #b8900a);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            color: #000;
        }

        .top-product-image {
            width: 50px;
            height: 50px;
            object-fit: cover;
            border-radius: 8px;
        }

        .top-product-name {
            flex: 1;
            color: white;
        }

        .top-product-sales {
            color: #ddac0b;
            font-weight: 600;
        }

        /* Low Stock Alert */
        .low-stock-list {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .low-stock-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 15px;
            background: rgba(239, 68, 68, 0.1);
            border: 1px solid rgba(239, 68, 68, 0.2);
            border-radius: 10px;
        }

        .low-stock-item .product-name {
            color: white;
        }

        .low-stock-item .stock-count {
            color: #ef4444;
            font-weight: 600;
        }

        /* Responsive Tablette */
        @media (max-width: 1024px) {
            .header-content {
                padding: 0 20px;
                gap: 20px;
            }
            .logo {
                font-size: 5em;
            }
            .container {
                padding: 30px 20px;
            }
            .filters-content {
                padding: 0 30px;
            }
            .filters-content.active {
                padding: 30px;
            }
        }

        /* Responsive Mobile */
        @media (max-width: 768px) {
            /* Header mobile */
            header {
                padding: 15px 0 20px 0;
            }
            .header-content {
                display: block;
                position: relative;
                padding: 0 15px;
                text-align: center;
            }
            .logo {
                font-size: 3em;
                margin-top: 0;
            }
            /* Boutons séparés - menu à gauche, filtres à droite */
            .header-nav {
                position: static;
                display: contents;
                width: auto;
            }
            /* Menu hamburger à gauche */
            .menu-button {
                position: absolute;
                top: 0;
                left: 15px;
                width: 40px;
                height: 40px;
                padding: 8px;
            }
            .menu-line {
                width: 22px;
                height: 2px;
            }
            /* Bouton filtres à droite */
            .filters-toggle-header {
                position: absolute;
                top: 0;
                right: 15px;
                padding: 8px 12px;
                font-size: 0.7em;
                letter-spacing: 1px;
            }
            .header-actions {
                position: fixed;
                bottom: 20px;
                right: 20px;
                z-index: 1000;
            }

            /* Navigation menu mobile - plus étroit */
            .nav-menu {
                width: 280px;
                padding: 70px 25px 25px;
            }
            .nav-link {
                font-size: 1.2em;
                padding: 12px 0;
            }
            .nav-menu-close {
                top: 15px;
                right: 15px;
                font-size: 2em;
            }

            /* Container mobile */
            .container {
                padding: 20px 15px;
            }

            /* Filtres mobile */
            .filters-content {
                padding: 0 15px;
            }
            .filters-content.active {
                padding: 25px 15px;
            }
            .filters-title {
                font-size: 1.3em;
                margin-bottom: 20px;
            }
            .filters-grid {
                grid-template-columns: 1fr;
                gap: 15px;
            }
            .filter-group label {
                font-size: 0.85em;
            }
            .filter-select,
            .filter-input {
                padding: 12px 15px;
                font-size: 0.9em;
            }

            /* Grille produits mobile */
            .products-grid {
                grid-template-columns: 1fr;
                gap: 20px;
            }
            .product-card {
                max-width: 100%;
            }
            .product-name {
                font-size: 1.1em;
            }
            .product-price {
                font-size: 1.3em;
            }
            .add-to-cart-btn {
                padding: 12px 20px;
                font-size: 0.85em;
            }

            /* Panier mobile */
            .cart-sidebar {
                width: 100%;
                right: -100%;
                max-width: 100%;
            }
            .cart-sidebar.open {
                right: 0;
            }
            .cart-header {
                padding: 20px 15px;
            }
            .cart-header h2 {
                font-size: 1.3em;
            }
            .cart-items {
                padding: 15px;
            }
            .cart-item {
                padding: 15px;
                flex-direction: column;
                text-align: center;
                gap: 15px;
            }
            .cart-item-image {
                width: 80px;
                height: 80px;
                margin: 0 auto;
            }
            .cart-item-info {
                width: 100%;
            }
            .cart-item-name {
                font-size: 1em;
            }
            .cart-item-quantity {
                justify-content: center;
            }
            .cart-footer {
                padding: 15px;
            }
            .cart-total {
                font-size: 1.1em;
            }
            .checkout-btn {
                padding: 15px;
                font-size: 1em;
            }

            /* Icône panier mobile */
            .cart-icon {
                padding: 10px;
            }
            .cart-icon svg {
                width: 28px;
                height: 28px;
            }
            .cart-count {
                width: 22px;
                height: 22px;
                font-size: 11px;
                top: -5px;
                right: -5px;
            }

            /* Modal détail produit mobile */
            .product-detail-modal .modal-content {
                width: 95%;
                max-width: 100%;
                margin: 10px;
                padding: 20px;
                max-height: 90vh;
            }
            .product-detail-content {
                flex-direction: column;
            }
            .product-detail-image {
                max-height: 250px;
            }
            .product-detail-name {
                font-size: 1.5em;
            }
            .product-detail-price {
                font-size: 1.8em;
            }
            .product-detail-description {
                font-size: 0.95em;
            }

            /* Admin mobile */
            .admin-modal-content {
                width: 95%;
                padding: 15px;
                margin: 10px;
                max-height: 90vh;
                overflow-y: auto;
            }
            .product-form {
                grid-template-columns: 1fr;
                gap: 12px;
            }
            .product-form input,
            .product-form textarea,
            .product-form select {
                font-size: 16px; /* Évite le zoom sur iOS */
                padding: 12px;
            }
            .product-item-admin {
                grid-template-columns: 1fr;
                text-align: center;
                padding: 15px;
                gap: 10px;
            }
            .product-item-admin img {
                width: 80px;
                height: 80px;
                margin: 0 auto;
            }
            /* Sidebar admin mobile - pleine largeur */
            #adminSidebar.admin-sidebar {
                width: 100% !important;
                left: -100% !important;
            }
            #adminSidebar.admin-sidebar.active {
                left: 0 !important;
            }
            .admin-sidebar-header {
                padding: 15px;
            }
            .admin-sidebar-header h2 {
                font-size: 1.2em;
            }
            #adminSidebar .admin-nav-item {
                padding: 14px 15px !important;
                font-size: 0.95em !important;
            }
            /* Toggle admin plus petit sur mobile */
            .admin-sidebar-toggle {
                bottom: 15px;
                left: 15px;
                width: 42px;
                height: 42px;
                font-size: 16px;
                border-radius: 10px;
            }
            /* Panneau de contenu admin */
            .admin-content-panel {
                left: 0;
                width: 100%;
            }
            .admin-content-header {
                padding: 12px 15px;
                flex-direction: column;
                gap: 10px;
                align-items: flex-start;
            }
            .admin-content-header h3 {
                font-size: 1.1em;
            }
            .admin-content-body {
                padding: 15px;
            }
            /* Boutons admin */
            .admin-btn {
                padding: 10px 15px;
                font-size: 0.85em;
            }
            /* Liste produits admin */
            .admin-products-list {
                gap: 12px;
            }
            .product-admin-actions {
                flex-direction: row;
                justify-content: center;
                gap: 8px;
            }
            .product-admin-actions button {
                padding: 8px 12px;
                font-size: 0.8em;
            }
        }

        /* Responsive très petit écran */
        @media (max-width: 480px) {
            .logo {
                font-size: 2.5em;
            }
            /* Menu hamburger à gauche - plus petit */
            .menu-button {
                left: 10px;
                width: 36px;
                height: 36px;
                padding: 6px;
            }
            .menu-line {
                width: 20px;
                height: 2px;
            }
            /* Bouton filtres à droite - plus petit */
            .filters-toggle-header {
                right: 10px;
                padding: 6px 10px;
                font-size: 0.65em;
                letter-spacing: 0.5px;
            }
            /* Sidebar encore plus étroite sur petit écran */
            .nav-menu {
                width: 250px;
                padding: 60px 20px 20px;
            }
            .nav-link {
                font-size: 1.1em;
                padding: 10px 0;
            }
            .product-card {
                border-radius: 12px;
            }
            .product-image {
                height: 200px;
            }
            .product-info {
                padding: 15px;
            }
            .product-name {
                font-size: 1em;
            }
            .product-price {
                font-size: 1.2em;
            }
            .add-to-cart-btn {
                padding: 10px 15px;
                font-size: 0.8em;
            }
            .cart-header h2 {
                font-size: 1.1em;
            }
            .empty-cart p {
                font-size: 0.9em;
            }
            /* Admin très petit écran */
            .admin-sidebar-toggle {
                bottom: 10px;
                left: 10px;
                width: 38px;
                height: 38px;
                font-size: 14px;
            }
            .admin-modal-content {
                width: 98%;
                padding: 12px;
                margin: 5px;
            }
            .admin-sidebar-header {
                padding: 12px;
            }
            .admin-sidebar-header h2 {
                font-size: 1.1em;
            }
            #adminSidebar .admin-nav-item {
                padding: 12px !important;
                font-size: 0.9em !important;
                gap: 10px !important;
            }
            .admin-content-header {
                padding: 10px 12px;
            }
            .admin-content-body {
                padding: 12px;
            }
            .product-item-admin img {
                width: 60px;
                height: 60px;
            }
        }
        /* ============ PANNEAU ADMIN SIDEBAR MODERNE ============ */
        /* Admin Sidebar Toggle Button */
        
        .admin-sidebar-toggle {
            position: fixed;
            bottom: 20px;
            left: 20px;
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, #ddac0b, #b8900a);
            border: none;
            border-radius: 12px;
            color: #000;
            font-size: 20px;
            cursor: pointer;
            box-shadow: 0 4px 20px rgba(221, 172, 11, 0.4);
            z-index: 9999;
            display: none;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }
        
        .admin-sidebar-toggle.visible {
            display: flex;
        }
        
        .admin-sidebar-toggle:hover {
            background: linear-gradient(135deg, #f0c020, #ddac0b);
            box-shadow: 0 6px 25px rgba(221, 172, 11, 0.6);
            transform: translateY(-2px);
        }
        /* Admin Sidebar */
        
        #adminSidebar.admin-sidebar {
            position: fixed !important;
            top: 0 !important;
            left: -350px !important;
            width: 350px !important;
            height: 100vh !important;
            background: linear-gradient(180deg, #0a0a0a 0%, #000000 100%) !important;
            border-right: 2px solid rgba(221, 172, 11, 0.3) !important;
            z-index: 10000 !important;
            transition: left 0.4s cubic-bezier(0.4, 0, 0.2, 1) !important;
            display: flex !important;
            flex-direction: column !important;
            box-shadow: 4px 0 30px rgba(0, 0, 0, 0.8), 0 0 0 1px rgba(221, 172, 11, 0.1) !important;
        }
        
        #adminSidebar.admin-sidebar.active {
            left: 0 !important;
        }
        /* Admin Sidebar Header */
        
        .admin-sidebar-header {
            padding: 20px;
            background: rgba(221, 172, 11, 0.1);
            border-bottom: 1px solid rgba(221, 172, 11, 0.2);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .admin-sidebar-header h2 {
            color: #ddac0b;
            font-family: 'Oswald', sans-serif;
            font-size: 1.5em;
            margin: 0;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .admin-sidebar-close {
            background: none;
            border: none;
            color: rgba(255, 255, 255, 0.6);
            font-size: 28px;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 35px;
            height: 35px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 8px;
        }
        
        .admin-sidebar-close:hover {
            color: #ddac0b;
            background: rgba(221, 172, 11, 0.1);
        }
        /* Admin Navigation */
        
        #adminSidebar .admin-nav {
            flex: 1 !important;
            overflow-y: auto !important;
            padding: 15px 10px !important;
            display: flex !important;
            flex-direction: column !important;
        }
        
        #adminSidebar .admin-nav-item {
            display: flex !important;
            align-items: center !important;
            gap: 14px !important;
            padding: 16px 18px !important;
            margin-bottom: 6px !important;
            background: transparent !important;
            border: none !important;
            border-radius: 12px !important;
            color: rgba(255, 255, 255, 0.7) !important;
            font-size: 1em !important;
            font-weight: 500 !important;
            cursor: pointer !important;
            transition: all 0.25s ease !important;
            width: 100% !important;
            text-align: left !important;
            font-family: 'Quicksand', sans-serif !important;
            position: relative !important;
        }
        
        .admin-nav-item:hover {
            background: rgba(255, 255, 255, 0.08);
            color: rgba(255, 255, 255, 0.95);
            transform: translateX(4px);
        }
        
        .admin-nav-item.active {
            background: rgba(221, 172, 11, 0.2);
            color: #ddac0b;
            font-weight: 600;
            box-shadow: 0 0 0 1px rgba(221, 172, 11, 0.3);
        }
        
        .admin-nav-icon {
            width: 22px;
            height: 22px;
            flex-shrink: 0;
        }
        /* Admin Content Panel */
        
        .admin-content-panel {
            position: fixed;
            top: 0;
            left: 350px;
            right: 0;
            height: 100vh;
            background: rgba(0, 0, 0, 0.85);
            backdrop-filter: blur(10px);
            z-index: 9998;
            display: none;
            overflow-y: auto;
            transition: left 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .admin-content-panel.active {
            display: block;
        }
        
        .admin-content-panel-inner {
            min-height: 100%;
        }
        
        .admin-content-header {
            padding: 25px 40px;
            background: rgba(0, 0, 0, 0.6);
            border-bottom: 1px solid rgba(221, 172, 11, 0.2);
            position: sticky;
            top: 0;
            z-index: 10;
            backdrop-filter: blur(10px);
        }
        
        .admin-content-header h3 {
            color: #ddac0b;
            font-size: 1.6em;
            margin: 0;
            font-family: 'Oswald', sans-serif;
        }
        
        .admin-content-body {
            padding: 40px;
            max-width: 1400px;
        }
        
        .admin-section-content {
            display: none;
        }
        
        .admin-section-content.active {
            display: block;
        }
        
        .admin-tab.active {
            background: rgba(255, 68, 68, 0.2);
            color: #ff4444;
            border-bottom: 3px solid #ff4444;
        }
        
        .admin-content {
            flex: 1;
            overflow-y: auto;
            padding: 30px;
        }
        
        .admin-panel-section {
            display: none;
        }
        
        .admin-panel-section.active {
            display: block;
        }
        
        .logs-container {
            background: #0d1117;
            border-radius: 12px;
            padding: 20px;
            font-family: monospace;
            font-size: 13px;
            max-height: 500px;
            overflow-y: auto;
        }
        
        .log-entry {
            padding: 8px 12px;
            border-radius: 6px;
            margin-bottom: 8px;
            display: flex;
            gap: 15px;
        }
        
        .log-entry.info {
            background: rgba(59, 130, 246, 0.1);
            border-left: 3px solid #3b82f6;
        }
        
        .log-entry.success {
            background: rgba(34, 197, 94, 0.1);
            border-left: 3px solid #22c55e;
        }
        
        .log-entry.warning {
            background: rgba(234, 179, 8, 0.1);
            border-left: 3px solid #eab308;
        }
        
        .log-entry.error {
            background: rgba(239, 68, 68, 0.1);
            border-left: 3px solid #ef4444;
        }
        
        .log-time {
            color: #6b7280;
            font-size: 12px;
        }
        
        .log-type {
            font-weight: 700;
            text-transform: uppercase;
            font-size: 11px;
            padding: 2px 8px;
            border-radius: 4px;
        }
        
        .log-entry.info .log-type {
            background: #3b82f6;
            color: white;
        }
        
        .log-entry.success .log-type {
            background: #22c55e;
            color: white;
        }
        
        .log-entry.warning .log-type {
            background: #eab308;
            color: black;
        }
        
        .log-entry.error .log-type {
            background: #ef4444;
            color: white;
        }
        
        .log-message {
            color: #e5e7eb;
            flex: 1;
        }
        
        .logs-toolbar {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .logs-toolbar button {
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
        }
        
        .btn-clear-logs {
            background: #ef4444;
            color: white;
        }
        
        .btn-export-logs {
            background: #3b82f6;
            color: white;
        }
        
        .btn-refresh-logs {
            background: #22c55e;
            color: white;
        }
        
        .images-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 25px;
        }
        
        .image-card {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            overflow: hidden;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .image-preview {
            width: 100%;
            height: 180px;
            background: rgba(0, 0, 0, 0.3);
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .image-preview img {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
        }
        
        .image-preview .placeholder-icon {
            font-size: 60px;
            opacity: 0.5;
        }
        
        .image-info {
            padding: 20px;
        }
        
        .image-info h4 {
            color: white;
            margin-bottom: 10px;
        }
        
        .image-info p {
            color: rgba(255, 255, 255, 0.6);
            font-size: 0.9em;
            margin-bottom: 15px;
        }
        
        .image-actions {
            display: flex;
            gap: 10px;
        }
        
        .btn-change-image {
            flex: 1;
            padding: 10px;
            background: linear-gradient(135deg, #ff4444, #cc0000);
            border: none;
            border-radius: 8px;
            color: white;
            font-weight: 600;
            cursor: pointer;
        }
        
        .btn-remove-image {
            padding: 10px 15px;
            background: rgba(255, 255, 255, 0.1);
            border: none;
            border-radius: 8px;
            color: white;
            cursor: pointer;
        }
        
        .admin-login-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            z-index: 20001;
            display: none;
            align-items: center;
            justify-content: center;
        }
        
        .admin-login-overlay.active {
            display: flex;
        }
        
        .admin-login-box {
            background: linear-gradient(135deg, #1a1a2e, #16213e);
            border-radius: 20px;
            padding: 40px;
            width: 90%;
            max-width: 400px;
            border: 2px solid rgba(255, 68, 68, 0.3);
            text-align: center;
        }
        
        .admin-login-box h2 {
            color: #ff4444;
            font-size: 2em;
            margin-bottom: 10px;
        }
        
        .admin-login-box p {
            color: rgba(255, 255, 255, 0.6);
            margin-bottom: 30px;
        }
        
        .admin-login-box input {
            width: 100%;
            padding: 15px;
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 12px;
            color: white;
            margin-bottom: 20px;
        }
        
        .admin-login-box input:focus {
            border-color: #ff4444;
            outline: none;
        }
        
        .admin-login-box button {
            width: 100%;
            padding: 15px;
            background: linear-gradient(135deg, #ff4444, #cc0000);
            border: none;
            border-radius: 12px;
            color: white;
            font-weight: 700;
            cursor: pointer;
        }
        
        .admin-login-error {
            color: #ff4444;
            margin-top: 15px;
            display: none;
        }
        
        .admin-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .stat-card {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 25px;
            text-align: center;
        }
        
        .stat-card h3 {
            color: rgba(255, 255, 255, 0.6);
            font-size: 0.9em;
            margin-bottom: 10px;
        }
        
        .stat-card .stat-value {
            color: #ff4444;
            font-size: 2.5em;
            font-weight: 700;
        }
        
        .hidden-file-input {
            display: none;
        }
        
        .settings-section {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 25px;
        }
        
        .settings-section-title {
            color: #ff4444;
            font-size: 1.2em;
            font-weight: 700;
            margin-bottom: 20px;
        }
        
        .settings-form-group {
            margin-bottom: 20px;
        }
        
        .settings-form-group label {
            display: block;
            color: rgba(255, 255, 255, 0.9);
            margin-bottom: 10px;
        }
        
        .settings-form-group input {
            width: 100%;
            padding: 14px;
            background: rgba(255, 255, 255, 0.08);
            border: 2px solid rgba(255, 255, 255, 0.15);
            border-radius: 12px;
            color: white;
        }
        
        .settings-btn {
            padding: 14px 28px;
            background: linear-gradient(135deg, #ff4444, #cc0000);
            border: none;
            border-radius: 12px;
            color: white;
            font-weight: 700;
            cursor: pointer;
        }
    </style>
</head>

<body>
<!-- Overlay de chargement -->
<div id="page-loading-overlay" class="page-loading-overlay"></div>
    <!-- Overlay du panier -->
    <div class="cart-overlay" id="cartOverlay" onclick="toggleCart()"></div>

    <!-- Bouton Admin Sidebar Toggle -->
    <button class="admin-sidebar-toggle" id="adminSidebarToggle" onclick="toggleAdminSidebar()">
        <svg class="admin-nav-icon" fill="currentColor" viewBox="0 0 20 20">
            <path fill-rule="evenodd" d="M11.49 3.17c-.38-1.56-2.6-1.56-2.98 0a1.532 1.532 0 01-2.286.948c-1.372-.836-2.942.734-2.106 2.106.54.886.061 2.042-.947 2.287-1.561.379-1.561 2.6 0 2.978a1.532 1.532 0 01.947 2.287c-.836 1.372.734 2.942 2.106 2.106a1.532 1.532 0 012.287.947c.379 1.561 2.6 1.561 2.978 0a1.533 1.533 0 012.287-.947c1.372.836 2.942-.734 2.106-2.106a1.533 1.533 0 01.947-2.287c1.561-.379 1.561-2.6 0-2.978a1.532 1.532 0 01-.947-2.287c.836-1.372-.734-2.942-2.106-2.106a1.532 1.532 0 01-2.287-.947zM10 13a3 3 0 100-6 3 3 0 000 6z" clip-rule="evenodd"/>
        </svg>
    </button>

    <!-- Admin Sidebar -->
    <div class="admin-sidebar" id="adminSidebar">
        <div class="admin-sidebar-header">
            <h2>
                <svg width="24" height="24" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M11.49 3.17c-.38-1.56-2.6-1.56-2.98 0a1.532 1.532 0 01-2.286.948c-1.372-.836-2.942.734-2.106 2.106.54.886.061 2.042-.947 2.287-1.561.379-1.561 2.6 0 2.978a1.532 1.532 0 01.947 2.287c-.836 1.372.734 2.942 2.106 2.106a1.532 1.532 0 012.287.947c.379 1.561 2.6 1.561 2.978 0a1.533 1.533 0 012.287-.947c1.372.836 2.942-.734 2.106-2.106a1.533 1.533 0 01.947-2.287c1.561-.379 1.561-2.6 0-2.978a1.532 1.532 0 01-.947-2.287c.836-1.372-.734-2.942-2.106-2.106a1.532 1.532 0 01-2.287-.947zM10 13a3 3 0 100-6 3 3 0 000 6z" clip-rule="evenodd"/>
                </svg> Admin Panel
            </h2>
            <button class="admin-sidebar-close" onclick="toggleAdminSidebar()">✕</button>
        </div>

        <nav class="admin-nav">
            <button class="admin-nav-item active" onclick="switchAdminSection('dashboard')" data-section="dashboard">
                <svg class="admin-nav-icon" fill="currentColor" viewBox="0 0 20 20">
                    <path d="M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V4zM3 10a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H4a1 1 0 01-1-1v-6zM14 9a1 1 0 00-1 1v6a1 1 0 001 1h2a1 1 0 001-1v-6a1 1 0 00-1-1h-2z"/>
                </svg>
                Dashboard
            </button>

            <button class="admin-nav-item" onclick="switchAdminSection('appearance')" data-section="appearance">
                <svg class="admin-nav-icon" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M4 2a2 2 0 00-2 2v11a3 3 0 106 0V4a2 2 0 00-2-2H4zm1 14a1 1 0 100-2 1 1 0 000 2zm5-1.757l4.9-4.9a2 2 0 000-2.828L13.485 5.1a2 2 0 00-2.828 0L10 5.757v8.486zM16 18H9.071l6-6H16a2 2 0 012 2v2a2 2 0 01-2 2z" clip-rule="evenodd"/>
                </svg>
                Apparence
            </button>

            <button class="admin-nav-item" onclick="switchAdminSection('content')" data-section="content">
                <svg class="admin-nav-icon" fill="currentColor" viewBox="0 0 20 20">
                    <path d="M9 2a2 2 0 00-2 2v8a2 2 0 002 2h6a2 2 0 002-2V6.414A2 2 0 0016.414 5L14 2.586A2 2 0 0012.586 2H9z"/>
                    <path d="M3 8a2 2 0 012-2v10h8a2 2 0 01-2 2H5a2 2 0 01-2-2V8z"/>
                </svg>
                Contenus
            </button>

            <button class="admin-nav-item" onclick="switchAdminSection('products')" data-section="products">
                <svg class="admin-nav-icon" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M10 2a4 4 0 00-4 4v1H5a1 1 0 00-.994.89l-1 9A1 1 0 004 18h12a1 1 0 00.994-1.11l-1-9A1 1 0 0015 7h-1V6a4 4 0 00-4-4zm2 5V6a2 2 0 10-4 0v1h4zm-6 3a1 1 0 112 0 1 1 0 01-2 0zm7-1a1 1 0 100 2 1 1 0 000-2z" clip-rule="evenodd"/>
                </svg>
                Produits
            </button>

            <button class="admin-nav-item" onclick="switchAdminSection('orders')" data-section="orders">
                <svg class="admin-nav-icon" fill="currentColor" viewBox="0 0 20 20">
                    <path d="M4 3a2 2 0 100 4h12a2 2 0 100-4H4z"/>
                    <path fill-rule="evenodd" d="M3 8h14v7a2 2 0 01-2 2H5a2 2 0 01-2-2V8zm5 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z" clip-rule="evenodd"/>
                </svg>
                Commandes
            </button>

            <button class="admin-nav-item" onclick="switchAdminSection('stats')" data-section="stats">
                <svg class="admin-nav-icon" fill="currentColor" viewBox="0 0 20 20">
                    <path d="M2 11a1 1 0 011-1h2a1 1 0 011 1v5a1 1 0 01-1 1H3a1 1 0 01-1-1v-5zM8 7a1 1 0 011-1h2a1 1 0 011 1v9a1 1 0 01-1 1H9a1 1 0 01-1-1V7zM14 4a1 1 0 011-1h2a1 1 0 011 1v12a1 1 0 01-1 1h-2a1 1 0 01-1-1V4z"/>
                </svg>
                Statistiques
            </button>

            <button class="admin-nav-item" onclick="switchAdminSection('promo')" data-section="promo">
                <svg class="admin-nav-icon" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M5 2a2 2 0 00-2 2v14l3.5-2 3.5 2 3.5-2 3.5 2V4a2 2 0 00-2-2H5zm2.5 3a1.5 1.5 0 100 3 1.5 1.5 0 000-3zm6.207.293a1 1 0 00-1.414 0l-6 6a1 1 0 101.414 1.414l6-6a1 1 0 000-1.414zM12.5 10a1.5 1.5 0 100 3 1.5 1.5 0 000-3z" clip-rule="evenodd"/>
                </svg>
                Codes Promo
            </button>

            <button class="admin-nav-item" onclick="switchAdminSection('logs')" data-section="logs">
                <svg class="admin-nav-icon" fill="currentColor" viewBox="0 0 20 20">
                    <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"/>
                    <path fill-rule="evenodd" d="M4 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v11a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3zm-3 4a1 1 0 100 2h.01a1 1 0 100-2H7zm3 0a1 1 0 100 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"/>
                </svg>
                Logs
            </button>
        </nav>
    </div>

    <!-- Admin Content Panel -->
    <div class="admin-content-panel" id="adminContentPanel">
        <div class="admin-content-panel-inner">
            <!-- Dashboard Section -->
            <div id="adminSection-dashboard" class="admin-section-content active">
                <div class="admin-content-header">
                    <h3>Dashboard</h3>
                </div>
                <div class="admin-content-body">
                    <div class="admin-stats">
                        <div class="stat-card">
                            <h3>Produits</h3>
                            <div class="stat-value" id="statProducts">0</div>
                        </div>
                        <div class="stat-card">
                            <h3>Au panier</h3>
                            <div class="stat-value" id="statCartItems">0</div>
                        </div>
                        <div class="stat-card">
                            <h3>Utilisateurs</h3>
                            <div class="stat-value" id="statUsers">0</div>
                        </div>
                        <div class="stat-card">
                            <h3>Stockage</h3>
                            <div class="stat-value" id="statStorage" style="font-size: 1.8em;">0%</div>
                        </div>
                    </div>
                    <h3 style="color: white; margin-bottom: 20px; margin-top: 30px;">Dernières activités</h3>
                    <div class="logs-container" id="recentLogs" style="max-height: 300px;"></div>
                </div>
            </div>

            <!-- Appearance Section -->
            <div id="adminSection-appearance" class="admin-section-content">
                <div class="admin-content-header">
                    <h3>Apparence</h3>
                </div>
                <div class="admin-content-body" id="appearanceContent">
                    <!-- Le contenu sera généré dynamiquement par loadAppearanceSection() -->
                </div>
            </div>

            <!-- Content Section -->
            <div id="adminSection-content" class="admin-section-content">
                <div class="admin-content-header">
                    <h3>Gestion des Contenus</h3>
                </div>
                <div class="admin-content-body" id="contentContent">
                    <!-- Le contenu sera généré dynamiquement par loadContentSection() -->
                </div>
            </div>

            <!-- Products Section -->
            <div id="adminSection-products" class="admin-section-content">
                <div class="admin-content-header">
                    <h3>Gestion des Produits</h3>
                </div>
                <div class="admin-content-body">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 25px;">
                        <h3 style="color: white; margin: 0;">Liste des produits</h3>
                        <button class="btn-primary" onclick="openProductForm()" style="padding: 12px 25px; font-size: 0.95em; background: linear-gradient(135deg, #ddac0b, #b8900a); border: none; border-radius: 10px; color: #000; font-weight: 600; cursor: pointer;">
                            + Ajouter un produit
                        </button>
                    </div>
                    <div style="color: rgba(255,255,255,0.9); margin-bottom: 20px; padding: 15px; background: linear-gradient(135deg, rgba(34, 197, 94, 0.15), rgba(221, 172, 11, 0.1)); border-radius: 10px; border-left: 4px solid #22c55e;">
                        <p style="margin: 0 0 10px 0;">
                            <strong>Gestion complète des produits</strong>
                        </p>
                        <p style="margin: 0; font-size: 0.95em; line-height: 1.6;">
                            • Ajout/modification de produits avec images<br> • Gestion des tailles disponibles<br> • Suivi du stock (en stock, sur commande, rupture)<br> • Stockage IndexedDB pour les images
                        </p>
                    </div>
                    <div class="products-list" id="productsListAdmin"></div>
                </div>
            </div>

            <!-- Logs Section -->
            <div id="adminSection-logs" class="admin-section-content">
                <div class="admin-content-header">
                    <h3>Logs</h3>
                </div>
                <div class="admin-content-body">
                    <!-- Backups automatiques -->
                    <div id="backupsSection"></div>

                    <div class="logs-toolbar">
                        <button class="btn-refresh-logs" onclick="refreshLogs()">Actualiser</button>
                        <button class="btn-export-logs" onclick="exportLogs()">Exporter</button>
                        <button class="btn-clear-logs" onclick="clearLogs()">Vider</button>
                    </div>
                    <div class="logs-container" id="logsContainer"></div>
                </div>
            </div>

            <!-- Orders Section -->
            <div id="adminSection-orders" class="admin-section-content">
                <div class="admin-content-header">
                    <h3>Gestion des Commandes</h3>
                </div>
                <div class="admin-content-body">
                    <div style="display: flex; gap: 15px; margin-bottom: 20px;">
                        <select id="orderStatusFilter" onchange="filterAdminOrders()" style="padding: 10px 15px; background: rgba(0,0,0,0.3); border: 1px solid rgba(255,255,255,0.2); border-radius: 8px; color: white;">
                            <option value="all">Tous les statuts</option>
                            <option value="pending">En attente</option>
                            <option value="paid">Payée</option>
                            <option value="processing">En préparation</option>
                            <option value="shipped">Expédiée</option>
                            <option value="delivered">Livrée</option>
                            <option value="cancelled">Annulée</option>
                        </select>
                        <button onclick="loadAdminOrders()" style="padding: 10px 20px; background: rgba(34, 197, 94, 0.2); border: 1px solid rgba(34, 197, 94, 0.4); border-radius: 8px; color: #22c55e; cursor: pointer;">Actualiser</button>
                    </div>
                    <div class="admin-orders-container" id="adminOrdersContainer">
                        <table class="admin-orders-table">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Client</th>
                                    <th>Total</th>
                                    <th>Date</th>
                                    <th>Statut</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="adminOrdersBody">
                                <!-- Les commandes seront chargées ici -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Stats Section -->
            <div id="adminSection-stats" class="admin-section-content">
                <div class="admin-content-header">
                    <h3>Statistiques Avancées</h3>
                </div>
                <div class="admin-content-body">
                    <div class="stats-grid" id="statsGrid">
                        <!-- Les stats seront chargées ici -->
                    </div>

                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 30px; margin-top: 30px;">
                        <div>
                            <h4 style="color: #ddac0b; margin-bottom: 15px;">Top 5 Produits Vendus</h4>
                            <div class="top-products-list" id="topProductsList">
                                <!-- Chargé dynamiquement -->
                            </div>
                        </div>
                        <div>
                            <h4 style="color: #ef4444; margin-bottom: 15px;">Alertes Stock Faible</h4>
                            <div class="low-stock-list" id="lowStockList">
                                <!-- Chargé dynamiquement -->
                            </div>
                        </div>
                    </div>

                    <div style="margin-top: 30px;">
                        <h4 style="color: white; margin-bottom: 15px;">Dernières Commandes</h4>
                        <table class="admin-orders-table">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Client</th>
                                    <th>Total</th>
                                    <th>Statut</th>
                                    <th>Date</th>
                                </tr>
                            </thead>
                            <tbody id="recentOrdersBody">
                                <!-- Chargé dynamiquement -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Promo Codes Section -->
            <div id="adminSection-promo" class="admin-section-content">
                <div class="admin-content-header">
                    <h3>Codes Promo</h3>
                </div>
                <div class="admin-content-body">
                    <h4 style="color: white; margin-bottom: 15px;">Créer un nouveau code</h4>
                    <div class="promo-form" id="promoForm">
                        <input type="text" id="promoCode" placeholder="CODE (ex: PROMO20)" style="text-transform: uppercase;">
                        <input type="number" id="promoPercent" placeholder="Réduction %" min="1" max="100">
                        <input type="number" id="promoMaxUses" placeholder="Utilisations max (optionnel)">
                        <input type="number" id="promoMinOrder" placeholder="Commande min € (optionnel)" step="0.01">
                        <input type="date" id="promoExpires" placeholder="Date expiration">
                        <button onclick="createPromoCode()" style="padding: 12px 25px; background: linear-gradient(135deg, #ddac0b, #b8900a); border: none; border-radius: 8px; color: #000; font-weight: 600; cursor: pointer;">Créer</button>
                    </div>

                    <h4 style="color: white; margin: 30px 0 15px;">Codes existants</h4>
                    <table class="promo-table">
                        <thead>
                            <tr>
                                <th>Code</th>
                                <th>Réduction</th>
                                <th>Utilisations</th>
                                <th>Min. commande</th>
                                <th>Expiration</th>
                                <th>Statut</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="promoCodesBody">
                            <!-- Les codes seront chargés ici -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <input type="file" id="imageUploadInput" class="hidden-file-input" accept="image/*" onchange="handleImageUpload(event)">

    <!-- Modal Formulaire Produit -->
    <div class="admin-modal" id="productFormModal">
        <div class="admin-modal-content">
            <div class="admin-header">
                <h2 id="productFormTitle">Ajouter un produit</h2>
                <button class="admin-close-btn" onclick="closeProductForm()">×</button>
            </div>

            <form class="product-form" id="productForm" onsubmit="saveProduct(event)">
                <div class="form-group">
                    <label>Nom du produit</label>
                    <input type="text" id="productName" name="name" placeholder="Ex: T-Shirt Artistique Bleu" required>
                </div>

                <div class="form-group">
                    <label>Prix (€)</label>
                    <input type="number" id="productPrice" name="price" placeholder="45" min="0" step="0.01" required>
                </div>

                <div class="form-group">
                    <label>Catégorie</label>
                    <select id="productCategory" name="category" required>
                        <option value="">-- Sélectionner --</option>
                        <option value="homme">Homme</option>
                        <option value="femme">Femme</option>
                        <option value="enfant">Enfant</option>
                        <option value="unisexe">Unisexe</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>Type</label>
                    <select id="productType" name="type" required>
                        <option value="">-- Sélectionner --</option>
                        <option value="t-shirt">T-Shirt</option>
                        <option value="hoodie">Hoodie</option>
                        <option value="pantalon">Pantalon</option>
                        <option value="veste">Veste</option>
                        <option value="accessoire">Accessoire</option>
                    </select>
                </div>

                <div class="form-group full-width">
                    <label>Description</label>
                    <textarea id="productDescription" name="description" placeholder="Description détaillée du produit..." required></textarea>
                </div>

                <div class="form-group">
                    <label>Stock disponible</label>
                    <input type="number" id="productStock" name="stock" placeholder="10" min="0" value="0">
                </div>

                <div class="form-group">
                    <label>Statut</label>
                    <select id="productStatus" name="status" required>
                        <option value="in-stock">En stock</option>
                        <option value="on-order">Sur commande</option>
                        <option value="out-of-stock">Rupture de stock</option>
                    </select>
                </div>

                <div class="form-group full-width">
                    <label>Tailles disponibles</label>
                    <div class="sizes-input-container">
                        <div id="selectedSizes" style="display: flex; flex-wrap: wrap; gap: 10px; width: 100%; margin-bottom: 10px;"></div>
                        <div class="size-input-group">
                            <input type="text" id="sizeInput" placeholder="Ex: S, M, L, 38, 40...">
                            <button type="button" onclick="addSize()">Ajouter</button>
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <label>Icône</label>
                    <input type="text" id="productIcon" name="icon" placeholder="" maxlength="2">
                </div>

                <div class="form-group full-width">
                    <label>Images du produit (jusqu'à 5)</label>
                    <div class="images-upload-container" id="imagesUploadContainer">
                        <!-- Les images seront ajoutées ici -->
                    </div>
                    <button type="button" class="btn-add-image" onclick="addImageSlot()" id="addImageBtn">+ Ajouter une image</button>
                    <input type="file" id="productImageInput" accept="image/*" style="display: none;" onchange="handleImageUpload(event)">
                </div>

                <div class="form-actions">
                    <button type="submit" class="btn-primary">Enregistrer</button>
                    <button type="button" class="btn-secondary" onclick="closeProductForm()">Annuler</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal personnalisé -->
    <div class="custom-modal-overlay" id="customModalOverlay">
        <div class="custom-modal">
            <div class="custom-modal-icon" id="customModalIcon"></div>
            <div class="custom-modal-title" id="customModalTitle"></div>
            <div class="custom-modal-message" id="customModalMessage"></div>
            <div class="custom-modal-buttons" id="customModalButtons"></div>
        </div>
    </div>

    <!-- Modal détails produit -->
    <div class="product-detail-modal" id="productDetailModal" onclick="closeProductDetail()">
        <div class="product-detail-content" onclick="event.stopPropagation()">
            <button class="product-detail-close" onclick="closeProductDetail()">×</button>
            <div class="product-detail-grid">
                <div class="product-detail-left">
                    <div class="product-detail-images-container">
                        <div class="product-detail-thumbnails" id="detailThumbnails"></div>
                        <img id="detailImage" class="product-detail-image" src="" alt="">
                    </div>
                </div>
                <div class="product-detail-info">
                    <div class="product-detail-category" id="detailCategory"></div>
                    <h2 id="detailName"></h2>
                    <div class="product-detail-price" id="detailPrice"></div>
                    <p class="product-detail-description" id="detailDescription"></p>
                    <button class="add-to-cart-btn" onclick="addToCartFromDetail()">Ajouter au panier</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Overlay pour le menu -->
    <div class="menu-overlay" id="menuOverlay" onclick="closeMenu()"></div>

    <!-- Menu latéral -->
    <div class="nav-menu" id="navMenu">
        <button class="nav-menu-close" onclick="closeMenu()">×</button>
        <a href="blog.html" class="nav-link">Accueil</a>
        <a href="#" class="nav-link" onclick="openCollectionsModal(); closeMenu(); event.preventDefault();">Collections</a>
        <a href="#" class="nav-link" onclick="openAboutModal(); closeMenu(); event.preventDefault();">À propos</a>
        <a href="#" class="nav-link user-only" onclick="openOrdersModal(); closeMenu(); event.preventDefault();" style="display: none;">Mes Commandes</a>
        <a href="#" class="nav-link user-only" onclick="openWishlistModal(); closeMenu(); event.preventDefault();" style="display: none;">Ma Wishlist</a>
    </div>

    <!-- Header -->
    <header>
        <div class="header-content">
            <nav class="header-nav">
                <button class="menu-button" id="menuButton" onclick="toggleMenu()">
                    <span class="menu-line"></span>
                    <span class="menu-line"></span>
                    <span class="menu-line"></span>
                </button>
                <button class="filters-toggle-header" onclick="toggleFilters()">Filtres</button>
            </nav>
            <div class="logo" id="siteTitle" ondblclick="editSiteTitle()">AlphaMouv</div>
            <div class="header-right">
                <div class="cart-icon" id="cartIcon" onclick="toggleCart()">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="white">
                        <path d="M7 18c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zM1 2v2h2l3.6 7.59-1.35 2.45c-.16.28-.25.61-.25.96 0 1.1.9 2 2 2h12v-2H7.42c-.14 0-.25-.11-.25-.25l.03-.12.9-1.63h7.45c.75 0 1.41-.41 1.75-1.03l3.58-6.49c.08-.14.12-.31.12-.48 0-.55-.45-1-1-1H5.21l-.94-2H1zm16 16c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2z"/>
                    </svg>
                    <span class="cart-count" id="cartCount">0</span>
                </div>
            </div>
        </div>
    </header>

    <!-- Container principal -->
    <div class="container">
        <!-- Filtres -->
        <div class="filters-section">
            <div class="filters-content" id="filtersContent">
                <div class="filters-grid">
                    <div class="filter-group">
                        <label for="categoryFilter">Catégorie</label>
                        <select id="categoryFilter" class="filter-select" onchange="filterProducts()">
                        <option value="all">Toutes les catégories</option>
                        <option value="homme">Homme</option>
                        <option value="femme">Femme</option>
                        <option value="enfant">Enfant</option>
                        <option value="unisexe">Unisexe</option>
                    </select>
                    </div>
                    <div class="filter-group">
                        <label for="typeFilter">Type</label>
                        <select id="typeFilter" class="filter-select" onchange="filterProducts()">
                        <option value="all">Tous les types</option>
                        <option value="t-shirt">T-Shirt</option>
                        <option value="hoodie">Sweat à capuche</option>
                        <option value="pantalon">Pantalon</option>
                        <option value="veste">Veste</option>
                        <option value="accessoire">Accessoire</option>
                    </select>
                    </div>
                    <div class="filter-group">
                        <label for="priceFilter">Prix</label>
                        <select id="priceFilter" class="filter-select" onchange="filterProducts()">
                        <option value="all">Tous les prix</option>
                        <option value="0-50">0€ - 50€</option>
                        <option value="50-100">50€ - 100€</option>
                        <option value="100-150">100€ - 150€</option>
                        <option value="150+">150€ et plus</option>
                    </select>
                    </div>
                    <div class="filter-group">
                        <label for="sortFilter">Trier par</label>
                        <select id="sortFilter" class="filter-select" onchange="sortProducts()">
                        <option value="default">Par défaut</option>
                        <option value="price-asc">Prix croissant</option>
                        <option value="price-desc">Prix décroissant</option>
                        <option value="name">Nom A-Z</option>
                    </select>
                    </div>
                </div>
            </div>
        </div>

        <!-- Grille de produits -->
        <div class="products-grid" id="productsGrid">
            <!-- Les produits seront générés par JavaScript -->
        </div>
    </div>

    <!-- Modal Collections -->
    <div class="page-modal" id="collectionsModal">
        <div class="page-modal-content">
            <div class="page-modal-header">
                <h1 class="page-modal-title">AlphaMouv</h1>
                <button class="page-modal-close" onclick="closeCollectionsModal()">×</button>
            </div>
            <p style="color: rgba(255,255,255,0.7); font-size: 1.1em; margin-bottom: 30px;">Découvrez nos collections de vêtements uniques, créées avec passion et authenticité.</p>
            <div class="collections-grid" id="collectionsGrid">
                <!-- Les collections seront générées par JavaScript -->
            </div>
            <div id="collectionsEmpty" class="about-empty" style="display: none;">
                <div class="about-empty-icon"></div>
                <p>Aucune collection disponible pour le moment.</p>
                <p style="font-size: 0.9em; margin-top: 10px;">Revenez bientôt pour découvrir nos créations !</p>
            </div>
        </div>
    </div>

    <!-- Modal À propos -->
    <div class="page-modal" id="aboutModal">
        <div class="page-modal-content">
            <div class="page-modal-header">
                <h1 class="page-modal-title">À propos</h1>
                <button class="page-modal-close" onclick="closeAboutModal()">×</button>
            </div>
            <div class="about-content" id="aboutContent">
                <!-- Le contenu sera généré par JavaScript -->
            </div>
        </div>
    </div>

    <!-- Modal Mes Commandes -->
    <div class="page-modal" id="ordersModal">
        <div class="page-modal-content">
            <div class="page-modal-header">
                <h1 class="page-modal-title">Mes Commandes</h1>
                <button class="page-modal-close" onclick="closeOrdersModal()">×</button>
            </div>
            <div class="orders-list" id="ordersContent">
                <!-- Le contenu sera généré par JavaScript -->
            </div>
            <div id="ordersEmpty" class="orders-empty" style="display: none;">
                <div style="font-size: 4em; margin-bottom: 20px;">📦</div>
                <p style="font-size: 1.2em; margin-bottom: 10px;">Aucune commande pour le moment</p>
                <p>Vos commandes apparaîtront ici une fois effectuées.</p>
            </div>
        </div>
    </div>

    <!-- Modal Wishlist -->
    <div class="page-modal" id="wishlistModal">
        <div class="page-modal-content">
            <div class="page-modal-header">
                <h1 class="page-modal-title">Ma Wishlist</h1>
                <button class="page-modal-close" onclick="closeWishlistModal()">×</button>
            </div>
            <div class="wishlist-grid" id="wishlistContent">
                <!-- Le contenu sera généré par JavaScript -->
            </div>
            <div id="wishlistEmpty" class="orders-empty" style="display: none;">
                <div style="font-size: 4em; margin-bottom: 20px;">❤️</div>
                <p style="font-size: 1.2em; margin-bottom: 10px;">Votre wishlist est vide</p>
                <p>Ajoutez des produits en cliquant sur le coeur sur les articles qui vous plaisent.</p>
            </div>
        </div>
    </div>

    <!-- Panier latéral -->
    <div class="cart-sidebar" id="cartSidebar">
        <div class="cart-header">
            <h2>Mon Panier</h2>
            <button class="close-cart" onclick="toggleCart()">×</button>
        </div>
        <div class="cart-items" id="cartItems">
            <div class="empty-cart">
                <div class="empty-cart-icon"></div>
                <p>Votre panier est vide</p>
            </div>
        </div>
        <div class="cart-footer" id="cartFooter" style="display: none;">
            <div class="promo-code-section">
                <div class="promo-code-input-group">
                    <input type="text" class="promo-code-input" id="cartPromoCode" placeholder="Code promo">
                    <button class="promo-code-btn" onclick="applyPromoCode()">Appliquer</button>
                </div>
                <div id="promoCodeResult"></div>
            </div>
            <div id="cartSubtotalLine" class="discount-line" style="display: none;">
                <span>Sous-total:</span>
                <span id="cartSubtotal">0€</span>
            </div>
            <div id="cartDiscountLine" class="discount-line" style="display: none;">
                <span id="discountLabel">Réduction:</span>
                <span id="cartDiscount">-0€</span>
            </div>
            <div class="cart-total">
                <span class="cart-total-label">Total:</span>
                <span class="cart-total-amount" id="cartTotal">0€</span>
            </div>
            <button class="checkout-btn" onclick="checkout()">Commander</button>
        </div>
    </div>

    <script>
        // ========== SYSTÈME DE MODALS PERSONNALISÉS ==========

        // Fonction pour afficher un modal personnalisé
        function showCustomModal(options) {
            return new Promise((resolve) => {
                const overlay = document.getElementById('customModalOverlay');
                const icon = document.getElementById('customModalIcon');
                const title = document.getElementById('customModalTitle');
                const message = document.getElementById('customModalMessage');
                const buttons = document.getElementById('customModalButtons');

                // Définir l'icône selon le type
                const icons = {
                    success: '',
                    error: '',
                    warning: '',
                    question: '',
                    info: ''
                };
                icon.textContent = options.icon || icons[options.type] || '';

                // Définir le titre
                title.textContent = options.title || 'AlphaMouv';

                // Définir le message
                message.innerHTML = options.message || '';

                // Créer les boutons
                buttons.innerHTML = '';

                if (options.type === 'confirm') {
                    // Modal de confirmation avec 2 boutons
                    const confirmBtn = document.createElement('button');
                    confirmBtn.className = 'custom-modal-btn custom-modal-btn-danger';
                    confirmBtn.textContent = options.confirmText || 'OK';
                    confirmBtn.onclick = () => {
                        closeCustomModal();
                        resolve(true);
                    };

                    const cancelBtn = document.createElement('button');
                    cancelBtn.className = 'custom-modal-btn custom-modal-btn-secondary';
                    cancelBtn.textContent = options.cancelText || 'Annuler';
                    cancelBtn.onclick = () => {
                        closeCustomModal();
                        resolve(false);
                    };

                    buttons.appendChild(cancelBtn);
                    buttons.appendChild(confirmBtn);
                } else {
                    // Modal simple avec 1 bouton
                    const okBtn = document.createElement('button');
                    okBtn.className = 'custom-modal-btn custom-modal-btn-primary';
                    okBtn.textContent = options.buttonText || 'OK';
                    okBtn.onclick = () => {
                        closeCustomModal();
                        resolve(true);
                    };
                    buttons.appendChild(okBtn);
                }

                // Afficher le modal
                overlay.classList.add('active');

                // Fermer avec Echap
                const handleEscape = (e) => {
                    if (e.key === 'Escape') {
                        closeCustomModal();
                        resolve(false);
                        document.removeEventListener('keydown', handleEscape);
                    }
                };
                document.addEventListener('keydown', handleEscape);
            });
        }

        // Fermer le modal personnalisé
        function closeCustomModal() {
            const overlay = document.getElementById('customModalOverlay');
            overlay.classList.remove('active');
        }

        // Remplacer alert()
        function customAlert(message, title = 'AlphaMouv', type = 'info') {
            return showCustomModal({
                type: type,
                title: title,
                message: message
            });
        }

        // Remplacer confirm()
        function customConfirm(message, title = 'Confirmation', confirmText = 'OK', cancelText = 'Annuler') {
            return showCustomModal({
                type: 'confirm',
                title: title,
                message: message,
                confirmText: confirmText,
                cancelText: cancelText
            });
        }

        // Base de données de produits (exemples)
        const defaultProducts = [{
            id: 1,
            name: "T-Shirt Artistique Bleu",
            category: "homme",
            type: "t-shirt",
            price: 45,
            description: "T-shirt unique peint à la main avec design abstrait bleu",
            sizes: ["S", "M", "L", "XL"],
            image: null,
            icon: ""
        }, {
            id: 2,
            name: "Hoodie Galaxie",
            category: "unisexe",
            type: "hoodie",
            price: 89,
            description: "Sweat à capuche avec motif galaxie personnalisé",
            sizes: ["M", "L", "XL"],
            image: null,
            icon: ""
        }, {
            id: 3,
            name: "Jean Customisé",
            category: "femme",
            type: "pantalon",
            price: 120,
            description: "Jean délavé avec broderies et peintures artistiques",
            sizes: ["36", "38", "40", "42"],
            image: null,
            icon: ""
        }, {
            id: 4,
            name: "Veste en Jean Peinte",
            category: "unisexe",
            type: "veste",
            price: 165,
            description: "Veste en jean vintage avec peinture acrylique originale",
            sizes: ["S", "M", "L"],
            image: null,
            icon: ""
        }, {
            id: 5,
            name: "T-Shirt Enfant Dinosaure",
            category: "enfant",
            type: "t-shirt",
            price: 35,
            description: "T-shirt coloré avec design dinosaure fait main",
            sizes: ["4-6 ans", "6-8 ans", "8-10 ans"],
            image: null,
            icon: ""
        }, {
            id: 6,
            name: "Casquette Street Art",
            category: "unisexe",
            type: "accessoire",
            price: 40,
            description: "Casquette personnalisée avec graffiti unique",
            sizes: ["Unique"],
            image: null,
            icon: ""
        }, {
            id: 7,
            name: "T-Shirt Femme Floral",
            category: "femme",
            type: "t-shirt",
            price: 48,
            description: "T-shirt avec motif floral aquarelle",
            sizes: ["XS", "S", "M", "L"],
            image: null,
            icon: ""
        }, {
            id: 8,
            name: "Hoodie Enfant Espace",
            category: "enfant",
            type: "hoodie",
            price: 55,
            description: "Sweat à capuche avec fusées et planètes",
            sizes: ["4-6 ans", "6-8 ans", "8-10 ans", "10-12 ans"],
            image: null,
            icon: ""
        }, {
            id: 9,
            name: "Chemise Homme Splash",
            category: "homme",
            type: "t-shirt",
            price: 75,
            description: "Chemise avec éclaboussures de peinture colorées",
            sizes: ["M", "L", "XL", "XXL"],
            image: null,
            icon: ""
        }];

        // Charger les produits depuis localStorage ou utiliser les defaults
        let products = JSON.parse(localStorage.getItem('alphamouv_products')) || defaultProducts;
        let cart = JSON.parse(localStorage.getItem('alphamouv_cart')) || [];
        let filteredProducts = [...products];
        let currentEditingProduct = null;
        let productSizes = [];
        let productImageData = null;
        let currentProductDetail = null;
        let selectedRating = 0;

        // Initialiser les produits
        function initProducts() {
            renderProducts();
            updateCartUI();
            updateUserLinks();
        }

        // Afficher/cacher les liens utilisateur
        function updateUserLinks() {
            var token = localStorage.getItem('alphamouv_token');
            var userLinks = document.querySelectorAll('.user-only');
            userLinks.forEach(function(link) {
                link.style.display = token ? 'block' : 'none';
            });
        }

        // Afficher les produits
        function renderProducts() {
            const grid = document.getElementById('productsGrid');
            const token = localStorage.getItem('alphamouv_token');
            grid.innerHTML = filteredProducts.map(product => {
                var stockStatus = '';
                var stockClass = '';
                if (product.stock !== undefined) {
                    if (product.stock <= 0) {
                        stockStatus = 'Rupture';
                        stockClass = 'out-of-stock';
                    } else if (product.stock <= 5) {
                        stockStatus = 'Stock limité';
                        stockClass = 'low-stock';
                    } else {
                        stockStatus = 'En stock';
                        stockClass = 'in-stock';
                    }
                }
                return `
                <div class="product-card" data-category="${product.category}" data-type="${product.type}" data-price="${product.price}" onclick="showProductDetail(${product.id})">
                    ${token ? `
                    <button class="product-wishlist-btn" data-product-id="${product.id}" onclick="event.stopPropagation(); toggleWishlist(${product.id});">
                        <svg viewBox="0 0 24 24"><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/></svg>
                    </button>
                    ` : ''}
                    ${product.image
                        ? `<img src="${product.image}" alt="${product.name}" class="product-image">`
                        : `<div class="product-image-placeholder">${product.icon}</div>`
                    }
                    <div class="product-name-overlay">
                        ${product.name}
                        ${stockStatus ? `<div class="stock-indicator ${stockClass}">${stockStatus}</div>` : ''}
                    </div>
                </div>
            `}).join('');
            // Update wishlist buttons state
            if (token) {
                updateWishlistButtons();
            }
        }

        // Filtrer les produits
        function filterProducts() {
            const category = document.getElementById('categoryFilter').value;
            const type = document.getElementById('typeFilter').value;
            const priceRange = document.getElementById('priceFilter').value;

            filteredProducts = products.filter(product => {
                let matches = true;

                if (category !== 'all' && product.category !== category) {
                    matches = false;
                }

                if (type !== 'all' && product.type !== type) {
                    matches = false;
                }

                if (priceRange !== 'all') {
                    const [min, max] = priceRange.split('-').map(p => p.replace('+', ''));
                    if (max) {
                        if (product.price < parseInt(min) || product.price > parseInt(max)) {
                            matches = false;
                        }
                    } else {
                        if (product.price < parseInt(min)) {
                            matches = false;
                        }
                    }
                }

                return matches;
            });

            sortProducts();
        }

        // Trier les produits
        function sortProducts() {
            const sortBy = document.getElementById('sortFilter').value;

            switch(sortBy) {
                case 'price-asc':
                    filteredProducts.sort((a, b) => a.price - b.price);
                    break;
                case 'price-desc':
                    filteredProducts.sort((a, b) => b.price - a.price);
                    break;
                case 'name':
                    filteredProducts.sort((a, b) => a.name.localeCompare(b.name));
                    break;
            }

            renderProducts();
        }

        // Ajouter au panier
        function addToCart(productId) {
            const product = products.find(p => p.id === productId);
            const existingItem = cart.find(item => item.id === productId);

            if (existingItem) {
                existingItem.quantity++;
            } else {
                cart.push({
                    ...product,
                    quantity: 1,
                    selectedSize: product.sizes[0]
                });
            }

            saveCart();
            updateCartUI();
            
            // Animation feedback
            const btn = event.target;
            const originalText = btn.textContent;
            btn.textContent = 'Ajouté !';
            btn.style.background = 'linear-gradient(135deg, #4CAF50, #45a049)';
            
            setTimeout(() => {
                btn.textContent = originalText;
                btn.style.background = '';
            }, 1500);
        }

        // Mettre à jour le panier UI
        function updateCartUI() {
            const cartCount = document.getElementById('cartCount');
            const cartIcon = document.getElementById('cartIcon');
            const cartItems = document.getElementById('cartItems');
            const cartTotal = document.getElementById('cartTotal');
            const cartFooter = document.getElementById('cartFooter');

            const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
            const totalPrice = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);

            cartCount.textContent = totalItems;

            // Afficher/cacher l'icône panier selon le contenu
            if (cart.length === 0) {
                cartIcon.classList.remove('has-items');
                cartItems.innerHTML = `
                    <div class="empty-cart">
                        <div class="empty-cart-icon"></div>
                        <p>Votre panier est vide</p>
                    </div>
                `;
                cartFooter.style.display = 'none';
            } else {
                cartIcon.classList.add('has-items');
                cartItems.innerHTML = cart.map(item => `
                    <div class="cart-item">
                        ${item.image 
                            ? `<img src="${item.image}" alt="${item.name}" class="cart-item-image">`
                            : `<div class="cart-item-placeholder">${item.icon}</div>`
                        }
                        <div class="cart-item-info">
                            <div class="cart-item-name">${item.name}</div>
                            <div class="cart-item-details">Taille: ${item.selectedSize}</div>
                            <div class="cart-item-quantity">
                                <button class="qty-btn" onclick="updateQuantity(${item.id}, -1)">-</button>
                                <span>${item.quantity}</span>
                                <button class="qty-btn" onclick="updateQuantity(${item.id}, 1)">+</button>
                            </div>
                            <div class="cart-item-price">${item.price * item.quantity}€</div>
                            <button class="remove-item" onclick="removeFromCart(${item.id})">Retirer</button>
                        </div>
                    </div>
                `).join('');
                cartFooter.style.display = 'block';
                cartTotal.textContent = `${totalPrice}€`;
            }
        }

        // Modifier la quantité
        function updateQuantity(productId, change) {
            const item = cart.find(item => item.id === productId);
            if (item) {
                item.quantity += change;
                if (item.quantity <= 0) {
                    removeFromCart(productId);
                } else {
                    saveCart();
                    updateCartUI();
                }
            }
        }

        // Retirer du panier
        function removeFromCart(productId) {
            cart = cart.filter(item => item.id !== productId);
            saveCart();
            updateCartUI();
        }

        // Sauvegarder le panier
        function saveCart() {
            localStorage.setItem('alphamouv_cart', JSON.stringify(cart));
        }

        // Afficher les détails du produit
        function showProductDetail(productId) {
            const product = products.find(p => p.id === productId);
            if (!product) return;

            currentProductDetail = product;

            // Créer la galerie d'images à partir du tableau d'images du produit
            const imagesToDisplay = product.images && product.images.length > 0
                ? product.images
                : (product.image ? [product.image] : []);

            const thumbnailsContainer = document.getElementById('detailThumbnails');
            if (imagesToDisplay.length > 0) {
                thumbnailsContainer.innerHTML = imagesToDisplay.map((img, index) =>
                    `<img src="${img}" class="product-thumbnail ${index === 0 ? 'active' : ''}" onclick="changeProductImage('${img}', ${index})" alt="Image ${index + 1}">`
                ).join('');
            } else {
                thumbnailsContainer.innerHTML = '';
            }

            // Remplir les informations
            document.getElementById('detailImage').src = imagesToDisplay[0] || '';
            document.getElementById('detailCategory').textContent = product.category.toUpperCase();
            document.getElementById('detailName').textContent = product.name;
            document.getElementById('detailPrice').textContent = `${product.price}€`;
            document.getElementById('detailDescription').textContent = product.description;

            // Afficher le modal
            const modal = document.getElementById('productDetailModal');
            modal.style.display = 'flex';
            modal.classList.remove('closing');
            // Force reflow pour que la transition fonctionne
            modal.offsetHeight;
            modal.classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        // Changer l'image affichée dans la galerie
        function changeProductImage(imageSrc, index) {
            document.getElementById('detailImage').src = imageSrc;

            // Mettre à jour les miniatures actives
            const thumbnails = document.querySelectorAll('.product-thumbnail');
            thumbnails.forEach((thumb, i) => {
                thumb.classList.toggle('active', i === index);
            });
        }

        // Fermer le modal détails
        function closeProductDetail() {
            const modal = document.getElementById('productDetailModal');
            modal.classList.add('closing');
            modal.classList.remove('active');

            // Attendre la fin de l'animation avant de cacher complètement
            setTimeout(() => {
                modal.classList.remove('closing');
                modal.style.display = 'none';
                document.body.style.overflow = 'auto';
                currentProductDetail = null;
            }, 600);
        }

        // Ajouter au panier depuis le détail
        function addToCartFromDetail() {
            if (currentProductDetail) {
                addToCart(currentProductDetail.id);
            }
        }

        // Afficher les étoiles
        function renderStars(containerId, rating) {
            const container = document.getElementById(containerId);
            let html = '';
            for (let i = 1; i <= 5; i++) {
                html += `<span class="star ${i <= rating ? 'filled' : ''}">★</span>`;
            }
            container.innerHTML = html;
        }

        // Afficher les commentaires
        function renderReviews(productId) {
            const reviews = JSON.parse(localStorage.getItem(`alphamouv_reviews_${productId}`)) || [];
            const reviewList = document.getElementById('reviewList');

            if (reviews.length === 0) {
                reviewList.innerHTML = '<div class="no-reviews">Aucun avis pour le moment. Soyez le premier à donner votre avis !</div>';
                return;
            }

            reviewList.innerHTML = reviews.map(review => `
                <div class="review-item">
                    <div class="review-header">
                        <span class="review-author">${review.author}</span>
                        <span class="review-date">${new Date(review.date).toLocaleDateString('fr-FR')}</span>
                    </div>
                    <div class="review-rating">
                        ${[1, 2, 3, 4, 5].map(i => `<span class="star ${i <= review.rating ? 'filled' : ''}">★</span>`).join('')}
                    </div>
                    <p class="review-text">${review.text}</p>
                </div>
            `).join('');
        }

        // Toggle formulaire de commentaire
        function toggleReviewForm() {
            const form = document.getElementById('reviewForm');
            form.classList.toggle('active');

            if (form.classList.contains('active')) {
                // Réinitialiser le formulaire
                document.getElementById('reviewAuthor').value = '';
                document.getElementById('reviewText').value = '';
                selectedRating = 0;
                document.querySelectorAll('#ratingInput .star').forEach(star => {
                    star.classList.remove('selected');
                });
            }
        }

        // Soumettre un commentaire
        async function submitReview() {
            if (!currentProductDetail) return;

            const productId = currentProductDetail.id;

            // Vérifier si l'utilisateur a déjà laissé un avis
            if (checkIfReviewed(productId)) {
                await customAlert('Vous avez déjà laissé un avis pour ce produit.', 'Avis déjà publié', 'warning');
                return;
            }

            const author = document.getElementById('reviewAuthor').value.trim();
            const text = document.getElementById('reviewText').value.trim();

            if (!author || !text || selectedRating === 0) {
                await customAlert('Veuillez remplir tous les champs et donner une note.', 'Champs manquants', 'warning');
                return;
            }

            const userId = localStorage.getItem('alphamouv_user_id') || generateUserId();

            const review = {
                author,
                text,
                rating: selectedRating,
                date: new Date().toISOString(),
                userId: userId
            };

            // Sauvegarder le commentaire
            const reviews = JSON.parse(localStorage.getItem(`alphamouv_reviews_${productId}`)) || [];
            reviews.unshift(review);
            localStorage.setItem(`alphamouv_reviews_${productId}`, JSON.stringify(reviews));

            // Mettre à jour la note moyenne du produit
            const product = products.find(p => p.id === productId);
            if (product) {
                if (!product.rating) product.rating = { average: 0, count: 0 };
                const totalRating = (product.rating.average * product.rating.count) + selectedRating;
                product.rating.count++;
                product.rating.average = Math.round((totalRating / product.rating.count) * 10) / 10;
                saveProducts();
            }

            await customAlert('Merci pour votre avis !', 'Avis publié', 'success');

            // Rafraîchir l'affichage et désactiver le bouton
            renderReviews(productId);
            renderStars('detailRatingStars', product.rating.average);
            document.getElementById('detailRatingCount').textContent = `(${product.rating.count} avis)`;

            const writeBtn = document.getElementById('writeReviewBtn');
            writeBtn.disabled = true;
            writeBtn.textContent = 'Vous avez déjà laissé un avis';
            writeBtn.style.opacity = '0.5';
            writeBtn.style.cursor = 'not-allowed';

            toggleReviewForm();
        }

        // Vérifier si l'utilisateur a acheté le produit
        function checkIfPurchased(productId) {
            const purchases = JSON.parse(localStorage.getItem('alphamouv_purchases')) || [];
            return purchases.includes(productId);
        }

        // Vérifier si l'utilisateur a déjà laissé un avis pour ce produit
        function checkIfReviewed(productId) {
            const reviews = JSON.parse(localStorage.getItem(`alphamouv_reviews_${productId}`)) || [];
            const userId = localStorage.getItem('alphamouv_user_id') || generateUserId();
            return reviews.some(review => review.userId === userId);
        }

        // Générer un ID unique pour l'utilisateur s'il n'existe pas
        function generateUserId() {
            const userId = 'user_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
            localStorage.setItem('alphamouv_user_id', userId);
            return userId;
        }

        // Initialiser le système de notation
        document.addEventListener('DOMContentLoaded', () => {
            const ratingInput = document.getElementById('ratingInput');
            if (ratingInput) {
                ratingInput.addEventListener('click', (e) => {
                    if (e.target.classList.contains('star')) {
                        selectedRating = parseInt(e.target.dataset.rating);
                        document.querySelectorAll('#ratingInput .star').forEach((star, index) => {
                            if (index < selectedRating) {
                                star.classList.add('selected');
                            } else {
                                star.classList.remove('selected');
                            }
                        });
                    }
                });
            }
        });

        // Toggle panier
        function toggleCart() {
            const sidebar = document.getElementById('cartSidebar');
            const overlay = document.getElementById('cartOverlay');
            sidebar.classList.toggle('open');
            overlay.classList.toggle('active');
        }

        // Toggle menu navigation
        function toggleMenu() {
            const menu = document.getElementById('navMenu');
            const overlay = document.getElementById('menuOverlay');
            const button = document.getElementById('menuButton');

            menu.classList.toggle('active');
            overlay.classList.toggle('active');
            button.classList.toggle('active');

            // Empêcher le scroll quand le menu est ouvert
            if (menu.classList.contains('active')) {
                document.body.style.overflow = 'hidden';
            } else {
                document.body.style.overflow = 'auto';
            }
        }

        function closeMenu() {
            const menu = document.getElementById('navMenu');
            const overlay = document.getElementById('menuOverlay');
            const button = document.getElementById('menuButton');

            menu.classList.remove('active');
            overlay.classList.remove('active');
            button.classList.remove('active');
            document.body.style.overflow = 'auto';
        }

        // Toggle filtres
        function toggleFilters() {
            const content = document.getElementById('filtersContent');
            const button = document.querySelector('.filters-toggle-header');
            content.classList.toggle('active');
            if (button) button.classList.toggle('active');
        }

        // Éditer le titre du site
        function editSiteTitle() {
            const titleElement = document.getElementById('siteTitle');
            const currentTitle = titleElement.textContent;

            const input = document.createElement('input');
            input.type = 'text';
            input.value = currentTitle;
            input.style.cssText = `
                font-family: 'Alex Brush', 'Mr Dafoe', 'Parisienne', 'Allura', cursive;
                font-size: 7em;
                background: transparent;
                border: none;
                border-bottom: 1px solid rgba(221, 172, 11, 0.5);
                color: white;
                text-align: center;
                letter-spacing: 5px;
                font-weight: 400;
                outline: none;
                width: 100%;
                font-style: normal;
                -webkit-text-stroke: 0.5px rgba(221, 172, 11, 0.3);
                filter: drop-shadow(0 0 8px rgba(221, 172, 11, 0.25)) drop-shadow(0 0 12px rgba(221, 172, 11, 0.15));
                margin-top: 20px;
                line-height: 1.2;
            `;

            titleElement.textContent = '';
            titleElement.appendChild(input);
            input.focus();
            input.select();

            function saveTitle() {
                const newTitle = input.value.trim() || currentTitle;
                titleElement.textContent = newTitle;
                localStorage.setItem('alphamouv_site_title', newTitle);
            }

            input.addEventListener('blur', saveTitle);
            input.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    saveTitle();
                }
            });
        }

        // Charger le titre personnalisé au démarrage
        window.addEventListener('DOMContentLoaded', () => {
            const savedTitle = localStorage.getItem('alphamouv_site_title');
            if (savedTitle) {
                document.getElementById('siteTitle').textContent = savedTitle;
            }
        });

        // Fermer le menu en appuyant sur Échap
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                const menu = document.getElementById('navMenu');
                if (menu && menu.classList.contains('active')) {
                    closeMenu();
                }
            }
        });

        // Commander - Redirection vers Stripe Checkout
        async function checkout() {
            if (cart.length === 0) {
                await customAlert('Votre panier est vide !', 'Panier vide', 'warning');
                return;
            }

            // Verifier si l'utilisateur est connecte
            const token = localStorage.getItem('alphamouv_token');
            if (!token) {
                await customAlert('Vous devez etre connecte pour commander.', 'Connexion requise', 'warning');
                // Ouvrir le modal de connexion
                const loginModal = document.getElementById('authModal');
                if (loginModal) loginModal.style.display = 'flex';
                return;
            }

            try {
                // Afficher un loader
                const checkoutBtn = document.querySelector('.checkout-btn');
                const originalText = checkoutBtn.textContent;
                checkoutBtn.textContent = 'Chargement...';
                checkoutBtn.disabled = true;

                // Preparer les items pour Stripe
                const items = cart.map(item => ({
                    id: item.id,
                    name: item.name,
                    description: item.description || '',
                    price: item.prix_promo || item.prix || item.price,
                    quantity: item.quantity,
                    image: item.image
                }));

                // Creer la session de paiement
                const response = await fetch('/api/payment/create-checkout-session', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': 'Bearer ' + token
                    },
                    body: JSON.stringify({
                        items: items,
                        promoCode: appliedPromoCode,
                        successUrl: window.location.origin + '/boutique.html?payment=success',
                        cancelUrl: window.location.origin + '/boutique.html?payment=cancel'
                    })
                });

                const data = await response.json();

                if (data.error) {
                    throw new Error(data.error);
                }

                // Sauvegarder le panier avant redirection (pour le restaurer si annulation)
                localStorage.setItem('alphamouv_cart_backup', JSON.stringify(cart));

                // Rediriger vers Stripe Checkout
                window.location.href = data.url;

            } catch (error) {
                console.error('Erreur paiement:', error);
                await customAlert('Erreur lors de la creation du paiement: ' + error.message, 'Erreur', 'error');

                // Restaurer le bouton
                const checkoutBtn = document.querySelector('.checkout-btn');
                checkoutBtn.textContent = 'Commander';
                checkoutBtn.disabled = false;
            }
        }

        // Gerer le retour de paiement Stripe
        function handlePaymentReturn() {
            const urlParams = new URLSearchParams(window.location.search);
            const paymentStatus = urlParams.get('payment');

            if (paymentStatus === 'success') {
                // Paiement reussi
                customAlert(
                    'Votre commande a ete confirmee ! Vous recevrez un email de confirmation.',
                    'Paiement reussi !',
                    'success'
                );

                // Enregistrer les achats pour permettre les commentaires
                const cartBackup = JSON.parse(localStorage.getItem('alphamouv_cart_backup')) || [];
                const purchases = JSON.parse(localStorage.getItem('alphamouv_purchases')) || [];
                cartBackup.forEach(item => {
                    if (!purchases.includes(item.id)) {
                        purchases.push(item.id);
                    }
                });
                localStorage.setItem('alphamouv_purchases', JSON.stringify(purchases));

                // Vider le panier
                cart = [];
                saveCart();
                updateCartUI();
                localStorage.removeItem('alphamouv_cart_backup');

                // Nettoyer l'URL
                window.history.replaceState({}, document.title, window.location.pathname);

            } else if (paymentStatus === 'cancel') {
                // Paiement annule
                customAlert(
                    'Le paiement a ete annule. Votre panier a ete conserve.',
                    'Paiement annule',
                    'warning'
                );

                // Restaurer le panier si necessaire
                const cartBackup = JSON.parse(localStorage.getItem('alphamouv_cart_backup'));
                if (cartBackup && cart.length === 0) {
                    cart = cartBackup;
                    saveCart();
                    updateCartUI();
                }
                localStorage.removeItem('alphamouv_cart_backup');

                // Nettoyer l'URL
                window.history.replaceState({}, document.title, window.location.pathname);
            }
        }

        // Appeler au chargement de la page
        document.addEventListener('DOMContentLoaded', handlePaymentReturn);

        // Initialiser au chargement
        window.addEventListener('DOMContentLoaded', initProducts);

        // ============ PANNEAU ADMINISTRATION ============
        const DEFAULT_ADMIN_PASSWORD = 'admin123';
        let isAdminLoggedIn = false;
        let currentImageTarget = null;

        // ============ MODULE INDEXEDDB POUR IMAGES ============
        const ImageDB = {
            db: null,
            dbName: 'AlphamouvImagesDB',
            dbVersion: 1,

            // Initialiser la base de données
            init: function() {
                return new Promise((resolve, reject) => {
                    const request = indexedDB.open(this.dbName, this.dbVersion);

                    request.onerror = () => {
                        console.error('❌ Erreur ouverture IndexedDB:', request.error);
                        reject(request.error);
                    };

                    request.onsuccess = () => {
                        this.db = request.result;
                        console.log('✅ IndexedDB initialisée');
                        resolve(this.db);
                    };

                    request.onupgradeneeded = (event) => {
                        const db = event.target.result;

                        // Créer le store pour les images produits
                        if (!db.objectStoreNames.contains('productImages')) {
                            const productStore = db.createObjectStore('productImages', { keyPath: 'id' });
                            console.log('✓ Store productImages créé');
                        }

                        // Créer le store pour les images du carrousel
                        if (!db.objectStoreNames.contains('carouselImages')) {
                            const carouselStore = db.createObjectStore('carouselImages', { keyPath: 'index' });
                            console.log('✓ Store carouselImages créé');
                        }
                    };
                });
            },

            // Sauvegarder une image produit
            saveProductImage: function(productId, imageData) {
                return new Promise((resolve, reject) => {
                    if (!this.db) {
                        reject(new Error('Base de données non initialisée'));
                        return;
                    }

                    const transaction = this.db.transaction(['productImages'], 'readwrite');
                    const store = transaction.objectStore('productImages');
                    const request = store.put({ id: productId, data: imageData, timestamp: Date.now() });

                    request.onsuccess = () => {
                        console.log('✓ Image produit sauvegardée:', productId);
                        resolve();
                    };

                    request.onerror = () => {
                        console.error('❌ Erreur sauvegarde image:', request.error);
                        reject(request.error);
                    };
                });
            },

            // Récupérer une image produit
            getProductImage: function(productId) {
                return new Promise((resolve, reject) => {
                    if (!this.db) {
                        reject(new Error('Base de données non initialisée'));
                        return;
                    }

                    const transaction = this.db.transaction(['productImages'], 'readonly');
                    const store = transaction.objectStore('productImages');
                    const request = store.get(productId);

                    request.onsuccess = () => {
                        resolve(request.result ? request.result.data : null);
                    };

                    request.onerror = () => {
                        reject(request.error);
                    };
                });
            },

            // Récupérer toutes les images produits
            getAllProductImages: function() {
                return new Promise((resolve, reject) => {
                    if (!this.db) {
                        reject(new Error('Base de données non initialisée'));
                        return;
                    }

                    const transaction = this.db.transaction(['productImages'], 'readonly');
                    const store = transaction.objectStore('productImages');
                    const request = store.getAll();

                    request.onsuccess = () => {
                        const images = {};
                        request.result.forEach(item => {
                            images[item.id] = item.data;
                        });
                        resolve(images);
                    };

                    request.onerror = () => {
                        reject(request.error);
                    };
                });
            },

            // Supprimer une image produit
            deleteProductImage: function(productId) {
                return new Promise((resolve, reject) => {
                    if (!this.db) {
                        reject(new Error('Base de données non initialisée'));
                        return;
                    }

                    const transaction = this.db.transaction(['productImages'], 'readwrite');
                    const store = transaction.objectStore('productImages');
                    const request = store.delete(productId);

                    request.onsuccess = () => {
                        console.log('✓ Image produit supprimée:', productId);
                        resolve();
                    };

                    request.onerror = () => {
                        reject(request.error);
                    };
                });
            },

            // Calculer l'utilisation du stockage
            getStorageUsage: function() {
                return new Promise(async (resolve, reject) => {
                    if (navigator.storage && navigator.storage.estimate) {
                        try {
                            const estimate = await navigator.storage.estimate();
                            const usedMB = (estimate.usage / (1024 * 1024)).toFixed(2);
                            const quotaMB = (estimate.quota / (1024 * 1024)).toFixed(2);
                            const percentage = Math.round((estimate.usage / estimate.quota) * 100);

                            resolve({
                                used: usedMB,
                                total: quotaMB,
                                percentage: percentage
                            });
                        } catch (error) {
                            reject(error);
                        }
                    } else {
                        // Fallback pour navigateurs anciens
                        resolve({
                            used: '?',
                            total: '~100',
                            percentage: 0
                        });
                    }
                });
            }
        };

        async function initAdminSystem() {
            // Initialiser IndexedDB pour les images
            try {
                await ImageDB.init();
                console.log('✅ Système d\'images IndexedDB prêt');

                // Migrer les anciennes images de localStorage vers IndexedDB
                await migrateOldImages();
            } catch (error) {
                console.error('⚠️ Erreur initialisation IndexedDB:', error);
                await customAlert('Le système de stockage d\'images avancé n\'est pas disponible. Les images seront limitées.', 'Avertissement', 'warning');
            }

            if (!localStorage.getItem('alphamouv_admin')) {
                localStorage.setItem('alphamouv_admin', JSON.stringify({
                    password: DEFAULT_ADMIN_PASSWORD,
                    admins: ['admin@alphamouv.com']
                }));
            }
            if (!localStorage.getItem('alphamouv_logs')) {
                localStorage.setItem('alphamouv_logs', JSON.stringify([]));
            }
            addLog('info', 'Page boutique visitée');
        }

        // Migrer les anciennes images de localStorage vers IndexedDB
        async function migrateOldImages() {
            try {
                const oldImages = JSON.parse(localStorage.getItem('alphamouv_images'));
                if (oldImages && oldImages.products) {
                    console.log('🔄 Migration des images vers IndexedDB...');
                    let migrated = 0;
                    for (const [productId, imageData] of Object.entries(oldImages.products)) {
                        await ImageDB.saveProductImage(parseInt(productId), imageData);
                        migrated++;
                    }
                    console.log(`✅ ${migrated} images migrées vers IndexedDB`);

                    // Supprimer les anciennes images de localStorage pour libérer de l'espace
                    delete oldImages.products;
                    localStorage.setItem('alphamouv_images', JSON.stringify(oldImages));
                    addLog('success', `Migration: ${migrated} images déplacées vers IndexedDB`);
                }
            } catch (error) {
                console.error('Erreur migration:', error);
            }
        }

        // Afficher les logs récents dans le dashboard
        async function loadRecentLogs() {
            const logs = JSON.parse(localStorage.getItem('alphamouv_logs')) || [];
            const recentLogs = logs.slice(-5).reverse();
            const container = document.getElementById('recentLogs');
            if (container) {
                container.innerHTML = recentLogs.map(log =>
                    `<div class="log-entry ${log.type}">
                        <span class="log-time">${formatLogTime(log.timestamp)}</span>
                        <span class="log-type">${log.type}</span>
                        <span class="log-message">${log.message}</span>
                    </div>`
                ).join('') || '<p style="color: rgba(255,255,255,0.5);">Aucune activité</p>';
            }
        }

        // Calculer l'utilisation du stockage (IndexedDB + localStorage)
        async function calculateStorageUsage() {
            try {
                // Obtenir l'utilisation d'IndexedDB
                const indexedDBUsage = await ImageDB.getStorageUsage();
                return indexedDBUsage;
            } catch (error) {
                console.error('Erreur calcul stockage:', error);
                // Fallback sur localStorage
                let total = 0;
                for (let key in localStorage) {
                    if (localStorage.hasOwnProperty(key)) {
                        total += localStorage[key].length + key.length;
                    }
                }
                const estimatedLimit = 5 * 1024 * 1024; // 5MB
                const usedKB = (total / 1024).toFixed(2);
                const totalKB = (estimatedLimit / 1024).toFixed(0);
                const percentage = Math.min(100, Math.round((total / estimatedLimit) * 100));

                return {
                    used: usedKB,
                    total: totalKB,
                    percentage: percentage
                };
            }
        }

        async function loadProductsManager() {
            const grid = document.getElementById('productsGrid');

            // Charger toutes les images depuis IndexedDB
            try {
                const images = await ImageDB.getAllProductImages();

                grid.innerHTML = products.map(product => {
                    const customImg = images[product.id] || null;
                    return `<div class="image-card">
                        <div class="image-preview">
                            ${customImg ? `<img src="${customImg}" alt="${product.name}">` : `<span class="placeholder-icon">${product.icon}</span>`}
                        </div>
                        <div class="image-info">
                            <h4>${product.name}</h4>
                            <p>${product.price}€ - ${product.category}</p>
                            <div class="image-actions">
                                <button class="btn-change-image" onclick="selectProductImage(${product.id})">Changer image</button>
                                ${customImg ? `<button class="btn-remove-image" onclick="removeProductImage(${product.id})">Supprimer</button>` : ''}
                            </div>
                        </div>
                    </div>`;
                }).join('');
            } catch (error) {
                console.error('Erreur chargement images:', error);
                grid.innerHTML = '<p style="color: #ef4444;">Erreur de chargement des images</p>';
            }
        }

        function selectProductImage(productId) {
            currentImageTarget = { type: 'product', id: productId };
            document.getElementById('imageUploadInput').click();
        }

        async function handleImageUpload(event) {
            const file = event.target.files[0];
            if (!file) {
                console.log('Aucun fichier sélectionné');
                return;
            }

            // Vérifier que c'est bien une image
            if (!file.type.startsWith('image/')) {
                await customAlert('Veuillez sélectionner un fichier image valide (JPG, PNG, GIF, etc.)', 'Erreur', 'error');
                event.target.value = '';
                return;
            }

            // Vérifier la taille (max 5MB)
            const maxSize = 5 * 1024 * 1024; // 5MB
            if (file.size > maxSize) {
                await customAlert(
                    `L'image est trop volumineuse.<br><br><strong>Taille maximale:</strong> 5 MB<br><strong>Taille actuelle:</strong> ${(file.size / 1024 / 1024).toFixed(2)} MB`,
                    'Erreur',
                    'error'
                );
                event.target.value = '';
                return;
            }

            console.log('Upload en cours...', file.name, file.type, (file.size / 1024).toFixed(2) + 'KB');

            const reader = new FileReader();

            reader.onerror = async function() {
                console.error('Erreur lors de la lecture du fichier');
                await customAlert('Erreur lors de la lecture du fichier. Veuillez réessayer.', 'Erreur', 'error');
            };

            reader.onload = async function(e) {
                try {
                    const imageData = e.target.result;
                    console.log('Image chargée, taille des données:', imageData.length);

                    // Créer une image pour vérifier qu'elle est valide
                    const img = new Image();
                    img.onload = function() {
                        console.log('Image valide:', img.width + 'x' + img.height);
                        saveProductImage(currentImageTarget.id, imageData);
                    };
                    img.onerror = async function() {
                        await customAlert('L\'image est corrompue ou invalide', 'Erreur', 'error');
                    };
                    img.src = imageData;
                } catch (error) {
                    console.error('Erreur:', error);
                    await customAlert('Erreur lors du traitement de l\'image: ' + error.message, 'Erreur', 'error');
                }
            };

            reader.readAsDataURL(file);
            event.target.value = '';
        }

        async function saveProductImage(productId, imageData) {
            try {
                // Sauvegarder dans IndexedDB au lieu de localStorage
                await ImageDB.saveProductImage(productId, imageData);
                console.log('✅ Image sauvegardée dans IndexedDB (capacité étendue)');

                // Mettre à jour le produit en mémoire
                const product = products.find(p => p.id === productId);
                if (product) {
                    product.image = imageData;
                    console.log('✓ Produit mis à jour:', product.name);
                }

                renderProducts();
                await loadProductsManager();
                addLog('success', 'Image produit modifiée: ID ' + productId);

                // Afficher l'utilisation du stockage
                const storage = await ImageDB.getStorageUsage();
                await customAlert(
                    `<strong>Produit:</strong> ${product ? product.name : productId}<br><br><strong>Stockage IndexedDB:</strong><br>${storage.used} MB / ${storage.total} MB (${storage.percentage}%)`,
                    'Image mise à jour avec succès!',
                    'success'
                );

            } catch (error) {
                console.error('❌ Erreur lors de la sauvegarde:', error);
                await customAlert('Erreur lors de la sauvegarde:<br>' + error.message, 'Erreur', 'error');
                addLog('error', 'Erreur sauvegarde image: ' + error.message);
            }
        }

        async function removeProductImage(productId) {
            const confirmed = await customConfirm('Supprimer cette image ?', 'Confirmation', 'Supprimer', 'Annuler');
            if (!confirmed) return;

            try {
                await ImageDB.deleteProductImage(productId);
                const product = products.find(p => p.id === productId);
                if (product) product.image = null;
                renderProducts();
                await loadProductsManager();
                addLog('info', 'Image produit supprimée: ' + productId);
                console.log('✓ Image supprimée de IndexedDB');
            } catch (error) {
                console.error('Erreur suppression:', error);
                await customAlert('Erreur lors de la suppression: ' + error.message, 'Erreur', 'error');
            }
        }

        function addLog(type, message) {
            const logs = JSON.parse(localStorage.getItem('alphamouv_logs')) || [];
            logs.push({ type, message, timestamp: new Date().toISOString() });
            if (logs.length > 500) logs.splice(0, logs.length - 500);
            localStorage.setItem('alphamouv_logs', JSON.stringify(logs));
        }

        function loadLogs() {
            // Afficher les backups
            loadBackupsSection();

            const logs = JSON.parse(localStorage.getItem('alphamouv_logs')) || [];
            document.getElementById('logsContainer').innerHTML = logs.slice().reverse().map(log =>
                `<div class="log-entry ${log.type}">
                    <span class="log-time">${formatLogTime(log.timestamp)}</span>
                    <span class="log-type">${log.type}</span>
                    <span class="log-message">${log.message}</span>
                </div>`
            ).join('') || '<p style="color: rgba(255,255,255,0.5);">Aucun log</p>';
        }

        function loadBackupsSection() {
            let html = '<h4 style="color: var(--primary-color); margin-bottom: 15px;">Backups automatiques</h4>';
            html += '<div style="background: rgba(255,255,255,0.05); border-radius: 12px; padding: 20px; margin-bottom: 30px;">';
            html += '<p style="color: rgba(255,255,255,0.7); margin-bottom: 15px;">Le système crée automatiquement une backup toutes les 24h. Les 7 dernières backups sont conservées.</p>';

            const lastBackup = localStorage.getItem('boutique_last_backup');
            if (lastBackup) {
                html += '<p style="color: rgba(255,255,255,0.6); font-size: 0.9em; margin-bottom: 20px;">Dernière backup: ' + new Date(parseInt(lastBackup)).toLocaleString('fr-FR') + '</p>';
            }

            html += '<div style="display: grid; gap: 10px;">';

            for (let i = 1; i <= 7; i++) {
                const backupData = localStorage.getItem('boutique_backup_' + i);
                if (backupData) {
                    const backup = JSON.parse(backupData);
                    html += '<div style="display: flex; justify-content: space-between; align-items: center; background: rgba(0,0,0,0.3); padding: 12px; border-radius: 8px;">';
                    html += '<span style="color: rgba(255,255,255,0.8);">Backup J-' + i + ' : ' + new Date(backup.timestamp).toLocaleString('fr-FR') + '</span>';
                    html += '<button onclick="restoreBackup(' + i + ')" style="padding: 6px 16px; background: rgba(59, 130, 246, 0.2); color: #60a5fa; border: 1px solid rgba(59, 130, 246, 0.3); border-radius: 6px; cursor: pointer; font-size: 0.85em;">Restaurer</button>';
                    html += '</div>';
                }
            }

            html += '</div>';
            html += '</div>';

            document.getElementById('backupsSection').innerHTML = html;
        }

        async function restoreBackup(index) {
            const backupData = localStorage.getItem('boutique_backup_' + index);
            if (!backupData) {
                await customAlert('Backup introuvable', 'Erreur');
                return;
            }

            const confirmed = await customConfirm(
                'Êtes-vous sûr de vouloir restaurer cette backup ?<br><br>Les données actuelles seront remplacées.',
                'Restaurer la backup',
                'Restaurer',
                'Annuler'
            );

            if (!confirmed) return;

            try {
                const backup = JSON.parse(backupData);

                if (backup.products) {
                    localStorage.setItem('alphamouv_products', JSON.stringify(backup.products));
                    products = backup.products;
                }

                addLog('success', 'Backup J-' + index + ' restaurée avec succès');
                await customAlert('Backup restaurée avec succès !', 'Succès');
                location.reload();
            } catch (error) {
                addLog('error', 'Erreur lors de la restauration: ' + error.message);
                await customAlert('Erreur lors de la restauration', 'Erreur');
            }
        }

        function formatLogTime(timestamp) {
            const date = new Date(timestamp);
            return date.toLocaleDateString('fr-FR') + ' ' + date.toLocaleTimeString('fr-FR');
        }

        function refreshLogs() { loadLogs(); }

        function exportLogs() {
            const logs = JSON.parse(localStorage.getItem('alphamouv_logs')) || [];
            const text = logs.map(log => `[${formatLogTime(log.timestamp)}] [${log.type.toUpperCase()}] ${log.message}`).join('\n');
            const blob = new Blob([text], { type: 'text/plain' });
            const a = document.createElement('a');
            a.href = URL.createObjectURL(blob);
            a.download = 'logs_' + new Date().toISOString().slice(0, 10) + '.txt';
            a.click();
        }

        async function clearLogs() {
            const confirmed = await customConfirm(
                'Êtes-vous sûr de vouloir supprimer tous les logs ?<br><br>Cette action est irréversible.',
                'Vider les logs',
                'Supprimer tout',
                'Annuler'
            );
            if (!confirmed) return;
            localStorage.setItem('alphamouv_logs', JSON.stringify([]));
            loadLogs();
        }

        // Charger les images sauvegardées au démarrage depuis IndexedDB
        async function loadSavedProductImages() {
            try {
                const images = await ImageDB.getAllProductImages();
                products.forEach(product => {
                    if (images[product.id]) {
                        product.image = images[product.id];
                    }
                });
                console.log('✓ Images produits chargées depuis IndexedDB');
            } catch (error) {
                console.error('Erreur chargement images:', error);
            }
        }

        // ========== FONCTIONS GESTION PRODUITS ==========

        // Sauvegarder les produits dans localStorage
        function saveProducts() {
            localStorage.setItem('alphamouv_products', JSON.stringify(products));
        }

        // Ouvrir le formulaire pour ajouter un produit
        function openProductForm() {
            currentEditingProduct = null;
            productSizes = [];
            productImageData = null;
            document.getElementById('productFormTitle').textContent = '➕ Ajouter un produit';
            document.getElementById('productForm').reset();
            document.getElementById('selectedSizes').innerHTML = '';
            initImagesContainer();
            document.getElementById('productFormModal').classList.add('active');
        }

        // Fermer le formulaire produit
        function closeProductForm() {
            document.getElementById('productFormModal').classList.remove('active');
            currentEditingProduct = null;
            productSizes = [];
            productImageData = null;
            productImages = [];
        }

        // Ajouter une taille
        function addSize() {
            const sizeInput = document.getElementById('sizeInput');
            const size = sizeInput.value.trim();

            if (size && !productSizes.includes(size)) {
                productSizes.push(size);
                renderSizes();
                sizeInput.value = '';
            }
        }

        // Supprimer une taille
        function removeSize(size) {
            productSizes = productSizes.filter(s => s !== size);
            renderSizes();
        }

        // Afficher les tailles sélectionnées
        function renderSizes() {
            const container = document.getElementById('selectedSizes');
            container.innerHTML = productSizes.map(size => `
                <div class="size-tag">
                    ${size}
                    <button type="button" onclick="removeSize('${size}')">×</button>
                </div>
            `).join('');
        }

        // Système de gestion des images multiples
        let productImages = [];
        let currentImageSlotIndex = -1;

        // Initialiser le conteneur d'images
        function initImagesContainer() {
            productImages = [];
            currentImageSlotIndex = -1;
            renderImagesContainer();
        }

        // Ajouter un slot d'image
        function addImageSlot() {
            if (productImages.length >= 5) return;

            currentImageSlotIndex = productImages.length;
            document.getElementById('productImageInput').click();
        }

        // Gérer l'upload d'image
        async function handleImageUpload(event) {
            const file = event.target.files[0];
            if (!file) return;

            // Vérifier la taille (max 5 MB)
            if (file.size > 5 * 1024 * 1024) {
                await customAlert('Image trop grande (max 5 MB)', 'Erreur', 'error');
                event.target.value = '';
                return;
            }

            const reader = new FileReader();
            reader.onload = function(e) {
                if (currentImageSlotIndex >= 0 && currentImageSlotIndex < 5) {
                    productImages[currentImageSlotIndex] = e.target.result;
                    renderImagesContainer();
                }
                event.target.value = '';
            };
            reader.readAsDataURL(file);
        }

        // Retirer une image
        function removeImage(index) {
            productImages.splice(index, 1);
            renderImagesContainer();
        }

        // Afficher le conteneur d'images
        function renderImagesContainer() {
            const container = document.getElementById('imagesUploadContainer');
            const addBtn = document.getElementById('addImageBtn');

            container.innerHTML = productImages.map((img, index) => `
                <div class="image-slot">
                    <img src="${img}" alt="Image ${index + 1}">
                    <button type="button" class="image-slot-remove" onclick="removeImage(${index})">×</button>
                </div>
            `).join('');

            // Désactiver le bouton si on a 5 images
            if (productImages.length >= 5) {
                addBtn.disabled = true;
                addBtn.textContent = 'Maximum d\'images atteint (5)';
            } else {
                addBtn.disabled = false;
                addBtn.textContent = `+ Ajouter une image (${productImages.length}/5)`;
            }
        }

        // Prévisualiser l'image du produit (fonction obsolète, gardée pour compatibilité)
        async function previewProductImage(event) {
            handleImageUpload(event);
        }

        // Sauvegarder le produit
        async function saveProduct(event) {
            event.preventDefault();

            const formData = {
                name: document.getElementById('productName').value.trim(),
                price: parseFloat(document.getElementById('productPrice').value),
                category: document.getElementById('productCategory').value,
                type: document.getElementById('productType').value,
                description: document.getElementById('productDescription').value.trim(),
                stock: parseInt(document.getElementById('productStock').value) || 0,
                status: document.getElementById('productStatus').value,
                sizes: [...productSizes],
                icon: document.getElementById('productIcon').value.trim() || '',
                image: productImages.length > 0 ? productImages[0] : null,
                images: [...productImages]
            };

            if (productSizes.length === 0) {
                await customAlert('Veuillez ajouter au moins une taille', 'Erreur', 'error');
                return;
            }

            if (currentEditingProduct) {
                // Modification
                const index = products.findIndex(p => p.id === currentEditingProduct.id);
                if (index !== -1) {
                    products[index] = {
                        ...products[index],
                        ...formData
                    };
                    addLog('info', `Produit modifié: ${formData.name}`);
                }
            } else {
                // Ajout
                const newProduct = {
                    id: products.length > 0 ? Math.max(...products.map(p => p.id)) + 1 : 1,
                    ...formData
                };
                products.push(newProduct);
                addLog('success', `Produit ajouté: ${formData.name}`);
            }

            // Sauvegarder l'image dans IndexedDB si disponible
            if (productImageData) {
                const productId = currentEditingProduct ? currentEditingProduct.id : products[products.length - 1].id;
                try {
                    await saveProductImage(productId, productImageData);
                } catch (error) {
                    console.error('Erreur sauvegarde image:', error);
                }
            }

            saveProducts();
            filteredProducts = [...products];
            renderProducts();
            renderProductsListAdmin();
            updateAdminStats();
            closeProductForm();
            await customAlert('Produit enregistré avec succès !', 'Succès', 'success');
        }

        // Éditer un produit
        async function editProduct(productId) {
            const product = products.find(p => p.id === productId);
            if (!product) return;

            currentEditingProduct = product;
            productSizes = [...product.sizes];
            productImageData = product.image;

            // Charger les images multiples
            if (product.images && product.images.length > 0) {
                productImages = [...product.images];
            } else if (product.image) {
                productImages = [product.image];
            } else {
                productImages = [];
            }

            document.getElementById('productFormTitle').textContent = 'Modifier le produit';
            document.getElementById('productName').value = product.name;
            document.getElementById('productPrice').value = product.price;
            document.getElementById('productCategory').value = product.category;
            document.getElementById('productType').value = product.type;
            document.getElementById('productDescription').value = product.description;
            document.getElementById('productStock').value = product.stock || 0;
            document.getElementById('productStatus').value = product.status || 'in-stock';
            document.getElementById('productIcon').value = product.icon;

            renderSizes();
            renderImagesContainer();

            document.getElementById('productFormModal').classList.add('active');
        }

        // Supprimer un produit
        async function deleteProduct(productId) {
            const product = products.find(p => p.id === productId);
            if (!product) return;

            const confirmed = await customConfirm(
                `Êtes-vous sûr de vouloir supprimer<br><strong>"${product.name}"</strong> ?<br><br>Cette action est irréversible.`,
                '⚠️ Supprimer le produit',
                'Supprimer',
                'Annuler'
            );

            if (!confirmed) return;

            products = products.filter(p => p.id !== productId);

            // Supprimer l'image de IndexedDB
            try {
                await deleteProductImage(productId);
            } catch (error) {
                console.error('Erreur suppression image:', error);
            }

            saveProducts();
            filteredProducts = [...products];
            renderProducts();
            renderProductsListAdmin();
            updateAdminStats();
            addLog('warning', `Produit supprimé: ${product.name}`);
            await customAlert('Produit supprimé avec succès !', 'Suppression réussie', 'success');
        }

        // Afficher la liste des produits dans le panneau admin
        function renderProductsListAdmin() {
            const container = document.getElementById('productsListAdmin');
            if (!container) return;

            if (products.length === 0) {
                container.innerHTML = '<p style="text-align: center; color: rgba(255,255,255,0.5); padding: 40px;">Aucun produit. Cliquez sur "Ajouter un produit" pour commencer.</p>';
                return;
            }

            container.innerHTML = products.map(product => `
                <div class="product-item-admin">
                    <div class="product-item-image">
                        ${product.image ? `<img src="${product.image}" alt="${product.name}" style="width: 100%; height: 100%; object-fit: cover; border-radius: 15px;">` : product.icon}
                    </div>
                    <div class="product-item-info">
                        <h3>${product.name}</h3>
                        <p>${product.price}€ | Stock: ${product.stock || 0} <span class="stock-indicator ${product.status || 'in-stock'}">${getStatusLabel(product.status)}</span></p>
                        <p>${getCategoryLabel(product.category)} | ${product.type}</p>
                        <p style="font-size: 0.9em;">Tailles: ${product.sizes.join(', ')}</p>
                    </div>
                    <div class="product-item-actions">
                        <button class="btn-edit" onclick="editProduct(${product.id})">Modifier</button>
                        <button class="btn-delete" onclick="deleteProduct(${product.id})">Supprimer</button>
                    </div>
                </div>
            `).join('');
        }

        // Obtenir le label du statut
        function getStatusLabel(status) {
            const labels = {
                'in-stock': 'En stock',
                'on-order': 'Sur commande',
                'out-of-stock': 'Rupture'
            };
            return labels[status] || 'En stock';
        }

        // Obtenir le label de catégorie
        function getCategoryLabel(category) {
            const labels = {
                'homme': 'Homme',
                'femme': 'Femme',
                'enfant': 'Enfant',
                'unisexe': 'Unisexe'
            };
            return labels[category] || category;
        }

        // Afficher le bouton admin
        function checkAdminAccess() {
            const currentUser = JSON.parse(localStorage.getItem('alphamouv_user'));
            const adminData = JSON.parse(localStorage.getItem('alphamouv_admin')) || {};
            const adminToggleBtn = document.getElementById('adminSidebarToggle');

            // MODE DÉVELOPPEMENT : Afficher toujours le bouton admin
            // Pour sécuriser en production, décommentez la condition ci-dessous :
            /*
            if (currentUser && adminData.admins && adminData.admins.includes(currentUser.email)) {
                adminToggleBtn.classList.add('visible');
            } else {
                adminToggleBtn.classList.remove('visible');
            }
            */

            // MODE DEV : Toujours visible
            adminToggleBtn.classList.add('visible');
        }

        // Basculer la sidebar admin
        function toggleAdminSidebar() {
            const sidebar = document.getElementById('adminSidebar');
            const contentPanel = document.getElementById('adminContentPanel');

            sidebar.classList.toggle('active');
            contentPanel.classList.toggle('active');

            if (sidebar.classList.contains('active')) {
                renderProductsListAdmin();
                updateAdminStats();
                refreshLogs();
            }
        }

        // Changer de section dans l'admin
        function switchAdminSection(section) {
            // Retirer active de tous les nav items
            document.querySelectorAll('.admin-nav-item').forEach(item => {
                item.classList.remove('active');
            });

            // Ajouter active au nav item cliqué
            const activeNavItem = document.querySelector(`[data-section="${section}"]`);
            if (activeNavItem) {
                activeNavItem.classList.add('active');
            }

            // Retirer active de tous les content sections
            document.querySelectorAll('.admin-section-content').forEach(content => {
                content.classList.remove('active');
            });

            // Ajouter active à la section sélectionnée
            const activeSection = document.getElementById(`adminSection-${section}`);
            if (activeSection) {
                activeSection.classList.add('active');
            }

            // Charger les données selon la section
            if (section === 'products') {
                renderProductsListAdmin();
            } else if (section === 'dashboard') {
                updateAdminStats();
            } else if (section === 'logs') {
                refreshLogs();
            } else if (section === 'appearance') {
                loadAppearanceSection();
            } else if (section === 'content') {
                loadContentSection();
            } else if (section === 'orders') {
                loadAdminOrders();
            } else if (section === 'stats') {
                loadAdvancedStats();
            } else if (section === 'promo') {
                loadPromoCodes();
            }
        }

        // ============================================
        // ADMIN - GESTION DES COMMANDES
        // ============================================

        var allAdminOrders = [];

        async function loadAdminOrders() {
            var token = localStorage.getItem('alphamouv_token');
            if (!token) return;

            try {
                var response = await fetch('/api/admin/orders', {
                    headers: { 'Authorization': 'Bearer ' + token }
                });
                allAdminOrders = await response.json();
                renderAdminOrders(allAdminOrders);
            } catch (error) {
                console.error('Erreur chargement commandes admin:', error);
            }
        }

        function filterAdminOrders() {
            var status = document.getElementById('orderStatusFilter').value;
            if (status === 'all') {
                renderAdminOrders(allAdminOrders);
            } else {
                renderAdminOrders(allAdminOrders.filter(function(o) { return o.status === status; }));
            }
        }

        function renderAdminOrders(orders) {
            var tbody = document.getElementById('adminOrdersBody');
            var statusLabels = {
                'pending': 'En attente',
                'paid': 'Payée',
                'processing': 'En préparation',
                'shipped': 'Expédiée',
                'delivered': 'Livrée',
                'cancelled': 'Annulée'
            };

            tbody.innerHTML = orders.map(function(order) {
                var clientName = order.prenom ? order.prenom + ' ' + (order.nom || '') : order.email;
                return `
                    <tr>
                        <td>#${order.id}</td>
                        <td>${clientName}</td>
                        <td>${order.total?.toFixed(2) || 0}€${order.promo_code ? ' <small style="color:#22c55e">(' + order.promo_code + ')</small>' : ''}</td>
                        <td>${new Date(order.created_at).toLocaleDateString('fr-FR')}</td>
                        <td>
                            <select class="status-select" onchange="updateOrderStatus(${order.id}, this.value)">
                                <option value="pending" ${order.status === 'pending' ? 'selected' : ''}>En attente</option>
                                <option value="paid" ${order.status === 'paid' ? 'selected' : ''}>Payée</option>
                                <option value="processing" ${order.status === 'processing' ? 'selected' : ''}>En préparation</option>
                                <option value="shipped" ${order.status === 'shipped' ? 'selected' : ''}>Expédiée</option>
                                <option value="delivered" ${order.status === 'delivered' ? 'selected' : ''}>Livrée</option>
                                <option value="cancelled" ${order.status === 'cancelled' ? 'selected' : ''}>Annulée</option>
                            </select>
                        </td>
                        <td>
                            <button onclick="viewOrderDetails(${order.id})" style="padding: 5px 10px; background: rgba(59, 130, 246, 0.2); border: 1px solid rgba(59, 130, 246, 0.4); border-radius: 5px; color: #3b82f6; cursor: pointer;">Détails</button>
                        </td>
                    </tr>
                `;
            }).join('');
        }

        async function updateOrderStatus(orderId, status) {
            var token = localStorage.getItem('alphamouv_token');
            if (!token) return;

            try {
                await fetch('/api/admin/orders/' + orderId + '/status', {
                    method: 'PUT',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': 'Bearer ' + token
                    },
                    body: JSON.stringify({ status: status })
                });
                addLog('Statut commande #' + orderId + ' modifié: ' + status, 'success');
            } catch (error) {
                console.error('Erreur mise à jour statut:', error);
            }
        }

        function viewOrderDetails(orderId) {
            var order = allAdminOrders.find(function(o) { return o.id === orderId; });
            if (!order) return;

            var items = [];
            try { items = JSON.parse(order.items || '[]'); } catch(e) {}

            showCustomModal({
                type: 'info',
                title: 'Commande #' + orderId,
                message: `
                    <div style="text-align: left;">
                        <p><strong>Client:</strong> ${order.prenom || ''} ${order.nom || ''} (${order.email})</p>
                        <p><strong>Date:</strong> ${new Date(order.created_at).toLocaleString('fr-FR')}</p>
                        <p><strong>Statut:</strong> ${order.status}</p>
                        ${order.promo_code ? `<p><strong>Code promo:</strong> ${order.promo_code} (-${order.discount_amount?.toFixed(2) || 0}€)</p>` : ''}
                        <hr style="border-color: rgba(255,255,255,0.2); margin: 15px 0;">
                        <p><strong>Articles:</strong></p>
                        ${items.map(function(item) {
                            return `<p>- ${item.name} x${item.quantity || 1} (${item.price?.toFixed(2) || 0}€)</p>`;
                        }).join('')}
                        <hr style="border-color: rgba(255,255,255,0.2); margin: 15px 0;">
                        <p><strong>Total:</strong> ${order.total?.toFixed(2) || 0}€</p>
                    </div>
                `,
                buttonText: 'Fermer'
            });
        }

        // ============================================
        // ADMIN - STATISTIQUES AVANCÉES
        // ============================================

        async function loadAdvancedStats() {
            var token = localStorage.getItem('alphamouv_token');
            if (!token) return;

            try {
                var response = await fetch('/api/admin/stats/advanced', {
                    headers: { 'Authorization': 'Bearer ' + token }
                });
                var stats = await response.json();

                // Afficher les stats principales
                document.getElementById('statsGrid').innerHTML = `
                    <div class="stats-card">
                        <div class="stats-card-icon">💰</div>
                        <div class="stats-card-value">${(stats.revenue || 0).toFixed(2)}€</div>
                        <div class="stats-card-label">Revenue Total</div>
                    </div>
                    <div class="stats-card">
                        <div class="stats-card-icon">📅</div>
                        <div class="stats-card-value">${(stats.monthRevenue || 0).toFixed(2)}€</div>
                        <div class="stats-card-label">Ce mois</div>
                    </div>
                    <div class="stats-card">
                        <div class="stats-card-icon">📦</div>
                        <div class="stats-card-value">${stats.orders || 0}</div>
                        <div class="stats-card-label">Commandes payées</div>
                    </div>
                    <div class="stats-card">
                        <div class="stats-card-icon">👥</div>
                        <div class="stats-card-value">${stats.users || 0}</div>
                        <div class="stats-card-label">Utilisateurs</div>
                    </div>
                    <div class="stats-card">
                        <div class="stats-card-icon">🎁</div>
                        <div class="stats-card-value">${stats.activePromos || 0}</div>
                        <div class="stats-card-label">Codes Promo Actifs</div>
                    </div>
                    <div class="stats-card">
                        <div class="stats-card-icon">📧</div>
                        <div class="stats-card-value">${stats.newsletter || 0}</div>
                        <div class="stats-card-label">Newsletter</div>
                    </div>
                `;

                // Top produits
                var topProductsList = document.getElementById('topProductsList');
                if (stats.topProducts && stats.topProducts.length > 0) {
                    topProductsList.innerHTML = stats.topProducts.map(function(p, i) {
                        return `
                            <div class="top-product-item">
                                <div class="top-product-rank">${i + 1}</div>
                                <img src="${p.image || 'images/placeholder.png'}" alt="${p.nom}" class="top-product-image">
                                <span class="top-product-name">${p.nom}</span>
                                <span class="top-product-sales">${p.total_sold} vendus</span>
                            </div>
                        `;
                    }).join('');
                } else {
                    topProductsList.innerHTML = '<p style="color: rgba(255,255,255,0.5);">Aucune vente encore</p>';
                }

                // Stock faible
                var lowStockList = document.getElementById('lowStockList');
                if (stats.lowStock && stats.lowStock.length > 0) {
                    lowStockList.innerHTML = stats.lowStock.map(function(p) {
                        return `
                            <div class="low-stock-item">
                                <span class="product-name">${p.nom}</span>
                                <span class="stock-count">${p.stock} en stock</span>
                            </div>
                        `;
                    }).join('');
                } else {
                    lowStockList.innerHTML = '<p style="color: rgba(255,255,255,0.5);">Tous les stocks sont OK</p>';
                }

                // Dernières commandes
                var recentOrdersBody = document.getElementById('recentOrdersBody');
                if (stats.recentOrders && stats.recentOrders.length > 0) {
                    recentOrdersBody.innerHTML = stats.recentOrders.map(function(order) {
                        var clientName = order.prenom ? order.prenom + ' ' + (order.nom || '') : order.email;
                        return `
                            <tr>
                                <td>#${order.id}</td>
                                <td>${clientName}</td>
                                <td>${order.total?.toFixed(2) || 0}€</td>
                                <td><span class="order-status ${order.status}">${order.status}</span></td>
                                <td>${new Date(order.created_at).toLocaleDateString('fr-FR')}</td>
                            </tr>
                        `;
                    }).join('');
                }
            } catch (error) {
                console.error('Erreur chargement stats:', error);
            }
        }

        // ============================================
        // ADMIN - CODES PROMO
        // ============================================

        async function loadPromoCodes() {
            var token = localStorage.getItem('alphamouv_token');
            if (!token) return;

            try {
                var response = await fetch('/api/admin/promo', {
                    headers: { 'Authorization': 'Bearer ' + token }
                });
                var promos = await response.json();
                renderPromoCodes(promos);
            } catch (error) {
                console.error('Erreur chargement codes promo:', error);
            }
        }

        function renderPromoCodes(promos) {
            var tbody = document.getElementById('promoCodesBody');
            tbody.innerHTML = promos.map(function(promo) {
                var expiry = promo.expires_at ? new Date(promo.expires_at).toLocaleDateString('fr-FR') : '-';
                var usesText = promo.max_uses ? promo.used_count + '/' + promo.max_uses : promo.used_count + '/∞';
                return `
                    <tr>
                        <td><strong>${promo.code}</strong></td>
                        <td>${promo.discount_percent}%</td>
                        <td>${usesText}</td>
                        <td>${promo.min_order_amount || 0}€</td>
                        <td>${expiry}</td>
                        <td><span class="promo-status ${promo.active ? 'active' : 'inactive'}">${promo.active ? 'Actif' : 'Inactif'}</span></td>
                        <td>
                            <button onclick="togglePromoStatus(${promo.id}, ${!promo.active})" style="padding: 5px 10px; background: rgba(234, 179, 8, 0.2); border: 1px solid rgba(234, 179, 8, 0.4); border-radius: 5px; color: #eab308; cursor: pointer; margin-right: 5px;">
                                ${promo.active ? 'Désactiver' : 'Activer'}
                            </button>
                            <button onclick="deletePromoCode(${promo.id})" style="padding: 5px 10px; background: rgba(239, 68, 68, 0.2); border: 1px solid rgba(239, 68, 68, 0.4); border-radius: 5px; color: #ef4444; cursor: pointer;">
                                Supprimer
                            </button>
                        </td>
                    </tr>
                `;
            }).join('');
        }

        async function createPromoCode() {
            var token = localStorage.getItem('alphamouv_token');
            if (!token) return;

            var code = document.getElementById('promoCode').value.trim();
            var percent = parseInt(document.getElementById('promoPercent').value);
            var maxUses = document.getElementById('promoMaxUses').value;
            var minOrder = document.getElementById('promoMinOrder').value;
            var expires = document.getElementById('promoExpires').value;

            if (!code || !percent) {
                showCustomModal({
                    type: 'warning',
                    title: 'Champs requis',
                    message: 'Le code et le pourcentage sont obligatoires.',
                    buttonText: 'OK'
                });
                return;
            }

            try {
                var response = await fetch('/api/admin/promo', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': 'Bearer ' + token
                    },
                    body: JSON.stringify({
                        code: code,
                        discount_percent: percent,
                        max_uses: maxUses ? parseInt(maxUses) : null,
                        min_order_amount: minOrder ? parseFloat(minOrder) : 0,
                        expires_at: expires || null
                    })
                });

                if (response.ok) {
                    document.getElementById('promoCode').value = '';
                    document.getElementById('promoPercent').value = '';
                    document.getElementById('promoMaxUses').value = '';
                    document.getElementById('promoMinOrder').value = '';
                    document.getElementById('promoExpires').value = '';
                    loadPromoCodes();
                    addLog('Code promo créé: ' + code, 'success');
                    showCustomModal({
                        type: 'success',
                        title: 'Code créé',
                        message: 'Le code promo ' + code + ' a été créé avec succès.',
                        buttonText: 'OK'
                    });
                } else {
                    var error = await response.json();
                    showCustomModal({
                        type: 'error',
                        title: 'Erreur',
                        message: error.error || 'Erreur lors de la création du code.',
                        buttonText: 'OK'
                    });
                }
            } catch (error) {
                console.error('Erreur création code promo:', error);
            }
        }

        async function togglePromoStatus(promoId, active) {
            var token = localStorage.getItem('alphamouv_token');
            if (!token) return;

            try {
                await fetch('/api/admin/promo/' + promoId, {
                    method: 'PUT',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': 'Bearer ' + token
                    },
                    body: JSON.stringify({ active: active, discount_percent: 0 }) // Will need to fetch current values
                });
                loadPromoCodes();
            } catch (error) {
                console.error('Erreur toggle promo:', error);
            }
        }

        async function deletePromoCode(promoId) {
            var confirmed = await showCustomModal({
                type: 'confirm',
                title: 'Supprimer le code promo ?',
                message: 'Cette action est irréversible.',
                confirmText: 'Supprimer',
                cancelText: 'Annuler'
            });

            if (!confirmed) return;

            var token = localStorage.getItem('alphamouv_token');
            if (!token) return;

            try {
                await fetch('/api/admin/promo/' + promoId, {
                    method: 'DELETE',
                    headers: { 'Authorization': 'Bearer ' + token }
                });
                loadPromoCodes();
                addLog('Code promo supprimé', 'warning');
            } catch (error) {
                console.error('Erreur suppression promo:', error);
            }
        }

        // Mettre à jour les statistiques du dashboard
        function updateAdminStats() {
            const statProducts = document.getElementById('statProducts');
            const statCartItems = document.getElementById('statCartItems');
            const statUsers = document.getElementById('statUsers');
            const statStorage = document.getElementById('statStorage');

            if (statProducts) statProducts.textContent = products.length;
            if (statCartItems) statCartItems.textContent = cart.reduce((sum, item) => sum + item.quantity, 0);

            // Calculer le nombre d'utilisateurs
            const users = JSON.parse(localStorage.getItem('alphamouv_users')) || {};
            if (statUsers) statUsers.textContent = Object.keys(users).length;

            // Calculer l'utilisation du stockage
            let totalSize = 0;
            for (let key in localStorage) {
                if (localStorage.hasOwnProperty(key)) {
                    totalSize += localStorage[key].length + key.length;
                }
            }
            const usagePercent = Math.round((totalSize / (5 * 1024 * 1024)) * 100); // Estimation 5MB max
            if (statStorage) {
                statStorage.textContent = usagePercent + '%';
                // Changer la couleur selon l'utilisation
                if (usagePercent > 80) {
                    statStorage.style.color = '#ef4444'; // Rouge
                } else if (usagePercent > 60) {
                    statStorage.style.color = '#eab308'; // Jaune
                } else {
                    statStorage.style.color = '#22c55e'; // Vert
                }
            }

            // Charger les logs récents
            loadRecentLogs();
        }

        // Init
        window.addEventListener('DOMContentLoaded', async function() {
            await initAdminSystem();
            await loadSavedProductImages();
            renderProducts();
            checkAdminAccess();

            // Charger les produits si premiers lancement
            if (!localStorage.getItem('alphamouv_products')) {
                saveProducts();
            }
        });

        // ============================================
        // GESTION DE L'APPARENCE (COULEURS)
        // ============================================

        function loadAppearanceSection() {
            var container = document.getElementById('appearanceContent');
            container.innerHTML = `
                <h4 style="color: #ddac0b; margin-bottom: 10px;">Personnalisation complète de l'apparence</h4>
                <p style="color: rgba(255,255,255,0.6); margin-bottom: 30px;">Modifiez toutes les couleurs, fonds et dégradés de votre boutique en temps réel</p>

                <!-- Couleurs d'accents -->
                <h5 style="color: white; margin: 30px 0 15px 0; border-bottom: 2px solid rgba(221, 172, 11, 0.3); padding-bottom: 10px;">Couleurs d'accent</h5>
                <div style="display: grid; gap: 20px;">
                    <div style="background: rgba(255,255,255,0.05); padding: 20px; border-radius: 12px; border: 1px solid rgba(255,255,255,0.1);">
                        <label style="display: block; color: white; margin-bottom: 10px; font-weight: 600;">Couleur Primaire (Accents dorés)</label>
                        <div style="display: flex; gap: 10px;">
                            <input type="color" id="primaryColor" value="#ddac0b" oninput="updateColorRealtime('primaryColor', this.value)" style="width: 60px; height: 40px; border: none; border-radius: 8px; cursor: pointer;">
                            <input type="text" id="primaryColorText" value="#ddac0b" oninput="updateColorRealtime('primaryColor', this.value)" placeholder="#ddac0b" style="flex: 1; padding: 10px; background: rgba(0,0,0,0.3); border: 2px solid rgba(255,255,255,0.2); border-radius: 8px; color: white;">
                        </div>
                    </div>

                    <div style="background: rgba(255,255,255,0.05); padding: 20px; border-radius: 12px; border: 1px solid rgba(255,255,255,0.1);">
                        <label style="display: block; color: white; margin-bottom: 10px; font-weight: 600;">Couleur Secondaire (Dégradés)</label>
                        <div style="display: flex; gap: 10px;">
                            <input type="color" id="secondaryColor" value="#b8900a" oninput="updateColorRealtime('secondaryColor', this.value)" style="width: 60px; height: 40px; border: none; border-radius: 8px; cursor: pointer;">
                            <input type="text" id="secondaryColorText" value="#b8900a" oninput="updateColorRealtime('secondaryColor', this.value)" placeholder="#b8900a" style="flex: 1; padding: 10px; background: rgba(0,0,0,0.3); border: 2px solid rgba(255,255,255,0.2); border-radius: 8px; color: white;">
                        </div>
                    </div>

                    <div style="background: rgba(255,255,255,0.05); padding: 20px; border-radius: 12px; border: 1px solid rgba(255,255,255,0.1);">
                        <label style="display: block; color: white; margin-bottom: 10px; font-weight: 600;">Couleur d'Accent</label>
                        <div style="display: flex; gap: 10px;">
                            <input type="color" id="accentColor" value="#c4d10c" oninput="updateColorRealtime('accentColor', this.value)" style="width: 60px; height: 40px; border: none; border-radius: 8px; cursor: pointer;">
                            <input type="text" id="accentColorText" value="#c4d10c" oninput="updateColorRealtime('accentColor', this.value)" placeholder="#c4d10c" style="flex: 1; padding: 10px; background: rgba(0,0,0,0.3); border: 2px solid rgba(255,255,255,0.2); border-radius: 8px; color: white;">
                        </div>
                    </div>
                </div>

                <!-- Couleurs de fond -->
                <h5 style="color: white; margin: 40px 0 15px 0; border-bottom: 2px solid rgba(221, 172, 11, 0.3); padding-bottom: 10px;">🌈 Couleurs de fond</h5>
                <div style="display: grid; gap: 20px;">
                    <div style="background: rgba(255,255,255,0.05); padding: 20px; border-radius: 12px; border: 1px solid rgba(255,255,255,0.1);">
                        <label style="display: block; color: white; margin-bottom: 10px; font-weight: 600;">Fond Principal (Base)</label>
                        <div style="display: flex; gap: 10px;">
                            <input type="color" id="bgPrimary" value="#000000" oninput="updateBackgroundRealtime('bgPrimary', this.value)" style="width: 60px; height: 40px; border: none; border-radius: 8px; cursor: pointer;">
                            <input type="text" id="bgPrimaryText" value="#000000" oninput="updateBackgroundRealtime('bgPrimary', this.value)" placeholder="#000000" style="flex: 1; padding: 10px; background: rgba(0,0,0,0.3); border: 2px solid rgba(255,255,255,0.2); border-radius: 8px; color: white;">
                        </div>
                    </div>

                    <div style="background: rgba(255,255,255,0.05); padding: 20px; border-radius: 12px; border: 1px solid rgba(255,255,255,0.1);">
                        <label style="display: block; color: white; margin-bottom: 10px; font-weight: 600;">Fond Secondaire (Gradient 1)</label>
                        <div style="display: flex; gap: 10px;">
                            <input type="color" id="bgSecondary" value="#020510" oninput="updateBackgroundRealtime('bgSecondary', this.value)" style="width: 60px; height: 40px; border: none; border-radius: 8px; cursor: pointer;">
                            <input type="text" id="bgSecondaryText" value="#020510" oninput="updateBackgroundRealtime('bgSecondary', this.value)" placeholder="#020510" style="flex: 1; padding: 10px; background: rgba(0,0,0,0.3); border: 2px solid rgba(255,255,255,0.2); border-radius: 8px; color: white;">
                        </div>
                    </div>

                    <div style="background: rgba(255,255,255,0.05); padding: 20px; border-radius: 12px; border: 1px solid rgba(255,255,255,0.1);">
                        <label style="display: block; color: white; margin-bottom: 10px; font-weight: 600;">Fond Tertiaire (Gradient 2)</label>
                        <div style="display: flex; gap: 10px;">
                            <input type="color" id="bgTertiary" value="#050a1a" oninput="updateBackgroundRealtime('bgTertiary', this.value)" style="width: 60px; height: 40px; border: none; border-radius: 8px; cursor: pointer;">
                            <input type="text" id="bgTertiaryText" value="#050a1a" oninput="updateBackgroundRealtime('bgTertiary', this.value)" placeholder="#050a1a" style="flex: 1; padding: 10px; background: rgba(0,0,0,0.3); border: 2px solid rgba(255,255,255,0.2); border-radius: 8px; color: white;">
                        </div>
                    </div>

                    <div style="background: rgba(255,255,255,0.05); padding: 20px; border-radius: 12px; border: 1px solid rgba(255,255,255,0.1);">
                        <label style="display: block; color: white; margin-bottom: 10px; font-weight: 600;">Fond Quaternaire (Gradient 3)</label>
                        <div style="display: flex; gap: 10px;">
                            <input type="color" id="bgQuaternary" value="#030712" oninput="updateBackgroundRealtime('bgQuaternary', this.value)" style="width: 60px; height: 40px; border: none; border-radius: 8px; cursor: pointer;">
                            <input type="text" id="bgQuaternaryText" value="#030712" oninput="updateBackgroundRealtime('bgQuaternary', this.value)" placeholder="#030712" style="flex: 1; padding: 10px; background: rgba(0,0,0,0.3); border: 2px solid rgba(255,255,255,0.2); border-radius: 8px; color: white;">
                        </div>
                    </div>
                </div>

                <!-- Style du dégradé -->
                <h5 style="color: white; margin: 40px 0 15px 0; border-bottom: 2px solid rgba(221, 172, 11, 0.3); padding-bottom: 10px;">🎭 Style du dégradé</h5>
                <div style="display: grid; gap: 20px;">
                    <div style="background: rgba(255,255,255,0.05); padding: 20px; border-radius: 12px; border: 1px solid rgba(255,255,255,0.1);">
                        <label style="display: block; color: white; margin-bottom: 10px; font-weight: 600;">Type de dégradé</label>
                        <select id="gradientType" onchange="updateGradientStyle()" style="width: 100%; padding: 12px; background: rgba(0,0,0,0.3); border: 2px solid rgba(255,255,255,0.2); border-radius: 8px; color: white; font-size: 1em;">
                            <option value="linear">Linéaire (par défaut)</option>
                            <option value="radial">Radial</option>
                            <option value="conic">Conique</option>
                        </select>
                    </div>

                    <div style="background: rgba(255,255,255,0.05); padding: 20px; border-radius: 12px; border: 1px solid rgba(255,255,255,0.1);">
                        <label style="display: block; color: white; margin-bottom: 10px; font-weight: 600;">Angle du dégradé (deg)</label>
                        <div style="display: flex; gap: 10px; align-items: center;">
                            <input type="range" id="gradientAngle" min="0" max="360" value="135" oninput="updateGradientAngle(this.value)" style="flex: 1;">
                            <span id="gradientAngleValue" style="color: #ddac0b; font-weight: 700; min-width: 50px; text-align: right;">135°</span>
                        </div>
                    </div>

                    <div style="background: rgba(255,255,255,0.05); padding: 20px; border-radius: 12px; border: 1px solid rgba(255,255,255,0.1);">
                        <label style="display: block; color: white; margin-bottom: 10px; font-weight: 600;">Intensité de l'animation</label>
                        <div style="display: flex; gap: 10px; align-items: center;">
                            <input type="range" id="animationSpeed" min="10" max="60" value="25" oninput="updateAnimationSpeed(this.value)" style="flex: 1;">
                            <span id="animationSpeedValue" style="color: #ddac0b; font-weight: 700; min-width: 50px; text-align: right;">25s</span>
                        </div>
                    </div>
                </div>

                <!-- Prévisualisation -->
                <h5 style="color: white; margin: 40px 0 15px 0; border-bottom: 2px solid rgba(221, 172, 11, 0.3); padding-bottom: 10px;">👁️ Prévisualisation</h5>
                <div id="backgroundPreview" style="height: 200px; border-radius: 12px; border: 2px solid rgba(221, 172, 11, 0.5); position: relative; overflow: hidden;">
                    <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); color: white; font-weight: 700; font-size: 1.5em; text-shadow: 0 2px 10px rgba(0,0,0,0.5);">
                        Aperçu du fond
                    </div>
                </div>

                <div style="margin: 30px 0; display: flex; gap: 15px;">
                    <button onclick="applyBackgroundToPage()" style="padding: 14px 28px; background: linear-gradient(135deg, #ddac0b, #b8900a); color: #000; border: none; border-radius: 8px; cursor: pointer; font-weight: 700; font-size: 1em;">
                        Appliquer à la page
                    </button>
                    <button onclick="resetColors()" style="padding: 14px 28px; background: rgba(239, 68, 68, 0.2); color: #f87171; border: 1px solid rgba(239, 68, 68, 0.3); border-radius: 8px; cursor: pointer; font-weight: 600;">
                        Réinitialiser
                    </button>
                </div>
            `;

            loadCurrentColors();
            updateBackgroundPreview();
        }

        function loadCurrentColors() {
            var config = JSON.parse(localStorage.getItem('alphamouv_boutique_config')) || {};
            const colors = config.colors || {};
            const bg = config.background || {};

            // Couleurs d'accent
            const primary = colors.primary || '#ddac0b';
            if (document.getElementById('primaryColor')) {
                document.getElementById('primaryColor').value = primary;
                document.getElementById('primaryColorText').value = primary;
            }

            const secondary = colors.secondary || '#b8900a';
            if (document.getElementById('secondaryColor')) {
                document.getElementById('secondaryColor').value = secondary;
                document.getElementById('secondaryColorText').value = secondary;
            }

            const accent = colors.accent || '#c4d10c';
            if (document.getElementById('accentColor')) {
                document.getElementById('accentColor').value = accent;
                document.getElementById('accentColorText').value = accent;
            }

            // Couleurs de fond
            const bgPrimary = bg.primary || '#000000';
            if (document.getElementById('bgPrimary')) {
                document.getElementById('bgPrimary').value = bgPrimary;
                document.getElementById('bgPrimaryText').value = bgPrimary;
            }

            const bgSecondary = bg.secondary || '#020510';
            if (document.getElementById('bgSecondary')) {
                document.getElementById('bgSecondary').value = bgSecondary;
                document.getElementById('bgSecondaryText').value = bgSecondary;
            }

            const bgTertiary = bg.tertiary || '#050a1a';
            if (document.getElementById('bgTertiary')) {
                document.getElementById('bgTertiary').value = bgTertiary;
                document.getElementById('bgTertiaryText').value = bgTertiary;
            }

            const bgQuaternary = bg.quaternary || '#030712';
            if (document.getElementById('bgQuaternary')) {
                document.getElementById('bgQuaternary').value = bgQuaternary;
                document.getElementById('bgQuaternaryText').value = bgQuaternary;
            }

            // Paramètres du dégradé
            if (document.getElementById('gradientType')) {
                document.getElementById('gradientType').value = bg.gradientType || 'linear';
            }

            if (document.getElementById('gradientAngle')) {
                const angle = bg.gradientAngle || 135;
                document.getElementById('gradientAngle').value = angle;
                document.getElementById('gradientAngleValue').textContent = angle + '°';
            }

            if (document.getElementById('animationSpeed')) {
                const speed = bg.animationSpeed || 25;
                document.getElementById('animationSpeed').value = speed;
                document.getElementById('animationSpeedValue').textContent = speed + 's';
            }
        }

        function updateBackgroundRealtime(bgType, value) {
            // Mettre à jour les champs
            if (document.getElementById(bgType)) {
                document.getElementById(bgType).value = value;
            }
            if (document.getElementById(bgType + 'Text')) {
                document.getElementById(bgType + 'Text').value = value;
            }

            // Sauvegarder dans localStorage
            var config = JSON.parse(localStorage.getItem('alphamouv_boutique_config')) || {};
            if (!config.background) config.background = {};

            const key = bgType.replace('bg', '').toLowerCase();
            config.background[key] = value;
            localStorage.setItem('alphamouv_boutique_config', JSON.stringify(config));

            // Mettre à jour la prévisualisation
            updateBackgroundPreview();

            addLog('info', 'Couleur de fond modifiée: ' + bgType);
        }

        function updateGradientStyle() {
            var config = JSON.parse(localStorage.getItem('alphamouv_boutique_config')) || {};
            if (!config.background) config.background = {};

            config.background.gradientType = document.getElementById('gradientType').value;
            localStorage.setItem('alphamouv_boutique_config', JSON.stringify(config));

            updateBackgroundPreview();
            addLog('info', 'Type de dégradé modifié');
        }

        function updateGradientAngle(value) {
            document.getElementById('gradientAngleValue').textContent = value + '°';

            var config = JSON.parse(localStorage.getItem('alphamouv_boutique_config')) || {};
            if (!config.background) config.background = {};

            config.background.gradientAngle = parseInt(value);
            localStorage.setItem('alphamouv_boutique_config', JSON.stringify(config));

            updateBackgroundPreview();
        }

        function updateAnimationSpeed(value) {
            document.getElementById('animationSpeedValue').textContent = value + 's';

            var config = JSON.parse(localStorage.getItem('alphamouv_boutique_config')) || {};
            if (!config.background) config.background = {};

            config.background.animationSpeed = parseInt(value);
            localStorage.setItem('alphamouv_boutique_config', JSON.stringify(config));

            addLog('info', 'Vitesse d\'animation modifiée');
        }

        function updateBackgroundPreview() {
            var config = JSON.parse(localStorage.getItem('alphamouv_boutique_config')) || {};
            const bg = config.background || {};

            const bgPrimary = bg.primary || '#000000';
            const bgSecondary = bg.secondary || '#020510';
            const bgTertiary = bg.tertiary || '#050a1a';
            const bgQuaternary = bg.quaternary || '#030712';
            const angle = bg.gradientAngle || 135;
            const type = bg.gradientType || 'linear';

            var preview = document.getElementById('backgroundPreview');
            if (!preview) return;

            let gradientCSS;
            if (type === 'linear') {
                gradientCSS = `linear-gradient(${angle}deg, ${bgPrimary} 0%, ${bgSecondary} 18%, ${bgTertiary} 30%, ${bgQuaternary} 45%, ${bgPrimary} 55%, ${bgQuaternary} 70%, ${bgTertiary} 82%, ${bgPrimary} 100%)`;
            } else if (type === 'radial') {
                gradientCSS = `radial-gradient(ellipse at center, ${bgPrimary} 0%, ${bgSecondary} 25%, ${bgTertiary} 50%, ${bgQuaternary} 75%, ${bgPrimary} 100%)`;
            } else if (type === 'conic') {
                gradientCSS = `conic-gradient(from ${angle}deg, ${bgPrimary}, ${bgSecondary}, ${bgTertiary}, ${bgQuaternary}, ${bgPrimary})`;
            }

            preview.style.background = gradientCSS;
            preview.style.backgroundSize = '400% 400%';
        }

        function applyBackgroundToPage() {
            var config = JSON.parse(localStorage.getItem('alphamouv_boutique_config')) || {};
            const bg = config.background || {};

            const bgPrimary = bg.primary || '#000000';
            const bgSecondary = bg.secondary || '#020510';
            const bgTertiary = bg.tertiary || '#050a1a';
            const bgQuaternary = bg.quaternary || '#030712';
            const angle = bg.gradientAngle || 135;
            const speed = bg.animationSpeed || 25;
            const type = bg.gradientType || 'linear';

            let gradientCSS;
            if (type === 'linear') {
                gradientCSS = `linear-gradient(${angle}deg, ${bgPrimary} 0%, ${bgSecondary} 18%, ${bgTertiary} 30%, ${bgQuaternary} 45%, ${bgPrimary} 55%, ${bgQuaternary} 70%, ${bgTertiary} 82%, ${bgPrimary} 100%)`;
            } else if (type === 'radial') {
                gradientCSS = `radial-gradient(ellipse 150% 150% at 20% 30%, ${bgPrimary} 0%, ${bgSecondary} 20%, ${bgTertiary} 45%, transparent 80%)`;
            } else if (type === 'conic') {
                gradientCSS = `conic-gradient(from ${angle}deg at 50% 50%, ${bgPrimary}, ${bgSecondary}, ${bgTertiary}, ${bgQuaternary}, ${bgPrimary})`;
            }

            document.body.style.background = gradientCSS;
            document.body.style.backgroundSize = '400% 400%';
            document.body.style.animation = `gradientShift ${speed}s ease infinite`;

            addLog('success', 'Fond appliqué à la page!');
            alert('Le nouveau fond a été appliqué à la page!');
        }

        function updateColorRealtime(colorType, value) {
            // Mettre à jour le champ texte et le color picker
            if (document.getElementById(colorType)) {
                document.getElementById(colorType).value = value;
            }
            if (document.getElementById(colorType + 'Text')) {
                document.getElementById(colorType + 'Text').value = value;
            }

            // Appliquer la couleur en temps réel
            document.documentElement.style.setProperty('--' + colorType.replace('Color', '').toLowerCase() + '-color', value);

            // Sauvegarder dans localStorage
            var config = JSON.parse(localStorage.getItem('alphamouv_boutique_config')) || {};
            if (!config.colors) config.colors = {};
            config.colors[colorType.replace('Color', '').toLowerCase()] = value;
            localStorage.setItem('alphamouv_boutique_config', JSON.stringify(config));

            addLog('info', 'Couleur modifiée: ' + colorType);
        }

        function resetColors() {
            if (confirm('Réinitialiser toutes les couleurs et le fond aux valeurs par défaut ?')) {
                var config = JSON.parse(localStorage.getItem('alphamouv_boutique_config')) || {};
                config.colors = {
                    primary: '#ddac0b',
                    secondary: '#b8900a',
                    accent: '#c4d10c'
                };
                config.background = {
                    primary: '#000000',
                    secondary: '#020510',
                    tertiary: '#050a1a',
                    quaternary: '#030712',
                    gradientType: 'linear',
                    gradientAngle: 135,
                    animationSpeed: 25
                };
                localStorage.setItem('alphamouv_boutique_config', JSON.stringify(config));
                loadCurrentColors();
                updateBackgroundPreview();
                applyBackgroundToPage();
                addLog('success', 'Toutes les couleurs ont été réinitialisées');
            }
        }

        // ============================================
        // GESTION DES CONTENUS (TEXTES)
        // ============================================

        function loadContentSection() {
            var container = document.getElementById('contentContent');
            var aboutData = JSON.parse(localStorage.getItem('alphamouv_about')) || {};

            container.innerHTML = `
                <h4 style="color: #ddac0b; margin-bottom: 20px;">Édition des textes de la boutique</h4>
                <p style="color: rgba(255,255,255,0.6); margin-bottom: 30px;">
                    Modifiez tous les textes affichés sur votre boutique. Les modifications sont appliquées en temps réel.
                </p>

                <div id="textSectionsContainer"></div>

                <div style="margin-top: 40px; padding-top: 30px; border-top: 2px solid rgba(221, 172, 11, 0.3);">
                    <h4 style="color: #ddac0b; margin-bottom: 20px; display: flex; align-items: center; gap: 10px;">
                        Page "À propos"
                    </h4>
                    <p style="color: rgba(255,255,255,0.6); margin-bottom: 25px;">
                        Personnalisez le contenu de la page À propos visible depuis le menu de la boutique.
                    </p>

                    <div class="about-editor-section">
                        <label class="about-editor-label">L'Artiste</label>
                        <textarea class="about-editor-textarea" id="aboutArtist" placeholder="Présentez-vous en tant qu'artiste... Votre parcours, votre passion, ce qui vous inspire...">${aboutData.artist || ''}</textarea>
                    </div>

                    <div class="about-editor-section">
                        <label class="about-editor-label">La Boutique</label>
                        <textarea class="about-editor-textarea" id="aboutBoutique" placeholder="Décrivez votre boutique... Ce que vous proposez, votre philosophie, ce qui rend vos créations uniques...">${aboutData.boutique || ''}</textarea>
                    </div>

                    <div class="about-editor-section">
                        <label class="about-editor-label">Le Site</label>
                        <textarea class="about-editor-textarea" id="aboutSite" placeholder="Expliquez le concept du site... Comment naviguer, les fonctionnalités, comment commander...">${aboutData.site || ''}</textarea>
                    </div>

                    <button onclick="saveAboutContent()" style="margin-top: 20px; padding: 15px 30px; background: linear-gradient(135deg, #ddac0b, #b8900a); border: none; border-radius: 10px; color: #000; font-weight: 600; cursor: pointer; font-size: 1em; transition: all 0.3s ease;">
                        Enregistrer le contenu À propos
                    </button>
                </div>
            `;

            loadTextSections();
        }

        function loadTextSections() {
            var container = document.getElementById('textSectionsContainer');
            var config = JSON.parse(localStorage.getItem('alphamouv_boutique_config')) || {};
            var texts = config.texts || getDefaultBoutiqueTexts();

            container.innerHTML = `
                <div style="display: grid; gap: 25px;">
                    <!-- Titre de la page (title) -->
                    <div style="background: rgba(255,255,255,0.05); padding: 20px; border-radius: 12px; border: 1px solid rgba(255,255,255,0.1);">
                        <label style="display: block; color: white; margin-bottom: 8px; font-weight: 600;">Titre de la page (onglet navigateur)</label>
                        <small style="color: rgba(255,255,255,0.5); display: block; margin-bottom: 10px;">Apparaît dans l'onglet du navigateur et les résultats de recherche</small>
                        <input type="text" id="textMainTitle" value="${texts.mainTitle || 'AlphaMouv - Boutique'}" oninput="updateTextRealtime('mainTitle', this.value)" style="width: 100%; padding: 12px; background: rgba(0,0,0,0.3); border: 2px solid rgba(255,255,255,0.2); border-radius: 8px; color: white; font-size: 1em;">
                    </div>

                    <!-- Nom boutique header avec éditeur riche -->
                    <div style="background: rgba(255,255,255,0.05); padding: 20px; border-radius: 12px; border: 1px solid rgba(255,255,255,0.1);">
                        <label style="display: block; color: white; margin-bottom: 8px; font-weight: 600;">Nom de la boutique (logo dans le header)</label>
                        <small style="color: rgba(255,255,255,0.5); display: block; margin-bottom: 15px;">Le nom affiché en haut à gauche de la page - Formatage avancé disponible</small>

                        <!-- Barre d'outils de formatage -->
                        <div id="richEditorToolbar" style="background: rgba(0,0,0,0.4); padding: 10px; border-radius: 8px 8px 0 0; border: 2px solid rgba(255,255,255,0.2); border-bottom: 1px solid rgba(255,255,255,0.1); display: flex; gap: 8px; flex-wrap: wrap; align-items: center;">
                            <!-- Police -->
                            <select id="fontFamily" onchange="applyFormat('fontFamily', this.value)" style="padding: 6px 10px; background: rgba(0,0,0,0.5); border: 1px solid rgba(255,255,255,0.3); border-radius: 6px; color: white; font-size: 0.9em;">
                                <option value="Alex Brush">Alex Brush (défaut)</option>
                                <option value="Montserrat">Montserrat</option>
                                <option value="Quicksand">Quicksand</option>
                                <option value="Oswald">Oswald</option>
                                <option value="Allura">Allura</option>
                                <option value="Great Vibes">Great Vibes</option>
                                <option value="Parisienne">Parisienne</option>
                                <option value="Arial">Arial</option>
                                <option value="Georgia">Georgia</option>
                            </select>

                            <!-- Taille -->
                            <select id="fontSize" onchange="applyFormat('fontSize', this.value)" style="padding: 6px 10px; background: rgba(0,0,0,0.5); border: 1px solid rgba(255,255,255,0.3); border-radius: 6px; color: white; font-size: 0.9em;">
                                <option value="12px">12px</option>
                                <option value="14px">14px</option>
                                <option value="16px">16px</option>
                                <option value="18px">18px</option>
                                <option value="24px">24px</option>
                                <option value="32px">32px</option>
                                <option value="48px">48px</option>
                                <option value="64px">64px</option>
                                <option value="7em" selected>7em (défaut)</option>
                            </select>

                            <div style="width: 1px; height: 24px; background: rgba(255,255,255,0.2);"></div>

                            <!-- Gras -->
                            <button onclick="applyFormat('bold')" title="Gras (Ctrl+B)" style="padding: 6px 12px; background: rgba(0,0,0,0.5); border: 1px solid rgba(255,255,255,0.3); border-radius: 6px; color: white; cursor: pointer; font-weight: bold; font-size: 0.95em;">
                                G
                            </button>

                            <!-- Italique -->
                            <button onclick="applyFormat('italic')" title="Italique (Ctrl+I)" style="padding: 6px 12px; background: rgba(0,0,0,0.5); border: 1px solid rgba(255,255,255,0.3); border-radius: 6px; color: white; cursor: pointer; font-style: italic; font-size: 0.95em;">
                                I
                            </button>

                            <!-- Souligné -->
                            <button onclick="applyFormat('underline')" title="Souligné (Ctrl+U)" style="padding: 6px 12px; background: rgba(0,0,0,0.5); border: 1px solid rgba(255,255,255,0.3); border-radius: 6px; color: white; cursor: pointer; text-decoration: underline; font-size: 0.95em;">
                                S
                            </button>

                            <!-- Barré -->
                            <button onclick="applyFormat('strikethrough')" title="Barré" style="padding: 6px 12px; background: rgba(0,0,0,0.5); border: 1px solid rgba(255,255,255,0.3); border-radius: 6px; color: white; cursor: pointer; text-decoration: line-through; font-size: 0.95em;">
                                T
                            </button>

                            <div style="width: 1px; height: 24px; background: rgba(255,255,255,0.2);"></div>

                            <!-- Indice -->
                            <button onclick="applyFormat('subscript')" title="Indice" style="padding: 6px 10px; background: rgba(0,0,0,0.5); border: 1px solid rgba(255,255,255,0.3); border-radius: 6px; color: white; cursor: pointer; font-size: 0.85em;">
                                X<sub>2</sub>
                            </button>

                            <!-- Exposant -->
                            <button onclick="applyFormat('superscript')" title="Exposant" style="padding: 6px 10px; background: rgba(0,0,0,0.5); border: 1px solid rgba(255,255,255,0.3); border-radius: 6px; color: white; cursor: pointer; font-size: 0.85em;">
                                X<sup>2</sup>
                            </button>

                            <div style="width: 1px; height: 24px; background: rgba(255,255,255,0.2);"></div>

                            <!-- Couleur du texte -->
                            <div style="display: flex; align-items: center; gap: 6px;">
                                <label style="color: white; font-size: 0.85em;">Couleur:</label>
                                <input type="color" id="textColor" onchange="applyFormat('foreColor', this.value)" value="#ffffff" title="Couleur du texte" style="width: 40px; height: 28px; border: 1px solid rgba(255,255,255,0.3); border-radius: 6px; cursor: pointer; background: rgba(0,0,0,0.5);">
                            </div>

                            <!-- Couleur de fond -->
                            <div style="display: flex; align-items: center; gap: 6px;">
                                <label style="color: white; font-size: 0.85em;">Fond:</label>
                                <input type="color" id="bgColor" onchange="applyFormat('hiliteColor', this.value)" value="#000000" title="Couleur de fond" style="width: 40px; height: 28px; border: 1px solid rgba(255,255,255,0.3); border-radius: 6px; cursor: pointer; background: rgba(0,0,0,0.5);">
                            </div>

                            <div style="width: 1px; height: 24px; background: rgba(255,255,255,0.2);"></div>

                            <!-- Effacer le formatage -->
                            <button onclick="clearFormatting()" title="Effacer le formatage" style="padding: 6px 12px; background: rgba(239, 68, 68, 0.3); border: 1px solid rgba(239, 68, 68, 0.5); border-radius: 6px; color: #f87171; cursor: pointer; font-size: 0.85em; font-weight: 600;">
                                Effacer
                            </button>
                        </div>

                        <!-- Zone d'édition -->
                        <div id="textShopName" contenteditable="true" oninput="updateRichTextRealtime('shopName', this.innerHTML)" style="width: 100%; min-height: 80px; padding: 15px; background: rgba(0,0,0,0.3); border: 2px solid rgba(255,255,255,0.2); border-top: none; border-radius: 0 0 8px 8px; color: white; font-size: 1em; outline: none; overflow-wrap: break-word; font-family: 'Alex Brush', cursive; line-height: 1.4;">
                            ${texts.shopName || 'AlphaMouv'}
                        </div>

                        <div style="margin-top: 10px; padding: 10px; background: rgba(34, 197, 94, 0.1); border-left: 3px solid #22c55e; border-radius: 6px;">
                            <span style="color: rgba(255,255,255,0.7); font-size: 0.9em;">Sélectionnez du texte et utilisez les boutons de formatage</span>
                        </div>
                    </div>

                    <!-- Message panier vide -->
                    <div style="background: rgba(255,255,255,0.05); padding: 20px; border-radius: 12px; border: 1px solid rgba(255,255,255,0.1);">
                        <label style="display: block; color: white; margin-bottom: 8px; font-weight: 600;">Message du panier vide</label>
                        <small style="color: rgba(255,255,255,0.5); display: block; margin-bottom: 10px;">Texte affiché quand le panier ne contient aucun article</small>
                        <input type="text" id="textEmptyCart" value="${texts.emptyCart || 'Votre panier est vide'}" oninput="updateTextRealtime('emptyCart', this.value)" style="width: 100%; padding: 12px; background: rgba(0,0,0,0.3); border: 2px solid rgba(255,255,255,0.2); border-radius: 8px; color: white; font-size: 1em;">
                    </div>
                </div>

                <div style="margin: 30px 0; padding: 20px; background: rgba(221, 172, 11, 0.1); border-radius: 12px; border: 1px solid rgba(221, 172, 11, 0.3);">
                    <p style="color: rgba(255,255,255,0.8); margin: 0 0 15px 0;">
                        <strong>Les modifications sont automatiquement sauvegardées</strong> et appliquées en temps réel quand vous tapez.
                    </p>
                    <button onclick="saveAllTexts()" style="padding: 14px 28px; background: linear-gradient(135deg, #ddac0b, #b8900a); color: #000; border: none; border-radius: 8px; cursor: pointer; font-weight: 700; font-size: 1em;">
                        Sauvegarder manuellement
                    </button>
                </div>
            `;
        }

        function getDefaultBoutiqueTexts() {
            return {
                mainTitle: 'AlphaMouv - Boutique',
                shopName: 'AlphaMouv',
                emptyCart: 'Votre panier est vide'
            };
        }

        function updateTextRealtime(textKey, value) {
            var config = JSON.parse(localStorage.getItem('alphamouv_boutique_config')) || {};
            if (!config.texts) config.texts = getDefaultBoutiqueTexts();
            config.texts[textKey] = value;
            localStorage.setItem('alphamouv_boutique_config', JSON.stringify(config));

            // Appliquer les changements en temps réel sur la page
            applyTextsToPage();
        }

        function saveAllTexts() {
            var config = JSON.parse(localStorage.getItem('alphamouv_boutique_config')) || {};
            if (!config.texts) config.texts = {};

            config.texts.mainTitle = document.getElementById('textMainTitle').value;
            // Get innerHTML from contenteditable div instead of .value
            var shopNameEditor = document.getElementById('textShopName');
            config.texts.shopName = shopNameEditor ? shopNameEditor.innerHTML : 'AlphaMouv';
            config.texts.emptyCart = document.getElementById('textEmptyCart').value;

            localStorage.setItem('alphamouv_boutique_config', JSON.stringify(config));
            applyTextsToPage();
            addLog('success', 'Tous les textes ont été sauvegardés');
            alert('Textes sauvegardés avec succès!');
        }

        function applyTextsToPage() {
            var config = JSON.parse(localStorage.getItem('alphamouv_boutique_config')) || {};
            var texts = config.texts || getDefaultBoutiqueTexts();

            // Appliquer le nom de la boutique dans le header (logo)
            var logo = document.getElementById('siteTitle');
            if (logo && texts.shopName) {
                // Si c'est du HTML formaté, l'insérer comme innerHTML
                if (texts.shopName.includes('<')) {
                    logo.innerHTML = texts.shopName;
                } else {
                    logo.textContent = texts.shopName;
                }
            }

            // Appliquer également à la balise title de la page
            if (texts.mainTitle) {
                document.title = texts.mainTitle;
            }

            // Appliquer le message du panier vide
            var emptyCartMsg = document.querySelector('.empty-cart p');
            if (emptyCartMsg && texts.emptyCart) {
                emptyCartMsg.textContent = texts.emptyCart;
            }

            console.log('Textes appliqués:', texts);
        }

        // ============================================
        // ÉDITEUR DE TEXTE RICHE
        // ============================================

        function updateRichTextRealtime(textKey, htmlContent) {
            var config = JSON.parse(localStorage.getItem('alphamouv_boutique_config')) || {};
            if (!config.texts) config.texts = getDefaultBoutiqueTexts();
            config.texts[textKey] = htmlContent;
            localStorage.setItem('alphamouv_boutique_config', JSON.stringify(config));

            // Appliquer les changements en temps réel sur la page
            applyTextsToPage();
        }

        function applyFormat(command, value) {
            // Focus sur l'éditeur pour que execCommand fonctionne
            var editor = document.getElementById('textShopName');
            if (!editor) return;

            editor.focus();

            // Appliquer la commande de formatage
            if (command === 'fontFamily' || command === 'fontSize' || command === 'foreColor' || command === 'hiliteColor') {
                document.execCommand(command, false, value);
            } else {
                document.execCommand(command, false, null);
            }

            // Sauvegarder après formatage
            updateRichTextRealtime('shopName', editor.innerHTML);
        }

        function clearFormatting() {
            var editor = document.getElementById('textShopName');
            if (!editor) return;

            editor.focus();

            // Obtenir la sélection
            var selection = window.getSelection();
            if (selection.rangeCount > 0) {
                var range = selection.getRangeAt(0);
                var selectedText = range.toString();

                if (selectedText) {
                    // Supprimer le formatage du texte sélectionné
                    document.execCommand('removeFormat', false, null);
                    document.execCommand('unlink', false, null);
                } else {
                    // Si rien n'est sélectionné, nettoyer tout l'éditeur
                    var plainText = editor.textContent || editor.innerText;
                    editor.textContent = plainText;
                }

                // Sauvegarder
                updateRichTextRealtime('shopName', editor.innerHTML);
            }
        }

        // Gérer les raccourcis clavier
        document.addEventListener('keydown', function(e) {
            var editor = document.getElementById('textShopName');
            if (!editor || document.activeElement !== editor) return;

            // Ctrl+B pour gras
            if (e.ctrlKey && e.key === 'b') {
                e.preventDefault();
                applyFormat('bold');
            }
            // Ctrl+I pour italique
            else if (e.ctrlKey && e.key === 'i') {
                e.preventDefault();
                applyFormat('italic');
            }
            // Ctrl+U pour souligné
            else if (e.ctrlKey && e.key === 'u') {
                e.preventDefault();
                applyFormat('underline');
            }
        });

        // Appliquer les textes au chargement de la page
        // Système de backup automatique toutes les 24h dans le dossier backup/
        function checkAndCreateAutoBackup() {
            var lastBackup = localStorage.getItem('alphamouv_boutique_last_backup');
            var now = new Date().getTime();
            var twentyFourHours = 24 * 60 * 60 * 1000; // 24h en millisecondes

            // Si pas de backup ou si la dernière backup date de plus de 24h
            if (!lastBackup || (now - parseInt(lastBackup)) > twentyFourHours) {
                createAutoBackup();
            }
        }

        function createAutoBackup() {
            var config = JSON.parse(localStorage.getItem('alphamouv_boutique_config')) || {};
            var productsData = JSON.parse(localStorage.getItem('alphamouv_products')) || [];

            // Décaler les backups existantes (J-1 devient J-2, etc.)
            for (var i = 7; i > 1; i--) {
                var prevBackup = localStorage.getItem('boutique_backup_' + (i - 1));
                if (prevBackup) {
                    localStorage.setItem('boutique_backup_' + i, prevBackup);
                }
            }

            // Créer la nouvelle backup J-1
            var backupData = {
                timestamp: new Date().getTime(),
                products: productsData,
                config: config
            };
            localStorage.setItem('boutique_backup_1', JSON.stringify(backupData));
            localStorage.setItem('boutique_last_backup', new Date().getTime().toString());

            console.log('✅ Backup localStorage créée');

            // Envoyer aussi au script PHP pour créer le fichier de backup
            fetch('backup/create_backup.php', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({ config: config })
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    console.log('✅ Backup fichier créée:', data.filename);
                } else {
                    console.error('❌ Erreur lors de la création de la backup fichier:', data.error);
                }
            })
            .catch(error => {
                console.error('❌ Erreur réseau lors de la backup:', error);
            });
        }

        document.addEventListener('DOMContentLoaded', function() {
            applyTextsToPage();

            // Appliquer les couleurs et fond personnalisés sauvegardés
            var config = JSON.parse(localStorage.getItem('alphamouv_boutique_config')) || {};
            if (config.background) {
                applyBackgroundToPage();
            }

            // Vérifier et créer une backup automatique si nécessaire
            checkAndCreateAutoBackup();
        });

        // Masquer l'overlay de chargement quand la page est 100% prete
        function removeOverlayWhenReady() {
            const overlay = document.getElementById('page-loading-overlay');
            if (!overlay) return;

            // S'assurer que la page commence en haut
            window.scrollTo(0, 0);

            // Fonction pour retirer l'overlay apres verification complete
            function doRemove() {
                // Attendre plusieurs frames pour etre sur que tout est rendu
                requestAnimationFrame(function() {
                    requestAnimationFrame(function() {
                        requestAnimationFrame(function() {
                            overlay.remove();
                        });
                    });
                });
            }

            // Attendre polices + images + animations
            const fontsReady = document.fonts ? document.fonts.ready : Promise.resolve();

            fontsReady.then(function() {
                // Attendre un peu plus pour les animations CSS
                setTimeout(doRemove, 100);
            });
        }

        window.addEventListener('load', removeOverlayWhenReady);

        // ============================================
        // MODALS COLLECTIONS ET À PROPOS
        // ============================================

        // Ouvrir/Fermer le modal Collections
        function openCollectionsModal() {
            document.getElementById('collectionsModal').classList.add('active');
            document.body.style.overflow = 'hidden';
            loadCollections();
        }

        function closeCollectionsModal() {
            document.getElementById('collectionsModal').classList.remove('active');
            document.body.style.overflow = '';
        }

        // Ouvrir/Fermer le modal À propos
        function openAboutModal() {
            document.getElementById('aboutModal').classList.add('active');
            document.body.style.overflow = 'hidden';
            loadAboutContent();
        }

        function closeAboutModal() {
            document.getElementById('aboutModal').classList.remove('active');
            document.body.style.overflow = '';
        }

        // Ouvrir/Fermer le modal Mes Commandes
        function openOrdersModal() {
            document.getElementById('ordersModal').classList.add('active');
            document.body.style.overflow = 'hidden';
            loadUserOrders();
        }

        function closeOrdersModal() {
            document.getElementById('ordersModal').classList.remove('active');
            document.body.style.overflow = '';
        }

        // Ouvrir/Fermer le modal Wishlist
        function openWishlistModal() {
            document.getElementById('wishlistModal').classList.add('active');
            document.body.style.overflow = 'hidden';
            loadWishlist();
        }

        function closeWishlistModal() {
            document.getElementById('wishlistModal').classList.remove('active');
            document.body.style.overflow = '';
        }

        // Charger les commandes de l'utilisateur
        async function loadUserOrders() {
            var token = localStorage.getItem('alphamouv_token');
            if (!token) {
                document.getElementById('ordersContent').innerHTML = '';
                document.getElementById('ordersEmpty').style.display = 'block';
                document.getElementById('ordersEmpty').innerHTML = `
                    <div style="font-size: 4em; margin-bottom: 20px;">🔒</div>
                    <p style="font-size: 1.2em; margin-bottom: 10px;">Connectez-vous pour voir vos commandes</p>
                `;
                return;
            }

            try {
                var response = await fetch('/api/orders', {
                    headers: { 'Authorization': 'Bearer ' + token }
                });
                var orders = await response.json();

                var ordersContent = document.getElementById('ordersContent');
                var ordersEmpty = document.getElementById('ordersEmpty');

                if (!orders || orders.length === 0) {
                    ordersContent.innerHTML = '';
                    ordersEmpty.style.display = 'block';
                    return;
                }

                ordersEmpty.style.display = 'none';
                ordersContent.innerHTML = orders.map(function(order) {
                    var items = [];
                    try { items = JSON.parse(order.items || '[]'); } catch(e) {}
                    var statusLabels = {
                        'pending': 'En attente',
                        'paid': 'Payée',
                        'processing': 'En préparation',
                        'shipped': 'Expédiée',
                        'delivered': 'Livrée',
                        'cancelled': 'Annulée'
                    };

                    return `
                        <div class="order-card">
                            <div class="order-header">
                                <div>
                                    <span class="order-number">Commande #${order.id}</span>
                                    <span class="order-date">${new Date(order.created_at).toLocaleDateString('fr-FR')}</span>
                                </div>
                                <span class="order-status ${order.status}">${statusLabels[order.status] || order.status}</span>
                            </div>
                            <div class="order-items">
                                ${items.map(function(item) {
                                    return `
                                        <div class="order-item">
                                            <img src="${item.image || 'images/placeholder.png'}" alt="${item.name}" class="order-item-image">
                                            <div class="order-item-info">
                                                <div class="order-item-name">${item.name}</div>
                                                <div class="order-item-details">Qté: ${item.quantity || 1} - ${item.price?.toFixed(2) || 0}€</div>
                                            </div>
                                        </div>
                                    `;
                                }).join('')}
                            </div>
                            ${order.discount_amount > 0 ? `
                                <div style="color: #22c55e; margin-bottom: 10px;">
                                    Réduction (${order.promo_code}): -${order.discount_amount.toFixed(2)}€
                                </div>
                            ` : ''}
                            <div class="order-total">Total: ${order.total?.toFixed(2) || 0}€</div>
                        </div>
                    `;
                }).join('');
            } catch (error) {
                console.error('Erreur chargement commandes:', error);
            }
        }

        // Charger la wishlist
        async function loadWishlist() {
            var token = localStorage.getItem('alphamouv_token');
            if (!token) {
                document.getElementById('wishlistContent').innerHTML = '';
                document.getElementById('wishlistEmpty').style.display = 'block';
                document.getElementById('wishlistEmpty').innerHTML = `
                    <div style="font-size: 4em; margin-bottom: 20px;">🔒</div>
                    <p style="font-size: 1.2em; margin-bottom: 10px;">Connectez-vous pour voir votre wishlist</p>
                `;
                return;
            }

            try {
                var response = await fetch('/api/wishlist', {
                    headers: { 'Authorization': 'Bearer ' + token }
                });
                var wishlist = await response.json();

                var wishlistContent = document.getElementById('wishlistContent');
                var wishlistEmpty = document.getElementById('wishlistEmpty');

                if (!wishlist || wishlist.length === 0) {
                    wishlistContent.innerHTML = '';
                    wishlistEmpty.style.display = 'block';
                    return;
                }

                wishlistEmpty.style.display = 'none';
                wishlistContent.innerHTML = wishlist.map(function(item) {
                    var image = item.image || (item.images && item.images[0]) || 'images/placeholder.png';
                    var price = item.prix_promo || item.prix;
                    return `
                        <div class="wishlist-card">
                            <img src="${image}" alt="${item.nom}" class="wishlist-card-image">
                            <div class="wishlist-card-content">
                                <h3 class="wishlist-card-name">${item.nom}</h3>
                                <div class="wishlist-card-price">${price?.toFixed(2) || 0}€</div>
                                <div class="wishlist-card-actions">
                                    <button class="wishlist-btn wishlist-btn-cart" onclick="addWishlistToCart(${item.product_id})">Ajouter au panier</button>
                                    <button class="wishlist-btn wishlist-btn-remove" onclick="removeFromWishlist(${item.product_id})">Retirer</button>
                                </div>
                            </div>
                        </div>
                    `;
                }).join('');
            } catch (error) {
                console.error('Erreur chargement wishlist:', error);
            }
        }

        // Ajouter à la wishlist
        async function addToWishlist(productId) {
            var token = localStorage.getItem('alphamouv_token');
            if (!token) {
                showCustomModal({
                    type: 'warning',
                    title: 'Connexion requise',
                    message: 'Veuillez vous connecter pour ajouter des produits à votre wishlist.',
                    buttonText: 'OK'
                });
                return;
            }

            try {
                var response = await fetch('/api/wishlist', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': 'Bearer ' + token
                    },
                    body: JSON.stringify({ product_id: productId })
                });

                if (response.ok) {
                    updateWishlistButtons();
                    showCustomModal({
                        type: 'success',
                        title: 'Ajouté',
                        message: 'Produit ajouté à votre wishlist',
                        buttonText: 'OK'
                    });
                }
            } catch (error) {
                console.error('Erreur ajout wishlist:', error);
            }
        }

        // Retirer de la wishlist
        async function removeFromWishlist(productId) {
            var token = localStorage.getItem('alphamouv_token');
            if (!token) return;

            try {
                await fetch('/api/wishlist/' + productId, {
                    method: 'DELETE',
                    headers: { 'Authorization': 'Bearer ' + token }
                });
                updateWishlistButtons();
                loadWishlist();
            } catch (error) {
                console.error('Erreur suppression wishlist:', error);
            }
        }

        // Ajouter au panier depuis la wishlist
        function addWishlistToCart(productId) {
            var products = JSON.parse(localStorage.getItem('alphamouv_products')) || [];
            var product = products.find(function(p) { return p.id === productId; });
            if (product) {
                addToCart(product);
                removeFromWishlist(productId);
            }
        }

        // Toggle wishlist
        async function toggleWishlist(productId) {
            var token = localStorage.getItem('alphamouv_token');
            if (!token) {
                showCustomModal({
                    type: 'warning',
                    title: 'Connexion requise',
                    message: 'Veuillez vous connecter pour ajouter des produits à votre wishlist.',
                    buttonText: 'OK'
                });
                return;
            }

            var btn = document.querySelector('.product-wishlist-btn[data-product-id="' + productId + '"]');
            if (btn && btn.classList.contains('active')) {
                await removeFromWishlist(productId);
            } else {
                await addToWishlist(productId);
            }
        }

        // Mettre à jour les boutons wishlist
        async function updateWishlistButtons() {
            var token = localStorage.getItem('alphamouv_token');
            if (!token) return;

            try {
                var response = await fetch('/api/wishlist', {
                    headers: { 'Authorization': 'Bearer ' + token }
                });
                var wishlist = await response.json();
                var wishlistIds = wishlist.map(function(item) { return item.product_id; });

                document.querySelectorAll('.product-wishlist-btn').forEach(function(btn) {
                    var productId = parseInt(btn.dataset.productId);
                    if (wishlistIds.includes(productId)) {
                        btn.classList.add('active');
                    } else {
                        btn.classList.remove('active');
                    }
                });
            } catch (error) {
                console.error('Erreur mise à jour wishlist buttons:', error);
            }
        }

        // Code promo dans le panier
        var appliedPromoCode = null;
        var promoDiscount = 0;

        async function applyPromoCode() {
            var code = document.getElementById('cartPromoCode').value.trim();
            if (!code) return;

            var token = localStorage.getItem('alphamouv_token');
            if (!token) {
                document.getElementById('promoCodeResult').innerHTML = '<div class="promo-code-error">Connectez-vous pour utiliser un code promo</div>';
                return;
            }

            var cart = JSON.parse(localStorage.getItem('alphamouv_cart')) || [];
            var subtotal = cart.reduce(function(sum, item) {
                return sum + ((item.prix_promo || item.prix) * (item.quantity || 1));
            }, 0);

            try {
                var response = await fetch('/api/promo/verify', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': 'Bearer ' + token
                    },
                    body: JSON.stringify({ code: code, orderTotal: subtotal })
                });

                var result = await response.json();

                if (response.ok && result.valid) {
                    appliedPromoCode = result.code;
                    promoDiscount = result.discount_amount;

                    document.getElementById('promoCodeResult').innerHTML = `
                        <div class="promo-code-success">
                            Code ${result.code} appliqué: -${result.discount_percent}%
                        </div>
                    `;

                    document.getElementById('cartSubtotalLine').style.display = 'flex';
                    document.getElementById('cartSubtotal').textContent = subtotal.toFixed(2) + '€';
                    document.getElementById('cartDiscountLine').style.display = 'flex';
                    document.getElementById('discountLabel').textContent = 'Réduction (' + result.code + '):';
                    document.getElementById('cartDiscount').textContent = '-' + result.discount_amount.toFixed(2) + '€';
                    document.getElementById('cartTotal').textContent = result.new_total.toFixed(2) + '€';
                } else {
                    document.getElementById('promoCodeResult').innerHTML = `
                        <div class="promo-code-error">${result.error || 'Code invalide'}</div>
                    `;
                    appliedPromoCode = null;
                    promoDiscount = 0;
                    document.getElementById('cartSubtotalLine').style.display = 'none';
                    document.getElementById('cartDiscountLine').style.display = 'none';
                    updateCartTotal();
                }
            } catch (error) {
                console.error('Erreur vérification code promo:', error);
                document.getElementById('promoCodeResult').innerHTML = '<div class="promo-code-error">Erreur de vérification</div>';
            }
        }

        // Charger les collections (regroupement par type/catégorie)
        function loadCollections() {
            var products = JSON.parse(localStorage.getItem('alphamouv_products')) || [];
            var collectionsGrid = document.getElementById('collectionsGrid');
            var collectionsEmpty = document.getElementById('collectionsEmpty');

            // Grouper les produits par type
            var collections = {};
            products.forEach(function(product) {
                var type = product.type || 'autre';
                if (!collections[type]) {
                    collections[type] = {
                        name: getTypeName(type),
                        products: [],
                        image: null
                    };
                }
                collections[type].products.push(product);
                // Utiliser la première image trouvée comme image de collection
                if (!collections[type].image && product.image) {
                    collections[type].image = product.image;
                }
            });

            var collectionKeys = Object.keys(collections);

            if (collectionKeys.length === 0) {
                collectionsGrid.style.display = 'none';
                collectionsEmpty.style.display = 'block';
                return;
            }

            collectionsGrid.style.display = 'grid';
            collectionsEmpty.style.display = 'none';

            collectionsGrid.innerHTML = collectionKeys.map(function(key) {
                var col = collections[key];
                var imageStyle = col.image ?
                    'background-image: url(' + col.image + '); background-size: cover; background-position: center;' :
                    'background: linear-gradient(135deg, rgba(221, 172, 11, 0.2), rgba(221, 172, 11, 0.05)); display: flex; align-items: center; justify-content: center;';
                var imageContent = col.image ? '' : '<span style="font-size: 4em; opacity: 0.5;">👕</span>';

                return `
                    <div class="collection-card" onclick="filterByCollection('${key}')">
                        <div class="collection-image" style="${imageStyle}">${imageContent}</div>
                        <div class="collection-info">
                            <h3 class="collection-name">${col.name}</h3>
                            <p class="collection-description">Découvrez notre sélection de ${col.name.toLowerCase()}</p>
                            <p class="collection-count">${col.products.length} article${col.products.length > 1 ? 's' : ''}</p>
                        </div>
                    </div>
                `;
            }).join('');
        }

        function getTypeName(type) {
            var names = {
                't-shirt': 'T-Shirts',
                'hoodie': 'Hoodies',
                'pantalon': 'Pantalons',
                'veste': 'Vestes',
                'accessoire': 'Accessoires',
                'autre': 'Autres'
            };
            return names[type] || type.charAt(0).toUpperCase() + type.slice(1);
        }

        function filterByCollection(type) {
            closeCollectionsModal();
            // Appliquer le filtre de type
            var typeFilter = document.getElementById('typeFilter');
            if (typeFilter) {
                typeFilter.value = type;
                filterProducts();
            }
        }

        // Charger le contenu À propos
        function loadAboutContent() {
            var aboutData = JSON.parse(localStorage.getItem('alphamouv_about')) || {};
            var container = document.getElementById('aboutContent');

            var hasContent = aboutData.artist || aboutData.boutique || aboutData.site;

            if (!hasContent) {
                container.innerHTML = `
                    <div class="about-empty">
                        <div class="about-empty-icon"></div>
                        <p>Le contenu de cette page n'a pas encore été défini.</p>
                        <p style="font-size: 0.9em; margin-top: 10px; color: rgba(255,255,255,0.4);">
                            L'administrateur peut configurer ce contenu depuis le panneau Admin > Contenus
                        </p>
                    </div>
                `;
                return;
            }

            var html = '';

            if (aboutData.artist) {
                html += `
                    <div class="about-section">
                        <h2 class="about-section-title">L'Artiste</h2>
                        <p class="about-text">${formatAboutText(aboutData.artist)}</p>
                    </div>
                `;
            }

            if (aboutData.boutique) {
                html += `
                    <div class="about-section">
                        <h2 class="about-section-title">La Boutique</h2>
                        <p class="about-text">${formatAboutText(aboutData.boutique)}</p>
                    </div>
                `;
            }

            if (aboutData.site) {
                html += `
                    <div class="about-section">
                        <h2 class="about-section-title">Le Site</h2>
                        <p class="about-text">${formatAboutText(aboutData.site)}</p>
                    </div>
                `;
            }

            container.innerHTML = html;
        }

        function formatAboutText(text) {
            // Convertir les sauts de ligne en <br> et échapper le HTML
            return text
                .replace(/&/g, '&amp;')
                .replace(/</g, '&lt;')
                .replace(/>/g, '&gt;')
                .replace(/\n/g, '<br>');
        }

        // Sauvegarder le contenu À propos depuis l'admin
        function saveAboutContent() {
            var aboutData = {
                artist: document.getElementById('aboutArtist').value,
                boutique: document.getElementById('aboutBoutique').value,
                site: document.getElementById('aboutSite').value
            };

            localStorage.setItem('alphamouv_about', JSON.stringify(aboutData));

            showCustomModal(
                'Contenu sauvegardé',
                'Le contenu de la page "À propos" a été mis à jour avec succès.',
                [{ text: 'OK', class: 'custom-modal-btn-primary', onclick: 'closeCustomModal()' }]
            );

            addLog('À propos mis à jour', 'content');
        }

        // Fermer les modals avec Escape
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                if (document.getElementById('collectionsModal').classList.contains('active')) {
                    closeCollectionsModal();
                }
                if (document.getElementById('aboutModal').classList.contains('active')) {
                    closeAboutModal();
                }
            }
        });

        // Fermer en cliquant à l'extérieur
        document.getElementById('collectionsModal').addEventListener('click', function(e) {
            if (e.target === this) closeCollectionsModal();
        });
        document.getElementById('aboutModal').addEventListener('click', function(e) {
            if (e.target === this) closeAboutModal();
        });
        document.getElementById('ordersModal').addEventListener('click', function(e) {
            if (e.target === this) closeOrdersModal();
        });
        document.getElementById('wishlistModal').addEventListener('click', function(e) {
            if (e.target === this) closeWishlistModal();
        });
    </script>
</body>

</html>